---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { PerformanceDashboard } from '../../../components/ai/PerformanceDashboard';
import { getCurrentUser, hasRole } from '../../../lib/auth';

// Require authentication and admin role
const user = await getCurrentUser(Astro.cookies);
if (!user || !await hasRole(Astro.cookies, 'admin')) {
  return Astro.redirect('/login?redirect=' + encodeURIComponent(Astro.url.pathname));
}
---

<BaseLayout title="AI Performance">
  <div class="container py-6">
    <div class="flex justify-between items-center mb-6">
      <div>
        <h1 class="text-3xl font-bold">AI Performance Dashboard</h1>
        <p class="text-muted-foreground">
          Monitor and analyze AI service performance metrics
        </p>
      </div>
    </div>
    
    <PerformanceDashboard client:load />
  </div>
</BaseLayout> 