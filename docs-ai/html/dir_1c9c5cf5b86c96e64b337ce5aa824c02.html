<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/@octokit/auth-app Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_1c9c5cf5b86c96e64b337ce5aa824c02.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">auth-app Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<blockquote class="doxtable">
<p>GitHub App authentication for JavaScript </p>
</blockquote>
<p><a href="https://www.npmjs.com/package/@octokit/auth-app"><img src="https://img.shields.io/npm/v/@octokit/auth-app.svg" alt="@latest" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/octokit/auth-app.js/actions?query=workflow%3ATest"><img src="https://github.com/octokit/auth-app.js/workflows/Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a></p>
<p><code>@octokit/auth-app</code> implements authentication for GitHub Apps using <a href="https://jwt.io/">JSON Web Token</a>, installation access tokens, and OAuth user-to-server access tokens.</p>
<ul>
<li>Standalone usage<ul>
<li>Authenticate as GitHub App (JSON Web Token)</li>
<li>Authenticate as OAuth App (client ID/client secret)</li>
<li>Authenticate as installation</li>
<li>Authenticate as user</li>
</ul>
</li>
<li>Usage with Octokit</li>
<li>`createAppAuth(options)` or `new Octokit({ auth })`</li>
<li>`auth(options)` or `octokit.auth(options)`<ul>
<li>JSON Web Token (JWT) Authentication</li>
<li>OAuth App authentication</li>
<li>Installation authentication</li>
<li>User authentication (web flow)</li>
<li>User authentication (device flow)</li>
</ul>
</li>
<li>Authentication object<ul>
<li>JSON Web Token (JWT) authentication</li>
<li>OAuth App authentication</li>
<li>Installation access token authentication</li>
<li>GitHub APP user authentication token with expiring disabled</li>
<li>GitHub APP user authentication token with expiring enabled</li>
</ul>
</li>
<li>`auth.hook(request, route, parameters)` or `auth.hook(request, options)`</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/@sinclair/typebox/readme.md#types">Types</a></li>
<li>Implementation details</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/bl/README.md#license">License</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md5116"></a>
Standalone usage</h1>
<table class="doxtable">
<tr>
<th>Browsers </th><td width="100%"><p class="starttd"></p>
<p class="intertd">⚠️ <code>@octokit/auth-app</code> is not meant for usage in the browser. A private key and client secret must not be exposed to users.</p>
<p class="intertd">The private keys provided by GitHub are in <code>PKCS#1</code> format, but the WebCrypto API only supports <code>PKCS#8</code>. You need to convert it first:</p>
<div class="fragment"><div class="line">openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in private-key.pem -out private-key-pkcs8.key</div>
</div><!-- fragment --><p class="intertd">The OAuth APIs to create user-to-server tokens cannot be used because they do not have CORS enabled.</p>
<p class="intertd">If you know what you are doing, load <code>@octokit/auth-app</code> directly from <a href="https://esm.sh">esm.sh</a></p>
<div class="fragment"><div class="line">&lt;script type=&quot;module&quot;&gt;</div>
<div class="line">  import { createAppAuth } from &quot;https://esm.sh/@octokit/auth-app&quot;;</div>
<div class="line">&lt;/script&gt;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th>Node </th><td><p class="starttd"></p>
<p class="intertd">Install with <code>npm install @octokit/auth-app</code></p>
<div class="fragment"><div class="line">import { createAppAuth } from &quot;@octokit/auth-app&quot;;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<dl class="section important"><dt>Important</dt><dd>As we use <a href="https://nodejs.org/api/packages.html#conditional-exports">conditional exports</a>, you will need to adapt your <code>tsconfig.json</code> by setting <code>"moduleResolution": "node16", "module": "node16"</code>. <br  />
<br  />
 See the TypeScript docs on <a href="https://www.typescriptlang.org/docs/handbook/modules/reference.html#packagejson-exports">package.json "exports"</a>.<br  />
 See this <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c">helpful guide on transitioning to ESM</a> from <a href="https://github.com/sindresorhus">@sindresorhus</a></dd></dl>
<h2><a class="anchor" id="autotoc_md5117"></a>
Authenticate as GitHub App (JSON Web Token)</h2>
<div class="fragment"><div class="line">const auth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef12341234567890abcdef1234&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Retrieve JSON Web Token (JWT) to authenticate as app</div>
<div class="line">const appAuthentication = await auth({ type: &quot;app&quot; });</div>
</div><!-- fragment --><p>resolves with</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;type&quot;: &quot;app&quot;,</div>
<div class="line">  &quot;token&quot;: &quot;jsonwebtoken123&quot;,</div>
<div class="line">  &quot;appId&quot;: 123,</div>
<div class="line">  &quot;expiresAt&quot;: &quot;2018-07-07T00:09:30.000Z&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5118"></a>
Authenticate as OAuth App (client ID/client secret)</h2>
<p>The <a href="https://docs.github.com/en/rest/reference/apps#oauth-applications-api">OAuth Application APIs</a> require the app to authenticate using clientID/client as Basic Authentication</p>
<div class="fragment"><div class="line">const auth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef12341234567890abcdef1234&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const appAuthentication = await auth({</div>
<div class="line">  type: &quot;oauth-app&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p>resolves with</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;type&quot;: &quot;oauth-app&quot;,</div>
<div class="line">  &quot;clientId&quot;: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  &quot;clientSecret&quot;: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">  &quot;headers&quot;: {</div>
<div class="line">    &quot;authorization&quot;: &quot;basic bHYxLjEyMzQ1Njc4OTBhYmNkZWY6MTIzNDU2Nzg5MGFiY2RlZjEyMzQ1Njc4OTBhYmNkZWYxMjM0NTY3OA==&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5119"></a>
Authenticate as installation</h2>
<div class="fragment"><div class="line">const auth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef12341234567890abcdef1234&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Retrieve installation access token</div>
<div class="line">const installationAuthentication = await auth({</div>
<div class="line">  type: &quot;installation&quot;,</div>
<div class="line">  installationId: 123,</div>
<div class="line">});</div>
</div><!-- fragment --><p>resolves with</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;type&quot;: &quot;token&quot;,</div>
<div class="line">  &quot;tokenType&quot;: &quot;installation&quot;,</div>
<div class="line">  &quot;token&quot;: &quot;token123&quot;,</div>
<div class="line">  &quot;installationId&quot;: 123,</div>
<div class="line">  &quot;createdAt&quot;: &quot;2018-07-07T00:00:00.000Z&quot;,</div>
<div class="line">  &quot;expiresAt&quot;: &quot;2018-07-07T00:59:00.000Z&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5120"></a>
Authenticate as user</h2>
<div class="fragment"><div class="line">const auth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef12341234567890abcdef1234&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Retrieve an oauth-access token</div>
<div class="line">const userAuthentication = await auth({ type: &quot;oauth-user&quot;, code: &quot;123456&quot; });</div>
</div><!-- fragment --><p>Resolves with</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;type&quot;: &quot;token&quot;,</div>
<div class="line">  &quot;tokenType&quot;: &quot;oauth&quot;,</div>
<div class="line">  &quot;token&quot;: &quot;token123&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5121"></a>
Usage with Octokit</h1>
<table class="doxtable">
<tr>
<th><p class="starttd"></p>
<p class="intertd">Browsers</p>
<p class="endtd"></p>
</th><td width="100%"><p class="starttd"></p>
<p class="intertd">⚠️ <code>@octokit/auth-app</code> is not meant for usage in the browser. A private key and client secret must not be exposed to users.</p>
<p class="intertd">The private keys provided by GitHub are in <code>PKCS#1</code> format, but the WebCrypto API only supports <code>PKCS#8</code>. You need to convert it first:</p>
<div class="fragment"><div class="line">openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in private-key.pem -out private-key-pkcs8.key</div>
</div><!-- fragment --><p class="intertd">The OAuth APIs to create user-to-server tokens cannot be used because they do not have CORS enabled.</p>
<p class="intertd">If you know what you are doing, load <code>@octokit/auth-app</code> and <code>@octokit/core</code> (or a compatible module) directly from <a href="https://esm.sh">esm.sh</a></p>
<div class="fragment"><div class="line">&lt;script type=&quot;module&quot;&gt;</div>
<div class="line">  import { createAppAuth } from &quot;https://esm.sh/@octokit/auth-app&quot;;</div>
<div class="line">  import { Octokit } from &quot;https://esm.sh/@octokit/core&quot;;</div>
<div class="line">&lt;/script&gt;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><p class="starttd"></p>
<p class="intertd">Node</p>
<p class="endtd"></p>
</th><td><p class="starttd"></p>
<p class="intertd">Install with <code>npm install @octokit/core @octokit/auth-app</code>. Optionally replace <code>@octokit/core</code> with a compatible module</p>
<div class="fragment"><div class="line">import { Octokit } from &quot;@octokit/core&quot;;</div>
<div class="line">import { createAppAuth, createOAuthUserAuth } from &quot;@octokit/auth-app&quot;;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<div class="fragment"><div class="line">const appOctokit = new Octokit({</div>
<div class="line">  authStrategy: createAppAuth,</div>
<div class="line">  auth: {</div>
<div class="line">    appId: 1,</div>
<div class="line">    privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">    clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">    clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Send requests as GitHub App</div>
<div class="line">const { slug } = await appOctokit.request(&quot;GET /app&quot;);</div>
<div class="line">console.log(&quot;authenticated as %s&quot;, slug);</div>
<div class="line"> </div>
<div class="line">// Send requests as OAuth App</div>
<div class="line">await appOctokit.request(&quot;POST /application/{client_id}/token&quot;, {</div>
<div class="line">  client_id: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  access_token: &quot;existingtoken123&quot;,</div>
<div class="line">});</div>
<div class="line">console.log(&quot;token is valid&quot;);</div>
<div class="line"> </div>
<div class="line">// create a new octokit instance that is authenticated as the user</div>
<div class="line">const userOctokit = await appOctokit.auth({</div>
<div class="line">  type: &quot;oauth-user&quot;,</div>
<div class="line">  code: &quot;code123&quot;,</div>
<div class="line">  factory: (options) =&gt; {</div>
<div class="line">    return new Octokit({</div>
<div class="line">      authStrategy: createOAuthUserAuth,</div>
<div class="line">      auth: options,</div>
<div class="line">    });</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Exchanges the code for the user access token authentication on first request</div>
<div class="line">// and caches the authentication for successive requests</div>
<div class="line">const {</div>
<div class="line">  data: { login },</div>
<div class="line">} = await userOctokit.request(&quot;GET /user&quot;);</div>
<div class="line">console.log(&quot;Hello, %s!&quot;, login);</div>
</div><!-- fragment --><p>In order to create an <code>octokit</code> instance that is authenticated as an installation, with automated installation token refresh, set <code>installationId</code> as <code>auth</code> option</p>
<div class="fragment"><div class="line">const installationOctokit = new Octokit({</div>
<div class="line">  authStrategy: createAppAuth,</div>
<div class="line">  auth: {</div>
<div class="line">    appId: 1,</div>
<div class="line">    privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">    installationId: 123,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// transparently creates an installation access token the first time it is needed</div>
<div class="line">// and refreshes it when it expires</div>
<div class="line">await installationOctokit.request(&quot;POST /repos/{owner}/{repo}/issues&quot;, {</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;title&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5122"></a>
<code>createAppAuth(options)</code> or <code>new Octokit({ auth })</code></h1>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>appId</code>  </th><th><code>number</code>  </th><td><b>Required</b>. Find <b>App ID</b> on the app’s about page in settings.   </td></tr>
<tr>
<th><code>privateKey</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Content of the <code>*.pem</code> file you downloaded from the app’s about page. You can generate a new private key if needed. If your private key contains escaped newlines (<code>\\n</code>), they will be automatically replaced with actual newlines.   </td></tr>
<tr>
<th><code>installationId</code>  </th><th><code>number</code>  </th><td>Default <code>installationId</code> to be used when calling <code>auth({ type: "installation" })</code>.   </td></tr>
<tr>
<th><code>clientId</code>  </th><th><code>string</code>  </th><td>The client ID of the GitHub App.   </td></tr>
<tr>
<th><code>clientSecret</code>  </th><th><code>string</code>  </th><td>A client secret for the GitHub App.   </td></tr>
<tr>
<th><code>request</code>  </th><th><code>function</code>  </th><td><p class="starttd"></p>
<p class="intertd">Automatically set to <code>octokit.request</code> when using with an <code>Octokit</code> constructor.</p>
<p class="intertd">For standalone usage, you can pass in your own <a href="https://github.com/octokit/request.js"><code>@octokit/request</code></a> instance. For usage with enterprise, set <code>baseUrl</code> to the hostname + <code>/api/v3</code>. Example:</p>
<div class="fragment"><div class="line">import { request } from &quot;@octokit/request&quot;;</div>
<div class="line">createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  request: request.defaults({</div>
<div class="line">    baseUrl: &quot;https://ghe.my-company.com/api/v3&quot;,</div>
<div class="line">  }),</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>cache</code>  </th><th><code>object</code>  </th><td><p class="starttd">Installation tokens expire after an hour. By default, <code>@octokit/auth-app</code> is caching up to 15000 tokens simultaneously using <a href="https://github.com/isaacs/node-lru-cache">lru-cache</a>. You can pass your own cache implementation by passing <code>options.cache.{get,set}</code> to the constructor. Example:</p>
<div class="fragment"><div class="line">const CACHE = {};</div>
<div class="line">createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  cache: {</div>
<div class="line">    async get(key) {</div>
<div class="line">      return CACHE[key];</div>
<div class="line">    },</div>
<div class="line">    async set(key, value) {</div>
<div class="line">      CACHE[key] = value;</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>log</code>  </th><th><code>object</code>  </th><td><p class="starttd">You can pass in your preferred logging tool by passing <code>option.log</code> to the constructor. If you would like to make the log level configurable using an environment variable or external option, we recommend the console-log-level package. For example:</p>
<div class="fragment"><div class="line">import consoleLogLevel from &quot;console-log-level&quot;;</div>
<div class="line">createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  log: consoleLogLevel({ level: &quot;info&quot; }),</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md5123"></a>
<code>auth(options)</code> or <code>octokit.auth(options)</code></h1>
<p>The async <code>auth()</code> method accepts different options depending on your use case</p>
<h2><a class="anchor" id="autotoc_md5124"></a>
JSON Web Token (JWT) Authentication</h2>
<p>Authenticate as the GitHub app to list installations, repositories, and create installation access tokens.</p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Must be either <code>"app"</code>.    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5125"></a>
OAuth App authentication</h2>
<p>Create, reset, refresh, delete OAuth user-to-server tokens</p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Must be either <code>"oauth-app"</code>.    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5126"></a>
Installation authentication</h2>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Must be <code>"installation"</code>.   </td></tr>
<tr>
<th><code>installationId</code>  </th><th><code>number</code>  </th><td><b>Required unless a default <code>installationId</code> was passed to <code>createAppAuth()</code></b>. ID of installation to retrieve authentication for.   </td></tr>
<tr>
<th><code>repositoryIds</code>  </th><th><code>array of numbers</code>  </th><td>The <code>id</code> of the repositories that the installation token can access. Also known as a <code>databaseID</code> when querying the repository object in GitHub's GraphQL API. This option is <b>(recommended)</b> over <code>repositoryNames</code> when needing to limit the scope of the access token, due to <code>repositoryNames</code> having the possibility of changing. Additionally, you should only include either <code>repositoryIds</code> or <code>repositoryNames</code>, but not both.   </td></tr>
<tr>
<th><code>repositoryNames</code>  </th><th><code>array of strings</code>  </th><td>The <code>name</code> of the repositories that the installation token can access. As mentioned in the <code>repositoryIds</code> description, you should only include either <code>repositoryIds</code> or <code>repositoryNames</code>, but not both.   </td></tr>
<tr>
<th><code>permissions</code>  </th><th><code>object</code>  </th><td>The permissions granted to the access token. The permissions object includes the permission names and their access type. For a complete list of permissions and allowable values, see <a href="https://docs.github.com/en/developers/apps/creating-a-github-app-using-url-parameters#github-app-permissions">GitHub App permissions</a>.   </td></tr>
<tr>
<th><code>factory</code>  </th><th><code>function</code>  </th><td><p class="starttd"></p>
<p class="intertd">The <code>auth({type: "installation", installationId, factory })</code> call with resolve with whatever the factory function returns. The <code>factory</code> function will be called with all the strategy option that <code>auth</code> was created with, plus the additional options passed to <code>auth</code>, besides <code>type</code> and <code>factory</code>.</p>
<p class="intertd">For example, you can create a new <code>auth</code> instance for an installation which shares the internal state (especially the access token cache) with the calling <code>auth</code> instance:</p>
<div class="fragment"><div class="line">const appAuth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const installationAuth123 = await appAuth({</div>
<div class="line">  type: &quot;installation&quot;,</div>
<div class="line">  installationId: 123,</div>
<div class="line">  factory: createAppAuth,</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>refresh</code>  </th><th><code>boolean</code>  </th><td><p class="starttd"></p>
<p class="intertd">Installation tokens expire after one hour. By default, tokens are cached and returned from cache until expired. To bypass and update a cached token for the given <code>installationId</code>, set <code>refresh</code> to <code>true</code>.</p>
<p class="intertd">Defaults to <code>false</code>.</p>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5127"></a>
User authentication (web flow)</h2>
<p>Exchange code received from the web flow redirect described in <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#web-application-flow">step 2 of GitHub's OAuth web flow</a></p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Must be <code>"oauth-user"</code>.   </td></tr>
<tr>
<th><code>factory</code>  </th><th><code>function</code>  </th><td><p class="starttd"></p>
<p class="intertd">The <code>auth({type: "oauth-user", factory })</code> call with resolve with whatever the factory function returns. The <code>factory</code> function will be called with all the strategy option that <code>auth</code> was created with, plus the additional options passed to <code>auth</code>, besides <code>type</code> and <code>factory</code>.</p>
<p class="intertd">For example, you can create a new <code>auth</code> instance for an installation which shares the internal state (especially the access token cache) with the calling <code>auth</code> instance:</p>
<div class="fragment"><div class="line">import { createAppAuth, createOAuthUserAuth } from &quot;@octokit/auth-oauth-app&quot;;</div>
<div class="line"> </div>
<div class="line">const appAuth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const userAuth = await appAuth({</div>
<div class="line">  type: &quot;oauth-user&quot;,</div>
<div class="line">  code,</div>
<div class="line">  factory: createOAuthUserAuth,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// will create token upon first call, then cache authentication for successive calls,</div>
<div class="line">// until token needs to be refreshed (if enabled for the GitHub App)</div>
<div class="line">const authentication = await userAuth();</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>code</code>  </th><th><code>string</code>  </th><td>The authorization <code>code</code> which was passed as query parameter to the callback URL from the <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#2-users-are-redirected-back-to-your-site-by-github">OAuth web application flow</a>.   </td></tr>
<tr>
<th><code>redirectUrl</code>  </th><th><code>string</code>  </th><td>The URL in your application where users are sent after authorization. See <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#redirect-urls">redirect urls</a>.   </td></tr>
<tr>
<th><code>state</code>  </th><th><code>string</code>  </th><td>The unguessable random string you provided in Step 1 of the <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#2-users-are-redirected-back-to-your-site-by-github">OAuth web application flow</a>.    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5128"></a>
User authentication (device flow)</h2>
<p>Create a token using <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#device-flow">GitHub's device flow</a>.</p>
<p>The device flow does not require a client secret, but it is required as strategy option for <code>@octokit/auth-app</code>, even for the device flow. If you want to implement the device flow without requiring a client secret, use <a href="https://github.com/octokit/auth-oauth-device.js#readme"><code>@octokit/auth-oauth-device</code></a>.</p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Must be <code>"oauth-user"</code>.   </td></tr>
<tr>
<th><code>onVerification</code>  </th><th><code>function</code>  </th><td><p class="starttd"></p>
<p class="intertd"><b>Required</b>. A function that is called once the device and user codes were retrieved.</p>
<p class="intertd">The <code>onVerification()</code> callback can be used to pause until the user completes step 2, which might result in a better user experience.</p>
<div class="fragment"><div class="line">const auth = auth({</div>
<div class="line">  type: &quot;oauth-user&quot;,</div>
<div class="line">  onVerification(verification) {</div>
<div class="line">    console.log(&quot;Open %s&quot;, verification.verification_uri);</div>
<div class="line">    console.log(&quot;Enter code: %s&quot;, verification.user_code);</div>
<div class="line">    await prompt(&quot;press enter when you are ready to continue&quot;);</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>factory</code>  </th><th><code>function</code>  </th><td><p class="starttd"></p>
<p class="intertd">The <code>auth({type: "oauth-user", factory })</code> call with resolve with whatever the factory function returns. The <code>factory</code> function will be called with all the strategy option that <code>auth</code> was created with, plus the additional options passed to <code>auth</code>, besides <code>type</code> and <code>factory</code>.</p>
<p class="intertd">For example, you can create a new <code>auth</code> instance for an installation which shares the internal state (especially the access token cache) with the calling <code>auth</code> instance:</p>
<div class="fragment"><div class="line">import { createAppAuth, createOAuthUserAuth } from &quot;@octokit/auth-oauth-app&quot;;</div>
<div class="line"> </div>
<div class="line">const appAuth = createAppAuth({</div>
<div class="line">  appId: 1,</div>
<div class="line">  privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const userAuth = await appAuth({</div>
<div class="line">  type: &quot;oauth-user&quot;,</div>
<div class="line">  code,</div>
<div class="line">  factory: createOAuthUserAuth,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// will create token upon first call, then cache authentication for successive calls,</div>
<div class="line">// until token needs to be refreshed (if enabled for the GitHub App)</div>
<div class="line">const authentication = await userAuth();</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md5129"></a>
Authentication object</h1>
<p>Depending on on the <code>auth()</code> call, the resulting authentication object can be one of</p>
<ol type="1">
<li>JSON Web Token (JWT) authentication</li>
</ol>
<ol type="1">
<li>OAuth App authentication</li>
</ol>
<ol type="1">
<li>Installation access token authentication</li>
</ol>
<ol type="1">
<li>GitHub APP user authentication token with expiring disabled</li>
</ol>
<ol type="1">
<li>GitHub APP user authentication token with expiring enabled</li>
</ol>
<h2><a class="anchor" id="autotoc_md5130"></a>
JSON Web Token (JWT) authentication</h2>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><code>"app"</code>   </td></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td>The JSON Web Token (JWT) to authenticate as the app.   </td></tr>
<tr>
<th><code>appId</code>  </th><th><code>number</code>  </th><td>GitHub App database ID.   </td></tr>
<tr>
<th><code>expiresAt</code>  </th><th><code>string</code>  </th><td>Timestamp in UTC format, e.g. <code>"2018-07-07T00:09:30.000Z"</code>. A Date object can be created using <code>new Date(authentication.expiresAt)</code>.    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5131"></a>
OAuth App authentication</h2>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><code>"oauth-app"</code>   </td></tr>
<tr>
<th><code>clientType</code>  </th><th><code>string</code>  </th><td><code>"github-app"</code>   </td></tr>
<tr>
<th><code>clientId</code>  </th><th><code>string</code>  </th><td>The client ID as passed to the constructor.   </td></tr>
<tr>
<th><code>clientSecret</code>  </th><th><code>string</code>  </th><td>The client secret as passed to the constructor.   </td></tr>
<tr>
<th><code>headers</code>  </th><th><code>object</code>  </th><td><code>{ authorization }</code>.    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5132"></a>
Installation access token authentication</h2>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><code>"token"</code>   </td></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td>The installation access token.   </td></tr>
<tr>
<th><code>tokenType</code>  </th><th><code>string</code>  </th><td><code>"installation"</code>   </td></tr>
<tr>
<th><code>installationId</code>  </th><th><code>number</code>  </th><td>Installation database ID.   </td></tr>
<tr>
<th><code>createdAt</code>  </th><th><code>string</code>  </th><td>Timestamp in UTC format, e.g. <code>"2018-07-07T00:00:00.000Z"</code>. A Date object can be created using <code>new Date(authentication.expiresAt)</code>.   </td></tr>
<tr>
<th><code>expiresAt</code>  </th><th><code>string</code>  </th><td>Timestamp in UTC format, e.g. <code>"2018-07-07T00:59:00.000Z"</code>. A Date object can be created using <code>new Date(authentication.expiresAt)</code>.   </td></tr>
<tr>
<th><code>repositoryIds</code>  </th><th><code>array of numbers</code>  </th><td>Only present if <code>repositoryIds</code> option passed to <code>auth(options)</code>.   </td></tr>
<tr>
<th><code>repositoryNames</code>  </th><th><code>array of strings</code>  </th><td>Only present if <code>repositoryNames</code> option passed to <code>auth(options)</code>.   </td></tr>
<tr>
<th><code>permissions</code>  </th><th><code>object</code>  </th><td>An object where keys are the permission name and the value is either <code>"read"</code> or <code>"write"</code>. See the list of all <a href="https://docs.github.com/en/rest/reference/permissions-required-for-github-apps">GitHub App Permissions</a>.   </td></tr>
<tr>
<th><code>singleFileName</code>  </th><th><code>string</code>  </th><td>If the single file permission is enabled, the <code>singleFileName</code> property is set to the path of the accessible file.    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5133"></a>
GitHub APP user authentication token with expiring disabled</h2>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><code>"token"</code>   </td></tr>
<tr>
<th><code>tokenType</code>  </th><th><code>string</code>  </th><td><code>"oauth"</code>   </td></tr>
<tr>
<th><code>clientType</code>  </th><th><code>string</code>  </th><td><code>"github-app"</code>   </td></tr>
<tr>
<th><code>clientId</code>  </th><th><code>string</code>  </th><td>The app's <code>Client ID</code>   </td></tr>
<tr>
<th><code>clientSecret</code>  </th><th><code>string</code>  </th><td>One of the app's client secrets   </td></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td>The user access token    </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5134"></a>
GitHub APP user authentication token with expiring enabled</h2>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>type</code>  </th><th><code>string</code>  </th><td><code>"token"</code>   </td></tr>
<tr>
<th><code>tokenType</code>  </th><th><code>string</code>  </th><td><code>"oauth"</code>   </td></tr>
<tr>
<th><code>clientType</code>  </th><th><code>string</code>  </th><td><code>"github-app"</code>   </td></tr>
<tr>
<th><code>clientId</code>  </th><th><code>string</code>  </th><td>The app's <code>Client ID</code>   </td></tr>
<tr>
<th><code>clientSecret</code>  </th><th><code>string</code>  </th><td>One of the app's client secrets   </td></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td>The user access token   </td></tr>
<tr>
<th><code>refreshToken</code>  </th><th><code>string</code>  </th><td>The refresh token   </td></tr>
<tr>
<th><code>expiresAt</code>  </th><th><code>string</code>  </th><td>Date timestamp in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString">ISO 8601</a> standard. Example: <code>2022-01-01T08:00:0.000Z</code>   </td></tr>
<tr>
<th><code>refreshTokenExpiresAt</code>  </th><th><code>string</code>  </th><td>Date timestamp in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString">ISO 8601</a> standard. Example: <code>2021-07-01T00:00:0.000Z</code>    </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md5135"></a>
<code>auth.hook(request, route, parameters)</code> or <code>auth.hook(request, options)</code></h1>
<p><code>auth.hook()</code> hooks directly into the request life cycle. It amends the request to authenticate either as app or as installation based on the request URL. Although the <code>"machine-man"</code> preview has graduated to the official API, <a href="https://developer.github.com/changes/2020-08-20-graduate-machine-man-and-sailor-v-previews/">https://developer.github.com/changes/2020-08-20-graduate-machine-man-and-sailor-v-previews/</a>, it is still required in versions of GitHub Enterprise up to 2.21 so it automatically sets the <code>"machine-man"</code> preview for all endpoints requiring JWT authentication.</p>
<p>The <code>request</code> option is an instance of <a href="https://github.com/octokit/request.js#readme"><code>@octokit/request</code></a>. The arguments are the same as for the <a href="https://github.com/octokit/request.js#request"><code>request()</code> method</a>.</p>
<p><code>auth.hook()</code> can be called directly to send an authenticated request</p>
<div class="fragment"><div class="line">const { data: installations } = await auth.hook(</div>
<div class="line">  request,</div>
<div class="line">  &quot;GET /app/installations&quot;,</div>
<div class="line">);</div>
</div><!-- fragment --><p>Or it can be passed as option to <a href="https://github.com/octokit/request.js#request"><code>request()</code></a>.</p>
<div class="fragment"><div class="line">const requestWithAuth = request.defaults({</div>
<div class="line">  request: {</div>
<div class="line">    hook: auth.hook,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const { data: installations } = await requestWithAuth(&quot;GET /app/installations&quot;);</div>
</div><!-- fragment --><p>Note that <code>auth.hook()</code> does not create and set an OAuth authentication token. But you can use <a href="https://github.com/octokit/auth-oauth-app.js#readme"><code>@octokit/auth-oauth-app</code></a> for that functionality. And if you don't plan on sending requests to routes that require authentication with <code>client_id</code> and <code>client_secret</code>, you can just retrieve the token and then create a new instance of <a href="https://github.com/octokit/request.js#request"><code>request()</code></a> with the authentication header set:</p>
<div class="fragment"><div class="line">const { token } = await auth({</div>
<div class="line">  type: &quot;oauth-user&quot;,</div>
<div class="line">  code: &quot;123456&quot;,</div>
<div class="line">});</div>
<div class="line">const requestWithAuth = request.defaults({</div>
<div class="line">  headers: {</div>
<div class="line">    authentication: `token ${token}`,</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5136"></a>
Types</h1>
<div class="fragment"><div class="line">import {</div>
<div class="line">  // strategy options</div>
<div class="line">  StrategyOptions,</div>
<div class="line">  // auth options</div>
<div class="line">  AuthOptions,</div>
<div class="line">  AppAuthOptions,</div>
<div class="line">  OAuthAppAuthOptions,</div>
<div class="line">  InstallationAuthOptions,</div>
<div class="line">  OAuthWebFlowAuthOptions,</div>
<div class="line">  OAuthDeviceFlowAuthOptions,</div>
<div class="line">  // authentication objects</div>
<div class="line">  Authentication,</div>
<div class="line">  AppAuthentication,</div>
<div class="line">  OAuthAppAuthentication,</div>
<div class="line">  InstallationAccessTokenAuthentication,</div>
<div class="line">  GitHubAppUserAuthentication,</div>
<div class="line">  GitHubAppUserAuthenticationWithExpiration,</div>
<div class="line">} from &quot;@octokit/auth-app&quot;;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5137"></a>
Implementation details</h1>
<p>When creating a JSON Web Token, it sets the "issued at time" (iat) to 30s in the past as we have seen people running situations where the GitHub API claimed the iat would be in future. It turned out the clocks on the different machine were not in sync.</p>
<p>Installation access tokens are valid for 60 minutes. This library invalidates them after 59 minutes to account for request delays.</p>
<p>All OAuth features are implemented internally using <a href="https://github.com/octokit/auth-oauth-app.js/#readme">@octokit/auth-oauth-app</a>.</p>
<h1><a class="anchor" id="autotoc_md5138"></a>
License</h1>
<p>[MIT](LICENSE) </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_e733d42223b3eabc0ae30c8e1a011656.html">@octokit</a></li><li class="navelem"><a class="el" href="dir_1c9c5cf5b86c96e64b337ce5aa824c02.html">auth-app</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
