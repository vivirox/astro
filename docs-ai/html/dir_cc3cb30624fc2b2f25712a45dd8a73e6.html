<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/@octokit/graphql Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_cc3cb30624fc2b2f25712a45dd8a73e6.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">graphql Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<blockquote class="doxtable">
<p>GitHub GraphQL API client for browsers and Node </p>
</blockquote>
<p><a href="https://www.npmjs.com/package/@octokit/graphql"><img src="https://img.shields.io/npm/v/@octokit/graphql.svg" alt="@latest" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/octokit/graphql.js/actions?query=workflow%3ATest+branch%3Amain"><img src="https://github.com/octokit/graphql.js/workflows/Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a></p>
<ul>
<li><a class="el" href="/Users/vivi/astro/node_modules/@sinclair/typebox/readme.md#usage">Usage</a><ul>
<li>Send a simple query</li>
<li>Authentication</li>
<li>Variables</li>
<li>Pass query together with headers and variables</li>
<li>Use with GitHub Enterprise</li>
<li>Use custom `@octokit/request` instance</li>
</ul>
</li>
<li>TypeScript<ul>
<li>Additional Types</li>
</ul>
</li>
<li>Errors</li>
<li>Partial responses</li>
<li>Writing tests</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/bl/README.md#license">License</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md5238"></a>
Usage</h1>
<table class="doxtable">
<tr>
<th>Browsers </th><td width="100%"><p class="starttd"></p>
<p class="intertd">Load <code>@octokit/graphql</code> directly from <a href="https://esm.sh">esm.sh</a></p>
<div class="fragment"><div class="line">&lt;script type=&quot;module&quot;&gt;</div>
<div class="line">  import { graphql } from &quot;https://esm.sh/@octokit/graphql&quot;;</div>
<div class="line">&lt;/script&gt;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th>Node </th><td><p class="starttd"></p>
<p class="intertd">Install with <code>npm install @octokit/graphql</code></p>
<div class="fragment"><div class="line">import { graphql } from &quot;@octokit/graphql&quot;;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5239"></a>
Send a simple query</h2>
<div class="fragment"><div class="line">const { repository } = await graphql(</div>
<div class="line">  `</div>
<div class="line">    {</div>
<div class="line">      repository(owner: &quot;octokit&quot;, name: &quot;graphql.js&quot;) {</div>
<div class="line">        issues(last: 3) {</div>
<div class="line">          edges {</div>
<div class="line">            node {</div>
<div class="line">              title</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  `,</div>
<div class="line">  {</div>
<div class="line">    headers: {</div>
<div class="line">      authorization: `token secret123`,</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5240"></a>
Authentication</h2>
<p>The simplest way to authenticate a request is to set the <code>Authorization</code> header, e.g. to a <a href="https://github.com/settings/tokens/">personal access token</a>.</p>
<div class="fragment"><div class="line">const graphqlWithAuth = graphql.defaults({</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: `token secret123`,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line">const { repository } = await graphqlWithAuth(`</div>
<div class="line">  {</div>
<div class="line">    repository(owner: &quot;octokit&quot;, name: &quot;graphql.js&quot;) {</div>
<div class="line">      issues(last: 3) {</div>
<div class="line">        edges {</div>
<div class="line">          node {</div>
<div class="line">            title</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">`);</div>
</div><!-- fragment --><p>For more complex authentication strategies such as GitHub Apps or Basic, we recommend the according authentication library exported by <a href="https://github.com/octokit/auth.js"><code>@octokit/auth</code></a>.</p>
<div class="fragment"><div class="line">const { createAppAuth } = await import(&quot;@octokit/auth-app&quot;);</div>
<div class="line">const auth = createAppAuth({</div>
<div class="line">  appId: process.env.APP_ID,</div>
<div class="line">  privateKey: process.env.PRIVATE_KEY,</div>
<div class="line">  installationId: 123,</div>
<div class="line">});</div>
<div class="line">const graphqlWithAuth = graphql.defaults({</div>
<div class="line">  request: {</div>
<div class="line">    hook: auth.hook,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const { repository } = await graphqlWithAuth(</div>
<div class="line">  `{</div>
<div class="line">    repository(owner: &quot;octokit&quot;, name: &quot;graphql.js&quot;) {</div>
<div class="line">      issues(last: 3) {</div>
<div class="line">        edges {</div>
<div class="line">          node {</div>
<div class="line">            title</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }`,</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5241"></a>
Variables</h2>
<p>⚠️ Do not use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a> in the query strings as they make your code vulnerable to query injection attacks (see <a href="https://github.com/octokit/graphql.js/issues/2">#2</a>). Use variables instead:</p>
<div class="fragment"><div class="line">const { repository } = await graphql(</div>
<div class="line">  `</div>
<div class="line">    query lastIssues($owner: String!, $repo: String!, $num: Int = 3) {</div>
<div class="line">      repository(owner: $owner, name: $repo) {</div>
<div class="line">        issues(last: $num) {</div>
<div class="line">          edges {</div>
<div class="line">            node {</div>
<div class="line">              title</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  `,</div>
<div class="line">  {</div>
<div class="line">    owner: &quot;octokit&quot;,</div>
<div class="line">    repo: &quot;graphql.js&quot;,</div>
<div class="line">    headers: {</div>
<div class="line">      authorization: `token secret123`,</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5242"></a>
Pass query together with headers and variables</h2>
<div class="fragment"><div class="line">import { graphql } from(&quot;@octokit/graphql&quot;);</div>
<div class="line">const { repository } = await graphql({</div>
<div class="line">  query: `query lastIssues($owner: String!, $repo: String!, $num: Int = 3) {</div>
<div class="line">    repository(owner: $owner, name: $repo) {</div>
<div class="line">      issues(last: $num) {</div>
<div class="line">        edges {</div>
<div class="line">          node {</div>
<div class="line">            title</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }`,</div>
<div class="line">  owner: &quot;octokit&quot;,</div>
<div class="line">  repo: &quot;graphql.js&quot;,</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: `token secret123`,</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5243"></a>
Use with GitHub Enterprise</h2>
<div class="fragment"><div class="line">import { graphql } from &quot;@octokit/graphql&quot;;</div>
<div class="line">graphql = graphql.defaults({</div>
<div class="line">  baseUrl: &quot;https://github-enterprise.acme-inc.com/api&quot;,</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: `token secret123`,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line">const { repository } = await graphql(`</div>
<div class="line">  {</div>
<div class="line">    repository(owner: &quot;acme-project&quot;, name: &quot;acme-repo&quot;) {</div>
<div class="line">      issues(last: 3) {</div>
<div class="line">        edges {</div>
<div class="line">          node {</div>
<div class="line">            title</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">`);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5244"></a>
Use custom <code>@octokit/request</code> instance</h2>
<div class="fragment"><div class="line">import { request } from &quot;@octokit/request&quot;;</div>
<div class="line">import { withCustomRequest } from &quot;@octokit/graphql&quot;;</div>
<div class="line"> </div>
<div class="line">let requestCounter = 0;</div>
<div class="line">const myRequest = request.defaults({</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: &quot;bearer secret123&quot;,</div>
<div class="line">  },</div>
<div class="line">  request: {</div>
<div class="line">    hook(request, options) {</div>
<div class="line">      requestCounter++;</div>
<div class="line">      return request(options);</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line">const myGraphql = withCustomRequest(myRequest);</div>
<div class="line">await request(&quot;/&quot;);</div>
<div class="line">await myGraphql(`</div>
<div class="line">  {</div>
<div class="line">    repository(owner: &quot;acme-project&quot;, name: &quot;acme-repo&quot;) {</div>
<div class="line">      issues(last: 3) {</div>
<div class="line">        edges {</div>
<div class="line">          node {</div>
<div class="line">            title</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">`);</div>
<div class="line">// requestCounter is now 2</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5245"></a>
TypeScript</h1>
<p><code>@octokit/graphql</code> is exposing proper types for its usage with TypeScript projects.</p>
<h2><a class="anchor" id="autotoc_md5246"></a>
Additional Types</h2>
<p>Additionally, <code>GraphQlQueryResponseData</code> has been exposed to users:</p>
<div class="fragment"><div class="line">import type { GraphQlQueryResponseData } from &quot;@octokit/graphql&quot;;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5247"></a>
Errors</h1>
<p>In case of a GraphQL error, <code>error.message</code> is set to a combined message describing all errors returned by the endpoint. All errors can be accessed at <code>error.errors</code>. <code>error.request</code> has the request options such as query, variables and headers set for easier debugging.</p>
<div class="fragment"><div class="line">import { graphql, GraphqlResponseError } from &quot;@octokit/graphql&quot;;</div>
<div class="line">graphql = graphql.defaults({</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: `token secret123`,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line">const query = `{</div>
<div class="line">  viewer {</div>
<div class="line">    bioHtml</div>
<div class="line">  }</div>
<div class="line">}`;</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  const result = await graphql(query);</div>
<div class="line">} catch (error) {</div>
<div class="line">  if (error instanceof GraphqlResponseError) {</div>
<div class="line">    // do something with the error, allowing you to detect a graphql response error,</div>
<div class="line">    // compared to accidentally catching unrelated errors.</div>
<div class="line"> </div>
<div class="line">    // server responds with an object like the following (as an example)</div>
<div class="line">    // class GraphqlResponseError {</div>
<div class="line">    //  &quot;headers&quot;: {</div>
<div class="line">    //    &quot;status&quot;: &quot;403&quot;,</div>
<div class="line">    //  },</div>
<div class="line">    //  &quot;data&quot;: null,</div>
<div class="line">    //  &quot;errors&quot;: [{</div>
<div class="line">    //   &quot;message&quot;: &quot;Field &#39;bioHtml&#39; doesn&#39;t exist on type &#39;User&#39;&quot;,</div>
<div class="line">    //   &quot;locations&quot;: [{</div>
<div class="line">    //    &quot;line&quot;: 3,</div>
<div class="line">    //    &quot;column&quot;: 5</div>
<div class="line">    //   }]</div>
<div class="line">    //  }]</div>
<div class="line">    // }</div>
<div class="line"> </div>
<div class="line">    console.log(&quot;Request failed:&quot;, error.request); // { query, variables: {}, headers: { authorization: &#39;token secret123&#39; } }</div>
<div class="line">    console.log(error.message); // Field &#39;bioHtml&#39; doesn&#39;t exist on type &#39;User&#39;</div>
<div class="line">  } else {</div>
<div class="line">    // handle non-GraphQL error</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5248"></a>
Partial responses</h1>
<p>A GraphQL query may respond with partial data accompanied by errors. In this case we will throw an error but the partial data will still be accessible through <code>error.data</code></p>
<div class="fragment"><div class="line">import { graphql } from &quot;@octokit/graphql&quot;;</div>
<div class="line">graphql = graphql.defaults({</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: `token secret123`,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line">const query = `{</div>
<div class="line">  repository(name: &quot;probot&quot;, owner: &quot;probot&quot;) {</div>
<div class="line">    name</div>
<div class="line">    ref(qualifiedName: &quot;master&quot;) {</div>
<div class="line">      target {</div>
<div class="line">        ... on Commit {</div>
<div class="line">          history(first: 25, after: &quot;invalid cursor&quot;) {</div>
<div class="line">            nodes {</div>
<div class="line">              message</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}`;</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  const result = await graphql(query);</div>
<div class="line">} catch (error) {</div>
<div class="line">  // server responds with</div>
<div class="line">  // {</div>
<div class="line">  //   &quot;data&quot;: {</div>
<div class="line">  //     &quot;repository&quot;: {</div>
<div class="line">  //       &quot;name&quot;: &quot;probot&quot;,</div>
<div class="line">  //       &quot;ref&quot;: null</div>
<div class="line">  //     }</div>
<div class="line">  //   },</div>
<div class="line">  //   &quot;errors&quot;: [</div>
<div class="line">  //     {</div>
<div class="line">  //       &quot;type&quot;: &quot;INVALID_CURSOR_ARGUMENTS&quot;,</div>
<div class="line">  //       &quot;path&quot;: [</div>
<div class="line">  //         &quot;repository&quot;,</div>
<div class="line">  //         &quot;ref&quot;,</div>
<div class="line">  //         &quot;target&quot;,</div>
<div class="line">  //         &quot;history&quot;</div>
<div class="line">  //       ],</div>
<div class="line">  //       &quot;locations&quot;: [</div>
<div class="line">  //         {</div>
<div class="line">  //           &quot;line&quot;: 7,</div>
<div class="line">  //           &quot;column&quot;: 11</div>
<div class="line">  //         }</div>
<div class="line">  //       ],</div>
<div class="line">  //       &quot;message&quot;: &quot;`invalid cursor` does not appear to be a valid cursor.&quot;</div>
<div class="line">  //     }</div>
<div class="line">  //   ]</div>
<div class="line">  // }</div>
<div class="line"> </div>
<div class="line">  console.log(&quot;Request failed:&quot;, error.request); // { query, variables: {}, headers: { authorization: &#39;token secret123&#39; } }</div>
<div class="line">  console.log(error.message); // `invalid cursor` does not appear to be a valid cursor.</div>
<div class="line">  console.log(error.data); // { repository: { name: &#39;probot&#39;, ref: null } }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5249"></a>
Writing tests</h1>
<p>You can pass a replacement for <a href="https://github.com/bitinn/node-fetch">the built-in fetch implementation</a> as <code>request.fetch</code> option. For example, using <a href="http://www.wheresrhys.co.uk/fetch-mock/">fetch-mock</a> works great to write tests</p>
<div class="fragment"><div class="line">import assert from &quot;assert&quot;;</div>
<div class="line">import fetchMock from &quot;fetch-mock&quot;;</div>
<div class="line"> </div>
<div class="line">import { graphql } from &quot;@octokit/graphql&quot;;</div>
<div class="line"> </div>
<div class="line">graphql(&quot;{ viewer { login } }&quot;, {</div>
<div class="line">  headers: {</div>
<div class="line">    authorization: &quot;token secret123&quot;,</div>
<div class="line">  },</div>
<div class="line">  request: {</div>
<div class="line">    fetch: fetchMock</div>
<div class="line">      .sandbox()</div>
<div class="line">      .post(&quot;https://api.github.com/graphql&quot;, (url, options) =&gt; {</div>
<div class="line">        assert.strictEqual(options.headers.authorization, &quot;token secret123&quot;);</div>
<div class="line">        assert.strictEqual(</div>
<div class="line">          options.body,</div>
<div class="line">          &#39;{&quot;query&quot;:&quot;{ viewer { login } }&quot;}&#39;,</div>
<div class="line">          &quot;Sends correct query&quot;,</div>
<div class="line">        );</div>
<div class="line">        return { data: {} };</div>
<div class="line">      }),</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5250"></a>
License</h1>
<p>[MIT](LICENSE) </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_e733d42223b3eabc0ae30c8e1a011656.html">@octokit</a></li><li class="navelem"><a class="el" href="dir_cc3cb30624fc2b2f25712a45dd8a73e6.html">graphql</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
