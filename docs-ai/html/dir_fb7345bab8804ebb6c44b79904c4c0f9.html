<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/octokit Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_fb7345bab8804ebb6c44b79904c4c0f9.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">octokit Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<blockquote class="doxtable">
<p>The all-batteries-included GitHub SDK for Browsers, Node.js, and Deno. </p>
</blockquote>
<p>The <code>octokit</code> package integrates the three main Octokit libraries</p>
<ol type="1">
<li><b>API client</b> (REST API requests, GraphQL API queries, Authentication)</li>
<li><b>App client</b> (GitHub App &amp; installations, Webhooks, OAuth)</li>
<li><b>Action client</b> (Pre-authenticated API client for single repository)</li>
</ol>
<h1><a class="anchor" id="autotoc_md25044"></a>
Table of contents </h1>
<ul>
<li>octokit.js<ul>
<li><a class="el" href="md_node__modules_2chai_2_c_o_n_t_r_i_b_u_t_i_n_g.html#features">Features</a></li>
<li><a class="el" href="/Users/vivi/astro/node_modules/@sinclair/typebox/readme.md#usage">Usage</a></li>
<li>`Octokit` API Client<ul>
<li>Constructor options</li>
<li>Authentication</li>
<li>Proxy Servers (Node.js only)<ul>
<li>Fetch missing</li>
</ul>
</li>
<li>REST API<ul>
<li>`octokit.rest` endpoint methods</li>
<li>`octokit.request()`</li>
<li>Pagination</li>
<li>Media Type formats</li>
<li>Request error handling</li>
</ul>
</li>
<li>GraphQL API queries<ul>
<li>Pagination</li>
<li>Schema previews</li>
</ul>
</li>
</ul>
</li>
<li>App client<ul>
<li>GitHub App</li>
<li>Webhooks</li>
<li>OAuth</li>
<li>App Server</li>
<li>OAuth for browser apps</li>
</ul>
</li>
<li>Action client</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/bl/README.md#license">LICENSE</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md25045"></a>
Features</h1>
<ul>
<li><b>Complete</b>. All features of GitHub's platform APIs are covered.</li>
<li><b>Prescriptive</b>. All recommended best practices are implemented.</li>
<li><b>Universal</b>. Works in all modern browsers, <a href="https://nodejs.org/">Node.js</a>, and <a href="https://deno.land/">Deno</a>.</li>
<li><b>Tested</b>. All libraries have a 100% test coverage.</li>
<li><b>Typed</b>. All libraries have extensive TypeScript declarations.</li>
<li><b>Decomposable</b>. Use only the code you need. You can build your own Octokit in only a few lines of code or use the underlying static methods. Make your own tradeoff between functionality and bundle size.</li>
<li><b>Extendable</b>. A feature missing? Add functionalities with plugins, hook into the request or webhook lifecycle or implement your own authentication strategy.</li>
</ul>
<h1><a class="anchor" id="autotoc_md25046"></a>
Usage</h1>
<table class="doxtable">
<tr>
<th>Browsers </th><td width="100%"><p class="starttd">Load <code>octokit</code> directly from <a href="https://esm.sh">esm.sh</a></p>
<div class="fragment"><div class="line">&lt;script type=&quot;module&quot;&gt;</div>
<div class="line">import { Octokit, App } from &quot;https://esm.sh/octokit&quot;;</div>
<div class="line">&lt;/script&gt;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th>Deno </th><td width="100%"><p class="starttd">Load <code>octokit</code> directly from <a href="https://esm.sh">esm.sh</a></p>
<div class="fragment"><div class="line">import { Octokit, App } from &quot;https://esm.sh/octokit?dts&quot;;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th>Node </th><td><p class="starttd"></p>
<p class="intertd">Install with <code>npm/pnpm install octokit</code>, or <code>yarn add octokit</code></p>
<div class="fragment"><div class="line">import { Octokit, App } from &quot;octokit&quot;;</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<dl class="section important"><dt>Important</dt><dd>As we use <a href="https://nodejs.org/api/packages.html#conditional-exports">conditional exports</a>, you will need to adapt your <code>tsconfig.json</code> by setting <code>"moduleResolution": "node16", "module": "node16"</code>. <br  />
<br  />
 See the TypeScript docs on <a href="https://www.typescriptlang.org/docs/handbook/modules/reference.html#packagejson-exports">package.json "exports"</a>.<br  />
 See this <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c">helpful guide on transitioning to ESM</a> from <a href="https://github.com/sindresorhus">@sindresorhus</a></dd></dl>
<h1><a class="anchor" id="autotoc_md25047"></a>
<code>Octokit</code> API Client</h1>
<p><b>standalone minimal Octokit</b>: <a href="https://github.com/octokit/core.js/#readme"><code>@octokit/core</code></a>.</p>
<p>The <code>Octokit</code> client can be used to send requests to <a href="https://docs.github.com/rest/">GitHub's REST API</a> and queries to <a href="https://docs.github.com/graphql">GitHub's GraphQL API</a>.</p>
<p><b>Example</b>: Get the username for the authenticated user.</p>
<div class="fragment"><div class="line">// Create a personal access token at https://github.com/settings/tokens/new?scopes=repo</div>
<div class="line">const octokit = new Octokit({ auth: `personal-access-token123` });</div>
<div class="line"> </div>
<div class="line">// Compare: https://docs.github.com/en/rest/reference/users#get-the-authenticated-user</div>
<div class="line">const {</div>
<div class="line">  data: { login },</div>
<div class="line">} = await octokit.rest.users.getAuthenticated();</div>
<div class="line">console.log(&quot;Hello, %s&quot;, login);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25048"></a>
Constructor options</h2>
<p>The most commonly used options are</p>
<table class="doxtable">
<tr>
<th>name  </th><th>type  </th><th width="100%">description     </th></tr>
<tr>
<th><code>userAgent</code>  </th><td><code>String</code>  </td><td><p class="starttd"></p>
<p class="intertd">Setting a user agent is required for all requests sent to GitHub's Platform APIs. The user agent defaults to something like this: <code>octokit.js/v1.2.3 Node.js/v8.9.4 (macOS High Sierra; x64)</code>. It is recommend to set your own user agent, which will prepend the default one.</p>
<div class="fragment"><div class="line">const octokit = new Octokit({</div>
<div class="line">  userAgent: &quot;my-app/v1.2.3&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>authStrategy</code>  </th><td><code>Function</code>  </td><td><p class="starttd"></p>
<p class="intertd">Defaults to <a href="https://github.com/octokit/auth-token.js#readme"><code>@octokit/auth-token</code></a>.</p>
<p class="intertd">See Authentication below.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>auth</code>  </th><td><code>String</code> or <code>Object</code>  </td><td><p class="starttd"></p>
<p class="intertd">Set to a <a href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">personal access token</a> unless you changed the <code>authStrategy</code> option.</p>
<p class="intertd">See Authentication below.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>baseUrl</code>  </th><td><code>String</code>  </td><td><p class="starttd"></p>
<p class="intertd">When using with GitHub Enterprise Server, set <code>options.baseUrl</code> to the root URL of the API. For example, if your GitHub Enterprise Server's hostname is <code>github.acme-inc.com</code>, then set <code>options.baseUrl</code> to <code><a href="https://github.acme-inc.com/api/v3">https://github.acme-inc.com/api/v3</a></code>. Example</p>
<div class="fragment"><div class="line">const octokit = new Octokit({</div>
<div class="line">  baseUrl: &quot;https://github.acme-inc.com/api/v3&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<p>Advanced options</p>
<table class="doxtable">
<tr>
<th>name  </th><th>type  </th><th width="100%">description     </th></tr>
<tr>
<th><code>request</code>  </th><td><code>Object</code>  </td><td><p class="starttd"></p>
<ul>
<li><code>request.signal</code>: Use an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController"><code>AbortController</code></a> instance to cancel a request. <a href="https://www.npmjs.com/package/abort-controller"><code>abort-controller</code></a> is an implementation for Node.</li>
<li><code>request.fetch</code>: Replacement for <a href="https://nodejs.org/en/blog/announcements/v18-release-announce#fetch-(experimental)">built-in fetch method</a>.</li>
</ul>
<p class="intertd">Node only</p>
<ul>
<li><code>request.timeout</code> sets a request timeout, defaults to 0</li>
</ul>
<p class="intertd">The <code>request</code> option can also be set on a per-request basis.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>timeZone</code>  </th><td><code>String</code>  </td><td><p class="starttd"></p>
<p class="intertd">Sets the <code>Time-Zone</code> header which defines a timezone according to the <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">list of names from the Olson database</a>.</p>
<div class="fragment"><div class="line">const octokit = new Octokit({</div>
<div class="line">  timeZone: &quot;America/Los_Angeles&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p class="intertd">The time zone header will determine the timezone used for generating the timestamp when creating commits. See <a href="https://developer.github.com/v3/#timezones">GitHub's Timezones documentation</a>.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>throttle</code>  </th><td><code>Object</code>  </td><td><p class="starttd"></p>
<p class="intertd"><code>Octokit</code> implements request throttling using <a href="https://github.com/octokit/plugin-throttling.js/#readme"><code>@octokit/plugin-throttling</code></a></p>
<p class="intertd">By default, requests are retried once and warnings are logged in case of hitting a rate or secondary rate limit.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  onRateLimit: (retryAfter, options, octokit) =&gt; {</div>
<div class="line">    octokit.log.warn(</div>
<div class="line">      `Request quota exhausted for request ${options.method} ${options.url}`</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    if (options.request.retryCount === 0) {</div>
<div class="line">      // only retries once</div>
<div class="line">      octokit.log.info(`Retrying after ${retryAfter} seconds!`);</div>
<div class="line">      return true;</div>
<div class="line">    }</div>
<div class="line">  },</div>
<div class="line">  onSecondaryRateLimit: (retryAfter, options, octokit) =&gt; {</div>
<div class="line">    octokit.log.warn(</div>
<div class="line">      `SecondaryRateLimit detected for request ${options.method} ${options.url}`</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    if (options.request.retryCount === 0) {</div>
<div class="line">      // only retries once</div>
<div class="line">      octokit.log.info(`Retrying after ${retryAfter} seconds!`);</div>
<div class="line">      return true;</div>
<div class="line">    }</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p class="intertd">To opt-out of this feature:</p>
<div class="fragment"><div class="line">new Octokit({ throttle: { enabled: false } });</div>
</div><!-- fragment --><p class="intertd">Throttling in a cluster is supported using a Redis backend. See <a href="https://github.com/octokit/plugin-throttling.js/#clustering"><code>@octokit/plugin-throttling</code> Clustering</a></p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>retry</code>  </th><td><code>Object</code>  </td><td><p class="starttd"></p>
<p class="intertd"><code>Octokit</code> implements request retries using <a href="https://github.com/octokit/plugin-retry.js/#readme"><code>@octokit/plugin-retry</code></a></p>
<p class="intertd">To opt-out of this feature:</p>
<div class="fragment"><div class="line">new Octokit({ retry: { enabled: false } });</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="autotoc_md25049"></a>
Authentication</h2>
<p>By default, the <code>Octokit</code> API client supports authentication using a static token.</p>
<p>There are different means of authentication that are supported by GitHub, that are described in detail at <a href="https://github.com/octokit/authentication-strategies.js/#readme">octokit/authentication-strategies.js</a>. You can set each of them as the <code>authStrategy</code> constructor option, and pass the strategy options as the <code>auth</code> constructor option.</p>
<p>For example, in order to authenticate as a GitHub App Installation:</p>
<div class="fragment"><div class="line">import { createAppAuth } from &quot;@octokit/auth-app&quot;;</div>
<div class="line">const octokit = new Octokit({</div>
<div class="line">  authStrategy: createAppAuth,</div>
<div class="line">  auth: {</div>
<div class="line">    appId: 1,</div>
<div class="line">    privateKey: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;,</div>
<div class="line">    installationId: 123,</div>
<div class="line">  },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// authenticates as app based on request URLs</div>
<div class="line">const {</div>
<div class="line">  data: { slug },</div>
<div class="line">} = await octokit.rest.apps.getAuthenticated();</div>
<div class="line"> </div>
<div class="line">// creates an installation access token as needed</div>
<div class="line">// assumes that installationId 123 belongs to @octocat, otherwise the request will fail</div>
<div class="line">await octokit.rest.issues.create({</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;Hello world from &quot; + slug,</div>
<div class="line">});</div>
</div><!-- fragment --><p>You can use the `App` or `OAuthApp` SDKs which provide APIs and internal wiring to cover most use cases.</p>
<p>For example, to implement the above using <code>App</code></p>
<div class="fragment"><div class="line">const app = new App({ appId, privateKey });</div>
<div class="line">const { data: slug } = await app.octokit.rest.apps.getAuthenticated();</div>
<div class="line">const octokit = await app.getInstallationOctokit(123);</div>
<div class="line">await octokit.rest.issues.create({</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;Hello world from &quot; + slug,</div>
<div class="line">});</div>
</div><!-- fragment --><p>Learn more about <a href="https://github.com/octokit/authentication-strategies.js/#how-authentication-strategies-work">how authentication strategies work</a> or how to <a href="https://github.com/octokit/authentication-strategies.js/#create-your-own-octokit-authentication-strategy-module">create your own</a>.</p>
<h2><a class="anchor" id="autotoc_md25050"></a>
Proxy Servers (Node.js only)</h2>
<p>By default, the <code>Octokit</code> API client does not make use of the standard proxy server environment variables. To add support for proxy servers you will need to provide an https client that supports them such as <a href="https://undici.nodejs.org/#/docs/api/ProxyAgent"><code>undici.ProxyAgent()</code></a>.</p>
<p>For example, this would use a <code>ProxyAgent</code> to make requests through a proxy server:</p>
<div class="fragment"><div class="line">import { fetch as undiciFetch, ProxyAgent } from &#39;undici&#39;;</div>
<div class="line"> </div>
<div class="line">const myFetch = (url, options) =&gt; {</div>
<div class="line">  return undiciFetch(url, {</div>
<div class="line">    ...options,</div>
<div class="line">    dispatcher: new ProxyAgent(&lt;your_proxy_url&gt;)</div>
<div class="line">  })</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">const octokit = new Octokit({</div>
<div class="line">  request: {</div>
<div class="line">     fetch: myFetch</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><p>If you are writing a module that uses <code>Octokit</code> and is designed to be used by other people, you should ensure that consumers can provide an alternative agent for your <code>Octokit</code> or as a parameter to specific calls such as:</p>
<div class="fragment"><div class="line">import { fetch as undiciFetch, ProxyAgent } from &#39;undici&#39;;</div>
<div class="line"> </div>
<div class="line">const myFetch = (url, options) =&gt; {</div>
<div class="line">  return undiciFetch(url, {</div>
<div class="line">    ...options,</div>
<div class="line">    dispatcher: new ProxyAgent(&lt;your_proxy_url&gt;)</div>
<div class="line">  })</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">octokit.rest.repos.get({</div>
<div class="line">  owner,</div>
<div class="line">  repo,</div>
<div class="line">  request: {</div>
<div class="line">    fetch: myFetch</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25051"></a>
Fetch missing</h3>
<p>If you get the following error:</p>
<blockquote class="doxtable">
<p>fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). </p>
</blockquote>
<p>It probably means you are trying to run Octokit with an unsupported version of NodeJS. Octokit requires Node 18 or higher, <a href="https://nodejs.org/en/blog/announcements/v18-release-announce#fetch-(experimental)">which includes a native fetch API</a>.</p>
<p>To bypass this problem you can provide your own <code>fetch</code> implementation (or a built-in version like <code>node-fetch</code>) like this:</p>
<div class="fragment"><div class="line">import fetch from &quot;node-fetch&quot;;</div>
<div class="line"> </div>
<div class="line">const octokit = new Octokit({</div>
<div class="line">  request: {</div>
<div class="line">    fetch: fetch,</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25052"></a>
REST API</h2>
<p>There are two ways of using the GitHub REST API, the `octokit.rest.*` endpoint methods and `octokit.request`. Both act the same way, the <code>octokit.rest.*</code> methods are just added for convenience, they use <code>octokit.request</code> internally.</p>
<p>For example</p>
<div class="fragment"><div class="line">await octokit.rest.issues.create({</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;Hello, world!&quot;,</div>
<div class="line">  body: &quot;I created this issue using Octokit!&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p>Is the same as</p>
<div class="fragment"><div class="line">await octokit.request(&quot;POST /repos/{owner}/{repo}/issues&quot;, {</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;Hello, world!&quot;,</div>
<div class="line">  body: &quot;I created this issue using Octokit!&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p>In both cases a given request is authenticated, retried, and throttled transparently by the <code>octokit</code> instance which also manages the <code>accept</code> and <code>user-agent</code> headers as needed.</p>
<p><code>octokit.request</code> can be used to send requests to other domains by passing a full URL and to send requests to endpoints that are not (yet) documented in <a href="https://docs.github.com/rest">GitHub's REST API documentation</a>.</p>
<h3><a class="anchor" id="autotoc_md25053"></a>
<code>octokit.rest</code> endpoint methods</h3>
<p>Every GitHub REST API endpoint has an associated <code>octokit.rest</code> endpoint method for better code readability and developer convenience. See <a href="https://github.com/octokit/plugin-rest-endpoint-methods.js/#readme"><code>@octokit/plugin-rest-endpoint-methods</code></a> for full details.</p>
<p>Example: <a href="https://docs.github.com/en/rest/reference/issues#create-an-issue">Create an issue</a></p>
<div class="fragment"><div class="line">await octokit.rest.issues.create({</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;Hello, world!&quot;,</div>
<div class="line">  body: &quot;I created this issue using Octokit!&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p>The <code>octokit.rest</code> endpoint methods are generated automatically from <a href="https://github.com/github/rest-api-description/">GitHub's OpenAPI specification</a>. We track operation ID and parameter name changes in order to implement deprecation warnings and reduce the frequency of breaking changes.</p>
<p>Under the covers, every endpoint method is just <code>octokit.request</code> with defaults set, so it supports the same parameters as well as the <code>.endpoint()</code> API.</p>
<h3><a class="anchor" id="autotoc_md25054"></a>
<code>octokit.request()</code></h3>
<p>You can call the GitHub REST API directly using <code>octokit.request</code>. The <code>request</code> API matches GitHub's REST API documentation 1:1 so anything you see there, you can call using <code>request</code>. See <a href="https://github.com/octokit/request.js#readme"><code>@octokit/request</code></a> for all the details.</p>
<p>Example: <a href="https://docs.github.com/en/rest/reference/issues#create-an-issue">Create an issue</a></p>
<p><a href="https://docs.github.com/en/rest/reference/issues#create-an-issue"><img src="assets/create-an-issue-reference.png" alt="Screenshot of REST API reference documentation for Create an issue" class="inline"/></a></p>
<p>The <code>octokit.request</code> API call corresponding to that issue creation documentation looks like this:</p>
<div class="fragment"><div class="line">// https://docs.github.com/en/rest/reference/issues#create-an-issue</div>
<div class="line">await octokit.request(&quot;POST /repos/{owner}/{repo}/issues&quot;, {</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  title: &quot;Hello, world!&quot;,</div>
<div class="line">  body: &quot;I created this issue using Octokit!&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><p>The 1st argument is the REST API route as listed in GitHub's API documentation. The 2nd argument is an object with all parameters, independent of whether they are used in the path, query, or body.</p>
<h3><a class="anchor" id="autotoc_md25055"></a>
Pagination</h3>
<p>All REST API endpoints that paginate return the first 30 items by default. If you want to retrieve all items, you can use the pagination API. The pagination API expects the REST API route as first argument, but you can also pass any of the <code>octokit.rest.*.list*</code> methods for convenience and better code readability.</p>
<p>Example: iterate through all issues in a repository</p>
<div class="fragment"><div class="line">const iterator = octokit.paginate.iterator(octokit.rest.issues.listForRepo, {</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  per_page: 100,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// iterate through each response</div>
<div class="line">for await (const { data: issues } of iterator) {</div>
<div class="line">  for (const issue of issues) {</div>
<div class="line">    console.log(&quot;Issue #%d: %s&quot;, issue.number, issue.title);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of">async iterator</a> is the most memory efficient way to iterate through all items. But you can also retrieve all items in a single call</p>
<div class="fragment"><div class="line">const issues = await octokit.paginate(octokit.rest.issues.listForRepo, {</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  per_page: 100,</div>
<div class="line">});</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25056"></a>
Media Type formats</h3>
<p>Media type formats can be set using <code>mediaType: { format }</code> on every request.</p>
<p>Example: retrieve the raw content of a <code>package.json</code> file</p>
<div class="fragment"><div class="line">const { data } = await octokit.rest.repos.getContent({</div>
<div class="line">  mediaType: {</div>
<div class="line">    format: &quot;raw&quot;,</div>
<div class="line">  },</div>
<div class="line">  owner: &quot;octocat&quot;,</div>
<div class="line">  repo: &quot;hello-world&quot;,</div>
<div class="line">  path: &quot;package.json&quot;,</div>
<div class="line">});</div>
<div class="line">console.log(&quot;package name: %s&quot;, JSON.parse(data).name);</div>
</div><!-- fragment --><p>Learn more about <a href="https://docs.github.com/en/rest/overview/media-types">Media type formats</a>.</p>
<h3><a class="anchor" id="autotoc_md25057"></a>
Request error handling</h3>
<p><b>Standalone module:</b> <a href="https://github.com/octokit/request-error.js/#readme"><code>@octokit/request-error</code></a></p>
<p>For request error handling, import <code>RequestError</code> and use <code>try...catch</code> statement.</p>
<div class="fragment"><div class="line">import { RequestError } from &quot;octokit&quot;;</div>
</div><!-- fragment --><div class="fragment"><div class="line">try {</div>
<div class="line">  // your code here that sends at least one Octokit request</div>
<div class="line">  await octokit.request(&quot;GET /&quot;);</div>
<div class="line">} catch (error) {</div>
<div class="line">  // Octokit errors are instances of RequestError, so they always have an `error.status` property containing the HTTP response code.</div>
<div class="line">  if (error instanceof RequestError) {</div>
<div class="line">    // handle Octokit error</div>
<div class="line">    // error.message; // Oops</div>
<div class="line">    // error.status; // 500</div>
<div class="line">    // error.request; // { method, url, headers, body }</div>
<div class="line">    // error.response; // { url, status, headers, data }</div>
<div class="line">  } else {</div>
<div class="line">    // handle all other errors</div>
<div class="line">    throw error;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25058"></a>
GraphQL API queries</h2>
<p>Octokit also supports GitHub's GraphQL API directly &ndash; you can use the same queries shown in the documentation and available in the GraphQL explorer in your calls with <code>octokit.graphql</code>.</p>
<p>Example: get the login of the authenticated user</p>
<div class="fragment"><div class="line">const {</div>
<div class="line">  viewer: { login },</div>
<div class="line">} = await octokit.graphql(`{</div>
<div class="line">  viewer {</div>
<div class="line">    login</div>
<div class="line">  }</div>
<div class="line">}`);</div>
</div><!-- fragment --><p>Variables can be passed as 2nd argument</p>
<div class="fragment"><div class="line">const { lastIssues } = await octokit.graphql(</div>
<div class="line">  `</div>
<div class="line">    query lastIssues($owner: String!, $repo: String!, $num: Int = 3) {</div>
<div class="line">      repository(owner: $owner, name: $repo) {</div>
<div class="line">        issues(last: $num) {</div>
<div class="line">          edges {</div>
<div class="line">            node {</div>
<div class="line">              title</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  `,</div>
<div class="line">  {</div>
<div class="line">    owner: &quot;octokit&quot;,</div>
<div class="line">    repo: &quot;graphql.js&quot;,</div>
<div class="line">  },</div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25059"></a>
Pagination</h3>
<p>GitHub's GraphQL API returns a maximum of 100 items. If you want to retrieve all items, you can use the pagination API.</p>
<p>Example: get all issues</p>
<div class="fragment"><div class="line">const { allIssues } = await octokit.graphql.paginate(</div>
<div class="line">  `</div>
<div class="line">    query allIssues($owner: String!, $repo: String!, $num: Int = 10, $cursor: String) {</div>
<div class="line">      repository(owner: $owner, name: $repo) {</div>
<div class="line">        issues(first: $num, after: $cursor) {</div>
<div class="line">          edges {</div>
<div class="line">            node {</div>
<div class="line">              title</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">          pageInfo {</div>
<div class="line">            hasNextPage</div>
<div class="line">            endCursor</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  `,</div>
<div class="line">  {</div>
<div class="line">    owner: &quot;octokit&quot;,</div>
<div class="line">    repo: &quot;graphql.js&quot;,</div>
<div class="line">  },</div>
<div class="line">);</div>
</div><!-- fragment --><p>Learn more about <a href="https://github.com/octokit/plugin-paginate-graphql.js#readme">GitHub's GraphQL Pagination</a> usage.</p>
<h3><a class="anchor" id="autotoc_md25060"></a>
Schema previews</h3>
<p>Previews can be enabled using the <code>{mediaType: previews: [] }</code> option.</p>
<p>Example: create a label</p>
<div class="fragment"><div class="line">await octokit.graphql(</div>
<div class="line">  `mutation createLabel($repositoryId:ID!,name:String!,color:String!) {</div>
<div class="line">  createLabel(input:{repositoryId:$repositoryId,name:$name}) {</div>
<div class="line">    label: {</div>
<div class="line">      id</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}`,</div>
<div class="line">  {</div>
<div class="line">    repositoryId: 1,</div>
<div class="line">    name: &quot;important&quot;,</div>
<div class="line">    color: &quot;cc0000&quot;,</div>
<div class="line">    mediaType: {</div>
<div class="line">      previews: [&quot;bane&quot;],</div>
<div class="line">    },</div>
<div class="line">  },</div>
<div class="line">);</div>
</div><!-- fragment --><p>Learn more about <a href="https://docs.github.com/en/graphql/overview/schema-previews">GitHub's GraphQL schema previews</a></p>
<h1><a class="anchor" id="autotoc_md25061"></a>
App client</h1>
<p>The <code>App</code> client combines features for GitHub Apps, Webhooks, and OAuth</p>
<h2><a class="anchor" id="autotoc_md25062"></a>
GitHub App</h2>
<p><b>Standalone module</b>: <a href="https://github.com/octokit/app.js/#readme"><code>@octokit/app</code></a></p>
<p>For integrators, GitHub Apps are a means of authentication and authorization. A GitHub app can be registered on a GitHub user or organization account. A GitHub App registration defines a set of permissions and webhooks events it wants to receive and provides a set of credentials in return. Users can grant access to repositories by installing them.</p>
<p>Some API endpoints require the GitHub app to authenticate as itself using a JSON Web Token (JWT). For requests affecting an installation, an installation access token has to be created using the app's credentials and the installation ID.</p>
<p>The <code>App</code> client takes care of all that for you.</p>
<p>Example: Dispatch a repository event in every repository the app is installed on</p>
<div class="fragment"><div class="line">import { App } from &quot;octokit&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new App({ appId, privateKey });</div>
<div class="line"> </div>
<div class="line">for await (const { octokit, repository } of app.eachRepository.iterator()) {</div>
<div class="line">  // https://docs.github.com/en/rest/reference/repos#create-a-repository-dispatch-event</div>
<div class="line">  await octokit.rest.repos.createDispatchEvent({</div>
<div class="line">    owner: repository.owner.login,</div>
<div class="line">    repo: repository.name,</div>
<div class="line">    event_type: &quot;my_event&quot;,</div>
<div class="line">    client_payload: {</div>
<div class="line">      foo: &quot;bar&quot;,</div>
<div class="line">    },</div>
<div class="line">  });</div>
<div class="line">  console.log(&quot;Event dispatched for %s&quot;, repository.full_name);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Example: Get an <code>octokit</code> instance authenticated as an installation</p>
<div class="fragment"><div class="line">const octokit = await app.getInstallationOctokit(123);</div>
</div><!-- fragment --><p>Learn more about <a href="https://docs.github.com/apps">apps</a>.</p>
<h2><a class="anchor" id="autotoc_md25063"></a>
Webhooks</h2>
<p><b>Standalone module</b>: <a href="https://github.com/octokit/webhooks.js/#readme"><code>@octokit/webhooks</code></a></p>
<p>When installing an app, events that the app registration requests will be sent as requests to the webhook URL set in the app's registration.</p>
<p>Webhook event requests are signed using the webhook secret, which is also part of the app's registration. You must verify that secret before handling the request payload.</p>
<p>The <code>app.webhooks.*</code> APIs provide methods to receiving, verifying, and handling webhook events.</p>
<p>Example: create a comment on new issues</p>
<div class="fragment"><div class="line">import { createServer } from &quot;node:http&quot;;</div>
<div class="line">import { App, createNodeMiddleware } from &quot;octokit&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new App({</div>
<div class="line">  appId,</div>
<div class="line">  privateKey,</div>
<div class="line">  webhooks: { secret },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.webhooks.on(&quot;issues.opened&quot;, ({ octokit, payload }) =&gt; {</div>
<div class="line">  return octokit.rest.issues.createComment({</div>
<div class="line">    owner: payload.repository.owner.login,</div>
<div class="line">    repo: payload.repository.name,</div>
<div class="line">    issue_number: payload.issue.number,</div>
<div class="line">    body: &quot;Hello, World!&quot;,</div>
<div class="line">  });</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Your app can now receive webhook events at `/api/github/webhooks`</div>
<div class="line">createServer(createNodeMiddleware(app)).listen(3000);</div>
</div><!-- fragment --><p>For serverless environments, you can explicitly verify and receive an event</p>
<div class="fragment"><div class="line">await app.webhooks.verifyAndReceive({</div>
<div class="line">  id: request.headers[&quot;x-github-delivery&quot;],</div>
<div class="line">  name: request.headers[&quot;x-github-event&quot;],</div>
<div class="line">  signature: request.headers[&quot;x-hub-signature-256&quot;],</div>
<div class="line">  payload: request.body,</div>
<div class="line">});</div>
</div><!-- fragment --><p>Learn more about <a href="https://docs.github.com/webhooks">GitHub webhooks</a>.</p>
<h2><a class="anchor" id="autotoc_md25064"></a>
OAuth</h2>
<p><b>Standalone module:</b> <a href="https://github.com/octokit/oauth-app.js/#readme"><code>@octokit/oauth-app</code></a></p>
<p>Both OAuth Apps and GitHub Apps support authenticating GitHub users using OAuth, see <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps">Authorizing OAuth Apps</a> and <a href="https://docs.github.com/en/developers/apps/identifying-and-authorizing-users-for-github-apps">Identifying and authorizing users for GitHub Apps</a>.</p>
<p>There are some differences:</p>
<ul>
<li>Only OAuth Apps support scopes. GitHub apps have permissions, and access is granted via installations of the app on repositories.</li>
<li>Only GitHub Apps support expiring user tokens</li>
<li>Only GitHub Apps support creating a scoped token to reduce the permissions and repository access</li>
</ul>
<p><code>App</code> is for GitHub Apps. If you need OAuth App-specific functionality, use <a href="https://github.com/octokit/oauth-app.js/"><code>OAuthApp</code> instead</a>.</p>
<p>Example: Watch a repository when a user logs in using the OAuth web flow</p>
<div class="fragment"><div class="line">import { createServer } from &quot;node:http&quot;;</div>
<div class="line">import { App, createNodeMiddleware } from &quot;octokit&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new App({</div>
<div class="line">  oauth: { clientId, clientSecret },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.oauth.on(&quot;token.created&quot;, async ({ token, octokit }) =&gt; {</div>
<div class="line">  await octokit.rest.activity.setRepoSubscription({</div>
<div class="line">    owner: &quot;octocat&quot;,</div>
<div class="line">    repo: &quot;hello-world&quot;,</div>
<div class="line">    subscribed: true,</div>
<div class="line">  });</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Your app can receive the OAuth redirect at /api/github/oauth/callback</div>
<div class="line">// Users can initiate the OAuth web flow by opening /api/github/oauth/login</div>
<div class="line">createServer(createNodeMiddleware(app)).listen(3000);</div>
</div><!-- fragment --><p>For serverless environments, you can explicitly exchange the <code>code</code> from the OAuth web flow redirect for an access token. <code>app.oauth.createToken()</code> returns an authentication object and emits the "token.created" event.</p>
<div class="fragment"><div class="line">const { token } = await app.oauth.createToken({</div>
<div class="line">  code: request.query.code,</div>
<div class="line">});</div>
</div><!-- fragment --><p>Example: create a token using the device flow.</p>
<div class="fragment"><div class="line">const { token } = await app.oauth.createToken({</div>
<div class="line">  async onVerification(verification) {</div>
<div class="line">    await sendMessageToUser(</div>
<div class="line">      request.body.phoneNumber,</div>
<div class="line">      `Your code is ${verification.user_code}. Enter it at ${verification.verification_uri}`,</div>
<div class="line">    );</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><p>Example: Create an OAuth App Server with default scopes</p>
<div class="fragment"><div class="line">import { createServer } from &quot;node:http&quot;;</div>
<div class="line">import { OAuthApp, createNodeMiddleware } from &quot;octokit&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new OAuthApp({</div>
<div class="line">  clientId,</div>
<div class="line">  clientSecret,</div>
<div class="line">  defaultScopes: [&quot;repo&quot;, &quot;gist&quot;],</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.oauth.on(&quot;token&quot;, async ({ token, octokit }) =&gt; {</div>
<div class="line">  await octokit.rest.gists.create({</div>
<div class="line">    description: &quot;I created this gist using Octokit!&quot;,</div>
<div class="line">    public: true,</div>
<div class="line">    files: {</div>
<div class="line">      &quot;example.js&quot;: `/* some code here */`,</div>
<div class="line">    },</div>
<div class="line">  });</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Your app can receive the OAuth redirect at /api/github/oauth/callback</div>
<div class="line">// Users can initiate the OAuth web flow by opening /api/oauth/login</div>
<div class="line">createServer(createNodeMiddleware(app)).listen(3000);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25065"></a>
App Server</h2>
<p>After registering your GitHub app, you need to create and deploy a server which can retrieve the webhook event requests from GitHub as well as accept redirects from the OAuth user web flow.</p>
<p>The simplest way to create such a server is to use <code>createNodeMiddleware()</code>, it works with both, Node's <a href="https://nodejs.org/api/http.html#http_http_createserver_options_requestlistener"><code>http.createServer()</code></a> method as well as an <a href="https://expressjs.com/en/guide/using-middleware.html">Express middleware</a>.</p>
<p>The default routes that the middleware exposes are</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Route Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /api/github/webhooks</code>   </td><td class="markdownTableBodyNone">Endpoint to receive GitHub Webhook Event requests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/github/oauth/login</code>   </td><td class="markdownTableBodyNone">Redirects to GitHub's authorization endpoint. Accepts optional <code>?state</code> and <code>?scopes</code> query parameters. <code>?scopes</code> is a comma-separated list of <a href="https://docs.github.com/en/developers/apps/scopes-for-oauth-apps#available-scopes">supported OAuth scope names</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GET /api/github/oauth/callback</code>   </td><td class="markdownTableBodyNone">The client's redirect endpoint. This is where the <code>token</code> event gets triggered    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>POST /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Exchange an authorization code for an OAuth Access token. If successful, the <code>token</code> event gets triggered.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GET /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Check if token is valid. Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/rest/reference/apps#check-a-token"><code>POST /applications/{client_id}/token</code></a> endpoint    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PATCH /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Resets a token (invalidates current one, returns new token). Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/rest/reference/apps#reset-a-token"><code>PATCH /applications/{client_id}/token</code></a> endpoint.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PATCH /api/github/oauth/refresh-token</code>   </td><td class="markdownTableBodyNone">Refreshes an expiring token (invalidates current one, returns new access token and refresh token). Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/developers/apps/refreshing-user-to-server-access-tokens#renewing-a-user-token-with-a-refresh-token"><code>POST https://github.com/login/oauth/access_token</code></a> OAuth endpoint.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>POST /api/github/oauth/token/scoped</code>   </td><td class="markdownTableBodyNone">Creates a scoped token (does not invalidate the current one). Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/rest/reference/apps#create-a-scoped-access-token"><code>POST /applications/{client_id}/token/scoped</code></a> endpoint.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DELETE /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Invalidates current token, basically the equivalent of a logout. Must authenticate using token in <code>Authorization</code> header.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DELETE /api/github/oauth/grant</code>   </td><td class="markdownTableBodyNone">Revokes the user's grant, basically the equivalent of an uninstall. must authenticate using token in <code>Authorization</code> header.   </td></tr>
</table>
<p>Example: create a GitHub server with express</p>
<div class="fragment"><div class="line">import express from &quot;express&quot;;</div>
<div class="line">import { App, createNodeMiddleware } from &quot;octokit&quot;;</div>
<div class="line"> </div>
<div class="line">const expressApp = express();</div>
<div class="line">const octokitApp = new App({</div>
<div class="line">  appId,</div>
<div class="line">  privateKey,</div>
<div class="line">  webhooks: { secret },</div>
<div class="line">  oauth: { clientId, clientSecret },</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">expressApp.use(createNodeMiddleware(app));</div>
<div class="line"> </div>
<div class="line">expressApp.listen(3000, () =&gt; {</div>
<div class="line">  console.log(`Example app listening at http://localhost:3000`);</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25066"></a>
OAuth for browser apps</h2>
<p>You must not expose your app's client secret to the user, so you cannot use the <code>App</code> constructor. Instead, you have to create a server using the <code>App</code> constructor which exposes the <code>/api/github/oauth/*</code> routes, through which you can safely implement an OAuth login for apps running in a web browser.</p>
<p>If you set <code>(User) Authorization callback URL</code> to your own app, than you need to read out the <code>?code=...&amp;state=...</code> query parameters, compare the <code>state</code> parameter to the value returned by <code>app.oauthLoginUrl()</code> earlier to protect against forgery attacks, then exchange the <code>code</code> for an OAuth Authorization token.</p>
<p>If you run an app server as described above, the default route to do that is <code>POST /api/github/oauth/token</code>.</p>
<p>Once you successfully retrieved the token, it is also recommended to remove the <code>?code=...&amp;state=...</code> query parameters from the browser's URL</p>
<div class="fragment"><div class="line">const code = new URL(location.href).searchParams.get(&quot;code&quot;);</div>
<div class="line">if (code) {</div>
<div class="line">  // remove ?code=... from URL</div>
<div class="line">  const path =</div>
<div class="line">    location.pathname +</div>
<div class="line">    location.search.replace(/\b(code|state)=\w+/g, &quot;&quot;).replace(/[?&amp;]+$/, &quot;&quot;);</div>
<div class="line">  history.replaceState({}, &quot;&quot;, path);</div>
<div class="line"> </div>
<div class="line">  // exchange the code for a token with your backend.</div>
<div class="line">  // If you use https://github.com/octokit/oauth-app.js</div>
<div class="line">  // the exchange would look something like this</div>
<div class="line">  const response = await fetch(&quot;/api/github/oauth/token&quot;, {</div>
<div class="line">    method: &quot;POST&quot;,</div>
<div class="line">    headers: {</div>
<div class="line">      &quot;content-type&quot;: &quot;application/json&quot;,</div>
<div class="line">    },</div>
<div class="line">    body: JSON.stringify({ code }),</div>
<div class="line">  });</div>
<div class="line">  const { token } = await response.json();</div>
<div class="line">  // `token` is the OAuth Access Token that can be use</div>
<div class="line"> </div>
<div class="line">  const { Octokit } = await import(&quot;https://esm.sh/@octokit/core&quot;);</div>
<div class="line">  const octokit = new Octokit({ auth: token });</div>
<div class="line"> </div>
<div class="line">  const {</div>
<div class="line">    data: { login },</div>
<div class="line">  } = await octokit.request(&quot;GET /user&quot;);</div>
<div class="line">  alert(&quot;Hi there, &quot; + login);</div>
<div class="line">}</div>
</div><!-- fragment --><p> We are working on <a href="https://github.com/octokit/auth-oauth-user-client.js#readme"><code>@octokit/auth-oauth-user-client</code></a> to provide a simple API for all methods related to OAuth user tokens.</p>
<p>The plan is to add an new <code>GET /api/github/oauth/octokit.js</code> route to the node middleware which will return a JavaScript file that can be imported into an HTML file. It will make a pre-authenticated <code>octokit</code> Instance available.</p>
<h1><a class="anchor" id="autotoc_md25067"></a>
Action client</h1>
<p><b>standalone module:</b> <a href="https://github.com/octokit/action.js#readme"><code>@octokit/action</code></a></p>
<p> A fully fledged <code>Action</code> client is pending. You can use <a href="https://github.com/actions/toolkit/tree/main/packages/github"><code>@actions/github</code></a> for the time being</p>
<h1><a class="anchor" id="autotoc_md25068"></a>
LICENSE</h1>
<p>[MIT](LICENSE) </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_fb7345bab8804ebb6c44b79904c4c0f9.html">octokit</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
