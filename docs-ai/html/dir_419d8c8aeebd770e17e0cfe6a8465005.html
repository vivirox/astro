<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/html-to-text Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_419d8c8aeebd770e17e0cfe6a8465005.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">html-to-text Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://github.com/html-to-text/node-html-to-text/actions/workflows/lint.yml"><img src="https://github.com/html-to-text/node-html-to-text/workflows/lint/badge.svg" alt="lint status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/html-to-text/node-html-to-text/actions/workflows/test.yml"><img src="https://github.com/html-to-text/node-html-to-text/workflows/test/badge.svg" alt="test status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/html-to-text/node-html-to-text/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-green.svg" alt="License: MIT" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/html-to-text"><img src="https://img.shields.io/npm/v/html-to-text?logo=npm" alt="npm" class="inline"/></a> <a href="https://www.npmjs.com/package/html-to-text"><img src="https://img.shields.io/npm/dw/html-to-text?color=informational&amp;logo=npm" alt="npm" class="inline"/></a></p>
<p>Advanced converter that parses HTML and returns beautiful text.</p>
<h1><a class="anchor" id="autotoc_md17831"></a>
Features</h1>
<ul>
<li>Inline and block-level tags.</li>
<li>Tables with colspans and rowspans.</li>
<li>Links with both text and href.</li>
<li>Word wrapping.</li>
<li>Unicode support.</li>
<li>Plenty of customization options.</li>
</ul>
<h1><a class="anchor" id="autotoc_md17832"></a>
Changelog</h1>
<p>Available here: <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/CHANGELOG.md">CHANGELOG.md</a></p>
<p>Version 6 contains a ton of changes, so it worth to take a look at the full changelog.</p>
<p>Version 7 contains an important change for custom formatters.</p>
<p>Version 8 brings the selectors support to greatly increase the flexibility but that also changes some things introduced in version 6. Base element(s) selection also got important changes.</p>
<p>Version 9 drops a lot of previously deprecated options, introduces some new formatters and new capabilities for custom formatters. Now a dual-mode package (cjs and esm). CLI is moved to a <a href="https://github.com/html-to-text/node-html-to-text/tree/master/packages/html-to-text-cli/">separate package</a>.</p>
<h1><a class="anchor" id="autotoc_md17833"></a>
Installation</h1>
<div class="fragment"><div class="line">npm install html-to-text</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md17834"></a>
Usage</h1>
<p>Convert a single document:</p>
<div class="fragment"><div class="line">const { convert } = require(&#39;html-to-text&#39;);</div>
<div class="line">// There is also an alias to `convert` called `htmlToText`.</div>
<div class="line"> </div>
<div class="line">const options = {</div>
<div class="line">  wordwrap: 130,</div>
<div class="line">  // ...</div>
<div class="line">};</div>
<div class="line">const html = &#39;&lt;div&gt;Hello World&lt;/div&gt;&#39;;</div>
<div class="line">const text = convert(html, options);</div>
<div class="line">console.log(text); // Hello World</div>
</div><!-- fragment --><p>Configure <code>html-to-text</code> once to convert many documents with the same options (recommended for <a href="https://github.com/html-to-text/node-html-to-text/issues/265#issuecomment-1337470852">good performance</a> when processing big batches of documents):</p>
<div class="fragment"><div class="line">const { compile } = require(&#39;html-to-text&#39;);</div>
<div class="line"> </div>
<div class="line">const options = {</div>
<div class="line">  wordwrap: 130,</div>
<div class="line">  // ...</div>
<div class="line">};</div>
<div class="line">const compiledConvert = compile(options); // options passed here</div>
<div class="line"> </div>
<div class="line">const htmls = [</div>
<div class="line">  &#39;&lt;div&gt;Hello World!&lt;/div&gt;&#39;,</div>
<div class="line">  &#39;&lt;div&gt;こんにちは世界！&lt;/div&gt;&#39;,</div>
<div class="line">  &#39;&lt;div&gt;Привіт Світ!&lt;/div&gt;&#39;</div>
<div class="line">];</div>
<div class="line">const texts = htmls.map(compiledConvert);</div>
<div class="line">console.log(texts.join(&#39;\n&#39;));</div>
<div class="line">// Hello World!</div>
<div class="line">// こんにちは世界！</div>
<div class="line">// Привіт Світ!</div>
</div><!-- fragment --><p>Both <code>convert</code> and <code>compiledConvert</code> can take one more optional argument - metadata object that can be used by formatters.</p>
<h2><a class="anchor" id="autotoc_md17835"></a>
Options</h2>
<h3><a class="anchor" id="autotoc_md17836"></a>
General options</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>baseElements</code>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Describes which parts of the input document have to be converted and present in the output text, and in what order.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>baseElements.selectors</code>   </td><td class="markdownTableBodyNone">&lsquo;['body&rsquo;]<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Elements matching any of provided selectors will be processed and included in the output text, with all inner content.&lt;br/&gt;Refer to [Supported selectors](#supported-selectors) section below. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>baseElements.orderBy<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>'selectors'<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>'selectors'<code>- arrange base elements in the same order as</code>baseElements.selectors<code>array;&lt;br/&gt;</code>'occurrence'<code>- arrange base elements in the order they are found in the input document. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>baseElements.returnDomByDefault<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Convert the entire document if none of provided selectors match. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>decodeEntities<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Decode HTML entities found in the input HTML if</code>true<code>. Otherwise preserve in output text. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>encodeCharacters<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>{}<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; A dictionary with characters that should be replaced in the output text and corresponding escape sequences. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>formatters<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>{}<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; An object with custom formatting functions for specific elements (see [Override formatting](#override-formatting) section below). \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>limits<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Describes how to limit the output text in case of large HTML documents. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>limits.ellipsis<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>'...'<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; A string to insert in place of skipped content. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>limits.maxBaseElements<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>undefined<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Stop looking for more base elements after reaching this amount. Unlimited if undefined. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>limits.maxChildNodes<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>undefined<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Maximum number of child nodes of a single node to be added to the output. Unlimited if undefined. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>limits.maxDepth<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>undefined<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Stop looking for nodes to add to the output below this depth in the DOM tree. Unlimited if undefined. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>limits.maxInputLength<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>16_777_216<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; If the input string is longer than this value - it will be truncated and a message will be sent to</code>stderr<code>. Ellipsis is not used in this case. Unlimited if undefined. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>longWordSplit<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Describes how to wrap long words. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>longWordSplit.wrapCharacters<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>[]<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; An array containing the characters that may be wrapped on. Checked in order, search stops once line length requirement can be met. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>longWordSplit.forceWrapOnLimit<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>false<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Break long words at the line length limit in case no better wrap opportunities found. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>preserveNewlines<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>false<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; By default, any newlines</code><br  />
<code>from the input HTML are collapsed into space as any other HTML whitespace characters. If</code>true<code>, these newlines will be preserved in the output. This is only useful when input HTML carries some plain text formatting instead of proper tags. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>[]<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Describes how different HTML elements should be formatted. See [Selectors](#selectors) section below. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>whitespaceCharacters<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>' \t\r<br  />
\f\u200b'<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; A string of characters that are recognized as HTML whitespace. Default value uses the set of characters defined in [HTML4 standard](<a href="https://www.w3.org/TR/html4/struct/text.html">https://www.w3.org/TR/html4/struct/text.html</a>#h-9.1). (It includes Zero-width space compared to [living standard](<a href="https://infra.spec.whatwg.org">https://infra.spec.whatwg.org</a>#ascii-whitespace).) \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>wordwrap<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>80<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; After how many chars a line break should follow.&lt;br/&gt;Set to</code>null<code>or</code>false` to disable word-wrapping.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md17837"></a>
Deprecated or removed options</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old&#160;option   </th><th class="markdownTableHeadNone">Depr.   </th><th class="markdownTableHeadNone">Rem.   </th><th class="markdownTableHeadNone">Instead&#160;use    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>baseElement</code>   </td><td class="markdownTableBodyNone">8.0   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&lsquo;baseElements: { selectors: [ 'body&rsquo; ] }<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>decodeOptions<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Entity decoding is now handled by [htmlparser2](<a href="https://github.com/fb55/htmlparser2">https://github.com/fb55/htmlparser2</a>) itself and [entities](<a href="https://github.com/fb55/entities">https://github.com/fb55/entities</a>) internally. No user-configurable parts compared to [he](<a href="https://github.com/mathiasbynens/he">https://github.com/mathiasbynens/he</a>) besides boolean</code>decodeEntities<code>. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>format<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; The way formatters are written has changed completely. New formatters have to be added to the</code>formatters<code>option, old ones can not be reused without rewrite. See [new instructions](#override-formatting) below. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>hideLinkHrefIfSameAsText<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'a', options: { hideLinkHrefIfSameAsText: true } } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>ignoreHref<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'a', options: { ignoreHref: true } } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>ignoreImage<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'img', format: 'skip' } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>linkHrefBaseUrl<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [<code>&lt;br/&gt;</code>{ selector: 'a', options: { baseUrl: '<a href="https://example.com'">https://example.com'</a> } },<code>&lt;br/&gt;</code>{ selector: 'img', options: { baseUrl: '<a href="https://example.com'">https://example.com'</a> } }<code>&lt;br/&gt;</code>]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>noAnchorUrl<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'a', options: { noAnchorUrl: true } } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>noLinkBrackets<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'a', options: { linkBrackets: false } } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>returnDomByDefault<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 8.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>baseElements: { returnDomByDefault: true }<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>singleNewLineParagraphs<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [<code>&lt;br/&gt;</code>{ selector: 'p', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },<code>&lt;br/&gt;</code>{ selector: 'pre', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } }<code>&lt;br/&gt;</code>]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>tables<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 8.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'table.class#id', format: 'dataTable' } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>tags<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 8.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; See [Selectors](#selectors) section below. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>unorderedListItemPrefix<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [ { selector: 'ul', options: { itemPrefix: ' * ' } } ]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>uppercaseHeadings<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 6.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; 9.0 \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>selectors: [<code>&lt;br/&gt;</code>{ selector: 'h1', options: { uppercase: false } },<code>&lt;br/&gt;</code>...<code>&lt;br/&gt;</code>{ selector: 'table', options: { uppercaseHeaderCells: false } }<code>&lt;br/&gt;</code>]`   </td></tr>
</table>
<p>Other things removed:</p>
<ul>
<li><code>fromString</code> method - use <code>convert</code> or <code>htmlToText</code> instead;</li>
<li>positional arguments in <code>BlockTextBuilder</code> methods - pass option objects instead.</li>
</ul>
<h3><a class="anchor" id="autotoc_md17838"></a>
Selectors</h3>
<p>Some example:</p>
<div class="fragment"><div class="line">const { convert } = require(&#39;html-to-text&#39;);</div>
<div class="line"> </div>
<div class="line">const html = &#39;&lt;a href=&quot;/page.html&quot;&gt;Page&lt;/a&gt;&lt;a href=&quot;!#&quot; class=&quot;button&quot;&gt;Action&lt;/a&gt;&#39;;</div>
<div class="line">const text = convert(html, {</div>
<div class="line">  selectors: [</div>
<div class="line">    { selector: &#39;a&#39;, options: { baseUrl: &#39;https://example.com&#39; } },</div>
<div class="line">    { selector: &#39;a.button&#39;, format: &#39;skip&#39; }</div>
<div class="line">  ]</div>
<div class="line">});</div>
<div class="line">console.log(text); // Page [https://example.com/page.html]</div>
</div><!-- fragment --><p>Selectors array is our loose approximation of a stylesheet.</p>
<ul>
<li>highest <a href="https://www.w3.org/TR/selectors/#specificity">specificity</a> selector is used when there are multiple matches;</li>
<li>the last selector is used when there are multiple matches of equal specificity;</li>
<li>all entries with the same selector value are merged (recursively) at the compile stage, in such way so the last defined properties a kept and the relative order of unique selectors is kept;</li>
<li>user-defined entries are appended after predefined entries;</li>
<li>Every unique selector must have <code>format</code> value specified (at least once);</li>
<li>unlike in CSS, values from different matched selectors are NOT merged at the convert stage. Single best match is used instead (that is the last one of those with highest specificity).</li>
</ul>
<p>To achieve the best performance when checking each DOM element against provided selectors, they are compiled into a decision tree. But it is also important how you choose selectors. For example, <code>div#id</code> is much better than <code>#id</code> - the former will only check divs for the id while the latter has to check every element in the DOM.</p>
<h4><a class="anchor" id="autotoc_md17839"></a>
Supported selectors</h4>
<p><code>html-to-text</code> relies on <a href="https://github.com/mxxii/parseley">parseley</a> and <a href="https://github.com/mxxii/selderee">selderee</a> packages for selectors support.</p>
<p>Following selectors can be used in any combinations:</p>
<ul>
<li><code>*</code> - universal selector;</li>
<li><code>div</code> - tag name;</li>
<li><code>.foo</code> - class name;</li>
<li><code>#bar</code> - id;</li>
<li><code>[baz]</code> - attribute presence;</li>
<li><code>[baz=buzz]</code> - attribute value (with any operators and also quotes and case sensitivity modifiers - <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors#syntax">syntax</a>);</li>
<li><code>+</code> and <code>&gt;</code> combinators (other combinators are not supported).</li>
</ul>
<p>You can match <code>&lt;p style="...; display:INLINE; ..."&gt;...&lt;/p&gt;</code> with <code>p[style*="display:inline"i]</code> for example.</p>
<h4><a class="anchor" id="autotoc_md17840"></a>
Predefined formatters</h4>
<p>Following selectors have a formatter specified as a part of the default configuration. Everything can be overridden, but you don't have to repeat the <code>format</code> or options that you don't want to override. (But keep in mind this is only true for the same selector. There is no connection between different selectors.)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Selector   </th><th class="markdownTableHeadNone">Default&#160;format   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>*</code>   </td><td class="markdownTableBodyNone"><code>inline</code>   </td><td class="markdownTableBodyNone">Universal selector.   </td></tr>
</table>
<p><code>a</code> | <code>anchor</code> | <code>article</code> | <code>block</code> | <code>aside</code> | <code>block</code> | <code>blockquote</code> | <code>blockquote</code> | <code>br</code> | <code>lineBreak</code> | <code>div</code> | <code>block</code> | <code>footer</code> | <code>block</code> | <code>form</code> | <code>block</code> | <code>h1</code> | <code>heading</code> | <code>h2</code> | <code>heading</code> | <code>h3</code> | <code>heading</code> | <code>h4</code> | <code>heading</code> | <code>h5</code> | <code>heading</code> | <code>h6</code> | <code>heading</code> | <code>header</code> | <code>block</code> | <code>hr</code> | <code>horizontalLine</code> | <code>img</code> | <code>image</code> | <code>main</code> | <code>block</code> | <code>nav</code> | <code>block</code> | <code>ol</code> | <code>orderedList</code> | <code>p</code> | <code>paragraph</code> | <code>pre</code> | <code>pre</code> | <code>table</code> | <code>table</code> | Equivalent to <code>block</code>. Use <code>dataTable</code> instead for tabular data. <code>ul</code> | <code>unorderedList</code> | <code>wbr</code> | <code>wbr</code> |</p>
<p>More formatters also available for use:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>dataTable</code>   </td><td class="markdownTableBodyNone">For visually-accurate tables. Note that this might be not search-friendly (output text will look like gibberish to a machine when there is any wrapped cell contents) and also better to be avoided for tables used as a page layout tool.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>skip</code>   </td><td class="markdownTableBodyNone">Skips the given tag with it's contents without printing anything.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>blockString</code>   </td><td class="markdownTableBodyNone">Insert a block with the given string literal (<code>formatOptions.string</code>) instead of the tag.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>blockTag</code>   </td><td class="markdownTableBodyNone">Render an element as HTML block bag, convert it's contents to text.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>blockHtml</code>   </td><td class="markdownTableBodyNone">Render an element with all it's children as HTML block.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>inlineString</code>   </td><td class="markdownTableBodyNone">Insert the given string literal (<code>formatOptions.string</code>) inline instead of the tag.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>inlineSurround</code>   </td><td class="markdownTableBodyNone">Render inline element wrapped with given strings (<code>formatOptions.prefix</code> and <code>formatOptions.suffix</code>).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>inlineTag</code>   </td><td class="markdownTableBodyNone">Render an element as inline HTML tag, convert it's contents to text.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>inlineHtml</code>   </td><td class="markdownTableBodyNone">Render an element with all it's children as inline HTML.   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md17841"></a>
Format options</h4>
<p>Following options are available for built-in formatters.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Applies&#160;to   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>leadingLineBreaks</code>   </td><td class="markdownTableBodyNone"><code>1</code>, <code>2</code> or <code>3</code>   </td><td class="markdownTableBodyNone">all block-level formatters   </td><td class="markdownTableBodyNone">Number of line breaks to separate previous block from this one.<br  />
Note that N+1 line breaks are needed to make N empty lines.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>trailingLineBreaks</code>   </td><td class="markdownTableBodyNone"><code>1</code> or <code>2</code>   </td><td class="markdownTableBodyNone">all block-level formatters   </td><td class="markdownTableBodyNone">Number of line breaks to separate this block from the next one.<br  />
Note that N+1 line breaks are needed to make N empty lines.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>baseUrl</code>   </td><td class="markdownTableBodyNone"><code>null</code>   </td><td class="markdownTableBodyNone"><code>anchor</code>, <code>image</code>   </td><td class="markdownTableBodyNone"><p class="starttd">Server host for link <code>href</code> attributes and image <code>src</code> attributes relative to the root (the ones that start with <code>/</code>).<br  />
For example, with &lsquo;baseUrl = '<a href="http://asdf.com&rsquo;">http://asdf.com&amp;rsquo;</a><code>and</code><a href="/dir/subdir">...</a><code>the link in the text will be</code><a href="http://asdf.com/dir/subdir">http://asdf.com/dir/subdir</a><code>. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>linkBrackets<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>['[', ']']<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>anchor<code>,</code>image<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Surround links with these brackets.&lt;br/&gt;Set to</code>false<code>or</code>['', '']<code>to disable. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>pathRewrite<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>undefined<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>anchor<code>,</code>image<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; A function to rewrite link</code>href<code>attributes and image</code>src<code>attributes. Optional second argument is the metadata object.&lt;br/&gt;Applied before</code>baseUrl<code>. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>hideLinkHrefIfSameAsText<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>false<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>anchor<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; By default links are translated in the following way:&lt;br/&gt;</code><a href="link">text</a><code>=&gt; becomes =&gt;</code>text [link]<code>.&lt;br/&gt;If this option is set to</code>true<code>and</code>link<code>and</code>text<code>are the same,</code>[link]<code>will be omitted and only</code>text<code>will be present. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>ignoreHref<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>false<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>anchor<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Ignore all links. Only process internal text of anchor tags. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>noAnchorUrl<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>anchor<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Ignore anchor links (where</code>href='#...'<code>). \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>itemPrefix<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>' * '<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>unorderedList<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; String prefix for each list item. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>uppercase<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>heading<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; By default, headings (</code></p><h1><code>,</code><code>, etc) are uppercased.&lt;br/&gt;Set this to</code>false<code>to leave headings as they are. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>length<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>undefined<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>horizontalLine<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Length of the line. If undefined then</code>wordwrap<code>value is used. Falls back to 40 if that's also disabled. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>trimEmptyLines<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>blockquote<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Trim empty lines from blockquote.&lt;br/&gt;While empty lines should be preserved in HTML, space-saving behavior is chosen as default for convenience. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>uppercaseHeaderCells<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>true<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>dataTable<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; By default, heading cells (</code><code>) are uppercased.&lt;br/&gt;Set this to</code>false<code>to leave heading cells as they are. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>maxColumnWidth<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>60<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>dataTable<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Data table cell content will be wrapped to fit this width instead of global</code>wordwrap<code>limit.&lt;br/&gt;Set this to</code>undefined<code>in order to fall back to</code>wordwrap<code>limit. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>colSpacing<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>3<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>dataTable<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Number of spaces between data table columns. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>rowSpacing<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>0<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>dataTable<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Number of empty lines between data table rows. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>string<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>''<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>blockString<code>,</code>inlineString<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; A string to be inserted in place of a tag. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>prefix<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>''<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>inlineSurround<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; String prefix to be inserted before inline tag contents. \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>suffix<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>''<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>inlineSurround`    String suffix to be inserted after inline tag contents.    @paragraph autotoc_md17842 Deprecated format options    Old option    Applies&#160;to    Depr.    Rem.    Instead use      <code>noLinkBrackets</code>    <code>anchor</code>    8.1       <code>linkBrackets: false</code>    @subsection autotoc_md17843 Override formatting <code>formatters</code> option is an object that holds formatting functions. They can be assigned to format different elements in the <code>selectors</code> array. Each formatter is a function of four arguments that returns nothing. Arguments are: are<code>elem</code> - the HTML element to be processed by this formatter;;<code>walk</code> - recursive function to process the children of this element. Called as <code>walk(elem.children, builder)</code>;;<code>builder</code> - <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/base/src/block-text-builder.js">BlockTextBuilder</a> object. Manipulate this object state to build the output text;;<code>formatOptions</code> - options that are specified for a tag, along with this formatter (Note: if you need general html-to-text @ref "general-options" "options" - they are accessible via <code>builder.options</code>). Custom formatter example: @icode{javascript} const { convert } = require('html-to-text'); const html = 'Hello World'; const text = convert(html, { formatters: { // Create a formatter. 'fooBlockFormatter': function (elem, walk, builder, formatOptions) { builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 1 }); walk(elem.children, builder); builder.addInline('!'); builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 1 }); } }, selectors: [ // Assign it to `foo` tags. { selector: 'foo', format: 'fooBlockFormatter', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } } ] }); console.log(text); // Hello World! @endicode New in version 9: metadata object can be provided as the last optional argument of the <code>convert</code> function (or the function returned by <code>compile</code> function). It can be accessed by formatters as <code>builder.metadata</code>. Refer to <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/base/src/generic-formatters.js">generic formatters</a> of the base package and <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/src/text-formatters.js">text formatters</a> of this package for more examples. The easiest way to write your own is to pick an existing one and customize. Refer to <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/base/src/block-text-builder.js">BlockTextBuilder</a> for available functions and arguments. @subsubsection autotoc_md17844 Custom metadata If you need to supply extra information about your HTML documents to use in custom formatters - it can be done with the help of metadata object. It is supplied as an extra argument to the convert function: @icode{javascript} import { compile, convert } from 'html-to-text'; // for batch use: const compiledConvert = compile(options); let text = compiledConvert(html, metadata); // for single use: let text = convert(html, options, metadata); @endicode And it can be accessed within formatter functions as <code>builder.metadata</code>. @subsubsection autotoc_md17845 Call other formatters from a custom formatter Most of the times this is <em>not</em> what you actually need. Most practical problems can be solved with @ref "selectors" "selectors". If you really need to inspect the node internals, not just attributes, then you can do it like this: @icode{javascript} const options = { // ... formatters: { filterBlockFormatter: function (elem, walk, builder, formatOptions) { // all built-in and custom formatters available by name const blockFormatter = builder.options.formatters['block']; if (blockFormatter &amp;&amp; elem.children.some(/* predicate */)) { blockFormatter(elem, walk, builder, formatOptions); } } }, selectors: [ { selector: 'div.questionable', format: 'filterBlockFormatter', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } } ], // ... } @endicode @section autotoc_md17846 Example ExampleInput text: <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/test/test.html">test.html</a>aOutput text: <a href="https://github.com/html-to-text/node-html-to-text/blob/master/packages/html-to-text/test/test.txt">test.txt</a> @section autotoc_md17847 Contributors Contributors<a href="https://github.com/mlegenhausen">@mlegenhausen</a> - creator;;<a href="https://github.com/KillyMXI">@KillyMXI</a> - maintainer since 2020;;Everyone else who <a href="https://github.com/html-to-text/node-html-to-text/graphs/contributors">added something</a> to the tool or helped us shaping it via <a href="https://github.com/html-to-text/node-html-to-text/issues">issues</a> and <a href="https://github.com/html-to-text/node-html-to-text/pulls">PRs</a>. @section autotoc_md17848 License <a href="https://github.com/html-to-text/node-html-to-text/blob/master/LICENSE">MIT License</a> </h1>
<p class="endtd"></p>
</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_419d8c8aeebd770e17e0cfe6a8465005.html">html-to-text</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
