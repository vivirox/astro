<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/parseley Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_58025dee9b45d54f9069816eb73f8228.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">parseley Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><img src="https://github.com/mxxii/parseley/workflows/lint/badge.svg" alt="lint status badge" style="pointer-events: none;" class="inline"/> <img src="https://github.com/mxxii/parseley/workflows/test/badge.svg" alt="test status badge" style="pointer-events: none;" class="inline"/> <a href="https://github.com/mxxii/parseley/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-MIT-green.svg" alt="License: MIT" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/parseley"><img src="https://img.shields.io/npm/v/parseley?logo=npm" alt="npm" class="inline"/></a> <a href="https://www.npmjs.com/package/parseley"><img src="https://img.shields.io/npm/dw/parseley?color=informational&amp;logo=npm" alt="npm" class="inline"/></a> <a href="https://deno.land/x/parseley"><img src="https://img.shields.io/badge/deno.land%2Fx%2F-parseley-informational?logo=deno" alt="deno" class="inline"/></a></p>
<p>**Par**ser for CSS **sele**ctors.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md25648"></a>
Features</h1>
<ul>
<li>Convert CSS selector strings into objects that are easy to work with;</li>
<li>Serialize back if needed;</li>
<li>Get specificity for free.</li>
</ul>
<h1><a class="anchor" id="autotoc_md25649"></a>
Changelog</h1>
<p>Available here: <a href="https://github.com/mxxii/parseley/blob/main/CHANGELOG.md">CHANGELOG.md</a>.</p>
<h1><a class="anchor" id="autotoc_md25650"></a>
Install</h1>
<h2><a class="anchor" id="autotoc_md25651"></a>
Node</h2>
<div class="fragment"><div class="line">&gt; npm i parseley</div>
</div><!-- fragment --><div class="fragment"><div class="line">import * as parseley from &#39;parseley&#39;;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25652"></a>
Deno</h2>
<div class="fragment"><div class="line">import * as parseley from &#39;https://deno.land/x/parseley@.../parseley.ts&#39;;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md25653"></a>
Usage example</h1>
<div class="fragment"><div class="line">import { parse1, serialize, normalize } from &#39;parseley&#39;;</div>
<div class="line">import { inspect } from &#39;node:util&#39;;</div>
<div class="line"> </div>
<div class="line">const str = &#39;div#id1 &gt; .class2.class1[attr1]&#39;;</div>
<div class="line"> </div>
<div class="line">const ast = parse1(str);</div>
<div class="line">console.log(inspect(ast, { breakLength: 45, depth: null }));</div>
<div class="line"> </div>
<div class="line">const serialized = serialize(ast);</div>
<div class="line">console.log(`Serialized: &#39;${serialized}&#39;`);</div>
<div class="line"> </div>
<div class="line">normalize(ast);</div>
<div class="line">const normalized = serialize(ast);</div>
<div class="line">console.log(`Normalized: &#39;${normalized}&#39;`);</div>
</div><!-- fragment --><details >
<summary >
Example output</summary>
<p></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  type: &#39;compound&#39;,</div>
<div class="line">  list: [</div>
<div class="line">    {</div>
<div class="line">      type: &#39;class&#39;,</div>
<div class="line">      name: &#39;class2&#39;,</div>
<div class="line">      specificity: [ 0, 1, 0 ]</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      type: &#39;class&#39;,</div>
<div class="line">      name: &#39;class1&#39;,</div>
<div class="line">      specificity: [ 0, 1, 0 ]</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      type: &#39;attrPresence&#39;,</div>
<div class="line">      name: &#39;attr1&#39;,</div>
<div class="line">      namespace: null,</div>
<div class="line">      specificity: [ 0, 1, 0 ]</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      type: &#39;combinator&#39;,</div>
<div class="line">      combinator: &#39;&gt;&#39;,</div>
<div class="line">      left: {</div>
<div class="line">        type: &#39;compound&#39;,</div>
<div class="line">        list: [</div>
<div class="line">          {</div>
<div class="line">            type: &#39;tag&#39;,</div>
<div class="line">            name: &#39;div&#39;,</div>
<div class="line">            namespace: null,</div>
<div class="line">            specificity: [ 0, 0, 1 ]</div>
<div class="line">          },</div>
<div class="line">          {</div>
<div class="line">            type: &#39;id&#39;,</div>
<div class="line">            name: &#39;id1&#39;,</div>
<div class="line">            specificity: [ 1, 0, 0 ]</div>
<div class="line">          }</div>
<div class="line">        ],</div>
<div class="line">        specificity: [ 1, 0, 1 ]</div>
<div class="line">      },</div>
<div class="line">      specificity: [ 1, 0, 1 ]</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  specificity: [ 1, 3, 1 ]</div>
<div class="line">}</div>
<div class="line">Serialized: &#39;div#id1&gt;.class2.class1[attr1]&#39;</div>
<div class="line">Normalized: &#39;div#id1&gt;.class1.class2[attr1]&#39;</div>
</div><!-- fragment --><p></p>
</details>
<h1><a class="anchor" id="autotoc_md25654"></a>
Documentation</h1>
<ul>
<li><a href="https://github.com/mxxii/parseley/blob/main/docs/index.md">Functions</a></li>
<li><a href="https://github.com/mxxii/parseley/blob/main/docs/modules/Ast.md">AST types</a></li>
<li><a href="https://github.com/mxxii/parseley/blob/main/test/snapshots/snapshots.ts.md">Snapshots</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md25655"></a>
Input reference</h1>
<p><a href="https://www.w3.org/TR/selectors-4/#grammar">https://www.w3.org/TR/selectors-4/#grammar</a></p>
<p><a href="https://www.w3.org/TR/css-syntax-3/#token-diagrams">https://www.w3.org/TR/css-syntax-3/#token-diagrams</a></p>
<p>Terminology used in this project is more or less consistent to the spec, with some exceptions made for clarity. The term "type" is way too overloaded in particular, the term "tag" is used where appropriate instead.</p>
<p>Any pseudo elements are left for possible future implementation. I have no immediate need for them and they require some careful consideration.</p>
<h1><a class="anchor" id="autotoc_md25656"></a>
Output AST</h1>
<p>Consistency: overall AST shape is always the same. This makes client code simpler, at least for a certain processing tasks.</p>
<p>For example, always use compound selectors, even when there is only one simple selector inside.</p>
<p>Comma-separated selectors might not be needed for every use case. So there are two functions - one can parse commas and always returns the top-level list regardless of the comma presence in a particular selector, and the other can't parse commas and returns a compound selector AST directly.</p>
<p>Complex selectors are represented in the way that makes the left side to be an another condition on the right side element. This was made with the right-to-left processing direction in mind. One consequence of this is that there is no such thing as a "complex selector" node in the AST hierarchy, but there are "combinator" nodes attached to "compound selector" nodes.</p>
<p>All AST nodes have their specificity computed (except the top-level list of comma-separated selectors where it doesn't really make sense).</p>
<h1><a class="anchor" id="autotoc_md25657"></a>
Motivation and inspiration</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Hits   </th><th class="markdownTableHeadNone">Misses    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/leaverou/parsel">parsel</a>   </td><td class="markdownTableBodyNone">Sensible AST; specificity calculation; cool name   </td><td class="markdownTableBodyNone">Not friendly to node.js; based on regex    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/fb55/css-what">css-what</a> and <a href="https://github.com/fb55/css-select">css-select</a>   </td><td class="markdownTableBodyNone">The idea to process complex selectors in right-to-left order   </td><td class="markdownTableBodyNone"><code>css-select</code> is a solution for a different problem compared to what I needed; <code>css-what</code> produces only a list of tokens    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/gajus/scalpel">scalpel</a>   </td><td class="markdownTableBodyNone">Introduced me to <a href="https://nearley.js.org/">nearley</a> parsing toolkit (albeit I'm not using it here anymore)   </td><td class="markdownTableBodyNone">AST it produces is very far from what I can use    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/mdevils/css-selector-parser">css-selector-parser</a>   </td><td class="markdownTableBodyNone">Configurable and lightweight   </td><td class="markdownTableBodyNone">Again, AST is far from my needs   </td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_58025dee9b45d54f9069816eb73f8228.html">parseley</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
