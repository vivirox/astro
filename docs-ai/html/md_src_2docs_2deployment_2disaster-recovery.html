<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: Disaster Recovery Plan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_src_2docs_2deployment_2disaster-recovery.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Disaster Recovery Plan</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md37139"></a></p>
<h1><a class="anchor" id="autotoc_md37140"></a>
Overview</h1>
<p>This document outlines the disaster recovery procedures for the Gradiant Astro application. It provides step-by-step instructions for recovering from various types of failures and outages.</p>
<h1><a class="anchor" id="autotoc_md37141"></a>
Quick Response Guide</h1>
<h2><a class="anchor" id="autotoc_md37142"></a>
Site Down / Inaccessible</h2>
<ol type="1">
<li><b>Check Monitoring Alerts</b><ul>
<li>Review Slack alerts for specific error details</li>
<li>Check GitHub Actions monitoring workflow results</li>
</ul>
</li>
<li><b>Verify Deployment Status</b><ul>
<li>Check Cloudflare Pages deployment status</li>
<li>Verify DNS resolution is working properly</li>
</ul>
</li>
<li><b>Initial Recovery Steps</b><ul>
<li>If the issue is with the latest deployment, initiate a rollback: <div class="fragment"><div class="line"># Trigger rollback workflow in GitHub Actions</div>
<div class="line">gh workflow run rollback.yml -f environment=production</div>
</div><!-- fragment --></li>
<li>If DNS issue, check Cloudflare DNS settings</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md37143"></a>
Database Issues</h2>
<ol type="1">
<li><b>Check Database Connection</b><ul>
<li>Verify Supabase status at <a href="https://status.supabase.com">Supabase Status</a></li>
<li>Run health check against the API endpoint manually: <div class="fragment"><div class="line">curl -v https://app.gradiantastro.com/api/health</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><b>Database Recovery Steps</b><ul>
<li><p class="startli">If database corruption is suspected, restore from the latest backup:</p>
<div class="fragment"><div class="line"># List available backups</div>
<div class="line">aws s3 ls s3://[BACKUP_BUCKET]/database-backups/ --profile gradiant</div>
<div class="line"> </div>
<div class="line"># Download the latest backup</div>
<div class="line">aws s3 cp s3://[BACKUP_BUCKET]/database-backups/[LATEST_BACKUP] ./backup.sql.gz --profile gradiant</div>
<div class="line"> </div>
<div class="line"># Decompress the backup</div>
<div class="line">gunzip backup.sql.gz</div>
<div class="line"> </div>
<div class="line"># Restore the database</div>
<div class="line">PGPASSWORD=[PASSWORD] psql -h [HOST] -U [USER] -d [DATABASE] &lt; backup.sql</div>
</div><!-- fragment --></li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md37144"></a>
API Issues</h2>
<ol type="1">
<li><b>Check API Health</b><ul>
<li>Verify API routes are responding correctly: <div class="fragment"><div class="line">curl -v https://app.gradiantastro.com/api/health</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><b>API Recovery Steps</b><ul>
<li>Check application logs for specific error details</li>
<li>Verify environment variables are correctly set</li>
<li>If necessary, redeploy the latest stable version</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md37145"></a>
Backup and Restore Procedures</h1>
<h2><a class="anchor" id="autotoc_md37146"></a>
Database Backups</h2>
<p>Backups are automatically created every 6 hours and stored in AWS S3. The backup workflow:</p>
<ol type="1">
<li>Creates a full PostgreSQL dump of the Supabase database</li>
<li>Compresses the backup file with gzip</li>
<li>Uploads to S3 with proper encryption</li>
<li>Maintains the last 20 backups with rotation</li>
</ol>
<h2><a class="anchor" id="autotoc_md37147"></a>
Manual Backup Procedure</h2>
<p>If an immediate backup is needed:</p>
<ol type="1">
<li><p class="startli">Trigger the backup workflow manually:</p>
<div class="fragment"><div class="line">gh workflow run backup.yml</div>
</div><!-- fragment --></li>
<li><p class="startli">Or create a manual backup:</p>
<div class="fragment"><div class="line"># Set environment variables</div>
<div class="line">export PGPASSWORD=[PASSWORD]</div>
<div class="line">export TIMESTAMP=$(date +%Y%m%d_%H%M%S)</div>
<div class="line"> </div>
<div class="line"># Create backup</div>
<div class="line">pg_dump -h [HOST] -U [USER] -d [DATABASE] -F p &gt; supabase_backup_${TIMESTAMP}.sql</div>
<div class="line"> </div>
<div class="line"># Compress</div>
<div class="line">gzip supabase_backup_${TIMESTAMP}.sql</div>
<div class="line"> </div>
<div class="line"># Upload to S3</div>
<div class="line">aws s3 cp supabase_backup_${TIMESTAMP}.sql.gz s3://[BACKUP_BUCKET]/database-backups/ --profile gradiant</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md37148"></a>
Restore Procedure</h2>
<p>To restore a database from backup:</p>
<ol type="1">
<li><p class="startli">Identify the backup to restore:</p>
<div class="fragment"><div class="line">aws s3 ls s3://[BACKUP_BUCKET]/database-backups/ --profile gradiant</div>
</div><!-- fragment --></li>
<li><p class="startli">Download and restore:</p>
<div class="fragment"><div class="line"># Download</div>
<div class="line">aws s3 cp s3://[BACKUP_BUCKET]/database-backups/[BACKUP_FILENAME] ./ --profile gradiant</div>
<div class="line"> </div>
<div class="line"># Decompress</div>
<div class="line">gunzip [BACKUP_FILENAME]</div>
<div class="line"> </div>
<div class="line"># Restore</div>
<div class="line">PGPASSWORD=[PASSWORD] psql -h [HOST] -U [USER] -d [DATABASE] &lt; [BACKUP_SQL_FILE]</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md37149"></a>
Deployment Rollback</h1>
<h2><a class="anchor" id="autotoc_md37150"></a>
Automated Rollback</h2>
<p>The system supports automated rollbacks through GitHub Actions:</p>
<ol type="1">
<li>Navigate to GitHub Actions tab in the repository</li>
<li>Select the "Rollback Deployment" workflow</li>
<li>Click "Run workflow"</li>
<li>Select environment (production or staging)</li>
<li>Optionally specify a specific deployment tag to roll back to</li>
<li>Click "Run workflow"</li>
</ol>
<h2><a class="anchor" id="autotoc_md37151"></a>
Manual Rollback</h2>
<p>If GitHub Actions is unavailable:</p>
<ol type="1">
<li>Check out the repository locally</li>
<li><p class="startli">View available deployment tags:</p>
<div class="fragment"><div class="line">git fetch --tags</div>
<div class="line">git tag -l &quot;production-*&quot; --sort=-committerdate</div>
</div><!-- fragment --></li>
<li><p class="startli">Check out the last stable deployment:</p>
<div class="fragment"><div class="line">git checkout [TAG_NAME]</div>
</div><!-- fragment --></li>
<li><p class="startli">Build and deploy manually:</p>
<div class="fragment"><div class="line"># Install dependencies</div>
<div class="line">pnpm install</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">NODE_ENV=production pnpm build</div>
<div class="line"> </div>
<div class="line"># Deploy using Wrangler CLI</div>
<div class="line">npx wrangler pages deploy dist --project-name=gradiant-astro --branch=main</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md37152"></a>
Incident Response Protocol</h1>
<h2><a class="anchor" id="autotoc_md37153"></a>
Severity Levels</h2>
<ul>
<li><b>Critical (P0)</b>: Complete service outage, data breach</li>
<li><b>Major (P1)</b>: Partial service outage, major feature unavailable</li>
<li><b>Minor (P2)</b>: Non-critical feature unavailable, performance degradation</li>
<li><b>Low (P3)</b>: Cosmetic issues, minor bugs</li>
</ul>
<h2><a class="anchor" id="autotoc_md37154"></a>
Response Procedures</h2>
<ol type="1">
<li><b>Identification</b><ul>
<li>Determine severity level</li>
<li>Document initial findings</li>
<li>Notify appropriate team members</li>
</ul>
</li>
<li><b>Containment</b><ul>
<li>Implement immediate mitigation (e.g., rollback)</li>
<li>Isolate affected components</li>
<li>Prevent further damage</li>
</ul>
</li>
<li><b>Eradication</b><ul>
<li>Identify and fix the root cause</li>
<li>Deploy and test fixes</li>
<li>Verify security of all components</li>
</ul>
</li>
<li><b>Recovery</b><ul>
<li>Restore service to normal operation</li>
<li>Verify data integrity</li>
<li>Monitor for any recurring issues</li>
</ul>
</li>
<li><b>Post-Incident</b><ul>
<li>Conduct thorough analysis</li>
<li>Document lessons learned</li>
<li>Implement preventative measures</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md37155"></a>
Contact Information</h1>
<h2><a class="anchor" id="autotoc_md37156"></a>
Primary Contacts</h2>
<ul>
<li><b>DevOps Lead</b>: [Name] - [Phone] - [Email]</li>
<li><b>Backend Lead</b>: [Name] - [Phone] - [Email]</li>
<li><b>Frontend Lead</b>: [Name] - [Phone] - [Email]</li>
<li><b>Security Lead</b>: [Name] - [Phone] - [Email]</li>
</ul>
<h2><a class="anchor" id="autotoc_md37157"></a>
External Services</h2>
<ul>
<li><b>Cloudflare Support</b>: <a href="https://dash.cloudflare.com/support">Support Dashboard</a></li>
<li><b>Supabase Support</b>: <a href="https://supabase.com/support">Support Portal</a></li>
<li><b>AWS Support</b>: <a href="https://console.aws.amazon.com/support">Support Center</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md37158"></a>
Emergency Access Procedures</h1>
<h2><a class="anchor" id="autotoc_md37159"></a>
Emergency Access to Production</h2>
<p>If emergency access to production is required:</p>
<ol type="1">
<li>Request temporary credentials from the DevOps lead</li>
<li>All emergency access is logged and audited</li>
<li>Credentials are revoked after the incident</li>
</ol>
<h2><a class="anchor" id="autotoc_md37160"></a>
Break Glass Procedure</h2>
<p>In case primary access methods are unavailable:</p>
<ol type="1">
<li>Contact the DevOps and Security leads</li>
<li>Use emergency credentials stored in the company password manager</li>
<li>All "break glass" access is logged, audited, and requires post-incident review</li>
</ol>
<h1><a class="anchor" id="autotoc_md37161"></a>
Recovery Testing</h1>
<p>The disaster recovery plan should be tested quarterly:</p>
<ol type="1">
<li>Schedule a disaster recovery drill</li>
<li>Simulate failures in controlled environments</li>
<li>Practice recovery procedures</li>
<li>Document results and improve procedures</li>
</ol>
<h1><a class="anchor" id="autotoc_md37162"></a>
Appendices</h1>
<h2><a class="anchor" id="autotoc_md37163"></a>
Required Credentials</h2>
<ul>
<li>GitHub repository access</li>
<li>AWS S3 access</li>
<li>Database credentials</li>
<li>Cloudflare access</li>
</ul>
<h2><a class="anchor" id="autotoc_md37164"></a>
Recovery Checklists</h2>
<h3><a class="anchor" id="autotoc_md37165"></a>
Site Outage Checklist</h3>
<ul class="check">
<li class="unchecked">Verify monitoring alerts</li>
</ul>
<ul class="check">
<li class="unchecked">Check deployment status</li>
</ul>
<ul class="check">
<li class="unchecked">Examine application logs</li>
</ul>
<ul class="check">
<li class="unchecked">Test API endpoints</li>
</ul>
<ul class="check">
<li class="unchecked">Check database connectivity</li>
</ul>
<ul class="check">
<li class="unchecked">Verify third-party integrations</li>
</ul>
<ul class="check">
<li class="unchecked">Test user authentication</li>
</ul>
<ul class="check">
<li class="unchecked">Initiate rollback if necessary</li>
</ul>
<h3><a class="anchor" id="autotoc_md37166"></a>
Database Recovery Checklist</h3>
<ul class="check">
<li class="unchecked">Identify corruption scope</li>
</ul>
<ul class="check">
<li class="unchecked">Select appropriate backup</li>
</ul>
<ul class="check">
<li class="unchecked">Verify backup integrity</li>
</ul>
<ul class="check">
<li class="unchecked">Restore to staging first if possible</li>
</ul>
<ul class="check">
<li class="unchecked">Verify restored data</li>
</ul>
<ul class="check">
<li class="unchecked">Update connection strings if necessary</li>
</ul>
<ul class="check">
<li class="unchecked">Monitor system after recovery</li>
</ul>
<h2><a class="anchor" id="autotoc_md37167"></a>
Maintenance Window Procedures</h2>
<p>For planned maintenance:</p>
<ol type="1">
<li>Schedule at least 48 hours in advance</li>
<li>Post notification to status page</li>
<li>Implement changes during low-traffic periods</li>
<li>Have rollback plan prepared</li>
<li>Verify all systems after maintenance </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
