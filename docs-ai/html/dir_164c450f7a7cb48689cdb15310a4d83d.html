<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/tinyexec Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_164c450f7a7cb48689cdb15310a4d83d.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">tinyexec Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<blockquote class="doxtable">
<p>A minimal package for executing commands </p>
</blockquote>
<p>This package was created to provide a minimal way of interacting with child processes without having to manually deal with streams, piping, etc.</p>
<h1><a class="anchor" id="autotoc_md32845"></a>
Installing</h1>
<div class="fragment"><div class="line">$ npm i -S tinyexec</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md32846"></a>
Usage</h1>
<p>A process can be spawned and awaited like so:</p>
<div class="fragment"><div class="line">import {x} from &#39;tinyexec&#39;;</div>
<div class="line"> </div>
<div class="line">const result = await x(&#39;ls&#39;, [&#39;-l&#39;]);</div>
<div class="line"> </div>
<div class="line">// result.stdout - the stdout as a string</div>
<div class="line">// result.stderr - the stderr as a string</div>
<div class="line">// result.exitCode - the process exit code as a number</div>
</div><!-- fragment --><p>You may also iterate over the lines of output via an async loop:</p>
<div class="fragment"><div class="line">import {x} from &#39;tinyexec&#39;;</div>
<div class="line"> </div>
<div class="line">const proc = x(&#39;ls&#39;, [&#39;-l&#39;]);</div>
<div class="line"> </div>
<div class="line">for await (const line of proc) {</div>
<div class="line">  // line will be from stderr/stdout in the order you&#39;d see it in a term</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32847"></a>
Options</h2>
<p>Options can be passed to have finer control over spawning of the process:</p>
<div class="fragment"><div class="line">await x(&#39;ls&#39;, [], {</div>
<div class="line">  timeout: 1000</div>
<div class="line">});</div>
</div><!-- fragment --><p>The options object can have the following properties:</p>
<ul>
<li><code>signal</code> - an <code>AbortSignal</code> to allow aborting of the execution</li>
<li><code>timeout</code> - time in milliseconds at which the process will be forceably killed</li>
<li><code>persist</code> - if <code>true</code>, the process will continue after the host exits</li>
<li><code>stdin</code> - another <code>Result</code> can be used as the input to this process</li>
<li><code>nodeOptions</code> - any valid options to node's underlying <code>spawn</code> function</li>
<li><code>throwOnError</code> - if true, non-zero exit codes will throw an error</li>
</ul>
<h2><a class="anchor" id="autotoc_md32848"></a>
Piping to another process</h2>
<p>You can pipe a process to another via the <code>pipe</code> method:</p>
<div class="fragment"><div class="line">const proc1 = x(&#39;ls&#39;, [&#39;-l&#39;]);</div>
<div class="line">const proc2 = proc1.pipe(&#39;grep&#39;, [&#39;.js&#39;]);</div>
<div class="line">const result = await proc2;</div>
<div class="line"> </div>
<div class="line">console.log(result.stdout);</div>
</div><!-- fragment --><p><code>pipe</code> takes the same options as a regular execution. For example, you can pass a timeout to the pipe call:</p>
<div class="fragment"><div class="line">proc1.pipe(&#39;grep&#39;, [&#39;.js&#39;], {</div>
<div class="line">  timeout: 2000</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32849"></a>
Killing a process</h2>
<p>You can kill the process via the <code>kill</code> method:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.kill();</div>
<div class="line"> </div>
<div class="line">// or with a signal</div>
<div class="line">proc.kill(&#39;SIGHUP&#39;);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32850"></a>
Node modules/binaries</h2>
<p>By default, node's available binaries from <code>node_modules</code> will be accessible in your command.</p>
<p>For example, in a repo which has <code>eslint</code> installed:</p>
<div class="fragment"><div class="line">await x(&#39;eslint&#39;, [&#39;.&#39;]);</div>
</div><!-- fragment --><p>In this example, <code>eslint</code> will come from the locally installed <code>node_modules</code>.</p>
<h2><a class="anchor" id="autotoc_md32851"></a>
Using an abort signal</h2>
<p>An abort signal can be passed to a process in order to abort it at a later time. This will result in the process being killed and <code>aborted</code> being set to <code>true</code>.</p>
<div class="fragment"><div class="line">const aborter = new AbortController();</div>
<div class="line">const proc = x(&#39;node&#39;, [&#39;./foo.mjs&#39;], {</div>
<div class="line">  signal: aborter.signal</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// elsewhere...</div>
<div class="line">aborter.abort();</div>
<div class="line"> </div>
<div class="line">await proc;</div>
<div class="line"> </div>
<div class="line">proc.aborted; // true</div>
<div class="line">proc.killed; // true</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32852"></a>
Using with command strings</h2>
<p>If you need to continue supporting commands as strings (e.g. "command arg0 arg1"), you can use <a href="https://github.com/TrySound/args-tokenizer">args-tokenizer</a>, a lightweight library for parsing shell command strings into an array.</p>
<div class="fragment"><div class="line">import {x} from &#39;tinyexec&#39;;</div>
<div class="line">import {tokenizeArgs} from &#39;args-tokenizer&#39;;</div>
<div class="line"> </div>
<div class="line">const commandString = &#39;echo &quot;Hello, World!&quot;&#39;;</div>
<div class="line">const [command, ...args] = tokenizeArgs(commandString);</div>
<div class="line">const result = await x(command, args);</div>
<div class="line"> </div>
<div class="line">result.stdout; // Hello, World!</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md32853"></a>
API</h1>
<p>Calling <code>x(command[, args])</code> returns an awaitable <code>Result</code> which has the following API methods and properties available:</p>
<h2><a class="anchor" id="autotoc_md32854"></a>
<code>pipe(command[, args[, options]])</code></h2>
<p>Pipes the current command to another. For example:</p>
<div class="fragment"><div class="line">x(&#39;ls&#39;, [&#39;-l&#39;])</div>
<div class="line">  .pipe(&#39;grep&#39;, [&#39;js&#39;]);</div>
</div><!-- fragment --><p>The parameters are as follows:</p>
<ul>
<li><code>command</code> - the command to execute (<em>without any arguments</em>)</li>
<li><code>args</code> - an array of arguments</li>
<li><code>options</code> - options object</li>
</ul>
<h2><a class="anchor" id="autotoc_md32855"></a>
<code>process</code></h2>
<p>The underlying node <code>ChildProcess</code>. For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.process; // ChildProcess;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32856"></a>
<code>kill([signal])</code></h2>
<p>Kills the current process with the specified signal. By default, this will use the <code>SIGTERM</code> signal.</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.kill();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32857"></a>
<code>pid</code></h2>
<p>The current process ID. For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.pid; // number</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32858"></a>
<code>aborted</code></h2>
<p>Whether the process has been aborted or not (via the <code>signal</code> originally passed in the options object).</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.aborted; // bool</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32859"></a>
<code>killed</code></h2>
<p>Whether the process has been killed or not (e.g. via <code>kill()</code> or an abort signal).</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.killed; // bool</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32860"></a>
<code>exitCode</code></h2>
<p>The exit code received when the process completed execution.</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.exitCode; // number (e.g. 1)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md32861"></a>
Comparison with other libraries</h1>
<p><code>tinyexec</code> aims to provide a lightweight layer on top of Node's own <code>child_process</code> API.</p>
<p>Some clear benefits compared to other libraries are that <code>tinyexec</code> will be much lighter, have a much smaller footprint and will have a less abstract interface (less "magic"). It will also have equal security and cross-platform support to popular alternatives.</p>
<p>There are various features other libraries include which we are unlikely to ever implement, as they would prevent us from providing a lightweight layer.</p>
<p>For example, if you'd like write scripts rather than individual commands, and prefer to use templating, we'd definitely recommend <a href="https://github.com/google/zx">zx</a>. zx is a much higher level library which does some of the same work <code>tinyexec</code> does but behind a template string interface.</p>
<p>Similarly, libraries like <code>execa</code> will provide helpers for various things like passing files as input to processes. We opt not to support features like this since many of them are easy to do yourself (using Node's own APIs). </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_164c450f7a7cb48689cdb15310a4d83d.html">tinyexec</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
