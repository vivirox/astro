<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/redis Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_d64ca83e691c902eae0599f6b4b824ff.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">redis Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://github.com/redis/node-redis/actions/workflows/tests.yml"><img src="https://img.shields.io/github/actions/workflow/status/redis/node-redis/tests.yml?branch=master" alt="Tests" class="inline"/></a> <a href="https://codecov.io/gh/redis/node-redis"><img src="https://codecov.io/gh/redis/node-redis/branch/master/graph/badge.svg?token=xcfqHhJC37" alt="Coverage" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/redis/node-redis/blob/master/LICENSE"><img src="https://img.shields.io/github/license/redis/node-redis.svg" alt="License" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://discord.gg/redis"><img src="https://img.shields.io/discord/697882427875393627.svg?style=social&amp;logo=discord" alt="Discord" style="pointer-events: none;" class="inline"/></a> <a href="https://www.twitch.tv/redisinc"><img src="https://img.shields.io/twitch/status/redisinc?style=social" alt="Twitch" class="inline"/></a> <a href="https://www.youtube.com/redisinc"><img src="https://img.shields.io/youtube/channel/views/UCD78lHSwYqMlyetR0_P4Vig?style=social" alt="YouTube" class="inline"/></a> <a href="https://twitter.com/redisinc"><img src="https://img.shields.io/twitter/follow/redisinc?style=social" alt="Twitter" class="inline"/></a></p>
<p>node-redis is a modern, high performance <a href="https://redis.io">Redis</a> client for Node.js.</p>
<h1><a class="anchor" id="autotoc_md28072"></a>
How do I Redis?</h1>
<p><a href="https://university.redis.com/">Learn for free at Redis University</a></p>
<p><a href="https://launchpad.redis.com/">Build faster with the Redis Launchpad</a></p>
<p><a href="https://redis.com/try-free/">Try the Redis Cloud</a></p>
<p><a href="https://developer.redis.com/">Dive in developer tutorials</a></p>
<p><a href="https://redis.com/community/">Join the Redis community</a></p>
<p><a href="https://redis.com/company/careers/jobs/">Work at Redis</a></p>
<h1><a class="anchor" id="autotoc_md28073"></a>
Packages</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="./">redis</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/redis"><img src="https://img.shields.io/npm/dm/redis.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/redis"><img src="https://img.shields.io/npm/v/redis.svg" alt="Version" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="./packages/client">@redis/client</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@redis/client"><img src="https://img.shields.io/npm/dm/@redis/client.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@redis/client"><img src="https://img.shields.io/npm/v/@redis/client.svg" alt="Version" style="pointer-events: none;" class="inline"/></a> <a href="https://redis.js.org/documentation/client/"><img src="https://img.shields.io/badge/-documentation-dc382c" alt="Docs" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="./packages/bloom">@redis/bloom</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@redis/bloom"><img src="https://img.shields.io/npm/dm/@redis/bloom.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@redis/bloom"><img src="https://img.shields.io/npm/v/@redis/bloom.svg" alt="Version" style="pointer-events: none;" class="inline"/></a> <a href="https://redis.js.org/documentation/bloom/"><img src="https://img.shields.io/badge/-documentation-dc382c" alt="Docs" class="inline"/></a> <a href="https://oss.redis.com/redisbloom/">Redis Bloom</a> commands    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="./packages/graph">@redis/graph</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@redis/graph"><img src="https://img.shields.io/npm/dm/@redis/graph.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@redis/graph"><img src="https://img.shields.io/npm/v/@redis/graph.svg" alt="Version" style="pointer-events: none;" class="inline"/></a> <a href="https://redis.js.org/documentation/graph/"><img src="https://img.shields.io/badge/-documentation-dc382c" alt="Docs" class="inline"/></a> <a href="https://oss.redis.com/redisgraph/">Redis Graph</a> commands    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="./packages/json">@redis/json</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@redis/json"><img src="https://img.shields.io/npm/dm/@redis/json.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@redis/json"><img src="https://img.shields.io/npm/v/@redis/json.svg" alt="Version" style="pointer-events: none;" class="inline"/></a> <a href="https://redis.js.org/documentation/json/"><img src="https://img.shields.io/badge/-documentation-dc382c" alt="Docs" class="inline"/></a> <a href="https://oss.redis.com/redisjson/">Redis JSON</a> commands    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="./packages/search">@redis/search</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@redis/search"><img src="https://img.shields.io/npm/dm/@redis/search.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@redis/search"><img src="https://img.shields.io/npm/v/@redis/search.svg" alt="Version" style="pointer-events: none;" class="inline"/></a> <a href="https://redis.js.org/documentation/search/"><img src="https://img.shields.io/badge/-documentation-dc382c" alt="Docs" class="inline"/></a> <a href="https://oss.redis.com/redisearch/">RediSearch</a> commands    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="./packages/time-series">@redis/time-series</a>   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@redis/time-series"><img src="https://img.shields.io/npm/dm/@redis/time-series.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@redis/time-series"><img src="https://img.shields.io/npm/v/@redis/time-series.svg" alt="Version" style="pointer-events: none;" class="inline"/></a> <a href="https://redis.js.org/documentation/time-series/"><img src="https://img.shields.io/badge/-documentation-dc382c" alt="Docs" class="inline"/></a> <a href="https://oss.redis.com/redistimeseries/">Redis Time-Series</a> commands   </td></tr>
</table>
<blockquote class="doxtable">
<p>:warning: In version 4.1.0 we moved our subpackages from <code>@node-redis</code> to <code>@redis</code>. If you're just using <code>npm install redis</code>, you don't need to do anything—it'll upgrade automatically. If you're using the subpackages directly, you'll need to point to the new scope (e.g. <code>@redis/client</code> instead of <code>@node-redis/client</code>). </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md28074"></a>
Installation</h1>
<p>Start a redis via docker:</p>
<div class="fragment"><div class="line"> bash</div>
<div class="line">docker run -p 6379:6379 -it redis/redis-stack-server:latest</div>
</div><!-- fragment --><p>To install node-redis, simply:</p>
<div class="fragment"><div class="line">npm install redis</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>:warning: The new interface is clean and cool, but if you have an existing codebase, you'll want to read the migration guide. </p>
</blockquote>
<p>Looking for a high-level library to handle object mapping? See <a href="https://github.com/redis/redis-om-node">redis-om-node</a>!</p>
<h1><a class="anchor" id="autotoc_md28075"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md28076"></a>
Basic Example</h2>
<div class="fragment"><div class="line">import { createClient } from &#39;redis&#39;;</div>
<div class="line"> </div>
<div class="line">const client = await createClient()</div>
<div class="line">  .on(&#39;error&#39;, err =&gt; console.log(&#39;Redis Client Error&#39;, err))</div>
<div class="line">  .connect();</div>
<div class="line"> </div>
<div class="line">await client.set(&#39;key&#39;, &#39;value&#39;);</div>
<div class="line">const value = await client.get(&#39;key&#39;);</div>
<div class="line">await client.disconnect();</div>
</div><!-- fragment --><p>The above code connects to localhost on port 6379. To connect to a different host or port, use a connection string in the format <code>redis[s]://[[username][:password]@][host][:port][/db-number]</code>:</p>
<div class="fragment"><div class="line">createClient({</div>
<div class="line">  url: &#39;redis://alice:foobared@awesome.redis.server:6380&#39;</div>
<div class="line">});</div>
</div><!-- fragment --><p>You can also use discrete parameters, UNIX sockets, and even TLS to connect. Details can be found in the client configuration guide.</p>
<p>To check if the the client is connected and ready to send commands, use <code>client.isReady</code> which returns a boolean. <code>client.isOpen</code> is also available. This returns <code>true</code> when the client's underlying socket is open, and <code>false</code> when it isn't (for example when the client is still connecting or reconnecting after a network error).</p>
<h2><a class="anchor" id="autotoc_md28077"></a>
Redis Commands</h2>
<p>There is built-in support for all of the <a href="https://redis.io/commands">out-of-the-box Redis commands</a>. They are exposed using the raw Redis command names (<code>HSET</code>, <code>HGETALL</code>, etc.) and a friendlier camel-cased version (<code>hSet</code>, <code>hGetAll</code>, etc.):</p>
<div class="fragment"><div class="line">// raw Redis commands</div>
<div class="line">await client.HSET(&#39;key&#39;, &#39;field&#39;, &#39;value&#39;);</div>
<div class="line">await client.HGETALL(&#39;key&#39;);</div>
<div class="line"> </div>
<div class="line">// friendly JavaScript commands</div>
<div class="line">await client.hSet(&#39;key&#39;, &#39;field&#39;, &#39;value&#39;);</div>
<div class="line">await client.hGetAll(&#39;key&#39;);</div>
</div><!-- fragment --><p>Modifiers to commands are specified using a JavaScript object:</p>
<div class="fragment"><div class="line">await client.set(&#39;key&#39;, &#39;value&#39;, {</div>
<div class="line">  EX: 10,</div>
<div class="line">  NX: true</div>
<div class="line">});</div>
</div><!-- fragment --><p>Replies will be transformed into useful data structures:</p>
<div class="fragment"><div class="line">await client.hGetAll(&#39;key&#39;); // { field1: &#39;value1&#39;, field2: &#39;value2&#39; }</div>
<div class="line">await client.hVals(&#39;key&#39;); // [&#39;value1&#39;, &#39;value2&#39;]</div>
</div><!-- fragment --><p><code>Buffer</code>s are supported as well:</p>
<div class="fragment"><div class="line">await client.hSet(&#39;key&#39;, &#39;field&#39;, Buffer.from(&#39;value&#39;)); // &#39;OK&#39;</div>
<div class="line">await client.hGetAll(</div>
<div class="line">  commandOptions({ returnBuffers: true }),</div>
<div class="line">  &#39;key&#39;</div>
<div class="line">); // { field: &lt;Buffer 76 61 6c 75 65&gt; }</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28078"></a>
Unsupported Redis Commands</h2>
<p>If you want to run commands and/or use arguments that Node Redis doesn't know about (yet!) use <code>.sendCommand()</code>:</p>
<div class="fragment"><div class="line">await client.sendCommand([&#39;SET&#39;, &#39;key&#39;, &#39;value&#39;, &#39;NX&#39;]); // &#39;OK&#39;</div>
<div class="line"> </div>
<div class="line">await client.sendCommand([&#39;HGETALL&#39;, &#39;key&#39;]); // [&#39;key1&#39;, &#39;field1&#39;, &#39;key2&#39;, &#39;field2&#39;]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28079"></a>
Transactions (Multi/Exec)</h2>
<p>Start a <a href="https://redis.io/topics/transactions">transaction</a> by calling <code>.multi()</code>, then chaining your commands. When you're done, call <code>.exec()</code> and you'll get an array back with your results:</p>
<div class="fragment"><div class="line">await client.set(&#39;another-key&#39;, &#39;another-value&#39;);</div>
<div class="line"> </div>
<div class="line">const [setKeyReply, otherKeyValue] = await client</div>
<div class="line">  .multi()</div>
<div class="line">  .set(&#39;key&#39;, &#39;value&#39;)</div>
<div class="line">  .get(&#39;another-key&#39;)</div>
<div class="line">  .exec(); // [&#39;OK&#39;, &#39;another-value&#39;]</div>
</div><!-- fragment --><p>You can also <a href="https://redis.io/topics/transactions#optimistic-locking-using-check-and-set">watch</a> keys by calling <code>.watch()</code>. Your transaction will abort if any of the watched keys change.</p>
<p>To dig deeper into transactions, check out the Isolated Execution Guide.</p>
<h2><a class="anchor" id="autotoc_md28080"></a>
Blocking Commands</h2>
<p>Any command can be run on a new connection by specifying the <code>isolated</code> option. The newly created connection is closed when the command's <code>Promise</code> is fulfilled.</p>
<p>This pattern works especially well for blocking commands—such as <code>BLPOP</code> and <code>BLMOVE</code>:</p>
<div class="fragment"><div class="line">import { commandOptions } from &#39;redis&#39;;</div>
<div class="line"> </div>
<div class="line">const blPopPromise = client.blPop(</div>
<div class="line">  commandOptions({ isolated: true }),</div>
<div class="line">  &#39;key&#39;,</div>
<div class="line">  0</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">await client.lPush(&#39;key&#39;, [&#39;1&#39;, &#39;2&#39;]);</div>
<div class="line"> </div>
<div class="line">await blPopPromise; // &#39;2&#39;</div>
</div><!-- fragment --><p>To learn more about isolated execution, check out the guide.</p>
<h2><a class="anchor" id="autotoc_md28081"></a>
Pub/Sub</h2>
<p>See the Pub/Sub overview.</p>
<h2><a class="anchor" id="autotoc_md28082"></a>
Scan Iterator</h2>
<p><a href="https://redis.io/commands/scan"><code>SCAN</code></a> results can be looped over using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/asyncIterator">async iterators</a>:</p>
<div class="fragment"><div class="line">for await (const key of client.scanIterator()) {</div>
<div class="line">  // use the key!</div>
<div class="line">  await client.get(key);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This works with <code>HSCAN</code>, <code>SSCAN</code>, and <code>ZSCAN</code> too:</p>
<div class="fragment"><div class="line">for await (const { field, value } of client.hScanIterator(&#39;hash&#39;)) {}</div>
<div class="line">for await (const member of client.sScanIterator(&#39;set&#39;)) {}</div>
<div class="line">for await (const { score, value } of client.zScanIterator(&#39;sorted-set&#39;)) {}</div>
</div><!-- fragment --><p>You can override the default options by providing a configuration object:</p>
<div class="fragment"><div class="line">client.scanIterator({</div>
<div class="line">  TYPE: &#39;string&#39;, // `SCAN` only</div>
<div class="line">  MATCH: &#39;patter*&#39;,</div>
<div class="line">  COUNT: 100</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28083"></a>
<a href="https://redis.io/docs/manual/programmability/">Programmability</a></h2>
<p>Redis provides a programming interface allowing code execution on the redis server.</p>
<h3><a class="anchor" id="autotoc_md28084"></a>
<a href="https://redis.io/docs/manual/programmability/functions-intro/">Functions</a></h3>
<p>The following example retrieves a key in redis, returning the value of the key, incremented by an integer. For example, if your key <em>foo</em> has the value <em>17</em> and we run &lsquo;add('foo&rsquo;, 25)`, it returns the answer to Life, the Universe and Everything.</p>
<div class="fragment"><div class="line">#!lua name=library</div>
<div class="line"> </div>
<div class="line">redis.register_function {</div>
<div class="line">  function_name = &#39;add&#39;,</div>
<div class="line">  callback = function(keys, args) return redis.call(&#39;GET&#39;, keys[1]) + args[1] end,</div>
<div class="line">  flags = { &#39;no-writes&#39; }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Here is the same example, but in a format that can be pasted into the <code>redis-cli</code>.</p>
<div class="fragment"><div class="line">FUNCTION LOAD &quot;#!lua name=library\nredis.register_function{function_name=\&quot;add\&quot;, callback=function(keys, args) return redis.call(&#39;GET&#39;, keys[1])+args[1] end, flags={\&quot;no-writes\&quot;}}&quot;</div>
</div><!-- fragment --><p>Load the prior redis function on the <em>redis server</em> before running the example below.</p>
<div class="fragment"><div class="line">import { createClient } from &#39;redis&#39;;</div>
<div class="line"> </div>
<div class="line">const client = createClient({</div>
<div class="line">  functions: {</div>
<div class="line">    library: {</div>
<div class="line">      add: {</div>
<div class="line">        NUMBER_OF_KEYS: 1,</div>
<div class="line">        transformArguments(key: string, toAdd: number): Array&lt;string&gt; {</div>
<div class="line">          return [key, toAdd.toString()];</div>
<div class="line">        },</div>
<div class="line">        transformReply(reply: number): number {</div>
<div class="line">          return reply;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">await client.connect();</div>
<div class="line"> </div>
<div class="line">await client.set(&#39;key&#39;, &#39;1&#39;);</div>
<div class="line">await client.library.add(&#39;key&#39;, 2); // 3</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md28085"></a>
<a href="https://redis.io/docs/manual/programmability/eval-intro/">Lua Scripts</a></h3>
<p>The following is an end-to-end example of the prior concept.</p>
<div class="fragment"><div class="line">import { createClient, defineScript } from &#39;redis&#39;;</div>
<div class="line"> </div>
<div class="line">const client = createClient({</div>
<div class="line">  scripts: {</div>
<div class="line">    add: defineScript({</div>
<div class="line">      NUMBER_OF_KEYS: 1,</div>
<div class="line">      SCRIPT:</div>
<div class="line">        &#39;return redis.call(&quot;GET&quot;, KEYS[1]) + ARGV[1];&#39;,</div>
<div class="line">      transformArguments(key: string, toAdd: number): Array&lt;string&gt; {</div>
<div class="line">        return [key, toAdd.toString()];</div>
<div class="line">      },</div>
<div class="line">      transformReply(reply: number): number {</div>
<div class="line">        return reply;</div>
<div class="line">      }</div>
<div class="line">    })</div>
<div class="line">  }</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">await client.connect();</div>
<div class="line"> </div>
<div class="line">await client.set(&#39;key&#39;, &#39;1&#39;);</div>
<div class="line">await client.add(&#39;key&#39;, 2); // 3</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28086"></a>
Disconnecting</h2>
<p>There are two functions that disconnect a client from the Redis server. In most scenarios you should use <code>.quit()</code> to ensure that pending commands are sent to Redis before closing a connection.</p>
<h3><a class="anchor" id="autotoc_md28087"></a>
<code>.QUIT()</code>/<code>.quit()</code></h3>
<p>Gracefully close a client's connection to Redis, by sending the <a href="https://redis.io/commands/quit"><code>QUIT</code></a> command to the server. Before quitting, the client executes any remaining commands in its queue, and will receive replies from Redis for each of them.</p>
<div class="fragment"><div class="line">const [ping, get, quit] = await Promise.all([</div>
<div class="line">  client.ping(),</div>
<div class="line">  client.get(&#39;key&#39;),</div>
<div class="line">  client.quit()</div>
<div class="line">]); // [&#39;PONG&#39;, null, &#39;OK&#39;]</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  await client.get(&#39;key&#39;);</div>
<div class="line">} catch (err) {</div>
<div class="line">  // ClosedClient Error</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md28088"></a>
<code>.disconnect()</code></h3>
<p>Forcibly close a client's connection to Redis immediately. Calling <code>disconnect</code> will not send further pending commands to the Redis server, or wait for or parse outstanding responses.</p>
<div class="fragment"><div class="line">await client.disconnect();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28089"></a>
Auto-Pipelining</h2>
<p>Node Redis will automatically pipeline requests that are made during the same "tick".</p>
<div class="fragment"><div class="line">client.set(&#39;Tm9kZSBSZWRpcw==&#39;, &#39;users:1&#39;);</div>
<div class="line">client.sAdd(&#39;users:1:tokens&#39;, &#39;Tm9kZSBSZWRpcw==&#39;);</div>
</div><!-- fragment --><p>Of course, if you don't do something with your Promises you're certain to get <a href="https://nodejs.org/api/process.html#process_event_unhandledrejection">unhandled Promise exceptions</a>. To take advantage of auto-pipelining and handle your Promises, use <code>Promise.all()</code>.</p>
<div class="fragment"><div class="line">await Promise.all([</div>
<div class="line">  client.set(&#39;Tm9kZSBSZWRpcw==&#39;, &#39;users:1&#39;),</div>
<div class="line">  client.sAdd(&#39;users:1:tokens&#39;, &#39;Tm9kZSBSZWRpcw==&#39;)</div>
<div class="line">]);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28090"></a>
Clustering</h2>
<p>Check out the Clustering Guide when using Node Redis to connect to a Redis Cluster.</p>
<h2><a class="anchor" id="autotoc_md28091"></a>
Events</h2>
<p>The Node Redis client class is an Nodejs EventEmitter and it emits an event each time the network status changes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">When   </th><th class="markdownTableHeadNone">Listener arguments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>connect</code>   </td><td class="markdownTableBodyNone">Initiating a connection to the server   </td><td class="markdownTableBodyNone"><em>No arguments</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ready</code>   </td><td class="markdownTableBodyNone">Client is ready to use   </td><td class="markdownTableBodyNone"><em>No arguments</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>end</code>   </td><td class="markdownTableBodyNone">Connection has been closed (via <code>.quit()</code> or <code>.disconnect()</code>)   </td><td class="markdownTableBodyNone"><em>No arguments</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>error</code>   </td><td class="markdownTableBodyNone">An error has occurred—usually a network issue such as "Socket closed unexpectedly"   </td><td class="markdownTableBodyNone"><code>(error: Error)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>reconnecting</code>   </td><td class="markdownTableBodyNone">Client is trying to reconnect to the server   </td><td class="markdownTableBodyNone"><em>No arguments</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>sharded-channel-moved</code>   </td><td class="markdownTableBodyNone">See <a href="./docs/pub-sub.md#sharded-channel-moved-event">here</a>   </td><td class="markdownTableBodyNone">See <a href="./docs/pub-sub.md#sharded-channel-moved-event">here</a>   </td></tr>
</table>
<blockquote class="doxtable">
<p>:warning: You <b>MUST</b> listen to <code>error</code> events. If a client doesn't have at least one <code>error</code> listener registered and an <code>error</code> occurs, that error will be thrown and the Node.js process will exit. See the <a href="https://nodejs.org/api/events.html#events_error_events"><code>EventEmitter</code> docs</a> for more details. </p>
</blockquote>
<blockquote class="doxtable">
<p>The client will not emit <a href="./docs/v3-to-v4.md#all-the-removed-events">any other events</a> beyond those listed above. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md28092"></a>
Supported Redis versions</h1>
<p>Node Redis is supported with the following versions of Redis:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Supported    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7.0.z   </td><td class="markdownTableBodyNone">:heavy_check_mark:    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.2.z   </td><td class="markdownTableBodyNone">:heavy_check_mark:    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.0.z   </td><td class="markdownTableBodyNone">:heavy_check_mark:    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.0.z   </td><td class="markdownTableBodyNone">:heavy_check_mark:    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&lt; 5.0   </td><td class="markdownTableBodyNone">:x:   </td></tr>
</table>
<blockquote class="doxtable">
<p>Node Redis should work with older versions of Redis, but it is not fully tested and we cannot offer support. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md28093"></a>
Contributing</h1>
<p>If you'd like to contribute, check out the <a class="el" href="zod-to-json-schema_2_c_o_n_t_r_i_b_u_t_i_n_g_8md.html">contributing guide</a>.</p>
<p>Thank you to all the people who already contributed to Node Redis!</p>
<p><a href="https://github.com/redis/node-redis/graphs/contributors"><img src="https://contrib.rocks/image?repo=redis/node-redis" alt="Contributors" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md28094"></a>
License</h1>
<p>This repository is licensed under the "MIT" license. See [LICENSE](LICENSE). </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_d64ca83e691c902eae0599f6b4b824ff.html">redis</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
