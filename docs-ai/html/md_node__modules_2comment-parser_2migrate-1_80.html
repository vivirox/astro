<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: Migrating 0.x to 1.x</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_node__modules_2comment-parser_2migrate-1_80.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Migrating 0.x to 1.x</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md10886"></a></p>
<h1><a class="anchor" id="autotoc_md10887"></a>
Parser</h1>
<p>0.x can be mostly translated into 1.x one way or another. The idea behind the new config structure is to handle only the most common cases, and provide the fallback for alternative implementation.</p>
<h2><a class="anchor" id="autotoc_md10888"></a>
<code>dotted_names: boolean</code></h2>
<blockquote class="doxtable">
<p>By default dotted names like <code>name.subname.subsubname</code> will be expanded into nested sections, this can be prevented by passing opts.dotted_names = false. </p>
</blockquote>
<p><b>Removed</b> This feature is removed but still can be done on top of the <code>parse()</code> output. Please post a request or contribute a PR if you need it.</p>
<h2><a class="anchor" id="autotoc_md10889"></a>
<code>trim: boolean</code></h2>
<blockquote class="doxtable">
<p>Set this to false to avoid the default of trimming whitespace at the start and end of each line. </p>
</blockquote>
<p>In the new parser all original spacing is kept along with comment lines in <code>.source</code>. Description lines are joined together depending on <code>spacing</code> option</p>
<p><b>New option:</b></p>
<ul>
<li><code>spacing: "compact"</code> lines concatenated with a single space and no line breaks</li>
<li><code>spacing: "preserve"</code> keeps line breaks and space around as is. Indentation space counts from <code>*</code> delimiter or from the start of the line if the delimiter is omitted</li>
<li><code>spacing: (lines: Line[]) =&gt; string</code> completely freeform joining strategy, since all original spacing can be accessed, there is no limit to how this can be implemented. See <a href="./src/primitives.ts">primitives.ts</a> and <a href="./src/parser/spacer.ts">spacer.ts</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md10890"></a>
<code>join: string | number | boolean</code></h2>
<blockquote class="doxtable">
<p>If the following lines of a multiline comment do not start with a star, <code>join</code> will have the following effect on tag source (and description) when joining the lines together:</p>
<ul>
<li>If a string, use that string in place of the leading whitespace (and avoid newlines).</li>
<li>If a non-zero number (e.g., 1), do no trimming and avoid newlines.</li>
<li>If undefined, false, or 0, use the default behavior of not trimming but adding a newline.</li>
<li>Otherwise (e.g., if join is true), replace any leading whitespace with a single space and avoid newlines.</li>
</ul>
<p>Note that if a multi-line comment has lines that start with a star, these will be appended with initial whitespace as is and with newlines regardless of the join setting. </p>
</blockquote>
<p>See the <code>spacing</code> option above, all the variations can be fine-tunned with <code>spacing: (lines: Line[]) =&gt; string</code></p>
<h2><a class="anchor" id="autotoc_md10891"></a>
<code>fence: string | RegExp | ((source: string) =&gt; boolean)</code></h2>
<blockquote class="doxtable">
<p>Set to a string or regular expression to toggle state upon finding an odd number of matches within a line. Defaults to ```.</p>
<p>If set to a function, it should return true to toggle fenced state; upon returning true the first time, this will prevent subsequent lines from being interpreted as starting a new jsdoc tag until such time as the function returns true again to indicate that the state has toggled back. </p>
</blockquote>
<p>This is mostly kept the same</p>
<p><b>New optoins:</b></p>
<ul>
<li><code>fence: '```'</code> same as 0.x</li>
<li><code>fencer: (source: string) =&gt; boolean</code> same as 0.x, see <a href="./src/parser/block-parser.ts">parser/block-parser.ts</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md10892"></a>
<code>parsers: Parser[]</code></h2>
<blockquote class="doxtable">
<p>In case you need to parse tags in different way you can pass opts.parsers = [parser1, ..., parserN], where each parser is function name(str:String, data:Object):{source:String, data:Object}. ... </p>
</blockquote>
<p><b>New options:</b></p>
<ul>
<li><code>tokenizers: []Tokenizer</code> is a list of functions extracting the <code>tag</code>, <code>type</code>, <code>name</code> and <code>description</code> tokens from this string. See <a href="./src/parser/spec-parser.ts">parser/spec-parser.ts</a> and <a href="./src/primitives.ts">primitives.ts</a></li>
</ul>
<p>Default tokenizers chain is</p>
<div class="fragment"><div class="line">[</div>
<div class="line">  tagTokenizer(),</div>
<div class="line">  typeTokenizer(),</div>
<div class="line">  nameTokenizer(),</div>
<div class="line">  descriptionTokenizer(getSpacer(spacing)),</div>
<div class="line">]</div>
</div><!-- fragment --><p>where</p>
<div class="fragment"><div class="line">type Tokenizer = (spec: Spec) =&gt; Spec</div>
<div class="line"> </div>
<div class="line">interface Spec {</div>
<div class="line">  tag: string;</div>
<div class="line">  name: string;</div>
<div class="line">  default?: string;</div>
<div class="line">  type: string;</div>
<div class="line">  optional: boolean;</div>
<div class="line">  description: string;</div>
<div class="line">  problems: Problem[];</div>
<div class="line">  source: Line[];</div>
<div class="line">}</div>
</div><!-- fragment --><p>chain starts with blank <code>Spec</code> and each tokenizer fulfills a piece using <code>.source</code> input</p>
<h1><a class="anchor" id="autotoc_md10893"></a>
Stringifier</h1>
<blockquote class="doxtable">
<p>One may also convert comment-parser JSON structures back into strings using the stringify method (stringify(o: (object|Array) [, opts: object]): string). ... </p>
</blockquote>
<p>Stringifier config follows the same strategy â€“ a couple of common cases, and freeform formatter as a fallback</p>
<p><b>New Options:</b></p>
<ul>
<li><code>format: "none"</code> re-assembles the source with original spacing and delimiters preserved</li>
<li><code>format: "align"</code> aligns tag, name, type, and descriptions into fixed-width columns</li>
<li><code>format: (tokens: Tokens) =&gt; string[]</code> do what you like, resulting lines will be concatenated into the output. Despite the simple interface, this can be turned into a complex stateful formatter, see <code>"align"</code> implementation in <a href="./src/transforms/align.ts">transforms/align.ts</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md10894"></a>
Stream</h1>
<p>Work in progress </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
