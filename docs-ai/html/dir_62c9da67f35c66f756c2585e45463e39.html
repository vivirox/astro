<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/formdata-polyfill Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_62c9da67f35c66f756c2585e45463e39.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">formdata-polyfill Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="fragment"><div class="line">npm install formdata-polyfill</div>
</div><!-- fragment --><p>The browser polyfill will likely have done its part already, and i hope you stop supporting old browsers c",)&lt;br&gt;
But NodeJS still laks a proper FormData&lt;br&gt;The good old form-data package is a very old and isn't spec compatible and dose some abnormal stuff to construct and read FormData instances that other http libraries are not happy about when it comes to follow the spec.

@subsection autotoc_md15795 The NodeJS / ESM version
- The modular (~2.3 KiB minified uncompressed) version of this package is independent of any browser stuff and don't patch anything
- It's as pure/spec compatible as it possible gets the test are run by WPT.
- It's compatible with &lt;a href="<a href="https://github.com/node-fetch/node-fetch">https://github.com/node-fetch/node-fetch</a>" &gt;node-fetch&lt;/a&gt;.
- It have higher platform dependencies as it uses classes, symbols, ESM &amp; private fields
- Only dependency it has is &lt;a href="<a href="https://github.com/node-fetch/fetch-blob">https://github.com/node-fetch/fetch-blob</a>" &gt;fetch-blob&lt;/a&gt;

@icode{js} 
// Node example
import fetch from 'node-fetch'
import File from 'fetch-blob/file.js'
import { fileFromSync } from 'fetch-blob/from.js'
import { FormData } from 'formdata-polyfill/esm.min.js'

const file = fileFromSync('./README.md')
const fd = new FormData()

fd.append('file-upload', new File(['abc'], 'hello-world.txt'))
fd.append('file-upload', file)

// it's also possible to append file/blob look-a-like items
// if you have streams coming from other destinations
fd.append('file-upload', {
  size: 123,
  type: '',
  name: 'cat-video.mp4',
  stream() { return stream },
  [Symbol.toStringTag]: 'File'
})

fetch('https://httpbin.org/post', { method: 'POST', body: fd })
@endicode 

&lt;hr&gt;

It also comes with way to convert FormData into Blobs - it's not something that every developer should have to deal with.
It's mainly for &lt;a href="<a href="https://github.com/node-fetch/node-fetch">https://github.com/node-fetch/node-fetch</a>" &gt;node-fetch&lt;/a&gt; and other http library to ease the process of serializing a FormData into a blob and just wish to deal with Blobs instead (Both Deno and Undici adapted a version of this &lt;a href="<a href="https://github.com/jimmywarting/FormData/blob/5ddea9e0de2fc5e246ab1b2f9d404dee0c319c02/formdata-to-blob.js">https://github.com/jimmywarting/FormData/blob/5ddea9e0de2fc5e246ab1b2f9d404dee0c319c02/formdata-to-blob.js</a>" &gt;formDataToBlob&lt;/a&gt; to the core and passes all WPT tests run by the browser itself)
@icode{js} 
import { Readable } from 'node:stream'
import { FormData, formDataToBlob } from 'formdata-polyfill/esm.min.js'

const blob = formDataToBlob(new FormData())
fetch('https://httpbin.org/post', { method: 'POST', body: blob })

// node built in http and other similar http library have to do:
const stream = Readable.from(blob.stream())
const req = http.request('http://httpbin.org/post', {
  method: 'post',
  headers: {
    'Content-Length': blob.size,
    'Content-Type': blob.type
  }
})
stream.pipe(req)
@endicode 

PS: blob &amp; file that are appended to the FormData will not be read until any of the serialized blob read-methods gets called
...so uploading very large files is no biggie

@subsection autotoc_md15797 Browser polyfill

usage:

@icode{js} 
import 'formdata-polyfill' // that's it
@endicode 

The browser polyfill conditionally replaces the native implementation rather than fixing the missing functions,
since otherwise there is no way to get or delete existing values in the FormData object.
Therefore this also patches &lt;tt&gt;XMLHttpRequest.prototype.send&lt;/tt&gt; and &lt;tt&gt;fetch&lt;/tt&gt; to send the &lt;tt&gt;FormData&lt;/tt&gt; as a blob,
and &lt;tt&gt;navigator.sendBeacon&lt;/tt&gt; to send native &lt;tt&gt;FormData&lt;/tt&gt;.

I was unable to patch the Response/Request constructor
so if you are constructing them with FormData then you need to call &lt;tt&gt;fd._blob()&lt;/tt&gt; manually.

@icode{js} 
new Request(url, {
  method: 'post',
  body: fd._blob ? fd._blob() : fd
})
@endicode 

@section autotoc_md15798 Dependencies


If you need to support IE &lt;= 9 then I recommend you to include eligrey's [blob.js]
(which i hope you don't - since IE is now dead)

&lt;details&gt;
    &lt;summary&gt;Updating from 2.x to 3.x&lt;/summary&gt;

Previously you had to import the polyfill and use that,
since it didn't replace the global (existing) FormData implementation.
But now it transparently calls &lt;tt&gt;_blob()&lt;/tt&gt; for you when you are sending something with fetch or XHR,
by way of monkey-patching the &lt;tt&gt;XMLHttpRequest.prototype.send&lt;/tt&gt; and &lt;tt&gt;fetch&lt;/tt&gt; functions.

So you maybe had something like this:

@icode{javascript} 
var FormData = require('formdata-polyfill')
var fd = new FormData(form)
xhr.send(fd._blob())
@endicode 

There is no longer anything exported from the module
(though you of course still need to import it to install the polyfill),
so you can now use the FormData object as normal:

@icode{javascript} 
require('formdata-polyfill')
var fd = new FormData(form)
xhr.send(fd)
@endicode 

&lt;/details&gt;



@section autotoc_md15799 Native Browser compatibility (as of 2021-05-08)

Based on this you can decide for yourself if you need this polyfill.

&lt;a href="<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData#Browser_compatibility">https://developer.mozilla.org/en-US/docs/Web/API/FormData#Browser_compatibility</a>" &gt;&lt;img src="<a href="https://user-images.githubusercontent.com/1148376/117550329-0993aa80-b040-11eb-976c-14e31f1a3ba4.png">https://user-images.githubusercontent.com/1148376/117550329-0993aa80-b040-11eb-976c-14e31f1a3ba4.png</a>" alt="screenshot"/&gt;</p>
<p>This normalizes support for the FormData API:</p>
<ul>
<li><code>append</code> with filename</li>
<li><code>delete()</code>, <code>get()</code>, <code>getAll()</code>, <code>has()</code>, <code>set()</code></li>
<li><code>entries()</code>, <code>keys()</code>, <code>values()</code>, and support for <code>for...of</code></li>
<li>Available in web workers (just include the polyfill) </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_62c9da67f35c66f756c2585e45463e39.html">formdata-polyfill</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
