<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/tryer Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_40d9e91e7573db5f2c3cf222f0f46198.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">tryer Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://gitlab.com/philbooth/tryer/pipelines"><img src="https://gitlab.com/philbooth/tryer/badges/master/pipeline.svg" alt="Build status" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/tryer"><img src="https://img.shields.io/npm/v/tryer.svg" alt="Package status" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/tryer"><img src="https://img.shields.io/npm/dm/tryer.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/npm/l/tryer.svg" alt="License" style="pointer-events: none;" class="inline"/></a></p>
<p>Because everyone loves a tryer! Conditional and repeated function invocation for node and browser.</p>
<ul>
<li>Say what?</li>
<li>What size is it?</li>
<li>How do I install it?</li>
<li>How do I use it?<ul>
<li>Loading the library</li>
<li>Calling the exported function</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/inquirer/README.md#examples">Examples</a></li>
</ul>
</li>
<li>How do I set up the dev environment?</li>
<li>What license is it released under?</li>
</ul>
<h1><a class="anchor" id="autotoc_md33228"></a>
Say what?</h1>
<p>Sometimes, you want to defer calling a function until a certain pre-requisite condition is met. Other times, you want to call a function repeatedly until some post-requisite condition is satisfied. Occasionally, you might even want to do both for the same function.</p>
<p>To save you writing explicit conditions and loops on each of those occasions, <code>tryer</code> implements a predicate-based approach that hides the cruft behind a simple, functional interface.</p>
<p>Additionally, it allows you to easily specify retry intervals and limits, so that your code doesn't hog the CPU. It also supports exponential backoff of retry intervals, which can be useful when handling indefinite error states such as network failure.</p>
<h1><a class="anchor" id="autotoc_md33229"></a>
What size is it?</h1>
<p>5.6 kb unminified with comments, 1.1 kb minified, 0.5 kb minified + gzipped.</p>
<h1><a class="anchor" id="autotoc_md33230"></a>
How do I install it?</h1>
<p>Via npm:</p>
<div class="fragment"><div class="line">npm i tryer --save</div>
</div><!-- fragment --><p>Or if you just want the git repo:</p>
<div class="fragment"><div class="line">git clone git@gitlab.com:philbooth/tryer.git</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33231"></a>
How do I use it?</h1>
<h2><a class="anchor" id="autotoc_md33232"></a>
Loading the library</h2>
<p>If you are running in Node.js or another CommonJS-style environment, you can <code>require</code> tryer like so:</p>
<div class="fragment"><div class="line">const tryer = require(&#39;tryer&#39;);</div>
</div><!-- fragment --><p>It also the supports the AMD-style format preferred by Require.js.</p>
<p>If you are including <code>tryer</code> with an HTML <code>&lt;script&gt;</code> tag, or neither of the above environments are detected, it will be exported globally as <code>tryer</code>.</p>
<h2><a class="anchor" id="autotoc_md33233"></a>
Calling the exported function</h2>
<p><code>tryer</code> is a function that can be invoked to call other functions conditionally and repeatedly, without the need for explicit <code>if</code> statements or loops in your own code.</p>
<p><code>tryer</code> takes one argument, an options object that supports the following properties:</p>
<ul>
<li><code>action</code>: The function that you want to invoke. If <code>action</code> returns a promise, iterations will not end until the promise is resolved or rejected. Alternatively, <code>action</code> may take a callback argument, <code>done</code>, to signal that it is asynchronous. In that case, you are responsible for calling <code>done</code> when the action is finished. If <code>action</code> is not set, it defaults to an empty function.</li>
<li><code>when</code>: A predicate that tests the pre-condition for invoking <code>action</code>. Until <code>when</code> returns true (or a truthy value), <code>action</code> will not be called. Defaults to a function that immediately returns <code>true</code>.</li>
<li><code>until</code>: A predicate that tests the post-condition for invoking <code>action</code>. After <code>until</code> returns true (or a truthy value), <code>action</code> will no longer be called. Defaults to a function that immediately returns <code>true</code>.</li>
<li><code>fail</code>: The error handler. A function that will be called if <code>limit</code> falsey values are returned by <code>when</code> or <code>until</code>. Defaults to an empty function.</li>
<li><code>pass</code>: Success handler. A function that will be called after <code>until</code> has returned truthily. Defaults to an empty function.</li>
<li><code>limit</code>: Failure limit, representing the maximum number of falsey returns from <code>when</code> or <code>until</code> that will be permitted before invocation is deemed to have failed. A negative number indicates that the attempt should never fail, instead continuing for as long as <code>when</code> and <code>until</code> have returned truthy values. Defaults to <code>-1</code>.</li>
<li><code>interval</code>: The retry interval, in milliseconds. A negative number indicates that each subsequent retry should wait for twice the interval from the preceding iteration (i.e. exponential backoff). The default value is <code>-1000</code>, signifying that the initial retry interval should be one second and that each subsequent attempt should wait for double the length of the previous interval.</li>
</ul>
<h2><a class="anchor" id="autotoc_md33234"></a>
Examples</h2>
<div class="fragment"><div class="line">// Attempt to insert a database record, waiting until `db.isConnected`</div>
<div class="line">// before doing so. The retry interval is 1 second on each iteration</div>
<div class="line">// and the call will fail after 10 attempts.</div>
<div class="line">tryer({</div>
<div class="line">  action: () =&gt; db.insert(record),</div>
<div class="line">  when: () =&gt; db.isConnected,</div>
<div class="line">  interval: 1000,</div>
<div class="line">  limit: 10,</div>
<div class="line">  fail () {</div>
<div class="line">    log.error(&#39;No database connection, terminating.&#39;);</div>
<div class="line">    process.exit(1);</div>
<div class="line">  }</div>
<div class="line">});</div>
</div><!-- fragment --><div class="fragment"><div class="line">// Attempt to send an email message, optionally retrying with</div>
<div class="line">// exponential backoff starting at 1 second. Continue to make</div>
<div class="line">// attempts indefinitely until the call succeeds.</div>
<div class="line">let sent = false;</div>
<div class="line">tryer({</div>
<div class="line">  action (done) {</div>
<div class="line">    smtp.send(email, error =&gt; {</div>
<div class="line">      if (! error) {</div>
<div class="line">        sent = true;</div>
<div class="line">      }</div>
<div class="line">      done();</div>
<div class="line">    });</div>
<div class="line">  },</div>
<div class="line">  until: () =&gt; sent,</div>
<div class="line">  interval: -1000,</div>
<div class="line">  limit: -1</div>
<div class="line">});</div>
</div><!-- fragment --><div class="fragment"><div class="line">// Poll a device at 30-second intervals, continuing indefinitely.</div>
<div class="line">tryer({</div>
<div class="line">  action: () =&gt; device.poll().then(response =&gt; handle(response)),</div>
<div class="line">  interval: 30000,</div>
<div class="line">  limit: -1</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33235"></a>
How do I set up the dev environment?</h1>
<p>The dev environment relies on <a href="http://chaijs.com/">Chai</a>, <a href="http://jshint.com/">JSHint</a>, <a href="http://mochajs.org/">Mocha</a>, <a href="https://gitlab.com/philbooth/please-release-me">please-release-me</a>, <a href="https://gitlab.com/philbooth/spooks.js">spooks.js</a> and <a href="http://lisperator.net/uglifyjs/">UglifyJS</a>. The source code is in <code>src/tryer.js</code> and the unit tests are in <code>test/unit.js</code>.</p>
<p>To install the dependencies:</p>
<div class="fragment"><div class="line">npm i</div>
</div><!-- fragment --><p>To run the tests:</p>
<div class="fragment"><div class="line">npm t</div>
</div><!-- fragment --><p>To lint the code:</p>
<div class="fragment"><div class="line">npm run lint</div>
</div><!-- fragment --><p>To regenerate the minified lib:</p>
<div class="fragment"><div class="line">npm run minify</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33236"></a>
What license is it released under?</h1>
<p>[MIT](COPYING) </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_40d9e91e7573db5f2c3cf222f0f46198.html">tryer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
