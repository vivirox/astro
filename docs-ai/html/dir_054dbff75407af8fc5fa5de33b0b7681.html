<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/magicast Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_054dbff75407af8fc5fa5de33b0b7681.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">magicast Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://npmjs.com/package/magicast"><img src="https://img.shields.io/npm/v/magicast?style=flat&amp;colorA=18181B&amp;colorB=F0DB4F" alt="npm version" class="inline"/></a> <a href="https://npmjs.com/package/magicast"><img src="https://img.shields.io/npm/dm/magicast?style=flat&amp;colorA=18181B&amp;colorB=F0DB4F" alt="npm downloads" class="inline"/></a> <a href="https://bundlephobia.com/result?p=magicast"><img src="https://img.shields.io/bundlephobia/minzip/magicast?style=flat&amp;colorA=18181B&amp;colorB=F0DB4F" alt="bundle" class="inline"/></a> <a href="https://codecov.io/gh/unjs/magicast"><img src="https://img.shields.io/codecov/c/gh/unjs/magicast/main?style=flat&amp;colorA=18181B&amp;colorB=F0DB4F" alt="Codecov" class="inline"/></a> <a href="https://github.com/unjs/magicast/blob/main/LICENSE"><img src="https://img.shields.io/github/license/unjs/magicast.svg?style=flat&amp;colorA=18181B&amp;colorB=F0DB4F" alt="License" style="pointer-events: none;" class="inline"/></a> <a href="https://www.jsdocs.io/package/magicast"><img src="https://img.shields.io/badge/jsDocs.io-reference-18181B?style=flat&amp;colorA=18181B&amp;colorB=F0DB4F" alt="JSDocs" class="inline"/></a></p>
<p>Programmatically modify JavaScript and TypeScript source codes with a simplified, elegant and familiar syntax. Built on top of the <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a> parsed by <a href="https://github.com/benjamn/recast">recast</a> and <a href="https://babeljs.io/">babel</a>.</p>
<p>‚ùØ üßôüèº <b>Magical</b> modify a JS/TS file and write back magically just like JSON!<br  />
 ‚ùØ üîÄ <b>Exports/Import</b> manipulate module's imports and exports at ease<br  />
 ‚ùØ üíº <b>Function Arguments</b> easily manipulate arguments passed to a function call, like <code>defineConfig()</code><br  />
 ‚ùØ üé® <b>Smart Formatting</b> preseves the formatting style (quotes, tabs, etc.) from the original code<br  />
 ‚ùØ üßë‚Äçüíª <b>Readable</b> get rid of the complexity of AST manipulation and make your code super readable<br  />
</p>
<h1><a class="anchor" id="autotoc_md22175"></a>
Install</h1>
<p>Install npm package:</p>
<div class="fragment"><div class="line"># using yarn</div>
<div class="line">yarn add --dev magicast</div>
<div class="line"> </div>
<div class="line"># using npm</div>
<div class="line">npm install -D magicast</div>
<div class="line"> </div>
<div class="line"># using pnpm</div>
<div class="line">pnpm add -D magicast</div>
</div><!-- fragment --><p>Import utilities:</p>
<div class="fragment"><div class="line">// ESM / Bundler</div>
<div class="line">import { parseModule, generateCode, builders, createNode } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">// CommonJS</div>
<div class="line">const { parseModule, generateCode, builders, createNode } = require(&quot;magicast&quot;);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md22176"></a>
Examples</h1>
<p><b>Example:</b> Modify a file:</p>
<p><code>config.js</code>:</p>
<div class="fragment"><div class="line">export default {</div>
<div class="line">  foo: [&quot;a&quot;],</div>
<div class="line">};</div>
</div><!-- fragment --><p>Code to modify and append <code>b</code> to <code>foo</code> prop of defaultExport:</p>
<div class="fragment"><div class="line">import { loadFile, writeFile } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">const mod = await loadFile(&quot;config.js&quot;);</div>
<div class="line"> </div>
<div class="line">mod.exports.default.foo.push(&quot;b&quot;);</div>
<div class="line"> </div>
<div class="line">await writeFile(mod, &quot;config.js&quot;);</div>
</div><!-- fragment --><p>Updated <code>config.js</code>:</p>
<div class="fragment"><div class="line">export default {</div>
<div class="line">  foo: [&quot;a&quot;, &quot;b&quot;],</div>
<div class="line">};</div>
</div><!-- fragment --><p><b>Example:</b> Directly use AST utils:</p>
<div class="fragment"><div class="line">import { parseModule, generateCode } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">// Parse to AST</div>
<div class="line">const mod = parseModule(`export default { }`);</div>
<div class="line"> </div>
<div class="line">// Ensure foo is an array</div>
<div class="line">mod.exports.default.foo ||= [];</div>
<div class="line">// Add a new array member</div>
<div class="line">mod.exports.default.foo.push(&quot;b&quot;);</div>
<div class="line">mod.exports.default.foo.unshift(&quot;a&quot;);</div>
<div class="line"> </div>
<div class="line">// Generate code</div>
<div class="line">const { code, map } = generateCode(mod);</div>
</div><!-- fragment --><p>Generated code:</p>
<div class="fragment"><div class="line">export default {</div>
<div class="line">  foo: [&quot;a&quot;, &quot;b&quot;],</div>
<div class="line">};</div>
</div><!-- fragment --><p><b>Example:</b> Get the AST directly:</p>
<div class="fragment"><div class="line">import { parseModule, generateCode } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">const mod = parseModule(`export default { }`);</div>
<div class="line"> </div>
<div class="line">const ast = mod.exports.default.$ast;</div>
<div class="line">// do something with ast</div>
</div><!-- fragment --><p><b>Example:</b> Function arguments:</p>
<div class="fragment"><div class="line">import { parseModule, generateCode } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">const mod = parseModule(`export default defineConfig({ foo: &#39;bar&#39; })`);</div>
<div class="line"> </div>
<div class="line">// Support for both bare object export and `defineConfig` wrapper</div>
<div class="line">const options =</div>
<div class="line">  mod.exports.default.$type === &quot;function-call&quot;</div>
<div class="line">    ? mod.exports.default.$args[0]</div>
<div class="line">    : mod.exports.default;</div>
<div class="line"> </div>
<div class="line">console.log(options.foo); // bar</div>
</div><!-- fragment --><p><b>Example:</b> Create a function call:</p>
<div class="fragment"><div class="line">import { parseModule, generateCode, builders } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">const mod = parseModule(`export default {}`);</div>
<div class="line"> </div>
<div class="line">const options = (mod.exports.default.list = builders.functionCall(</div>
<div class="line">  &quot;create&quot;,</div>
<div class="line">  [1, 2, 3],</div>
<div class="line">));</div>
<div class="line"> </div>
<div class="line">console.log(mod.generateCode()); // export default { list: create([1, 2, 3]) }</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md22177"></a>
Notes</h1>
<p>As JavaScript is a very dynamic language, you should be aware that Magicast's convention <b>CAN NOT cover all possible cases</b>. Magicast serves as a simple and maintainable interface to update static-ish JavaScript code. When interacting with Magicast node, be aware that every option might have chance to throw an error depending on the input code. We recommend to always wrap the code in a <code>try/catch</code> block (even better to do some defensive coding), for example:</p>
<div class="fragment"><div class="line">import { loadFile, writeFile } from &quot;magicast&quot;;</div>
<div class="line"> </div>
<div class="line">function updateConfig() {</div>
<div class="line">  try {</div>
<div class="line">    const mod = await loadFile(&quot;config.js&quot;);</div>
<div class="line"> </div>
<div class="line">    mod.exports.default.foo.push(&quot;b&quot;);</div>
<div class="line"> </div>
<div class="line">    await writeFile(mod);</div>
<div class="line">  } catch {</div>
<div class="line">    console.error(&quot;Unable to update config.js&quot;);</div>
<div class="line">    console.error(</div>
<div class="line">      &quot;Please update it manually with the following instructions: ...&quot;,</div>
<div class="line">    );</div>
<div class="line">    // handle error</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md22178"></a>
High Level Helpers</h1>
<p>We also experiment to provide a few high level helpers to make common tasks easier. You could import them from <code>magicast/helpers</code>. They might be moved to a separate package in the future.</p>
<div class="fragment"><div class="line">import {</div>
<div class="line">  deepMergeObject,</div>
<div class="line">  addNuxtModule,</div>
<div class="line">  addVitePlugin,</div>
<div class="line">  // ...</div>
<div class="line">} from &quot;magicast/helpers&quot;;</div>
</div><!-- fragment --><p>We recommend to check out the <a href="./src/helpers">source code</a> and <a href="./test/helpers">test cases</a> for more details.</p>
<h1><a class="anchor" id="autotoc_md22179"></a>
Development</h1>
<ul>
<li>Clone this repository</li>
<li>Install latest LTS version of <a href="https://nodejs.org/en/">Node.js</a></li>
<li>Enable <a href="https://github.com/nodejs/corepack">Corepack</a> using <code>corepack enable</code></li>
<li>Install dependencies using <code>pnpm install</code></li>
<li>Run interactive tests using <code>pnpm dev</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md22180"></a>
License</h1>
<p>Made with üíõ</p>
<p>Published under <a href="./LICENSE">MIT License</a>. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_054dbff75407af8fc5fa5de33b0b7681.html">magicast</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
