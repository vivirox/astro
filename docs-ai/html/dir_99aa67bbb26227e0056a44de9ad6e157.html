<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/leac Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_99aa67bbb26227e0056a44de9ad6e157.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">leac Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><img src="https://github.com/mxxii/leac/workflows/lint/badge.svg" alt="lint status badge" style="pointer-events: none;" class="inline"/> <img src="https://github.com/mxxii/leac/workflows/test/badge.svg" alt="test status badge" style="pointer-events: none;" class="inline"/> <a href="https://github.com/mxxii/leac/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-MIT-green.svg" alt="License: MIT" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/leac"><img src="https://img.shields.io/npm/v/leac?logo=npm" alt="npm" class="inline"/></a> <a href="https://deno.land/x/leac"><img src="https://img.shields.io/badge/deno.land%2Fx%2F-leac-informational?logo=deno" alt="deno" class="inline"/></a></p>
<p>Lexer / tokenizer.</p>
<h1><a class="anchor" id="autotoc_md21518"></a>
Features</h1>
<ul>
<li><b>Lightweight</b>. Zero dependencies. Not a lot of code.</li>
<li><b>Well tested</b> - comes will tests for everything including examples.</li>
<li><b>Compact syntax</b> - less boilerplate. Rule name is enough when it is the same as the lookup string.</li>
<li><b>No failures</b> - it just stops when there are no matching rules and returns the information about whether it completed and where it stopped in addition to tokens array.</li>
<li><b>Composable lexers</b> - instead of states within a lexer.</li>
<li><b>Stateless lexers</b> - all inputs are passed as arguments, all outputs are returned in a result object.</li>
<li><b>No streaming</b> - accepts a string at a time.</li>
<li><b>Only text tokens, no arbitrary values</b>. It seems to be a good habit to have tokens that are <em>trivially</em> serializable back into a valid input string. Don't do the parser's job. There are a couple of convenience features such as the ability to discard matches or string replacements for regular expression rules but that has to be used mindfully (more on this below).</li>
</ul>
<h1><a class="anchor" id="autotoc_md21519"></a>
Install</h1>
<h2><a class="anchor" id="autotoc_md21520"></a>
Node</h2>
<div class="fragment"><div class="line">&gt; npm i leac</div>
<div class="line">&gt; yarn add leac</div>
</div><!-- fragment --><div class="fragment"><div class="line">import { createLexer, Token } from &#39;leac&#39;;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21521"></a>
Deno</h2>
<div class="fragment"><div class="line">import { createLexer, Token } from &#39;https://deno.land/x/leac@.../leac.ts&#39;;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md21522"></a>
Examples</h1>
<ul>
<li><a href="https://github.com/mxxii/leac/blob/main/examples/json.ts">JSON</a> (<a href="https://github.com/mxxii/leac/blob/main/test/snapshots/examples.ts.md#json">output snapshot</a>);</li>
<li><a href="https://github.com/mxxii/leac/blob/main/examples/calc.ts">Calc</a> (<a href="https://github.com/mxxii/leac/blob/main/test/snapshots/examples.ts.md#calc">output snapshot</a>).</li>
</ul>
<div class="fragment"><div class="line">const lex = createLexer([</div>
<div class="line">  { name: &#39;-&#39;, str: &#39;-&#39; },</div>
<div class="line">  { name: &#39;+&#39; },</div>
<div class="line">  { name: &#39;ws&#39;, regex: /\s+/, discard: true },</div>
<div class="line">  { name: &#39;number&#39;, regex: /[0-9]|[1-9][0-9]+/ },</div>
<div class="line">]);</div>
<div class="line"> </div>
<div class="line">const { tokens, offset, complete } = lex(&#39;2 + 2&#39;);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md21523"></a>
API</h1>
<ul>
<li><a href="https://github.com/mxxii/leac/blob/main/docs/index.md">docs/index.md</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md21524"></a>
A word of caution</h1>
<p>It is often really tempting to rewrite token on the go. But it can be dangerous unless you are absolutely mindful of all edge cases.</p>
<p>For example, who needs to carry string quotes around, right? Parser will only need the string content...</p>
<p>We'll have to consider following things:</p>
<ul>
<li>Regular expressions. Sometimes we want to match strings that can have a length <em>from zero</em> and up.</li>
<li><p class="startli">Tokens are not produced without changing the offset. If something is missing - there is no token.</p>
<p class="startli">If we allow a token with zero length - it will cause an infinite loop, as the same rule will be matched at the same offset, again and again.</p>
</li>
<li>Discardable tokens - a convenience feature that may seem harmless at a first glance.</li>
</ul>
<p>When put together, these things plus some intuition traps can lead to a broken array of tokens.</p>
<p>Strings can be empty, which means the token can be absent. With no content and no quotes the tokens array will most likely make no sense for a parser.</p>
<p>How to avoid potential issues:</p>
<ul>
<li>Don't discard anything that you may need to insert back if you try to immediately serialize the tokens array to string. This means whitespace are usually safe to discard while string quotes are not (what can be considered safe will heavily depend on the grammar - you may have a language with significant spaces and insignificant quotes...);</li>
<li>You can introduce a higher priority rule to capture an empty string (opening quote immediately followed by closing quote) and emit a special token for that. This way empty string between quotes can't occur down the line;</li>
<li>Match the whole string (content and quotes) with a single regular expression, let the parser deal with it. This can actually lead to a cleaner design than trying to be clever and removing "unnecessary" parts early;</li>
<li>Match the whole string (content and quotes) with a single regular expression, use capture groups and <a href="https://github.com/mxxii/leac/blob/main/docs/interfaces/RegexRule.md#replace">replace</a> property. This can produce a non-zero length token with empty text.</li>
</ul>
<p>Another note about quotes: If the grammar allows for different quotes and you're still willing to get rid of them early - think how you're going to unescape the string later. Make sure you carry the information about the exact string kind in the token name at least - you will need it later.</p>
<h1><a class="anchor" id="autotoc_md21525"></a>
What about ...?</h1>
<ul>
<li>performance - The code is very simple but I won't put any unverified assumptions here. I'd be grateful to anyone who can provide a good benchmark project to compare different lexers.</li>
<li>stable release - Current release is well thought out and tested. I leave a chance that some changes might be needed based on feedback. Before version 1.0.0 this will be done without a deprecation cycle.</li>
</ul>
<h1><a class="anchor" id="autotoc_md21526"></a>
Some other lexer / tokenizer packages</h1>
<ul>
<li><a href="https://github.com/no-context/moo">moo</a>;</li>
<li><a href="https://github.com/yishn/doken">doken</a>;</li>
<li><a href="https://github.com/rse/tokenizr">tokenizr</a>;</li>
<li><a href="https://github.com/sormy/flex-js">flex-js</a>;</li>
<li><em>and more, with varied level of maintenance.</em> </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_99aa67bbb26227e0056a44de9ad6e157.html">leac</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
