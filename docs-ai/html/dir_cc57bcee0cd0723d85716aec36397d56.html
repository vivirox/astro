<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/trough Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_cc57bcee0cd0723d85716aec36397d56.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">trough Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://github.com/wooorm/trough/actions"><img src="https://github.com/wooorm/trough/workflows/main/badge.svg" alt="Build" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/github/wooorm/trough"><img src="https://img.shields.io/codecov/c/github/wooorm/trough.svg" alt="Coverage" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/trough"><img src="https://img.shields.io/npm/dm/trough.svg" alt="Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://bundlejs.com/?q=trough"><img src="https://img.shields.io/bundlejs/size/trough" alt="Size" class="inline"/></a></p>
<p><code>trough</code> is middleware.</p>
<h1><a class="anchor" id="autotoc_md33189"></a>
Contents</h1>
<ul>
<li>What is this?</li>
<li>When should I use this?</li>
<li>Install</li>
<li>Use</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/flexsearch/README.md#api">API</a><ul>
<li>`trough()`</li>
<li>`wrap(middleware, callback)`</li>
<li>`Callback`</li>
<li>`Middleware`</li>
<li><a class="el" href="pipeline_8cc.html#a219a66c8cf101fc8c26a5c86edd940f4">`Pipeline`</a></li>
<li>`Run`</li>
<li>`Use`</li>
</ul>
</li>
<li>Compatibility</li>
<li>Security</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/@sinclair/typebox/readme.md#contribute">Contribute</a></li>
<li><a class="el" href="/Users/vivi/astro/node_modules/bl/README.md#license">License</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md33190"></a>
What is this?</h1>
<p><code>trough</code> is like <a href="https://github.com/segmentio/ware"><code>ware</code></a> with less sugar. Middleware functions can also change the input of the next.</p>
<p>The word <b>trough</b> (<code>/tr√¥f/</code>) means a channel used to convey a liquid.</p>
<h1><a class="anchor" id="autotoc_md33191"></a>
When should I use this?</h1>
<p>You can use this package when you‚Äôre building something that accepts ‚Äúplugins‚Äù, which are functions, that can be sync or async, promises or callbacks.</p>
<h1><a class="anchor" id="autotoc_md33192"></a>
Install</h1>
<p>This package is <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c">ESM only</a>. In Node.js (version 16+), install with <a href="https://docs.npmjs.com/cli/install">npm</a>:</p>
<div class="fragment"><div class="line">npm install trough</div>
</div><!-- fragment --><p>In Deno with <a href="https://esm.sh"><code>esm.sh</code></a>:</p>
<div class="fragment"><div class="line">import {trough, wrap} from &#39;https://esm.sh/trough@2&#39;</div>
</div><!-- fragment --><p>In browsers with <a href="https://esm.sh"><code>esm.sh</code></a>:</p>
<div class="fragment"><div class="line">&lt;script type=&quot;module&quot;&gt;</div>
<div class="line">  import {trough, wrap} from &#39;https://esm.sh/trough@2?bundle&#39;</div>
<div class="line">&lt;/script&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33193"></a>
Use</h1>
<div class="fragment"><div class="line">import fs from &#39;node:fs&#39;</div>
<div class="line">import path from &#39;node:path&#39;</div>
<div class="line">import process from &#39;node:process&#39;</div>
<div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">const pipeline = trough()</div>
<div class="line">  .use(function (fileName) {</div>
<div class="line">    console.log(&#39;Checking‚Ä¶ &#39; + fileName)</div>
<div class="line">  })</div>
<div class="line">  .use(function (fileName) {</div>
<div class="line">    return path.join(process.cwd(), fileName)</div>
<div class="line">  })</div>
<div class="line">  .use(function (filePath, next) {</div>
<div class="line">    fs.stat(filePath, function (error, stats) {</div>
<div class="line">      next(error, {filePath, stats})</div>
<div class="line">    })</div>
<div class="line">  })</div>
<div class="line">  .use(function (ctx, next) {</div>
<div class="line">    if (ctx.stats.isFile()) {</div>
<div class="line">      fs.readFile(ctx.filePath, next)</div>
<div class="line">    } else {</div>
<div class="line">      next(new Error(&#39;Expected file&#39;))</div>
<div class="line">    }</div>
<div class="line">  })</div>
<div class="line"> </div>
<div class="line">pipeline.run(&#39;readme.md&#39;, console.log)</div>
<div class="line">pipeline.run(&#39;node_modules&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">Checking‚Ä¶ readme.md</div>
<div class="line">Checking‚Ä¶ node_modules</div>
<div class="line">Error: Expected file</div>
<div class="line">    at ~/example.js:22:12</div>
<div class="line">    at wrapped (~/node_modules/trough/index.js:111:16)</div>
<div class="line">    at next (~/node_modules/trough/index.js:62:23)</div>
<div class="line">    at done (~/node_modules/trough/index.js:145:7)</div>
<div class="line">    at ~/example.js:15:7</div>
<div class="line">    at FSReqCallback.oncomplete (node:fs:199:5)</div>
<div class="line">null &lt;Buffer 23 20 74 72 6f 75 67 68 0a 0a 5b 21 5b 42 75 69 6c 64 5d 5b 62 75 69 6c 64 2d 62 61 64 67 65 5d 5d 5b 62 75 69 6c 64 5d 0a 5b 21 5b 43 6f 76 65 72 61 ... 7994 more bytes&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33194"></a>
API</h1>
<p>This package exports the identifiers `trough` and `wrap`. There is no default export.</p>
<p>It exports the <a href="https://www.typescriptlang.org">TypeScript</a> types `Callback`, `Middleware`, <a class="el" href="pipeline_8cc.html#a219a66c8cf101fc8c26a5c86edd940f4">`Pipeline`</a>, `Run`, and `Use`.</p>
<h2><a class="anchor" id="autotoc_md33195"></a>
<code>trough()</code></h2>
<p>Create new middleware.</p>
<h5><a class="anchor" id="autotoc_md33196"></a>
Parameters</h5>
<p>There are no parameters.</p>
<h5><a class="anchor" id="autotoc_md33197"></a>
Returns</h5>
<p><a class="el" href="pipeline_8cc.html#a219a66c8cf101fc8c26a5c86edd940f4">`Pipeline`</a>.</p>
<h2><a class="anchor" id="autotoc_md33198"></a>
<code>wrap(middleware, callback)</code></h2>
<p>Wrap <code>middleware</code> into a uniform interface.</p>
<p>You can pass all input to the resulting function. <code>callback</code> is then called with the output of <code>middleware</code>.</p>
<p>If <code>middleware</code> accepts more arguments than the later given in input, an extra <code>done</code> function is passed to it after that input, which must be called by <code>middleware</code>.</p>
<p>The first value in <code>input</code> is the main input value. All other input values are the rest input values. The values given to <code>callback</code> are the input values, merged with every non-nullish output value.</p>
<ul>
<li>if <code>middleware</code> throws an error, returns a promise that is rejected, or calls the given <code>done</code> function with an error, <code>callback</code> is called with that error</li>
<li>if <code>middleware</code> returns a value or returns a promise that is resolved, that value is the main output value</li>
<li>if <code>middleware</code> calls <code>done</code>, all non-nullish values except for the first one (the error) overwrite the output values</li>
</ul>
<h5><a class="anchor" id="autotoc_md33199"></a>
Parameters</h5>
<ul>
<li><code>middleware</code> (`Middleware`) ‚Äî function to wrap</li>
<li><code>callback</code> (`Callback`) ‚Äî callback called with the output of <code>middleware</code></li>
</ul>
<h5><a class="anchor" id="autotoc_md33200"></a>
Returns</h5>
<p>Wrapped middleware (`Run`).</p>
<h2><a class="anchor" id="autotoc_md33201"></a>
<code>Callback</code></h2>
<p>Callback function (TypeScript type).</p>
<h5><a class="anchor" id="autotoc_md33202"></a>
Parameters</h5>
<ul>
<li><code>error</code> (<code>Error</code>, optional) ‚Äî error, if any</li>
<li><code>...output</code> (<code>Array&lt;unknown&gt;</code>, optional) ‚Äî output values</li>
</ul>
<h5><a class="anchor" id="autotoc_md33203"></a>
Returns</h5>
<p>Nothing (<code>undefined</code>).</p>
<h2><a class="anchor" id="autotoc_md33204"></a>
<code>Middleware</code></h2>
<p>A middleware function called with the output of its predecessor (TypeScript type).</p>
<h5><a class="anchor" id="autotoc_md33205"></a>
Synchronous</h5>
<p>If <code>fn</code> returns or throws an error, the pipeline fails and <code>done</code> is called with that error.</p>
<p>If <code>fn</code> returns a value (neither <code>null</code> nor <code>undefined</code>), the first <code>input</code> of the next function is set to that value (all other <code>input</code> is passed through).</p>
<p>The following example shows how returning an error stops the pipeline:</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function (thing) {</div>
<div class="line">    return new Error(&#39;Got: &#39; + thing)</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;some value&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">Error: Got: some value</div>
<div class="line">    at ~/example.js:5:12</div>
<div class="line">    ‚Ä¶</div>
</div><!-- fragment --><p>The following example shows how throwing an error stops the pipeline:</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function (thing) {</div>
<div class="line">    throw new Error(&#39;Got: &#39; + thing)</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;more value&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">Error: Got: more value</div>
<div class="line">    at ~/example.js:5:11</div>
<div class="line">    ‚Ä¶</div>
</div><!-- fragment --><p>The following example shows how the first output can be modified:</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function (thing) {</div>
<div class="line">    return &#39;even &#39; + thing</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;more value&#39;, &#39;untouched&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">null <span class="stringliteral">&#39;even more value&#39;</span> <span class="stringliteral">&#39;untouched&#39;</span></div>
</div><!-- fragment --><h5><a class="anchor" id="autotoc_md33206"></a>
Promise</h5>
<p>If <code>fn</code> returns a promise, and that promise rejects, the pipeline fails and <code>done</code> is called with the rejected value.</p>
<p>If <code>fn</code> returns a promise, and that promise resolves with a value (neither <code>null</code> nor <code>undefined</code>), the first <code>input</code> of the next function is set to that value (all other <code>input</code> is passed through).</p>
<p>The following example shows how rejecting a promise stops the pipeline:</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function (thing) {</div>
<div class="line">    return new Promise(function (resolve, reject) {</div>
<div class="line">      reject(&#39;Got: &#39; + thing)</div>
<div class="line">    })</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;thing&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">Got: thing</div>
</div><!-- fragment --><p>The following example shows how the input isn‚Äôt touched by resolving to <code>null</code>.</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function () {</div>
<div class="line">    return new Promise(function (resolve) {</div>
<div class="line">      setTimeout(function () {</div>
<div class="line">        resolve(null)</div>
<div class="line">      }, 100)</div>
<div class="line">    })</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;Input&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">null <span class="stringliteral">&#39;Input&#39;</span></div>
</div><!-- fragment --><h5><a class="anchor" id="autotoc_md33207"></a>
Asynchronous</h5>
<p>If <code>fn</code> accepts one more argument than the given <code>input</code>, a <code>next</code> function is given (after the input). <code>next</code> must be called, but doesn‚Äôt have to be called async.</p>
<p>If <code>next</code> is given a value (neither <code>null</code> nor <code>undefined</code>) as its first argument, the pipeline fails and <code>done</code> is called with that value.</p>
<p>If <code>next</code> is given no value (either <code>null</code> or <code>undefined</code>) as the first argument, all following non-nullish values change the input of the following function, and all nullish values default to the <code>input</code>.</p>
<p>The following example shows how passing a first argument stops the pipeline:</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function (thing, next) {</div>
<div class="line">    next(new Error(&#39;Got: &#39; + thing))</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;thing&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">Error: Got: thing</div>
<div class="line">    at ~/example.js:5:10</div>
</div><!-- fragment --><p>The following example shows how more values than the input are passed.</p>
<div class="fragment"><div class="line">import {trough} from &#39;trough&#39;</div>
<div class="line"> </div>
<div class="line">trough()</div>
<div class="line">  .use(function (thing, next) {</div>
<div class="line">    setTimeout(function () {</div>
<div class="line">      next(null, null, &#39;values&#39;)</div>
<div class="line">    }, 100)</div>
<div class="line">  })</div>
<div class="line">  .run(&#39;some&#39;, console.log)</div>
</div><!-- fragment --><p>Yields:</p>
<div class="fragment"><div class="line">null <span class="stringliteral">&#39;some&#39;</span> <span class="stringliteral">&#39;values&#39;</span></div>
</div><!-- fragment --><h5><a class="anchor" id="autotoc_md33208"></a>
Parameters</h5>
<ul>
<li><code>...input</code> (<code>Array&lt;any&gt;</code>, optional) ‚Äî input values</li>
</ul>
<h5><a class="anchor" id="autotoc_md33209"></a>
Returns</h5>
<p>Output, promise, etc (<code>any</code>).</p>
<h2><a class="anchor" id="autotoc_md33210"></a>
<code>Pipeline</code></h2>
<p>Pipeline (TypeScript type).</p>
<h5><a class="anchor" id="autotoc_md33211"></a>
Properties</h5>
<ul>
<li><code>run</code> (`Run`) ‚Äî run the pipeline</li>
<li><code>use</code> (`Use`) ‚Äî add middleware</li>
</ul>
<h2><a class="anchor" id="autotoc_md33212"></a>
<code>Run</code></h2>
<p>Call all middleware (TypeScript type).</p>
<p>Calls <code>done</code> on completion with either an error or the output of the last middleware.</p>
<blockquote class="doxtable">
<p>üëâ <b>Note</b>: as the length of input defines whether async functions get a <code>next</code> function, it‚Äôs recommended to keep <code>input</code> at one value normally. </p>
</blockquote>
<h5><a class="anchor" id="autotoc_md33213"></a>
Parameters</h5>
<ul>
<li><code>...input</code> (<code>Array&lt;any&gt;</code>, optional) ‚Äî input values</li>
<li><code>done</code> (`Callback`) ‚Äî callback called when done</li>
</ul>
<h5><a class="anchor" id="autotoc_md33214"></a>
Returns</h5>
<p>Nothing (<code>undefined</code>).</p>
<h2><a class="anchor" id="autotoc_md33215"></a>
<code>Use</code></h2>
<p>Add middleware (TypeScript type).</p>
<h5><a class="anchor" id="autotoc_md33216"></a>
Parameters</h5>
<ul>
<li><code>middleware</code> (`Middleware`) ‚Äî middleware function</li>
</ul>
<h5><a class="anchor" id="autotoc_md33217"></a>
Returns</h5>
<p>Current pipeline (<a class="el" href="pipeline_8cc.html#a219a66c8cf101fc8c26a5c86edd940f4">`Pipeline`</a>).</p>
<h1><a class="anchor" id="autotoc_md33218"></a>
Compatibility</h1>
<p>This projects is compatible with maintained versions of Node.js.</p>
<p>When we cut a new major release, we drop support for unmaintained versions of Node. This means we try to keep the current release line, <code>trough@2</code>, compatible with Node.js 12.</p>
<h1><a class="anchor" id="autotoc_md33219"></a>
Security</h1>
<p>This package is safe.</p>
<h1><a class="anchor" id="autotoc_md33220"></a>
Contribute</h1>
<p>Yes please! See <a href="https://opensource.guide/how-to-contribute/">How to Contribute to Open Source</a>.</p>
<h1><a class="anchor" id="autotoc_md33221"></a>
License</h1>
<p>[MIT][file-license] ¬© <a href="https://wooorm.com">Titus Wormer</a> </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_cc57bcee0cd0723d85716aec36397d56.html">trough</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
