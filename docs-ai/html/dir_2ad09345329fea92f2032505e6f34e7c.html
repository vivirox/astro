<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/@ampproject/remapping Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_2ad09345329fea92f2032505e6f34e7c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">remapping Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<blockquote class="doxtable">
<p>Remap sequential sourcemaps through transformations to point at the original source code </p>
</blockquote>
<p>Remapping allows you to take the sourcemaps generated through transforming your code and "remap" them to the original source locations. Think "my minified code, transformed with babel and bundled
with webpack", all pointing to the correct location in your original source code.</p>
<p>With remapping, none of your source code transformations need to be aware of the input's sourcemap, they only need to generate an output sourcemap. This greatly simplifies building custom transformations (think a find-and-replace).</p>
<h1><a class="anchor" id="autotoc_md63"></a>
Installation</h1>
<div class="fragment"><div class="line">npm install @ampproject/remapping</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md64"></a>
Usage</h1>
<div class="fragment"><div class="line">function remapping(</div>
<div class="line">  map: SourceMap | SourceMap[],</div>
<div class="line">  loader: (file: string, ctx: LoaderContext) =&gt; (SourceMap | null | undefined),</div>
<div class="line">  options?: { excludeContent: boolean, decodedMappings: boolean }</div>
<div class="line">): SourceMap;</div>
<div class="line"> </div>
<div class="line">// LoaderContext gives the loader the importing sourcemap, tree depth, the ability to override the</div>
<div class="line">// &quot;source&quot; location (where child sources are resolved relative to, or the location of original</div>
<div class="line">// source), and the ability to override the &quot;content&quot; of an original source for inclusion in the</div>
<div class="line">// output sourcemap.</div>
<div class="line">type LoaderContext = {</div>
<div class="line"> readonly importer: string;</div>
<div class="line"> readonly depth: number;</div>
<div class="line"> source: string;</div>
<div class="line"> content: string | null | undefined;</div>
<div class="line">}</div>
</div><!-- fragment --><p><code>remapping</code> takes the final output sourcemap, and a <code>loader</code> function. For every source file pointer in the sourcemap, the <code>loader</code> will be called with the resolved path. If the path itself represents a transformed file (it has a sourcmap associated with it), then the <code>loader</code> should return that sourcemap. If not, the path will be treated as an original, untransformed source code.</p>
<div class="fragment"><div class="line">// Babel transformed &quot;helloworld.js&quot; into &quot;transformed.js&quot;</div>
<div class="line">const transformedMap = JSON.stringify({</div>
<div class="line">  file: &#39;transformed.js&#39;,</div>
<div class="line">  // 1st column of 2nd line of output file translates into the 1st source</div>
<div class="line">  // file, line 3, column 2</div>
<div class="line">  mappings: &#39;;CAEE&#39;,</div>
<div class="line">  sources: [&#39;helloworld.js&#39;],</div>
<div class="line">  version: 3,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Uglify minified &quot;transformed.js&quot; into &quot;transformed.min.js&quot;</div>
<div class="line">const minifiedTransformedMap = JSON.stringify({</div>
<div class="line">  file: &#39;transformed.min.js&#39;,</div>
<div class="line">  // 0th column of 1st line of output file translates into the 1st source</div>
<div class="line">  // file, line 2, column 1.</div>
<div class="line">  mappings: &#39;AACC&#39;,</div>
<div class="line">  names: [],</div>
<div class="line">  sources: [&#39;transformed.js&#39;],</div>
<div class="line">  version: 3,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const remapped = remapping(</div>
<div class="line">  minifiedTransformedMap,</div>
<div class="line">  (file, ctx) =&gt; {</div>
<div class="line"> </div>
<div class="line">    // The &quot;transformed.js&quot; file is an transformed file.</div>
<div class="line">    if (file === &#39;transformed.js&#39;) {</div>
<div class="line">      // The root importer is empty.</div>
<div class="line">      console.assert(ctx.importer === &#39;&#39;);</div>
<div class="line">      // The depth in the sourcemap tree we&#39;re currently loading.</div>
<div class="line">      // The root `minifiedTransformedMap` is depth 0, and its source children are depth 1, etc.</div>
<div class="line">      console.assert(ctx.depth === 1);</div>
<div class="line"> </div>
<div class="line">      return transformedMap;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    // Loader will be called to load transformedMap&#39;s source file pointers as well.</div>
<div class="line">    console.assert(file === &#39;helloworld.js&#39;);</div>
<div class="line">    // `transformed.js`&#39;s sourcemap points into `helloworld.js`.</div>
<div class="line">    console.assert(ctx.importer === &#39;transformed.js&#39;);</div>
<div class="line">    // This is a source child of `transformed`, which is a source child of `minifiedTransformedMap`.</div>
<div class="line">    console.assert(ctx.depth === 2);</div>
<div class="line">    return null;</div>
<div class="line">  }</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">console.log(remapped);</div>
<div class="line">// {</div>
<div class="line">//   file: &#39;transpiled.min.js&#39;,</div>
<div class="line">//   mappings: &#39;AAEE&#39;,</div>
<div class="line">//   sources: [&#39;helloworld.js&#39;],</div>
<div class="line">//   version: 3,</div>
<div class="line">// };</div>
</div><!-- fragment --><p>In this example, <code>loader</code> will be called twice:</p>
<ol type="1">
<li><code>"transformed.js"</code>, the first source file pointer in the <code>minifiedTransformedMap</code>. We return the associated sourcemap for it (its a transformed file, after all) so that sourcemap locations can be traced through it into the source files it represents.</li>
<li><code>"helloworld.js"</code>, our original, unmodified source code. This file does not have a sourcemap, so we return <code>null</code>.</li>
</ol>
<p>The <code>remapped</code> sourcemap now points from <code>transformed.min.js</code> into locations in <code>helloworld.js</code>. If you were to read the <code>mappings</code>, it says "0th column of the first line output line points to the 1st
column of the 2nd line of the file `helloworld.js`".</p>
<h2><a class="anchor" id="autotoc_md65"></a>
Multiple transformations of a file</h2>
<p>As a convenience, if you have multiple single-source transformations of a file, you may pass an array of sourcemap files in the order of most-recent transformation sourcemap first. Note that this changes the <code>importer</code> and <code>depth</code> of each call to our loader. So our above example could have been written as:</p>
<div class="fragment"><div class="line">const remapped = remapping(</div>
<div class="line">  [minifiedTransformedMap, transformedMap],</div>
<div class="line">  () =&gt; null</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">console.log(remapped);</div>
<div class="line">// {</div>
<div class="line">//   file: &#39;transpiled.min.js&#39;,</div>
<div class="line">//   mappings: &#39;AAEE&#39;,</div>
<div class="line">//   sources: [&#39;helloworld.js&#39;],</div>
<div class="line">//   version: 3,</div>
<div class="line">// };</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md66"></a>
Advanced control of the loading graph</h2>
<h3><a class="anchor" id="autotoc_md67"></a>
<code>source</code></h3>
<p>The <code>source</code> property can overridden to any value to change the location of the current load. Eg, for an original source file, it allows us to change the location to the original source regardless of what the sourcemap source entry says. And for transformed files, it allows us to change the relative resolving location for child sources of the loaded sourcemap.</p>
<div class="fragment"><div class="line">const remapped = remapping(</div>
<div class="line">  minifiedTransformedMap,</div>
<div class="line">  (file, ctx) =&gt; {</div>
<div class="line"> </div>
<div class="line">    if (file === &#39;transformed.js&#39;) {</div>
<div class="line">      // We pretend the transformed.js file actually exists in the &#39;src/&#39; directory. When the nested</div>
<div class="line">      // source files are loaded, they will now be relative to `src/`.</div>
<div class="line">      ctx.source = &#39;src/transformed.js&#39;;</div>
<div class="line">      return transformedMap;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    console.assert(file === &#39;src/helloworld.js&#39;);</div>
<div class="line">    // We could futher change the source of this original file, eg, to be inside a nested directory</div>
<div class="line">    // itself. This will be reflected in the remapped sourcemap.</div>
<div class="line">    ctx.source = &#39;src/nested/transformed.js&#39;;</div>
<div class="line">    return null;</div>
<div class="line">  }</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">console.log(remapped);</div>
<div class="line">// {</div>
<div class="line">//   …,</div>
<div class="line">//   sources: [&#39;src/nested/helloworld.js&#39;],</div>
<div class="line">// };</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md68"></a>
<code>content</code></h3>
<p>The <code>content</code> property can be overridden when we encounter an original source file. Eg, this allows you to manually provide the source content of the original file regardless of whether the <code>sourcesContent</code> field is present in the parent sourcemap. It can also be set to <code>null</code> to remove the source content.</p>
<div class="fragment"><div class="line">const remapped = remapping(</div>
<div class="line">  minifiedTransformedMap,</div>
<div class="line">  (file, ctx) =&gt; {</div>
<div class="line"> </div>
<div class="line">    if (file === &#39;transformed.js&#39;) {</div>
<div class="line">      // transformedMap does not include a `sourcesContent` field, so usually the remapped sourcemap</div>
<div class="line">      // would not include any `sourcesContent` values.</div>
<div class="line">      return transformedMap;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    console.assert(file === &#39;helloworld.js&#39;);</div>
<div class="line">    // We can read the file to provide the source content.</div>
<div class="line">    ctx.content = fs.readFileSync(file, &#39;utf8&#39;);</div>
<div class="line">    return null;</div>
<div class="line">  }</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">console.log(remapped);</div>
<div class="line">// {</div>
<div class="line">//   …,</div>
<div class="line">//   sourcesContent: [</div>
<div class="line">//     &#39;console.log(&quot;Hello world!&quot;)&#39;,</div>
<div class="line">//   ],</div>
<div class="line">// };</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md69"></a>
Options</h2>
<h3><a class="anchor" id="autotoc_md70"></a>
excludeContent</h3>
<p>By default, <code>excludeContent</code> is <code>false</code>. Passing <code>{ excludeContent: true }</code> will exclude the <code>sourcesContent</code> field from the returned sourcemap. This is mainly useful when you want to reduce the size out the sourcemap.</p>
<h3><a class="anchor" id="autotoc_md71"></a>
decodedMappings</h3>
<p>By default, <code>decodedMappings</code> is <code>false</code>. Passing <code>{ decodedMappings: true }</code> will leave the <code>mappings</code> field in a <a href="https://github.com/rich-harris/sourcemap-codec">decoded state</a> instead of encoding into a VLQ string. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_baaa7c91874e848cb412d3cb007421fa.html">@ampproject</a></li><li class="navelem"><a class="el" href="dir_2ad09345329fea92f2032505e6f34e7c.html">remapping</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
