<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gradiant Ascent: node_modules/@octokit/oauth-app Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gradiant Ascent
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_43cf59d2c606ddfd6aa55cc4ac3207f0.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">oauth-app Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<blockquote class="doxtable">
<p>GitHub OAuth toolset for Node.js </p>
</blockquote>
<p><a href="https://www.npmjs.com/package/@octokit/oauth-app"><img src="https://img.shields.io/npm/v/@octokit/oauth-app.svg" alt="@latest" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/octokit/oauth-app.js/actions?workflow=Test"><img src="https://github.com/octokit/oauth-app.js/workflows/Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a></p>
<details >
<summary >
Table of contents</summary>
<p></p>
<ul>
<li><a class="el" href="/Users/vivi/astro/node_modules/@sinclair/typebox/readme.md#usage">Usage</a><ul>
<li>For OAuth Apps</li>
<li>For GitHub Apps</li>
</ul>
</li>
<li><a class="el" href="/Users/vivi/astro/node_modules/inquirer/README.md#examples">Examples</a></li>
<li>`OAuthApp.defaults(options)`</li>
<li>Constructor options</li>
<li>`app.on(eventName, eventHandler)`</li>
<li>`app.octokit`</li>
<li>`app.getUserOctokit(options)`</li>
<li>`app.getWebFlowAuthorizationUrl(options)`</li>
<li>`app.createToken(options)`<ul>
<li>For OAuth Web flow</li>
<li>For OAuth Device flow</li>
</ul>
</li>
<li>`app.checkToken(options)`</li>
<li>`app.resetToken(options)`</li>
<li>`app.refreshToken(options)`</li>
<li>`app.scopeToken(options)`</li>
<li>`app.deleteToken(options)`</li>
<li>`app.deleteAuthorization(options)`</li>
<li>Middlewares<ul>
<li>`createNodeMiddleware(app, options)`</li>
<li>`createWebWorkerHandler(app, options)`</li>
<li>`createAWSLambdaAPIGatewayV2Handler(app, options)`</li>
<li>Build Custom Middlewares</li>
</ul>
</li>
<li><a class="el" href="md_node__modules_2chai_2_c_o_n_t_r_i_b_u_t_i_n_g.html#contributing">Contributing</a></li>
<li><a class="el" href="/Users/vivi/astro/node_modules/bl/README.md#license">License</a></li>
</ul>
<p></p>
</details>
<h1><a class="anchor" id="autotoc_md5252"></a>
Usage</h1>
<table class="doxtable">
<tr>
<th><p class="starttd"></p>
<p class="intertd">Browsers</p>
<p class="endtd"></p>
</th><td width="100%"><p class="starttd"></p>
<p class="intertd"><code>@octokit/oauth-app</code> is not meant for browser usage.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><p class="starttd"></p>
<p class="intertd">Node</p>
<p class="endtd"></p>
</th><td><p class="starttd"></p>
<p class="intertd">Install with <code>npm install @octokit/oauth-app</code></p>
<p class="endtd"></p>
</td></tr>
</table>
<dl class="section important"><dt>Important</dt><dd>As we use <a href="https://nodejs.org/api/packages.html#conditional-exports">conditional exports</a>, you will need to adapt your <code>tsconfig.json</code> by setting <code>"moduleResolution": "node16", "module": "node16"</code>. <br  />
<br  />
 See the TypeScript docs on <a href="https://www.typescriptlang.org/docs/handbook/modules/reference.html#packagejson-exports">package.json "exports"</a>.<br  />
 See this <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c">helpful guide on transitioning to ESM</a> from <a href="https://github.com/sindresorhus">@sindresorhus</a></dd></dl>
<h2><a class="anchor" id="autotoc_md5253"></a>
For OAuth Apps</h2>
<div class="fragment"><div class="line">import { OAuthApp, createNodeMiddleware } from &quot;@octokit/oauth-app&quot;;</div>
<div class="line">import { createServer } from &quot;node:http&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new OAuthApp({</div>
<div class="line">  clientType: &quot;oauth-app&quot;,</div>
<div class="line">  clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.on(&quot;token&quot;, async ({ token, octokit }) =&gt; {</div>
<div class="line">  const { data } = await octokit.request(&quot;GET /user&quot;);</div>
<div class="line">  console.log(`Token retrieved for ${data.login}`);</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">createServer(createNodeMiddleware(app)).listen(3000);</div>
<div class="line">// can now receive user authorization callbacks at /api/github/oauth/callback</div>
<div class="line">// See all endpoints at https://github.com/octokit/oauth-app.js#middlewares</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5254"></a>
For GitHub Apps</h2>
<p>GitHub Apps do not support <code>scopes</code>. If the GitHub App has expiring user tokens enabled, the token used for the <code>octokit</code> instance will be refreshed automatically, and the additional refresh-related properties will be passed to the <code>"token"</code> event handler.</p>
<div class="fragment"><div class="line">import { OAuthApp, createNodeMiddleware } from &quot;@octokit/oauth-app&quot;;</div>
<div class="line">import { createServer } from &quot;node:http&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new OAuthApp({</div>
<div class="line">  clientType: &quot;github-app&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.on(&quot;token&quot;, async ({ token, octokit, expiresAt }) =&gt; {</div>
<div class="line">  const { data } = await octokit.request(&quot;GET /user&quot;);</div>
<div class="line">  console.log(`Token retrieved for ${data.login}`);</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">createServer(createNodeMiddleware(app)).listen(3000);</div>
<div class="line">// can now receive user authorization callbacks at /api/github/oauth/callback</div>
<div class="line">// See all endpoints at https://github.com/octokit/oauth-app.js#middlewares</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5255"></a>
Examples</h1>
<ul>
<li>Node server with static files served from <code>public/</code> folder, hosted on Glitch: <a href="https://glitch.com/~github-oauth-client">https://glitch.com/~github-oauth-client</a></li>
<li>Serverless functions, hosted on <a href="https://zeit.co/">Zeit's now</a>: <a href="https://github.com/gr2m/octokit-oauth-app-now-example">https://github.com/gr2m/octokit-oauth-app-now-example</a></li>
<li>Serverless functions, hosted on AWS (via <a href="https://begin.com/">begin.com</a>): <a href="https://github.com/gr2m/octokit-oauth-app-begin-example/">https://github.com/gr2m/octokit-oauth-app-begin-example/</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md5256"></a>
<code>OAuthApp.defaults(options)</code></h1>
<p>Create a new <code>OAuthApp</code> with custom defaults for the constructor options</p>
<div class="fragment"><div class="line">const MyOAuthApp = OAuthApp.defaults({</div>
<div class="line">  Octokit: MyOctokit,</div>
<div class="line">});</div>
<div class="line">const app = new MyOAuthApp({ clientId, clientSecret });</div>
<div class="line">// app.octokit is now an instance of MyOctokit</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5257"></a>
Constructor options</h1>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>clientId</code>  </th><th><code>number</code>  </th><td><b>Required</b>. Find <b>Client ID</b> on the app’s about page in settings.   </td></tr>
<tr>
<th><code>clientSecret</code>  </th><th><code>number</code>  </th><td><b>Required</b>. Find <b>Client Secret</b> on the app’s about page in settings.   </td></tr>
<tr>
<th><code>clientType</code>  </th><th><code>string</code>  </th><td>Either <code>"oauth-app"</code> or <code>"github-app"</code>. Defaults to <code>"oauth-app"</code>.   </td></tr>
<tr>
<th><code>allowSignup</code>  </th><th><code>boolean</code>  </th><td>Sets the default value for <code>app.getWebFlowAuthorizationUrl(options)</code>.   </td></tr>
<tr>
<th><code>redirectUrl</code>  </th><th><code>string</code>  </th><td>The URL in your application where users will be sent after authorization. See <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#redirect-urls">Redirect URLs</a> in GitHub’s Developer Guide.   </td></tr>
<tr>
<th><code>defaultScopes</code>  </th><th><code>Array of strings</code>  </th><td><p class="starttd"></p>
<p class="intertd">Only relevant when <code>clientType</code> is set to <code>"oauth-app"</code>.</p>
<p class="intertd">Sets the default <code>scopes</code> value for <code>app.getWebFlowAuthorizationUrl(options)</code>. See <a href="https://docs.github.com/en/developers/apps/scopes-for-oauth-apps#available-scopes">available scopes</a></p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>log</code>  </th><th><code>object</code>  </th><td>Used for internal logging. Defaults to <a href="https://developer.mozilla.org/en-US/docs/Web/API/console"><code>console</code></a>.   </td></tr>
<tr>
<th><code>Octokit</code>  </th><th><code>Constructor</code>  </th><td><p class="starttd"></p>
<p class="intertd">You can pass in your own Octokit constructor with custom defaults and plugins. The Octokit Constructor must use an authentication strategy that is compatible with<a href="https://github.com/octokit/auth-oauth-app.js/#readme">`@octokit/auth-oauth-app</a>.</p>
<p class="intertd">For usage with enterprise, set <code>baseUrl</code> to the hostname + <code>/api/v3</code>. Example:</p>
<div class="fragment"><div class="line">import { Octokit } from &quot;@octokit/core&quot;;</div>
<div class="line">new OAuthApp({</div>
<div class="line">  clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">  Octokit: Octokit.defaults({</div>
<div class="line">    baseUrl: &quot;https://ghe.my-company.com/api/v3&quot;,</div>
<div class="line">  }),</div>
<div class="line">});</div>
</div><!-- fragment --><p class="intertd">Defaults to <code>@octokit/oauth-app</code>'s own <code>Octokit</code> constructor which can be imported separately from <code>OAuthApp</code>. It's <a href="https://github.com/octokit/core.js"><code>@octokit/core</code></a> with the <a href="https://github.com/octokit/auth-oauth-user.js/#readme"><code>@octokit/auth-oauth-user</code></a> authentication strategy.</p>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md5258"></a>
<code>app.on(eventName, eventHandler)</code></h1>
<p>Called whenever a new OAuth access token is created for a user. It accepts two parameters, an event name and a function with one argument</p>
<div class="fragment"><div class="line">app.on(&quot;token.created&quot;, async (context) =&gt; {</div>
<div class="line">  const { data } = await context.octokit.request(&quot;GET /user&quot;);</div>
<div class="line">  app.log.info(`New token created for ${data.login}`);</div>
<div class="line">});</div>
</div><!-- fragment --><p>The <code>eventName</code> can be one of (or an array of)</p>
<ul>
<li><code>token.created</code></li>
<li><code>token.reset</code></li>
<li><code>token.refreshed</code> (GitHub Apps only)</li>
<li><code>token.scoped</code> (GitHub Apps only)</li>
<li><code>token.deleted</code></li>
<li><code>authorization.deleted</code></li>
</ul>
<p>All event handlers are awaited before continuing.</p>
<p><code>context</code> can have the following properties</p>
<table width="100%">
<tr>
<th width="150">property  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>context.name</code>  </th><th><code>string</code>  </th><td>Name of the event. One of: <code>token</code>, <code>authorization</code>   </td></tr>
<tr>
<th><code>context.action</code>  </th><th><code>string</code>  </th><td>Action of the event. One of: <code>created</code>, <code>reset</code>, <code>deleted</code>   </td></tr>
<tr>
<th><code>context.authentication</code>  </th><th><code>object</code>  </th><td><p class="starttd"></p>
<p class="intertd">The OAuth authentication object. See <a href="https://github.com/octokit/auth-oauth-user.js/#authentication-object">https://github.com/octokit/auth-oauth-user.js/#authentication-object</a></p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>context.octokit</code>  </th><th><code>Octokit instance</code>  </th><td><p class="starttd"></p>
<p class="intertd">Authenticated instance using the <code>Octokit</code> option passed to the constructor and <a href="https://github.com/octokit/auth-oauth-user.js/#readme"><code>@octokit/auth-oauth-user</code></a> as authentication strategy.</p>
<p class="intertd">The <code>octokit</code> instance is unauthenticated for <code>"token.deleted"</code> and <code>"authorization.deleted"</code> events.</p>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md5259"></a>
<code>app.octokit</code></h1>
<p>Octokit instance with <a href="https://github.com/octokit/auth-oauth-app.js/#readme">OAuth App authentication</a>. Uses <code>Octokit</code> constructor option</p>
<h1><a class="anchor" id="autotoc_md5260"></a>
<code>app.getUserOctokit(options)</code></h1>
<div class="fragment"><div class="line">const octokit = await app.getUserOctokit({ code: &quot;code123&quot; });</div>
</div><!-- fragment --><p><code>options</code> are the same as in `app.createToken(options)`</p>
<p>The <code>octokit</code> instance is authorized using the user access token if the app is an OAuth app and a user-to-server token if the app is a GitHub app. If the token expires it will be refreshed automatically.</p>
<h1><a class="anchor" id="autotoc_md5261"></a>
<code>app.getWebFlowAuthorizationUrl(options)</code></h1>
<p>Returns and object with all options and a <code>url</code> property which is the authorization URL. See <a href="https://github.com/octokit/oauth-methods.js/#getwebflowauthorizationurl">https://github.com/octokit/oauth-methods.js/#getwebflowauthorizationurl</a></p>
<div class="fragment"><div class="line">const { url } = app.getWebFlowAuthorizationUrl({</div>
<div class="line">  state: &quot;state123&quot;,</div>
<div class="line">  scopes: [&quot;repo&quot;],</div>
<div class="line">});</div>
</div><!-- fragment --><table class="doxtable">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>redirectUrl</code>  </th><th><code>string</code>  </th><td>The URL in your application where users will be sent after authorization. See <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#redirect-urls">Redirect URLs</a> in GitHub’s Developer Guide.   </td></tr>
<tr>
<th><code>login</code>  </th><th><code>string</code>  </th><td>Suggests a specific account to use for signing in and authorizing the app.   </td></tr>
<tr>
<th><code>scopes</code>  </th><th><code>array of strings</code>  </th><td>An array of scope names (or: space-delimited list of scopes). If not provided, scope defaults to an empty list for users that have not authorized any scopes for the application. For users who have authorized scopes for the application, the user won't be shown the OAuth authorization page with the list of scopes. Instead, this step of the flow will automatically complete with the set of scopes the user has authorized for the application. For example, if a user has already performed the web flow twice and has authorized one token with user scope and another token with repo scope, a third web flow that does not provide a scope will receive a token with user and repo scope.   </td></tr>
<tr>
<th><code>state</code>  </th><th><code>string</code>  </th><td>An unguessable random string. It is used to protect against cross-site request forgery attacks. Defaults to <code>Math.random().toString(36).substr(2)</code>.   </td></tr>
<tr>
<th><code>allowSignup</code>  </th><th><code>boolean</code>  </th><td>Whether or not unauthenticated users will be offered an option to sign up for GitHub during the OAuth flow. The default is <code>true</code>. Use <code>false</code> in the case that a policy prohibits signups.    </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md5262"></a>
<code>app.createToken(options)</code></h1>
<p>The method can be used for both, the <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#web-application-flow">OAuth Web Flow</a> and the <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#device-flow">OAuth Device Flow</a>.</p>
<h2><a class="anchor" id="autotoc_md5263"></a>
For OAuth Web flow</h2>
<p>For the web flow, you have to pass the <code>code</code> from URL redirect described in <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps#2-users-are-redirected-back-to-your-site-by-github">step 2</a>.</p>
<div class="fragment"><div class="line">const { token } = await app.createToken({</div>
<div class="line">  code: &quot;code123&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>code</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Pass the code that was passed as <code>?code</code> query parameter in the authorization redirect URL.   </td></tr>
<tr>
<th><code>state</code>  </th><th><code>string</code>  </th><td><b>Required</b>. Pass the state that was passed as <code>?state</code> query parameter in the authorization redirect URL.    </td></tr>
</table>
<p>Resolves with an <a href="https://github.com/octokit/auth-oauth-app.js#authentication-object">user authentication object</a></p>
<h2><a class="anchor" id="autotoc_md5264"></a>
For OAuth Device flow</h2>
<p>For the device flow, you have to pass a <code>onVerification</code> callback function, which prompts the user to enter the received user code at the received authorization URL.</p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>onVerification</code>  </th><th><code>function</code>  </th><td><p class="starttd"></p>
<p class="intertd"><b>Required</b>. A function that is called once the device and user codes were retrieved</p>
<p class="intertd">The <code>onVerification()</code> callback can be used to pause until the user completes step 2, which might result in a better user experience.</p>
<div class="fragment"><div class="line">const auth = createOAuthUserAuth({</div>
<div class="line">  clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">  onVerification(verification) {</div>
<div class="line">    console.log(&quot;Open %s&quot;, verification.verification_uri);</div>
<div class="line">    console.log(&quot;Enter code: %s&quot;, verification.user_code);</div>
<div class="line"> </div>
<div class="line">    await prompt(&quot;press enter when you are ready to continue&quot;);</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
<tr>
<th><code>scopes</code>  </th><th><code>array of strings</code>  </th><td><p class="starttd"></p>
<p class="intertd">Only relevant if <code>app.type</code> is <code>"oauth-app"</code>. Scopes are not supported by GitHub apps.</p>
<p class="intertd">Array of OAuth scope names that the user access token should be granted. Defaults to no scopes (<code>[]</code>).</p>
<p class="endtd"></p>
</td></tr>
</table>
<p>Resolves with an <a href="https://github.com/octokit/auth-oauth-app.js#authentication-object">user authentication object</a></p>
<h1><a class="anchor" id="autotoc_md5265"></a>
<code>app.checkToken(options)</code></h1>
<div class="fragment"><div class="line">try {</div>
<div class="line">  const { created_at, app, user } = await app.checkToken({ token });</div>
<div class="line">  console.log(</div>
<div class="line">    `token valid, created on %s by %s for %s`,</div>
<div class="line">    created_at,</div>
<div class="line">    user.login,</div>
<div class="line">    app.name,</div>
<div class="line">  );</div>
<div class="line">} catch (error) {</div>
<div class="line">  // token invalid or request error</div>
<div class="line">}</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td><b>Required</b>.    </td></tr>
</table>
<p>Resolves with response body from <a href="https://docs.github.com/en/rest/reference/apps#check-a-token">"Check a token" request</a> with an additional <code>authentication</code> property which is a <a href="https://github.com/octokit/auth-oauth-app.js#authentication-object">user authentication object</a>.</p>
<h1><a class="anchor" id="autotoc_md5266"></a>
<code>app.resetToken(options)</code></h1>
<div class="fragment"><div class="line">const { data, authentication } = await app.resetToken({</div>
<div class="line">  token: &quot;token123&quot;,</div>
<div class="line">});</div>
<div class="line">// &quot;token123&quot; is no longer valid. Use `token` instead</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td><b>Required</b>.    </td></tr>
</table>
<p>Resolves with response body from <a href="https://docs.github.com/en/rest/reference/apps#reset-a-token">"Reset a token" request</a> with an additional <code>authentication</code> property which is a <a href="https://github.com/octokit/auth-oauth-app.js#authentication-object">user authentication object</a>.</p>
<h1><a class="anchor" id="autotoc_md5267"></a>
<code>app.refreshToken(options)</code></h1>
<p>Expiring tokens are only supported by GitHub Apps, and only if expiring user tokens are enabled.</p>
<div class="fragment"><div class="line">const { data, authentication } = await app.refreshToken({</div>
<div class="line">  refreshToken: &quot;refreshtoken123&quot;,</div>
<div class="line">});</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>refreshToken</code>  </th><th><code>string</code>  </th><td><b>Required</b>.    </td></tr>
</table>
<p>Resolves with response body from <a href="https://docs.github.com/en/developers/apps/refreshing-user-to-server-access-tokens#renewing-a-user-token-with-a-refresh-token">"Renewing a user token with a refresh token" request</a> (JSON) with an additional <code>authentication</code> property which is a <a href="https://github.com/octokit/auth-oauth-app.js#authentication-object">user authentication object</a>.</p>
<h1><a class="anchor" id="autotoc_md5268"></a>
<code>app.scopeToken(options)</code></h1>
<p>Scoping a token is only supported by GitHub Apps. "Scoping" in this context means to limit access to a selected installation, with a subset of repositories and permissions.</p>
<div class="fragment"><div class="line">const { data, authentication } = await app.scopeToken({</div>
<div class="line">  clientType: &quot;github-app&quot;,</div>
<div class="line">  clientId: &quot;lv1.1234567890abcdef&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef12347890abcdef12345678&quot;,</div>
<div class="line">  token: &quot;usertoken123&quot;,</div>
<div class="line">  target: &quot;octokit&quot;,</div>
<div class="line">  repositories: [&quot;oauth-app.js&quot;],</div>
<div class="line">  permissions: {</div>
<div class="line">    issues: &quot;write&quot;,</div>
<div class="line">  },</div>
<div class="line">});</div>
</div><!-- fragment --><p>Options</p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>target</code>  </th><th><code>string</code>  </th><td><b>Required unless <code>targetId</code> is set</b>. The name of the user or organization to scope the user-to-server access token to.   </td></tr>
<tr>
<th><code>targetId</code>  </th><th><code>integer</code>  </th><td><b>Required unless <code>target</code> is set</b>. The ID of the user or organization to scope the user-to-server access token to.   </td></tr>
<tr>
<th><code>repositories</code>  </th><th><code>array of strings</code>  </th><td>The list of repository names to scope the user-to-server access token to. <code>repositories</code> may not be specified if <code>repository_ids</code> is specified.   </td></tr>
<tr>
<th><code>repository_ids</code>  </th><th><code>array of integers</code>  </th><td>The list of repository IDs to scope the user-to-server access token to. <code>repositories</code> may not be specified if <code>repositories</code> is specified.   </td></tr>
<tr>
<th><code>permissions</code>  </th><th><code>object</code>  </th><td>The permissions granted to the user-to-server access token. See <a href="https://docs.github.com/en/rest/reference/permissions-required-for-github-apps">GitHub App Permissions</a>.    </td></tr>
</table>
<p>Resolves with response body from <a href="https://docs.github.com/en/rest/reference/apps#create-a-scoped-access-token">"Create a scoped access token" request</a> with an additional <code>authentication</code> property which is a <a href="https://github.com/octokit/auth-oauth-app.js#authentication-object">user authentication object</a>.</p>
<h1><a class="anchor" id="autotoc_md5269"></a>
<code>app.deleteToken(options)</code></h1>
<div class="fragment"><div class="line">await app.deleteToken({</div>
<div class="line">  token: &quot;token123&quot;,</div>
<div class="line">});</div>
<div class="line">// &quot;token123&quot; is no longer valid.</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td><b>Required</b>.    </td></tr>
</table>
<p>Resolves with response body from <a href="https://docs.github.com/en/rest/reference/apps#delete-an-app-token">"Delete a token" request</a>.</p>
<h1><a class="anchor" id="autotoc_md5270"></a>
<code>app.deleteAuthorization(options)</code></h1>
<div class="fragment"><div class="line">await app.deleteAuthorization({</div>
<div class="line">  token: &quot;token123&quot;,</div>
<div class="line">});</div>
<div class="line">// &quot;token123&quot; is no longer valid, and no tokens can be created until the app gets re-authorized.</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>token</code>  </th><th><code>string</code>  </th><td><b>Required</b>.    </td></tr>
</table>
<p>Resolves with response body from <a href="https://docs.github.com/en/rest/reference/apps#delete-an-app-authorization">"Delete an app authorization" request</a>.</p>
<h1><a class="anchor" id="autotoc_md5271"></a>
Middlewares</h1>
<p>A middleware is a method or set of methods to handle requests for common environments.</p>
<p>By default, all middlewares expose the following routes</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Route Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GET /api/github/oauth/login</code>   </td><td class="markdownTableBodyNone">Redirects to GitHub's authorization endpoint. Accepts optional <code>?state</code> and <code>?scopes</code> query parameters. <code>?scopes</code> is a comma-separated list of <a href="https://docs.github.com/en/developers/apps/scopes-for-oauth-apps#available-scopes">supported OAuth scope names</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/github/oauth/callback</code>   </td><td class="markdownTableBodyNone">The client's redirect endpoint. This is where the <code>token</code> event gets triggered    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Exchange an authorization code for an OAuth Access token. If successful, the <code>token</code> event gets triggered.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Check if token is valid. Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/rest/reference/apps#check-a-token"><code>POST /applications/{client_id}/token</code></a> endpoint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PATCH /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Resets a token (invalidates current one, returns new token). Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/rest/reference/apps#reset-a-token"><code>PATCH /applications/{client_id}/token</code></a> endpoint.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PATCH /api/github/oauth/refresh-token</code>   </td><td class="markdownTableBodyNone">Refreshes an expiring token (invalidates current one, returns new access token and refresh token). Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/developers/apps/refreshing-user-to-server-access-tokens#renewing-a-user-token-with-a-refresh-token"><code>POST https://github.com/login/oauth/access_token</code></a> OAuth endpoint.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /api/github/oauth/token/scoped</code>   </td><td class="markdownTableBodyNone">Creates a scoped token (does not invalidate the current one). Must authenticate using token in <code>Authorization</code> header. Uses GitHub's <a href="https://docs.github.com/en/rest/reference/apps#create-a-scoped-access-token"><code>POST /applications/{client_id}/token/scoped</code></a> endpoint.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DELETE /api/github/oauth/token</code>   </td><td class="markdownTableBodyNone">Invalidates current token, basically the equivalent of a logout. Must authenticate using token in <code>Authorization</code> header.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DELETE /api/github/oauth/grant</code>   </td><td class="markdownTableBodyNone">Revokes the user's grant, basically the equivalent of an uninstall. must authenticate using token in <code>Authorization</code> header.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5272"></a>
<code>createNodeMiddleware(app, options)</code></h2>
<p>Native http server middleware for Node.js</p>
<div class="fragment"><div class="line">import { OAuthApp, createNodeMiddleware } from &quot;@octokit/oauth-app&quot;;</div>
<div class="line">import { createServer } from &quot;node:http&quot;;</div>
<div class="line"> </div>
<div class="line">const app = new OAuthApp({</div>
<div class="line">  clientType: &quot;oauth-app&quot;,</div>
<div class="line">  clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const middleware = createNodeMiddleware(app, {</div>
<div class="line">  pathPrefix: &quot;/api/github/oauth&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">createServer(middleware).listen(3000);</div>
<div class="line">// can now receive user authorization callbacks at /api/github/oauth/callback</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>app</code>  </th><th><code>OAuthApp instance</code>  </th><td><b>Required</b>.   </td></tr>
<tr>
<th><code>options.pathPrefix</code>  </th><th><code>string</code>  </th><td><p class="starttd"></p>
<p class="intertd">All exposed paths will be prefixed with the provided prefix. Defaults to <code>"/api/github/oauth"</code></p>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5273"></a>
<code>createWebWorkerHandler(app, options)</code></h2>
<p>Event handler for web worker environments (Cloudflare workers or Deno).</p>
<div class="fragment"><div class="line">// worker.js</div>
<div class="line">import { OAuthApp, createWebWorkerHandler } from &quot;@octokit/oauth-app&quot;;</div>
<div class="line">const app = new OAuthApp({</div>
<div class="line">  clientType: &quot;oauth-app&quot;,</div>
<div class="line">  clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const handleRequest = createWebWorkerHandler(app, {</div>
<div class="line">  pathPrefix: &quot;/api/github/oauth&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">addEventListener(&quot;fetch&quot;, (event) =&gt; {</div>
<div class="line">  event.respondWith(handleRequest(event.request));</div>
<div class="line">});</div>
<div class="line">// can now receive user authorization callbacks at /api/github/oauth/callback</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>app</code>  </th><th><code>OAuthApp instance</code>  </th><td><b>Required</b>.   </td></tr>
<tr>
<th><code>options.pathPrefix</code>  </th><th><code>string</code>  </th><td><p class="starttd"></p>
<p class="intertd">All exposed paths will be prefixed with the provided prefix. Defaults to <code>"/api/github/oauth"</code></p>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5274"></a>
<code>createAWSLambdaAPIGatewayV2Handler(app, options)</code></h2>
<p>Event handler for AWS Lambda using API Gateway V2 HTTP integration.</p>
<div class="fragment"><div class="line">// worker.js</div>
<div class="line">import {</div>
<div class="line">  OAuthApp,</div>
<div class="line">  createAWSLambdaAPIGatewayV2Handler,</div>
<div class="line">} from &quot;@octokit/oauth-app&quot;;</div>
<div class="line">const app = new OAuthApp({</div>
<div class="line">  clientType: &quot;oauth-app&quot;,</div>
<div class="line">  clientId: &quot;1234567890abcdef1234&quot;,</div>
<div class="line">  clientSecret: &quot;1234567890abcdef1234567890abcdef12345678&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">export const handler = createAWSLambdaAPIGatewayV2Handler(app, {</div>
<div class="line">  pathPrefix: &quot;/api/github/oauth&quot;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// can now receive user authorization callbacks at /api/github/oauth/callback</div>
</div><!-- fragment --><table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>app</code>  </th><th><code>OAuthApp instance</code>  </th><td><b>Required</b>.   </td></tr>
<tr>
<th><code>options.pathPrefix</code>  </th><th><code>string</code>  </th><td><p class="starttd"></p>
<p class="intertd">All exposed paths will be prefixed with the provided prefix. Defaults to <code>"/api/github/oauth"</code></p>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5275"></a>
Build Custom Middlewares</h2>
<p>When above middlewares do not meet your needs, you can build your own using the exported <code>handleRequest</code> function.</p>
<p><a href="./src/middleware/handle-request.ts"><code>handleRequest</code></a> function is an abstract HTTP handler which accepts an <code>OctokitRequest</code> and returns an <code>OctokitResponse</code> if the request matches any predefined route.</p>
<blockquote class="doxtable">
<p>Different environments (e.g., Node.js, Cloudflare Workers, Deno, etc.) exposes different APIs when processing HTTP requests (e.g., <a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage"><code>IncomingMessage</code></a> for Node.js, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code></a> for Cloudflare workers, etc.). Two HTTP-related types (<a href=".src/middleware/types.ts"><code>OctokitRequest</code> and <code>OctokitResponse</code></a>) are generalized to make an abstract HTTP handler possible. </p>
</blockquote>
<p>To share the behavior and capability with the existing Node.js middleware (and be compatible with <a href="https://github.com/octokit/auth-oauth-user-client.js">OAuth user authentication strategy in the browser</a>), it is better to implement your HTTP handler/middleware based on <code>handleRequest</code> function.</p>
<p><code>handleRequest</code> function takes three parameters:</p>
<table width="100%">
<tr>
<th width="150">name  </th><th width="70">type  </th><th>description     </th></tr>
<tr>
<th><code>app</code>  </th><th><code>OAuthApp instance</code>  </th><td><b>Required</b>.   </td></tr>
<tr>
<th><code>options.pathPrefix</code>  </th><th><code>string</code>  </th><td><p class="starttd"></p>
<p class="intertd">All exposed paths will be prefixed with the provided prefix. Defaults to <code>"/api/github/oauth"</code></p>
<p class="endtd"></p>
</td></tr>
<tr>
<th><code>request</code>  </th><th><code>OctokitRequest</code>  </th><td>Generalized HTTP request in <code>OctokitRequest</code> type.    </td></tr>
</table>
<p>Implementing an HTTP handler/middleware for a certain environment involves three steps:</p>
<ol type="1">
<li>Write a function to parse the HTTP request (e.g., <code>IncomingMessage</code> in Node.js) into an <code>OctokitRequest</code> object. See <a href=".src/middleware/node/parse-request.ts"><code>node/parse-request.ts</code></a> for reference.</li>
<li>Write a function to render an <code>OctokitResponse</code> object (e.g., as <code>ServerResponse</code> in Node.js). See <a href=".src/middleware/node/send-response.ts"><code>node/send-response.ts</code></a> for reference.</li>
<li>Expose an HTTP handler/middleware in the dialect of the environment which performs three steps:<ol type="a">
<li>Parse the HTTP request using (1).</li>
<li>Process the <code>OctokitRequest</code> object using <code>handleRequest</code>.</li>
<li>Render the <code>OctokitResponse</code> object using (2).</li>
</ol>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md5276"></a>
Contributing</h1>
<p>See <a class="el" href="zod-to-json-schema_2_c_o_n_t_r_i_b_u_t_i_n_g_8md.html">CONTRIBUTING.md</a></p>
<h1><a class="anchor" id="autotoc_md5277"></a>
License</h1>
<p>[MIT](LICENSE) </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_acd06b18086a0dd2ae699b1e0b775be8.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_e733d42223b3eabc0ae30c8e1a011656.html">@octokit</a></li><li class="navelem"><a class="el" href="dir_43cf59d2c606ddfd6aa55cc4ac3207f0.html">oauth-app</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
