\doxysection{node\+\_\+modules/micromark-\/extension-\/mdxjs-\/esm Directory Reference}
\hypertarget{dir_63101da2820a1c208db2953916f2de5d}{}\label{dir_63101da2820a1c208db2953916f2de5d}\index{node\_modules/micromark-\/extension-\/mdxjs-\/esm Directory Reference@{node\_modules/micromark-\/extension-\/mdxjs-\/esm Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://github.com/micromark/micromark-extension-mdxjs-esm/actions}{\texttt{ }} \href{https://codecov.io/github/micromark/micromark-extension-mdxjs-esm}{\texttt{ }} \href{https://www.npmjs.com/package/micromark-extension-mdxjs-esm}{\texttt{ }} \href{https://bundlejs.com/?q=micromark-extension-mdxjs-esm}{\texttt{ }} \href{https://opencollective.com/unified}{\texttt{ }} \href{https://opencollective.com/unified}{\texttt{ }} \href{https://github.com/micromark/micromark/discussions}{\texttt{ }}

\href{https://github.com/micromark/micromark}{\texttt{ micromark}} extension to support \href{https://mdxjs.com}{\texttt{ MDX}} ESM (`import x from \textquotesingle{}y'\`{}).\hypertarget{readme.md_autotoc_md23429}{}\doxysubsection{\texorpdfstring{Contents}{Contents}}\label{readme.md_autotoc_md23429}

\begin{DoxyItemize}
\item What is this?
\item When to use this
\item Install
\item Use
\item \doxylink{README.md_api}{API}
\begin{DoxyItemize}
\item \`{}mdxjs\+Esm(options)\`{}
\item \doxylink{README.md_options}{\`{}\+Options\`{}}
\end{DoxyItemize}
\item Authoring
\item Syntax
\item Errors
\begin{DoxyItemize}
\item Could not parse import/exports with acorn
\item Unexpected \`{}\$type\`{} in code\+: only import/exports are supported
\end{DoxyItemize}
\item Tokens
\item \doxylink{readme.md_types}{Types}
\item Compatibility
\item Security
\item Related
\item \doxylink{readme.md_contribute}{Contribute}
\item \doxylink{README.md_license}{License}
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md23430}{}\doxysubsection{\texorpdfstring{What is this?}{What is this?}}\label{readme.md_autotoc_md23430}
This package contains an extension that adds support for the ESM syntax enabled by \href{https://mdxjs.com}{\texttt{ MDX}} to \href{https://github.com/micromark/micromark}{\texttt{ {\ttfamily micromark}}}. These extensions are used inside MDX. It matches how imports and exports work in Java\+Script through acorn.

This package is aware of Java\+Script syntax.\hypertarget{readme.md_autotoc_md23431}{}\doxysubsection{\texorpdfstring{When to use this}{When to use this}}\label{readme.md_autotoc_md23431}
This project is useful when you want to support ESM in markdown.

You can use this extension when you are working with \href{https://github.com/micromark/micromark}{\texttt{ {\ttfamily micromark}}}. To support all MDX features, use \href{https://github.com/micromark/micromark-extension-mdxjs}{\texttt{ {\ttfamily micromark-\/extension-\/mdxjs}}} instead.

When you need a syntax tree, combine this package with \href{https://github.com/syntax-tree/mdast-util-mdxjs-esm}{\texttt{ {\ttfamily mdast-\/util-\/mdxjs-\/esm}}}.

All these packages are used in \href{https://mdxjs.com/packages/remark-mdx/}{\texttt{ {\ttfamily remark-\/mdx}}}, which focusses on making it easier to transform content by abstracting these internals away.

When you are using \href{https://mdxjs.com}{\texttt{ {\ttfamily mdx-\/js/mdx}}}, all of this is already included.\hypertarget{readme.md_autotoc_md23432}{}\doxysubsection{\texorpdfstring{Install}{Install}}\label{readme.md_autotoc_md23432}
This package is \href{https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c}{\texttt{ ESM only}}. In Node.\+js (version 16+), install with \href{https://docs.npmjs.com/cli/install}{\texttt{ npm}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ micromark-\/extension-\/mdxjs-\/esm}

\end{DoxyCode}


In Deno with \href{https://esm.sh}{\texttt{ {\ttfamily esm.\+sh}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{mdxjsEsm\}\ from\ 'https://esm.sh/micromark-\/extension-\/mdxjs-\/esm@2'}

\end{DoxyCode}


In browsers with \href{https://esm.sh}{\texttt{ {\ttfamily esm.\+sh}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{mdxjsEsm\}\ from\ 'https://esm.sh/micromark-\/extension-\/mdxjs-\/esm@2?bundle'}
\DoxyCodeLine{</script>}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md23433}{}\doxysubsection{\texorpdfstring{Use}{Use}}\label{readme.md_autotoc_md23433}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{Parser\}\ from\ 'acorn'}
\DoxyCodeLine{import\ acornJsx\ from\ 'acorn-\/jsx'}
\DoxyCodeLine{import\ \{micromark\}\ from\ 'micromark'}
\DoxyCodeLine{import\ \{mdxjsEsm\}\ from\ 'micromark-\/extension-\/mdxjs-\/esm'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ acorn\ =\ Parser.extend(acornJsx())}
\DoxyCodeLine{}
\DoxyCodeLine{const\ output\ =\ micromark('import\ a\ from\ "{}b"{}\(\backslash\)n\(\backslash\)n\#\ c',\ \{}
\DoxyCodeLine{\ \ extensions:\ [mdxjsEsm(\{acorn\})]}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(output)}

\end{DoxyCode}


Yields\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<h1>c</h1>}

\end{DoxyCode}


…which is useless\+: go to a syntax tree with \href{https://github.com/syntax-tree/mdast-util-from-markdown}{\texttt{ {\ttfamily mdast-\/util-\/from-\/markdown}}} and \href{https://github.com/syntax-tree/mdast-util-mdxjs-esm}{\texttt{ {\ttfamily mdast-\/util-\/mdxjs-\/esm}}} instead.\hypertarget{readme.md_autotoc_md23434}{}\doxysubsection{\texorpdfstring{API}{API}}\label{readme.md_autotoc_md23434}
This package exports the identifier \`{}mdxjs\+Esm\`{}. There is no default export.

The export map supports the \href{https://nodejs.org/api/packages.html\#packages_resolving_user_conditions}{\texttt{ {\ttfamily development} condition}}. Run {\ttfamily node -\/-\/conditions development module.\+js} to get instrumented dev code. Without this condition, production code is loaded.\hypertarget{readme.md_autotoc_md23435}{}\doxysubsubsection{\texorpdfstring{{\ttfamily mdxjs\+Esm(options)}}{{\ttfamily mdxjs\+Esm(options)}}}\label{readme.md_autotoc_md23435}
Create an extension for {\ttfamily micromark} to enable MDX ESM syntax.\hypertarget{readme.md_autotoc_md23436}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md23436}

\begin{DoxyItemize}
\item {\ttfamily options} (\doxylink{README.md_options}{\`{}\+Options\`{}}, required) — configuration
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md23437}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md23437}
Extension for {\ttfamily micromark} that can be passed in {\ttfamily extensions} to enable MDX ESM syntax (\href{https://github.com/micromark/micromark\#syntaxextension}{\texttt{ {\ttfamily Extension}}}).\hypertarget{readme.md_autotoc_md23438}{}\doxysubsubsection{\texorpdfstring{{\ttfamily Options}}{{\ttfamily Options}}}\label{readme.md_autotoc_md23438}
Configuration (Type\+Script type).\hypertarget{readme.md_autotoc_md23439}{}\doxysubsubsubsubsubsection{\texorpdfstring{Fields}{Fields}}\label{readme.md_autotoc_md23439}

\begin{DoxyItemize}
\item {\ttfamily acorn} (\href{https://github.com/acornjs/acorn}{\texttt{ {\ttfamily Acorn}}}, required) — acorn parser to use
\item {\ttfamily acorn\+Options} (\href{https://github.com/acornjs/acorn/blob/96c721dbf89d0ccc3a8c7f39e69ef2a6a3c04dfa/acorn/dist/acorn.d.ts\#L16}{\texttt{ {\ttfamily Acorn\+Options}}}, default\+: `\{ecma\+Version\+: 2024, locations\+: true, source\+Type\+: \textquotesingle{}module'\}{\ttfamily ) — configuration for acorn; all fields except}locations{\ttfamily can be set \texorpdfstring{$\ast$}{*}}add\+Result{\ttfamily (}boolean{\ttfamily , default\+:}false{\ttfamily ) — whether to add}estree\`{} fields to tokens with results from acorn
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md23440}{}\doxysubsection{\texorpdfstring{Authoring}{Authoring}}\label{readme.md_autotoc_md23440}
When authoring markdown with ESM, make sure to follow export and import statements with blank lines before more markdown.

All valid imports and exports are supported, depending on what the given acorn instance and configuration supports.

When the lowercase strings {\ttfamily export} or {\ttfamily import} are found, followed by a space, we expect Java\+Script. Otherwise, like normal in markdown, we exit and it’ll end up as a paragraph. We continue parsing until we find a blank line. At that point, we parse with acorn\+: it if parses, we found our block. Otherwise, if parsing failed at the last character, we assume it’s a blank line in code\+: we continue on until the next blank line and try again. Otherwise, the acorn error is thrown.

Some examples of valid export and import statements\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ a\ from\ 'b'}
\DoxyCodeLine{import\ *\ as\ a\ from\ 'b'}
\DoxyCodeLine{import\ \{a\}\ from\ 'b'}
\DoxyCodeLine{import\ \{a\ as\ b\}\ from\ 'c'}
\DoxyCodeLine{import\ a,\ \{b\ as\ c\}\ from\ 'd'}
\DoxyCodeLine{import\ a,\ *\ as\ b\ from\ 'c'}
\DoxyCodeLine{import\ 'a'}
\DoxyCodeLine{}
\DoxyCodeLine{export\ var\ a\ =\ ''}
\DoxyCodeLine{export\ const\ a\ =\ ''}
\DoxyCodeLine{export\ let\ a\ =\ ''}
\DoxyCodeLine{export\ var\ a,\ b}
\DoxyCodeLine{export\ var\ a\ =\ 'a',\ b\ =\ 'b'}
\DoxyCodeLine{export\ function\ a()\ \{\}}
\DoxyCodeLine{export\ class\ a\ \{\}}
\DoxyCodeLine{export\ var\ \{a\}\ =\ \{\}}
\DoxyCodeLine{export\ var\ \{a:\ b\}\ =\ \{\}}
\DoxyCodeLine{export\ var\ [a]\ =\ []}
\DoxyCodeLine{export\ default\ a\ =\ 1}
\DoxyCodeLine{export\ default\ function\ a()\ \{\}}
\DoxyCodeLine{export\ default\ class\ a\ \{\}}
\DoxyCodeLine{export\ *\ from\ 'a'}
\DoxyCodeLine{export\ *\ as\ a\ from\ 'b'}
\DoxyCodeLine{export\ \{a\}\ from\ 'b'}
\DoxyCodeLine{export\ \{a\ as\ b\}\ from\ 'c'}
\DoxyCodeLine{export\ \{default\}\ from\ 'b'}
\DoxyCodeLine{export\ \{default\ as\ a,\ b\}\ from\ 'c'}
\DoxyCodeLine{}
\DoxyCodeLine{\{/*\ Blank\ lines\ are\ supported\ in\ expressions:\ */\}}
\DoxyCodeLine{}
\DoxyCodeLine{export\ function\ a()\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ return\ 'b'}
\DoxyCodeLine{}
\DoxyCodeLine{\}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\ -\/invalid}
\DoxyCodeLine{\{/*\ A\ blank\ line\ must\ be\ used\ after\ import/exports:\ this\ is\ incorrect!\ */\}}
\DoxyCodeLine{}
\DoxyCodeLine{import\ a\ from\ 'b'}
\DoxyCodeLine{\#\#\ Hello,\ world!}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md23441}{}\doxysubsection{\texorpdfstring{Syntax}{Syntax}}\label{readme.md_autotoc_md23441}
ESM forms with the following BNF\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{;\ Restriction:\ the\ entire\ construct\ must\ be\ valid\ JavaScript.}
\DoxyCodeLine{mdx\_esm\ ::=\ word\ '\ '\ *line\ *(eol\ *line)}
\DoxyCodeLine{}
\DoxyCodeLine{word\ ::=\ 'e'\ 'x'\ 'p'\ 'o'\ 'r'\ 't'\ |\ 'i'\ 'm'\ 'p'\ 'o'\ 'r'\ 't'}

\end{DoxyCode}


This construct must be followed by a blank line or eof (end of file).\hypertarget{readme.md_autotoc_md23442}{}\doxysubsection{\texorpdfstring{Errors}{Errors}}\label{readme.md_autotoc_md23442}
\hypertarget{readme.md_autotoc_md23443}{}\doxysubsubsection{\texorpdfstring{Could not parse import/exports with acorn}{Could not parse import/exports with acorn}}\label{readme.md_autotoc_md23443}
This error occurs if acorn crashes (source\+: {\ttfamily micromark-\/extension-\/mdxjs-\/esm}, rule id\+: {\ttfamily acorn}). For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ -\/invalid}
\DoxyCodeLine{import\ 1/1}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md23444}{}\doxysubsubsection{\texorpdfstring{Unexpected {\ttfamily \$type} in code\+: only import/exports are supported}{Unexpected {\ttfamily \$type} in code\+: only import/exports are supported}}\label{readme.md_autotoc_md23444}
This error occurs when a non-\/\+ESM construct is found (source\+: {\ttfamily micromark-\/extension-\/mdxjs-\/esm}, rule id\+: {\ttfamily non-\/esm}). For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ -\/invalid}
\DoxyCodeLine{export\ var\ a\ =\ 1}
\DoxyCodeLine{var\ b}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md23445}{}\doxysubsection{\texorpdfstring{Tokens}{Tokens}}\label{readme.md_autotoc_md23445}
An {\ttfamily mdxjs\+Esm} token is used to reflect the block of import/exports in markdown.

It includes\+:


\begin{DoxyItemize}
\item {\ttfamily line\+Ending} for the {\ttfamily \textbackslash{}r}, {\ttfamily \textbackslash{}n}, and {\ttfamily \textbackslash{}r\textbackslash{}n}
\item {\ttfamily line\+Ending\+Blank} for the same characters but when after potential whitespace and another line ending
\item {\ttfamily whitespace} for markdown spaces and tabs in blank lines
\item {\ttfamily mdxjs\+Esm\+Data} for any character in a line of {\ttfamily mdxjs\+Esm}
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md23446}{}\doxysubsection{\texorpdfstring{Types}{Types}}\label{readme.md_autotoc_md23446}
This package is fully typed with \href{https://www.typescriptlang.org}{\texttt{ Type\+Script}}. It exports the additional type \doxylink{README.md_options}{\`{}\+Options\`{}}.\hypertarget{readme.md_autotoc_md23447}{}\doxysubsection{\texorpdfstring{Compatibility}{Compatibility}}\label{readme.md_autotoc_md23447}
Projects maintained by the unified collective are compatible with maintained versions of Node.\+js.

When we cut a new major release, we drop support for unmaintained versions of Node. This means we try to keep the current release line, {\ttfamily micromark-\/extension-\/mdxjs-\/esm@\texorpdfstring{$^\wedge$}{\string^}2}, compatible with Node.\+js 16.

This package works with {\ttfamily micromark} version {\ttfamily 3} and later.\hypertarget{readme.md_autotoc_md23448}{}\doxysubsection{\texorpdfstring{Security}{Security}}\label{readme.md_autotoc_md23448}
This package is safe.\hypertarget{readme.md_autotoc_md23449}{}\doxysubsection{\texorpdfstring{Related}{Related}}\label{readme.md_autotoc_md23449}

\begin{DoxyItemize}
\item \href{https://github.com/micromark/micromark-extension-mdxjs}{\texttt{ {\ttfamily micromark-\/extension-\/mdxjs}}} — support all MDX syntax
\item \href{https://github.com/syntax-tree/mdast-util-mdxjs-esm}{\texttt{ {\ttfamily mdast-\/util-\/mdxjs-\/esm}}} — support MDX ESM in mdast
\item \href{https://mdxjs.com/packages/remark-mdx/}{\texttt{ {\ttfamily remark-\/mdx}}} — support all MDX syntax in remark
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md23450}{}\doxysubsection{\texorpdfstring{Contribute}{Contribute}}\label{readme.md_autotoc_md23450}
See \href{https://github.com/micromark/.github/blob/main/contributing.md}{\texttt{ {\ttfamily contributing.\+md} in {\ttfamily micromark/.github}}} for ways to get started. See \href{https://github.com/micromark/.github/blob/main/support.md}{\texttt{ {\ttfamily support.\+md}}} for ways to get help.

This project has a \href{https://github.com/micromark/.github/blob/main/code-of-conduct.md}{\texttt{ code of conduct}}. By interacting with this repository, organization, or community you agree to abide by its terms.\hypertarget{readme.md_autotoc_md23451}{}\doxysubsection{\texorpdfstring{License}{License}}\label{readme.md_autotoc_md23451}
\mbox{[}MIT\mbox{]}\mbox{[}license\mbox{]} © \href{https://wooorm.com}{\texttt{ Titus Wormer}} 