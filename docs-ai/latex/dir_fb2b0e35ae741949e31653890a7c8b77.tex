\doxysection{node\+\_\+modules/cluster-\/key-\/slot Directory Reference}
\hypertarget{dir_fb2b0e35ae741949e31653890a7c8b77}{}\label{dir_fb2b0e35ae741949e31653890a7c8b77}\index{node\_modules/cluster-\/key-\/slot Directory Reference@{node\_modules/cluster-\/key-\/slot Directory Reference}}


\doxysubsection{Detailed Description}
\mbox{[}!\mbox{[}Coverage Status\mbox{]}(\href{https://coveralls.io/repos/github/Salakar/cluster-key-slot/badge.svg?branch=master}{\texttt{ https\+://coveralls.\+io/repos/github/\+Salakar/cluster-\/key-\/slot/badge.\+svg?branch=master}})\mbox{]}(\href{https://coveralls.io/github/Salakar/cluster-key-slot?branch=master}{\texttt{ https\+://coveralls.\+io/github/\+Salakar/cluster-\/key-\/slot?branch=master}})  \href{https://www.npmjs.com/package/cluster-key-slot}{\texttt{ }} \href{https://david-dm.org/Salakar/cluster-key-slot}{\texttt{ }} \href{/LICENSE}{\texttt{ }} \href{https://twitter.com/mikediarmid}{\texttt{ }}\hypertarget{README.md_autotoc_md10604}{}\doxysubsection{\texorpdfstring{Redis Key Slot Calculator}{Redis Key Slot Calculator}}\label{README.md_autotoc_md10604}
A high performance redis cluster key slot calculator for node redis clients e.\+g. \href{https://github.com/NodeRedis/node_redis}{\texttt{ node\+\_\+redis}}, \href{https://github.com/luin/ioredis}{\texttt{ ioredis}} and \href{https://github.com/gosquared/redis-clustr/}{\texttt{ redis-\/clustr}}.

This also handles key tags such as {\ttfamily somekey\{actual\+Tag\}}.\hypertarget{README.md_autotoc_md10605}{}\doxysubsubsection{\texorpdfstring{Install}{Install}}\label{README.md_autotoc_md10605}
Install with \href{https://npmjs.org/}{\texttt{ NPM}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ cluster-\/key-\/slot\ -\/-\/save}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md10606}{}\doxysubsubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md10606}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ calculateSlot\ =\ require('cluster-\/key-\/slot');}
\DoxyCodeLine{const\ calculateMultipleSlots\ =\ require('cluster-\/key-\/slot').generateMulti;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ ...}
\DoxyCodeLine{}
\DoxyCodeLine{//\ a\ single\ slot\ number}
\DoxyCodeLine{const\ slot\ =\ calculateSlot('test:key:\{butOnlyThis\}redis');}
\DoxyCodeLine{//\ Buffer\ is\ also\ supported}
\DoxyCodeLine{const\ anotherSlot\ =\ calculateSlot(Buffer.from([0x7b,\ 0x7d,\ 0x2a]));}
\DoxyCodeLine{}
\DoxyCodeLine{//\ multiple\ keys\ -\/\ multi\ returns\ a\ single\ key\ slot\ number,\ returns\ -\/1\ if\ any}
\DoxyCodeLine{//\ of\ the\ keys\ does\ not\ match\ the\ base\ slot\ number\ (base\ is\ defaulted\ to\ first\ keys\ slot)}
\DoxyCodeLine{//\ This\ is\ useful\ to\ quickly\ determine\ a\ singe\ slot\ for\ multi\ keys\ operations.}
\DoxyCodeLine{const\ slotForRedisMulti\ =\ calculateMultipleSlots([}
\DoxyCodeLine{\ \ 'test:key:\{butOnlyThis\}redis',}
\DoxyCodeLine{\ \ 'something:key45:\{butOnlyThis\}hello',}
\DoxyCodeLine{\ \ 'example:key46:\{butOnlyThis\}foobar',}
\DoxyCodeLine{]);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md10607}{}\doxysubsubsection{\texorpdfstring{Benchmarks}{Benchmarks}}\label{README.md_autotoc_md10607}
{\ttfamily OLD} in these benchmarks refers to the {\ttfamily ioredis} crc calc and many of the other calculators that use {\ttfamily Buffer}.


\begin{DoxyCode}{0}
\DoxyCodeLine{node\ -\/v\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ✔\ \ 16.38G\ RAM\ \ 10:29:07}
\DoxyCodeLine{v10.15.3}
\DoxyCodeLine{}
\DoxyCodeLine{NEW\ tags\ x\ 721,445\ ops/sec\ ±0.44\%\ (90\ runs\ sampled)}
\DoxyCodeLine{OLD\ tags\ x\ 566,777\ ops/sec\ ±0.97\%\ (96\ runs\ sampled)}
\DoxyCodeLine{NEW\ without\ tags\ x\ 2,054,845\ ops/sec\ ±1.77\%\ (92\ runs\ sampled)}
\DoxyCodeLine{OLD\ without\ tags\ x\ 865,839\ ops/sec\ ±0.43\%\ (96\ runs\ sampled)}
\DoxyCodeLine{NEW\ without\ tags\ singular\ x\ 6,354,097\ ops/sec\ ±1.25\%\ (94\ runs\ sampled)}
\DoxyCodeLine{OLD\ without\ tags\ singular\ x\ 4,012,250\ ops/sec\ ±0.96\%\ (94\ runs\ sampled)}
\DoxyCodeLine{NEW\ tags\ (Buffer)\ x\ 552,346\ ops/sec\ ±1.35\%\ (92\ runs\ sampled)}

\end{DoxyCode}
 