\doxysection{node\+\_\+modules/@octokit/endpoint Directory Reference}
\hypertarget{dir_f447f059e7e02420d827c2c8767e86e5}{}\label{dir_f447f059e7e02420d827c2c8767e86e5}\index{node\_modules/"@octokit/endpoint Directory Reference@{node\_modules/"@octokit/endpoint Directory Reference}}


\doxysubsection{Detailed Description}
\begin{quote}
Turns Git\+Hub REST API endpoints into generic request options \end{quote}


\href{https://www.npmjs.com/package/@octokit/endpoint}{\texttt{ }} \href{https://github.com/octokit/endpoint.js/actions/workflows/test.yml?query=branch\%3Amain}{\texttt{ }}

{\ttfamily @octokit/endpoint} combines \href{https://developer.github.com/v3/}{\texttt{ Git\+Hub REST API routes}} with your parameters and turns them into generic request options that can be used in any request library.


\begin{DoxyItemize}
\item \doxylink{readme.md_usage}{Usage}
\item \doxylink{README.md_api}{API}
\begin{DoxyItemize}
\item \`{}endpoint(route, options)\`{} or \`{}endpoint(options)\`{}
\item \`{}endpoint.defaults()\`{}
\item \`{}endpoint.DEFAULTS\`{}
\item \`{}endpoint.merge(route, options)\`{} or \`{}endpoint.merge(options)\`{}
\item \`{}endpoint.parse()\`{}
\end{DoxyItemize}
\item Special cases
\begin{DoxyItemize}
\item The \`{}data\`{} parameter – set request body directly
\item Set parameters for both the URL/query and the request body
\end{DoxyItemize}
\item \doxylink{README.md_license}{LICENSE}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5226}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md5226}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Browsers }&Load {\ttfamily @octokit/endpoint} directly from \href{https://esm.sh}{\texttt{ esm.\+sh}}


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{\ endpoint\ \}\ from\ "{}https://esm.sh/@octokit/endpoint"{};}
\DoxyCodeLine{</script>}

\end{DoxyCode}


\\\cline{1-2}
\cellcolor{\tableheadbgcolor}\textbf{ Node }&

Install with {\ttfamily npm install @octokit/endpoint}


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ endpoint\ \}\ from\ "{}@octokit/endpoint"{};}

\end{DoxyCode}


\\\cline{1-2}
\end{longtabu}


Example for \href{https://developer.github.com/v3/repos/\#list-organization-repositories}{\texttt{ List organization repositories}}


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ requestOptions\ =\ endpoint("{}GET\ /orgs/\{org\}/repos"{},\ \{}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ authorization:\ "{}token\ 0000000000000000000000000000000000000001"{},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ org:\ "{}octokit"{},}
\DoxyCodeLine{\ \ type:\ "{}private"{},}
\DoxyCodeLine{\});}

\end{DoxyCode}


The resulting {\ttfamily request\+Options} looks as follows


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}method"{}:\ "{}GET"{},}
\DoxyCodeLine{\ \ "{}url"{}:\ "{}https://api.github.com/orgs/octokit/repos?type=private"{},}
\DoxyCodeLine{\ \ "{}headers"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}accept"{}:\ "{}application/vnd.github.v3+json"{},}
\DoxyCodeLine{\ \ \ \ "{}authorization"{}:\ "{}token\ 0000000000000000000000000000000000000001"{},}
\DoxyCodeLine{\ \ \ \ "{}user-\/agent"{}:\ "{}octokit/endpoint.js\ v1.2.3"{}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


You can pass {\ttfamily request\+Options} to common request libraries


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ \{\ url,\ ...options\ \}\ =\ requestOptions;}
\DoxyCodeLine{//\ using\ with\ fetch\ (https://developer.mozilla.org/en-\/US/docs/Web/API/Fetch\_API)}
\DoxyCodeLine{fetch(url,\ options);}
\DoxyCodeLine{//\ using\ with\ request\ (https://github.com/request/request)}
\DoxyCodeLine{request(requestOptions);}
\DoxyCodeLine{//\ using\ with\ got\ (https://github.com/sindresorhus/got)}
\DoxyCodeLine{got[options.method](url,\ options);}
\DoxyCodeLine{//\ using\ with\ axios}
\DoxyCodeLine{axios(requestOptions);}

\end{DoxyCode}


\begin{DoxyImportant}{Important}
As we use \href{https://nodejs.org/api/packages.html\#conditional-exports}{\texttt{ conditional exports}}, you will need to adapt your {\ttfamily tsconfig.\+json}. See the Type\+Script docs on \href{https://www.typescriptlang.org/docs/handbook/modules/reference.html\#packagejson-exports}{\texttt{ package.\+json "{}exports"{}}}.
\end{DoxyImportant}
\hypertarget{README.md_autotoc_md5227}{}\doxysubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md5227}
\hypertarget{README.md_autotoc_md5228}{}\doxysubsubsection{\texorpdfstring{{\ttfamily endpoint(route, options)} or {\ttfamily endpoint(options)}}{{\ttfamily endpoint(route, options)} or {\ttfamily endpoint(options)}}}\label{README.md_autotoc_md5228}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ name  }&\cellcolor{\tableheadbgcolor}\textbf{ type  }&\cellcolor{\tableheadbgcolor}\textbf{ description     }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ name  }&\cellcolor{\tableheadbgcolor}\textbf{ type  }&\cellcolor{\tableheadbgcolor}\textbf{ description     }\\\cline{1-3}
\endhead
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily route}  }&String  &If set, it has to be a string consisting of URL and the request method, e.\+g., {\ttfamily GET /orgs/\{org\}}. If it’s set to a URL, only the method defaults to {\ttfamily GET}.   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+method}  }&String  &{\bfseries{Required unless {\ttfamily route} is set.}} Any supported \href{https://developer.github.com/v3/\#http-verbs}{\texttt{ http verb}}. {\itshape Defaults to {\ttfamily GET}}.   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+url}  }&String  &{\bfseries{Required unless {\ttfamily route} is set.}} A path or full URL which may contain {\ttfamily \+:variable} or {\ttfamily \{variable\}} placeholders, e.\+g., {\ttfamily /orgs/\{org\}/repos}. The {\ttfamily url} is parsed using \href{https://github.com/bramstein/url-template}{\texttt{ url-\/template}}.   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+base\+Url}  }&String  &{\itshape Defaults to {\ttfamily \href{https://api.github.com}{\texttt{ https\+://api.\+github.\+com}}}}.   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+headers}  }&Object  &Custom headers. Passed headers are merged with defaults\+:~\newline
 {\itshape {\ttfamily headers\mbox{[}\textquotesingle{}user-\/agent\textquotesingle{}\mbox{]}} defaults to {\ttfamily octokit-\/endpoint.\+js/1.2.\+3} (where {\ttfamily 1.\+2.\+3} is the released version)}.~\newline
 {\itshape {\ttfamily headers\mbox{[}\textquotesingle{}accept\textquotesingle{}\mbox{]}} defaults to {\ttfamily application/vnd.\+github.\+v3+json}}.~\newline
   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+media\+Type.\+format}  }&String  &Media type param, such as {\ttfamily raw}, {\ttfamily diff}, or {\ttfamily text+json}. See \href{https://developer.github.com/v3/media/}{\texttt{ Media Types}}. Setting {\ttfamily options.\+media\+Type.\+format} will amend the {\ttfamily headers.\+accept} value.   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+data}  }&Any  &Set request body directly instead of setting it to JSON based on additional parameters. See \href{\#data-parameter}{\texttt{ "{}\+The $<$code$>$data$<$/code$>$ parameter"{}}} below.   \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily options.\+request}  }&Object  &Pass custom meta information for the request. The {\ttfamily request} object will be returned as is.    \\\cline{1-3}
\end{longtabu}


All other options will be passed depending on the {\ttfamily method} and {\ttfamily url} options.


\begin{DoxyEnumerate}
\item If the option key has a placeholder in the {\ttfamily url}, it will be used as the replacement. For example, if the passed options are `\{url\+: '/orgs/\{org\}/repos\textquotesingle{}, org\+: \textquotesingle{}foo\textquotesingle{}\}{\ttfamily the returned}options.\+url{\ttfamily is}\href{https://api.github.com/orgs/foo/repos}{\texttt{ https\+://api.\+github.\+com/orgs/foo/repos}}{\ttfamily .}
\item {\ttfamily If the}method{\ttfamily is}GET{\ttfamily or}HEAD\`{}, the option is passed as a query parameter.
\item Otherwise, the parameter is passed in the request body as a JSON key.
\end{DoxyEnumerate}

{\bfseries{Result}}

{\ttfamily endpoint()} is a synchronous method and returns an object with the following keys\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ key  }&\cellcolor{\tableheadbgcolor}\textbf{ type  }&\cellcolor{\tableheadbgcolor}\textbf{ description     }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ key  }&\cellcolor{\tableheadbgcolor}\textbf{ type  }&\cellcolor{\tableheadbgcolor}\textbf{ description     }\\\cline{1-3}
\endhead
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily method} }&String &The http method. Always lowercase.  \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily url} }&String &The url with placeholders replaced with passed parameters.  \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily headers} }&Object &All header names are lowercased.  \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily body} }&Any &The request body if one is present. Only for {\ttfamily PATCH}, {\ttfamily POST}, {\ttfamily PUT}, {\ttfamily DELETE} requests.  \\\cline{1-3}
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily request} }&Object &Request meta option, it will be returned as it was passed into {\ttfamily endpoint()}   \\\cline{1-3}
\end{longtabu}
\hypertarget{README.md_autotoc_md5229}{}\doxysubsubsection{\texorpdfstring{{\ttfamily endpoint.\+defaults()}}{{\ttfamily endpoint.\+defaults()}}}\label{README.md_autotoc_md5229}
Override or set default options. Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ request\ =\ require("{}request"{});}
\DoxyCodeLine{const\ myEndpoint\ =\ require("{}@octokit/endpoint"{}).defaults(\{}
\DoxyCodeLine{\ \ baseUrl:\ "{}https://github-\/enterprise.acme-\/inc.com/api/v3"{},}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ "{}user-\/agent"{}:\ "{}myApp/1.2.3"{},}
\DoxyCodeLine{\ \ \ \ authorization:\ \`{}token\ 0000000000000000000000000000000000000001`,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ org:\ "{}my-\/project"{},}
\DoxyCodeLine{\ \ per\_page:\ 100,}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{request(myEndpoint(`GET\ /orgs/\{org\}/repos`));}

\end{DoxyCode}


You can call {\ttfamily .defaults()} again on the returned method, the defaults will cascade.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ myProjectEndpoint\ =\ endpoint.defaults(\{}
\DoxyCodeLine{\ \ baseUrl:\ "{}https://github-\/enterprise.acme-\/inc.com/api/v3"{},}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ "{}user-\/agent"{}:\ "{}myApp/1.2.3"{},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ org:\ "{}my-\/project"{},}
\DoxyCodeLine{\});}
\DoxyCodeLine{const\ myProjectEndpointWithAuth\ =\ myProjectEndpoint.defaults(\{}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ authorization:\ \`{}token\ 0000000000000000000000000000000000000001`,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\});}

\end{DoxyCode}


{\ttfamily my\+Project\+Endpoint\+With\+Auth} now defaults the {\ttfamily base\+Url}, `headers\mbox{[}\textquotesingle{}user-\/agent'\mbox{]}{\ttfamily , }org{\ttfamily and}headers\mbox{[}\textquotesingle{}authorization\textquotesingle{}\mbox{]}{\ttfamily on top of}headers\mbox{[}\textquotesingle{}accept\textquotesingle{}\mbox{]}\`{} that is set by the global default.\hypertarget{README.md_autotoc_md5230}{}\doxysubsubsection{\texorpdfstring{{\ttfamily endpoint.\+DEFAULTS}}{{\ttfamily endpoint.\+DEFAULTS}}}\label{README.md_autotoc_md5230}
The current default options.


\begin{DoxyCode}{0}
\DoxyCodeLine{endpoint.DEFAULTS.baseUrl;\ //\ https://api.github.com}
\DoxyCodeLine{const\ myEndpoint\ =\ endpoint.defaults(\{}
\DoxyCodeLine{\ \ baseUrl:\ "{}https://github-\/enterprise.acme-\/inc.com/api/v3"{},}
\DoxyCodeLine{\});}
\DoxyCodeLine{myEndpoint.DEFAULTS.baseUrl;\ //\ https://github-\/enterprise.acme-\/inc.com/api/v3}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5231}{}\doxysubsubsection{\texorpdfstring{{\ttfamily endpoint.\+merge(route, options)} or {\ttfamily endpoint.\+merge(options)}}{{\ttfamily endpoint.\+merge(route, options)} or {\ttfamily endpoint.\+merge(options)}}}\label{README.md_autotoc_md5231}
Get the defaulted endpoint options, but without parsing them into request options\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ myProjectEndpoint\ =\ endpoint.defaults(\{}
\DoxyCodeLine{\ \ baseUrl:\ "{}https://github-\/enterprise.acme-\/inc.com/api/v3"{},}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ "{}user-\/agent"{}:\ "{}myApp/1.2.3"{},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ org:\ "{}my-\/project"{},}
\DoxyCodeLine{\});}
\DoxyCodeLine{myProjectEndpoint.merge("{}GET\ /orgs/\{org\}/repos"{},\ \{}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ authorization:\ \`{}token\ 0000000000000000000000000000000000000001`,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ org:\ "{}my-\/secret-\/project"{},}
\DoxyCodeLine{\ \ type:\ "{}private"{},}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ \{}
\DoxyCodeLine{//\ \ \ baseUrl:\ 'https://github-\/enterprise.acme-\/inc.com/api/v3',}
\DoxyCodeLine{//\ \ \ method:\ 'GET',}
\DoxyCodeLine{//\ \ \ url:\ '/orgs/\{org\}/repos',}
\DoxyCodeLine{//\ \ \ headers:\ \{}
\DoxyCodeLine{//\ \ \ \ \ accept:\ 'application/vnd.github.v3+json',}
\DoxyCodeLine{//\ \ \ \ \ authorization:\ \`{}token\ 0000000000000000000000000000000000000001`,}
\DoxyCodeLine{//\ \ \ \ \ 'user-\/agent':\ 'myApp/1.2.3'}
\DoxyCodeLine{//\ \ \ \},}
\DoxyCodeLine{//\ \ \ org:\ 'my-\/secret-\/project',}
\DoxyCodeLine{//\ \ \ type:\ 'private'}
\DoxyCodeLine{//\ \}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5232}{}\doxysubsubsection{\texorpdfstring{{\ttfamily endpoint.\+parse()}}{{\ttfamily endpoint.\+parse()}}}\label{README.md_autotoc_md5232}
Stateless method to turn endpoint options into request options. Calling {\ttfamily endpoint(options)} is the same as calling {\ttfamily endpoint.\+parse(endpoint.\+merge(options))}.\hypertarget{README.md_autotoc_md5233}{}\doxysubsection{\texorpdfstring{Special cases}{Special cases}}\label{README.md_autotoc_md5233}
\label{README.md_data-parameter}%
\Hypertarget{README.md_data-parameter}%
\hypertarget{README.md_autotoc_md5234}{}\doxysubsubsection{\texorpdfstring{The {\ttfamily data} parameter – set request body directly}{The {\ttfamily data} parameter – set request body directly}}\label{README.md_autotoc_md5234}
Some endpoints such as \href{https://developer.github.com/v3/markdown/\#render-a-markdown-document-in-raw-mode}{\texttt{ Render a Markdown document in raw mode}} don’t have parameters that are sent as request body keys, instead, the request body needs to be set directly. In these cases, set the {\ttfamily data} parameter.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ options\ =\ endpoint("{}POST\ /markdown/raw"{},\ \{}
\DoxyCodeLine{\ \ data:\ "{}Hello\ world\ github/linguist\#1\ **cool**,\ and\ \#1!"{},}
\DoxyCodeLine{\ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ accept:\ "{}text/html;charset=utf-\/8"{},}
\DoxyCodeLine{\ \ \ \ "{}content-\/type"{}:\ "{}text/plain"{},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ options\ is}
\DoxyCodeLine{//\ \{}
\DoxyCodeLine{//\ \ \ method:\ 'post',}
\DoxyCodeLine{//\ \ \ url:\ 'https://api.github.com/markdown/raw',}
\DoxyCodeLine{//\ \ \ headers:\ \{}
\DoxyCodeLine{//\ \ \ \ \ accept:\ 'text/html;charset=utf-\/8',}
\DoxyCodeLine{//\ \ \ \ \ 'content-\/type':\ 'text/plain',}
\DoxyCodeLine{//\ \ \ \ \ 'user-\/agent':\ userAgent}
\DoxyCodeLine{//\ \ \ \},}
\DoxyCodeLine{//\ \ \ body:\ 'Hello\ world\ github/linguist\#1\ **cool**,\ and\ \#1!'}
\DoxyCodeLine{//\ \}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5235}{}\doxysubsubsection{\texorpdfstring{Set parameters for both the URL/query and the request body}{Set parameters for both the URL/query and the request body}}\label{README.md_autotoc_md5235}
There are API endpoints that accept both query parameters as well as a body. In that case, you need to add the query parameters as templates to {\ttfamily options.\+url}, as defined in the \href{https://tools.ietf.org/html/rfc6570}{\texttt{ RFC 6570 URI Template specification}}.

Example


\begin{DoxyCode}{0}
\DoxyCodeLine{endpoint(}
\DoxyCodeLine{\ \ "{}POST\ https://uploads.github.com/repos/octocat/Hello-\/World/releases/1/assets\{?name,label\}"{},}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ name:\ "{}example.zip"{},}
\DoxyCodeLine{\ \ \ \ label:\ "{}short\ description"{},}
\DoxyCodeLine{\ \ \ \ headers:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ "{}content-\/type"{}:\ "{}text/plain"{},}
\DoxyCodeLine{\ \ \ \ \ \ "{}content-\/length"{}:\ 14,}
\DoxyCodeLine{\ \ \ \ \ \ authorization:\ \`{}token\ 0000000000000000000000000000000000000001`,}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ data:\ "{}Hello,\ world!"{},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5236}{}\doxysubsection{\texorpdfstring{LICENSE}{LICENSE}}\label{README.md_autotoc_md5236}
\mbox{[}MIT\mbox{]}(LICENSE) 