\doxysection{node\+\_\+modules/estree-\/util-\/attach-\/comments Directory Reference}
\hypertarget{dir_f392b34b390bbe3007d6f833095d6af8}{}\label{dir_f392b34b390bbe3007d6f833095d6af8}\index{node\_modules/estree-\/util-\/attach-\/comments Directory Reference@{node\_modules/estree-\/util-\/attach-\/comments Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://github.com/syntax-tree/estree-util-attach-comments/actions}{\texttt{ }} \href{https://codecov.io/github/syntax-tree/estree-util-attach-comments}{\texttt{ }} \href{https://www.npmjs.com/package/estree-util-attach-comments}{\texttt{ }} \href{https://bundlejs.com/?q=estree-util-attach-comments}{\texttt{ }} \href{https://opencollective.com/unified}{\texttt{ }} \href{https://opencollective.com/unified}{\texttt{ }} \href{https://github.com/syntax-tree/unist/discussions}{\texttt{ }}

\href{https://github.com/estree/estree}{\texttt{ estree}} utility attach semistandard comment nodes (such as from \href{https://github.com/acornjs/acorn}{\texttt{ acorn}}) to the nodes in that tree.\hypertarget{readme.md_autotoc_md14500}{}\doxysubsection{\texorpdfstring{Contents}{Contents}}\label{readme.md_autotoc_md14500}

\begin{DoxyItemize}
\item What is this?
\item When should I use this?
\item Install
\item Use
\item \doxylink{README.md_api}{API}
\begin{DoxyItemize}
\item \`{}attach\+Comments(tree, comments)\`{}
\end{DoxyItemize}
\item \doxylink{readme.md_types}{Types}
\item Compatibility
\item \doxylink{readme.md_contribute}{Contribute}
\item \doxylink{README.md_license}{License}
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md14501}{}\doxysubsection{\texorpdfstring{What is this?}{What is this?}}\label{readme.md_autotoc_md14501}
This package is a utility that you can use to embed comment nodes {\itshape inside} a tree. This is useful because certain estree parsers give you an array (espree and acorn) whereas other estree tools expect comments to be embedded on nodes in the tree.

This package uses one {\ttfamily comments} array where each comment has {\ttfamily leading} and {\ttfamily trailing} fields, as applied by {\ttfamily acorn}, but does not support the slightly different non-\/standard comments made by {\ttfamily espree}.\hypertarget{readme.md_autotoc_md14502}{}\doxysubsection{\texorpdfstring{When should I use this?}{When should I use this?}}\label{readme.md_autotoc_md14502}
You can use this package when working with comments from Acorn and later working with a tool such as recast or Babel.\hypertarget{readme.md_autotoc_md14503}{}\doxysubsection{\texorpdfstring{Install}{Install}}\label{readme.md_autotoc_md14503}
This package is \href{https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c}{\texttt{ ESM only}}. In Node.\+js (version 16+), install with \href{https://docs.npmjs.com/cli/install}{\texttt{ npm}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ estree-\/util-\/attach-\/comments}

\end{DoxyCode}


In Deno with \href{https://esm.sh}{\texttt{ {\ttfamily esm.\+sh}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{attachComments\}\ from\ 'https://esm.sh/estree-\/util-\/attach-\/comments@3'}

\end{DoxyCode}


In browsers with \href{https://esm.sh}{\texttt{ {\ttfamily esm.\+sh}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{attachComments\}\ from\ 'https://esm.sh/estree-\/util-\/attach-\/comments@3?bundle'}
\DoxyCodeLine{</script>}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md14504}{}\doxysubsection{\texorpdfstring{Use}{Use}}\label{readme.md_autotoc_md14504}
Say our document {\ttfamily x.\+js} contains\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{/*\ 1\ */\ function\ /*\ 2\ */\ a\ /*\ 3\ */(/*\ 4\ */\ b)\ /*\ 5\ */\ \{}
\DoxyCodeLine{\ \ /*\ 6\ */\ return\ /*\ 7\ */\ b\ +\ /*\ 8\ */\ 1\ /*\ 9\ */}
\DoxyCodeLine{\}}

\end{DoxyCode}


â€¦and our module {\ttfamily example.\+js} looks as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fs\ from\ 'node:fs/promises'}
\DoxyCodeLine{import\ \{parse\}\ from\ 'acorn'}
\DoxyCodeLine{import\ \{attachComments\}\ from\ 'estree-\/util-\/attach-\/comments'}
\DoxyCodeLine{import\ recast\ from\ 'recast'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ code\ =\ String(await\ fs.readFile('x.js'))}
\DoxyCodeLine{const\ comments\ =\ []}
\DoxyCodeLine{const\ tree\ =\ parse(code,\ \{}
\DoxyCodeLine{\ \ sourceType:\ 'module',}
\DoxyCodeLine{\ \ ecmaVersion:\ 'latest',}
\DoxyCodeLine{\ \ onComment:\ comments}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{attachComments(tree,\ comments)}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(recast.print(tree).code)}

\end{DoxyCode}


Yields\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{/*\ 1\ */}
\DoxyCodeLine{function\ /*\ 2\ */}
\DoxyCodeLine{a(}
\DoxyCodeLine{\ \ \ \ /*\ 3\ */}
\DoxyCodeLine{\ \ \ \ /*\ 4\ */}
\DoxyCodeLine{\ \ \ \ b}
\DoxyCodeLine{)\ /*\ 5\ */}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ /*\ 6\ */}
\DoxyCodeLine{\ \ \ \ return\ (}
\DoxyCodeLine{\ \ \ \ \ \ \ \ /*\ 7\ */}
\DoxyCodeLine{\ \ \ \ \ \ \ \ b\ +\ /*\ 8\ */}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 1}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{\}/*\ 9\ */}

\end{DoxyCode}


\begin{quote}
ðŸ‘‰ {\bfseries{Note}}\+: the lines are added by {\ttfamily recast} in this case. And, some of these weird comments are off, but theyâ€™re pretty close. \end{quote}
\hypertarget{readme.md_autotoc_md14505}{}\doxysubsection{\texorpdfstring{API}{API}}\label{readme.md_autotoc_md14505}
This package exports the identifier \`{}attach\+Comments\`{}. There is no default export.\hypertarget{readme.md_autotoc_md14506}{}\doxysubsubsection{\texorpdfstring{{\ttfamily attach\+Comments(tree, comments)}}{{\ttfamily attach\+Comments(tree, comments)}}}\label{readme.md_autotoc_md14506}
Attach semistandard estree comment nodes to the tree.

This mutates the given \href{https://github.com/estree/estree}{\texttt{ {\ttfamily tree}}}. It takes {\ttfamily comments}, walks the tree, and adds comments as close as possible to where they originated.

Comment nodes are given two boolean fields\+: {\ttfamily leading} ({\ttfamily true} for {\ttfamily /\texorpdfstring{$\ast$}{*} a \texorpdfstring{$\ast$}{*}/ b}) and {\ttfamily trailing} ({\ttfamily true} for {\ttfamily a /\texorpdfstring{$\ast$}{*} b \texorpdfstring{$\ast$}{*}/}). Both fields are {\ttfamily false} for dangling comments\+: {\ttfamily \mbox{[}/\texorpdfstring{$\ast$}{*} a \texorpdfstring{$\ast$}{*}/\mbox{]}}. This is what {\ttfamily recast} uses too, and is somewhat similar to Babel, which is not estree but instead uses {\ttfamily leading\+Comments}, {\ttfamily trailing\+Comments}, and {\ttfamily inner\+Comments} arrays on nodes.

The algorithm checks any node\+: even recent (or future) proposals or nonstandard syntax such as JSX, because it ducktypes to find nodes instead of having a list of visitor keys.

The algorithm supports {\ttfamily loc} fields (line/column), {\ttfamily range} fields (offsets), and direct {\ttfamily start} / {\ttfamily end} fields.\hypertarget{readme.md_autotoc_md14507}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md14507}

\begin{DoxyItemize}
\item {\ttfamily tree} (\href{https://github.com/estree/estree/blob/master/es5.md\#programs}{\texttt{ {\ttfamily Program}}}) â€” tree to attach to
\item {\ttfamily comments} ({\ttfamily Array\texorpdfstring{$<$}{<}Estree\+Comment\texorpdfstring{$>$}{>}}) â€” list of comments
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md14508}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md14508}
Nothing ({\ttfamily undefined}).\hypertarget{readme.md_autotoc_md14509}{}\doxysubsection{\texorpdfstring{Types}{Types}}\label{readme.md_autotoc_md14509}
This package is fully typed with \href{https://www.typescriptlang.org}{\texttt{ Type\+Script}}. It exports no additional types.\hypertarget{readme.md_autotoc_md14510}{}\doxysubsection{\texorpdfstring{Compatibility}{Compatibility}}\label{readme.md_autotoc_md14510}
Projects maintained by the unified collective are compatible with maintained versions of Node.\+js.

When we cut a new major release, we drop support for unmaintained versions of Node. This means we try to keep the current release line, {\ttfamily estree-\/util-\/attach-\/comments@\texorpdfstring{$^\wedge$}{\string^}3}, compatible with Node.\+js 16.\hypertarget{readme.md_autotoc_md14511}{}\doxysubsection{\texorpdfstring{Contribute}{Contribute}}\label{readme.md_autotoc_md14511}
See \href{https://github.com/syntax-tree/.github/blob/main/contributing.md}{\texttt{ {\ttfamily contributing.\+md}}} in \href{https://github.com/syntax-tree/.github}{\texttt{ {\ttfamily syntax-\/tree/.github}}} for ways to get started. See \href{https://github.com/syntax-tree/.github/blob/main/support.md}{\texttt{ {\ttfamily support.\+md}}} for ways to get help.

This project has a \href{https://github.com/syntax-tree/.github/blob/main/code-of-conduct.md}{\texttt{ code of conduct}}. By interacting with this repository, organization, or community you agree to abide by its terms.\hypertarget{readme.md_autotoc_md14512}{}\doxysubsection{\texorpdfstring{License}{License}}\label{readme.md_autotoc_md14512}
\mbox{[}MIT\mbox{]}\mbox{[}license\mbox{]} Â© \href{https://wooorm.com}{\texttt{ Titus Wormer}} 