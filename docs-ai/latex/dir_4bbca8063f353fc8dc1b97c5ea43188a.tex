\doxysection{node\+\_\+modules/quansync Directory Reference}
\hypertarget{dir_4bbca8063f353fc8dc1b97c5ea43188a}{}\label{dir_4bbca8063f353fc8dc1b97c5ea43188a}\index{node\_modules/quansync Directory Reference@{node\_modules/quansync Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://npmjs.com/package/quansync}{\texttt{ }} \href{https://npmjs.com/package/quansync}{\texttt{ }} \href{https://bundlephobia.com/result?p=quansync}{\texttt{ }} \href{https://www.jsdocs.io/package/quansync}{\texttt{ }} \href{https://github.com/antfu/quansync/blob/main/LICENSE}{\texttt{ }}

Create sync/async APIs with usable logic.

{\bfseries{Quan\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}tum + \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Sync}} -\/ "{}\+\_\+\+Superposition\+\_\+"{} between {\ttfamily sync} and {\ttfamily async}.


\begin{DoxyItemize}
\item Typesafe
\item ESM, modern Java\+Script
\item Zero dependencies
\end{DoxyItemize}

Heavily inspired by \href{https://github.com/loganfsmyth/gensync}{\texttt{ {\ttfamily genasync}}} by \href{https://github.com/loganfsmyth}{\texttt{ @loganfsmyth}}.\hypertarget{README.md_autotoc_md26750}{}\doxysubsection{\texorpdfstring{Why \& How}{Why \& How}}\label{README.md_autotoc_md26750}
Please refer to Anthony\textquotesingle{}s blog post\+: \href{https://antfu.me/posts/async-sync-in-between}{\texttt{ {\bfseries{Async, Sync, in Between}}}}.\hypertarget{README.md_autotoc_md26751}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md26751}

\begin{DoxyCode}{0}
\DoxyCodeLine{pnpm\ i\ quansync}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fs\ from\ 'node:fs'}
\DoxyCodeLine{import\ \{\ quansync\ \}\ from\ 'quansync'}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ quansync\ function\ by\ providing\ \`{}sync`\ and\ \`{}async`\ implementations}
\DoxyCodeLine{const\ readFile\ =\ quansync(\{}
\DoxyCodeLine{\ \ sync:\ (path:\ string)\ =>\ fs.readFileSync(path),}
\DoxyCodeLine{\ \ async:\ (path:\ string)\ =>\ fs.promises.readFile(path),}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ quansync\ function\ by\ providing\ a\ generator\ function}
\DoxyCodeLine{const\ myFunction\ =\ quansync(function*\ (filename)\ \{}
\DoxyCodeLine{\ \ //\ Use\ \`{}yield*`\ to\ call\ another\ quansync\ function}
\DoxyCodeLine{\ \ const\ code\ =\ yield*\ readFile(filename,\ 'utf8')}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ return\ \`{}//\ some\ custom\ prefix\(\backslash\)n\$\{code\}`}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ it\ as\ a\ sync\ function}
\DoxyCodeLine{const\ result\ =\ myFunction.sync('./some-\/file.js')}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ it\ as\ an\ async\ function}
\DoxyCodeLine{const\ asyncResult\ =\ await\ myFunction.async('./some-\/file.js')}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md26752}{}\doxysubsubsection{\texorpdfstring{{\ttfamily get\+Is\+Async}}{{\ttfamily get\+Is\+Async}}}\label{README.md_autotoc_md26752}
Returns a boolean indicating whether the current execution is in async mode.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ getIsAsync,\ quansync\ \}\ from\ 'quansync'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ fn\ =\ quansync(function*\ ()\ \{}
\DoxyCodeLine{\ \ const\ isAsync:\ boolean\ =\ yield*\ getIsAsync()}
\DoxyCodeLine{\ \ console.log(isAsync)}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{fn.sync()\ //\ false}
\DoxyCodeLine{await\ fn()\ //\ true}
\DoxyCodeLine{await\ fn.async()\ //\ true}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md26753}{}\doxysubsection{\texorpdfstring{Build-\/time Macro}{Build-\/time Macro}}\label{README.md_autotoc_md26753}
If you don\textquotesingle{}t like the {\ttfamily function\texorpdfstring{$\ast$}{*}} and {\ttfamily yield\texorpdfstring{$\ast$}{*}} syntax, we also provide a build-\/time macro via \href{https://github.com/unplugin/unplugin-quansync\#usage}{\texttt{ unplugin-\/quansync}} allowing you use quansync with async/await syntax, while still able to get the sync version out of that.

Here is an example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fs\ from\ 'node:fs'}
\DoxyCodeLine{import\ \{\ quansync\ \}\ from\ 'quansync/macro'}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ quansync\ function\ by\ providing\ \`{}sync`\ and\ \`{}async`\ implementations}
\DoxyCodeLine{const\ readFile\ =\ quansync(\{}
\DoxyCodeLine{\ \ sync:\ (path:\ string)\ =>\ fs.readFileSync(path),}
\DoxyCodeLine{\ \ async:\ (path:\ string)\ =>\ fs.promises.readFile(path),}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ quansync\ function\ by\ providing\ an\ **async**\ function}
\DoxyCodeLine{const\ myFunction\ =\ quansync(async\ (filename)\ =>\ \{}
\DoxyCodeLine{\ \ //\ Use\ \`{}await`\ to\ call\ another\ quansync\ function}
\DoxyCodeLine{\ \ const\ code\ =\ await\ readFile(filename,\ 'utf8')}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ return\ \`{}//\ some\ custom\ prefix\(\backslash\)n\$\{code\}`}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ it\ as\ a\ sync\ function}
\DoxyCodeLine{const\ result\ =\ myFunction.sync('./some-\/file.js')}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ it\ as\ an\ async\ function}
\DoxyCodeLine{const\ asyncResult\ =\ await\ myFunction.async('./some-\/file.js')}

\end{DoxyCode}


For more details on usage, refer to \href{https://github.com/unplugin/unplugin-quansync\#usage}{\texttt{ unplugin-\/quansync\textquotesingle{}s docs}}.\hypertarget{README.md_autotoc_md26754}{}\doxysubsection{\texorpdfstring{Benchmark}{Benchmark}}\label{README.md_autotoc_md26754}
Run the following command to benchmark the performance of {\ttfamily quansync}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{pnpm\ run\ build\ \&\&\ pnpm\ run\ benchmark}

\end{DoxyCode}


Benchmark results indicate that each {\ttfamily yield} incurs an overhead of approximately 150 ns, comparable to that of {\ttfamily await sync()}. (On Apple M1 Max)\hypertarget{README.md_autotoc_md26755}{}\doxysubsection{\texorpdfstring{Sponsors}{Sponsors}}\label{README.md_autotoc_md26755}
\href{https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg}{\texttt{  }} 

\href{https://cdn.jsdelivr.net/gh/sxzz/sponsors/sponsors.svg}{\texttt{  }} \hypertarget{README.md_autotoc_md26756}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md26756}
\href{./LICENSE}{\texttt{ MIT}} License Â© \href{https://github.com/antfu}{\texttt{ Anthony Fu}} and \href{https://github.com/sxzz}{\texttt{ Kevin Deng}} 