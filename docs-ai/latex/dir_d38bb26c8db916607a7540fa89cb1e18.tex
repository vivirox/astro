\doxysection{node\+\_\+modules/@octokit/plugin-\/paginate-\/rest Directory Reference}
\hypertarget{dir_d38bb26c8db916607a7540fa89cb1e18}{}\label{dir_d38bb26c8db916607a7540fa89cb1e18}\index{node\_modules/"@octokit/plugin-\/paginate-\/rest Directory Reference@{node\_modules/"@octokit/plugin-\/paginate-\/rest Directory Reference}}


\doxysubsection{Detailed Description}
\begin{quote}
Octokit plugin to paginate REST API endpoint responses \end{quote}


\href{https://www.npmjs.com/package/@octokit/plugin-paginate-rest}{\texttt{ }} \href{https://github.com/octokit/plugin-paginate-rest.js/actions?workflow=Test}{\texttt{ }}\hypertarget{README.md_autotoc_md5325}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md5325}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Browsers }&

Load {\ttfamily @octokit/plugin-\/paginate-\/rest} and \href{https://github.com/octokit/core.js}{\texttt{ {\ttfamily @octokit/core}}} (or core-\/compatible module) directly from \href{https://esm.sh}{\texttt{ esm.\+sh}}


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{\ Octokit\ \}\ from\ "{}https://esm.sh/@octokit/core"{};}
\DoxyCodeLine{\ \ import\ \{}
\DoxyCodeLine{\ \ \ \ paginateRest,}
\DoxyCodeLine{\ \ \ \ composePaginateRest,}
\DoxyCodeLine{\ \ \}\ from\ "{}https://esm.sh/@octokit/plugin-\/paginate-\/rest"{};}
\DoxyCodeLine{</script>}

\end{DoxyCode}


\\\cline{1-2}
\cellcolor{\tableheadbgcolor}\textbf{ Node }&

Install with {\ttfamily npm install @octokit/core @octokit/plugin-\/paginate-\/rest}. Optionally replace {\ttfamily @octokit/core} with a core-\/compatible module


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ Octokit\ \}\ from\ "{}@octokit/core"{};}
\DoxyCodeLine{import\ \{}
\DoxyCodeLine{\ \ paginateRest,}
\DoxyCodeLine{\ \ composePaginateRest,}
\DoxyCodeLine{\}\ from\ "{}@octokit/plugin-\/paginate-\/rest"{};}

\end{DoxyCode}


\\\cline{1-2}
\end{longtabu}



\begin{DoxyCode}{0}
\DoxyCodeLine{const\ MyOctokit\ =\ Octokit.plugin(paginateRest);}
\DoxyCodeLine{const\ octokit\ =\ new\ MyOctokit(\{\ auth:\ "{}secret123"{}\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ See\ https://developer.github.com/v3/issues/\#list-\/issues-\/for-\/a-\/repository}
\DoxyCodeLine{const\ issues\ =\ await\ octokit.paginate("{}GET\ /repos/\{owner\}/\{repo\}/issues"{},\ \{}
\DoxyCodeLine{\ \ owner:\ "{}octocat"{},}
\DoxyCodeLine{\ \ repo:\ "{}hello-\/world"{},}
\DoxyCodeLine{\ \ since:\ "{}2010-\/10-\/01"{},}
\DoxyCodeLine{\ \ per\_page:\ 100,}
\DoxyCodeLine{\});}

\end{DoxyCode}


If you want to utilize the pagination methods in another plugin, use {\ttfamily compose\+Paginate\+Rest}.


\begin{DoxyCode}{0}
\DoxyCodeLine{function\ myPlugin(octokit,\ options)\ \{}
\DoxyCodeLine{\ \ return\ \{}
\DoxyCodeLine{\ \ \ \ allStars(\{owner,\ repo\})\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ return\ composePaginateRest(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ octokit,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ "{}GET\ /repos/\{owner\}/\{repo\}/stargazers"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{owner,\ repo\ \}}
\DoxyCodeLine{\ \ \ \ \ \ )}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\begin{DoxyImportant}{Important}
As we use \href{https://nodejs.org/api/packages.html\#conditional-exports}{\texttt{ conditional exports}}, you will need to adapt your {\ttfamily tsconfig.\+json}. See the Type\+Script docs on \href{https://www.typescriptlang.org/docs/handbook/modules/reference.html\#packagejson-exports}{\texttt{ package.\+json "{}exports"{}}}.
\end{DoxyImportant}
\hypertarget{README.md_autotoc_md5326}{}\doxysubsection{\texorpdfstring{{\ttfamily octokit.\+paginate()}}{{\ttfamily octokit.\+paginate()}}}\label{README.md_autotoc_md5326}
The {\ttfamily paginate\+Rest} plugin adds a new {\ttfamily octokit.\+paginate()} method which accepts the same parameters as \href{https://github.com/octokit/request.js\#request}{\texttt{ {\ttfamily octokit.\+request}}}. Only "{}\+List ..."{} endpoints such as \href{https://developer.github.com/v3/issues/\#list-issues-for-a-repository}{\texttt{ List issues for a repository}} are supporting pagination. Their \href{https://developer.github.com/v3/issues/\#response-1}{\texttt{ response includes a Link header}}. For other endpoints, {\ttfamily octokit.\+paginate()} behaves the same as {\ttfamily octokit.\+request()}.

The {\ttfamily per\+\_\+page} parameter is usually defaulting to {\ttfamily 30}, and can be set to up to {\ttfamily 100}, which helps retrieving a big amount of data without hitting the rate limits too soon.

An optional {\ttfamily map\+Function} can be passed to map each page response to a new value, usually an array with only the data you need. This can help to reduce memory usage, as only the relevant data has to be kept in memory until the pagination is complete.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ issueTitles\ =\ await\ octokit.paginate(}
\DoxyCodeLine{\ \ "{}GET\ /repos/\{owner\}/\{repo\}/issues"{},}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ owner:\ "{}octocat"{},}
\DoxyCodeLine{\ \ \ \ repo:\ "{}hello-\/world"{},}
\DoxyCodeLine{\ \ \ \ since:\ "{}2010-\/10-\/01"{},}
\DoxyCodeLine{\ \ \ \ per\_page:\ 100,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ (response)\ =>\ response.data.map((issue)\ =>\ issue.title),}
\DoxyCodeLine{);}

\end{DoxyCode}


The {\ttfamily map\+Function} gets a 2nd argument {\ttfamily done} which can be called to end the pagination early.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ issues\ =\ await\ octokit.paginate(}
\DoxyCodeLine{\ \ "{}GET\ /repos/\{owner\}/\{repo\}/issues"{},}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ owner:\ "{}octocat"{},}
\DoxyCodeLine{\ \ \ \ repo:\ "{}hello-\/world"{},}
\DoxyCodeLine{\ \ \ \ since:\ "{}2010-\/10-\/01"{},}
\DoxyCodeLine{\ \ \ \ per\_page:\ 100,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ (response,\ done)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ if\ (response.data.find((issue)\ =>\ issue.title.includes("{}something"{})))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ done();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ return\ response.data;}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{);}

\end{DoxyCode}


Alternatively you can pass a {\ttfamily request} method as first argument. This is great when using in combination with \href{https://github.com/octokit/plugin-rest-endpoint-methods.js/}{\texttt{ {\ttfamily @octokit/plugin-\/rest-\/endpoint-\/methods}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ issues\ =\ await\ octokit.paginate(octokit.rest.issues.listForRepo,\ \{}
\DoxyCodeLine{\ \ owner:\ "{}octocat"{},}
\DoxyCodeLine{\ \ repo:\ "{}hello-\/world"{},}
\DoxyCodeLine{\ \ since:\ "{}2010-\/10-\/01"{},}
\DoxyCodeLine{\ \ per\_page:\ 100,}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5327}{}\doxysubsection{\texorpdfstring{{\ttfamily octokit.\+paginate.\+iterator()}}{{\ttfamily octokit.\+paginate.\+iterator()}}}\label{README.md_autotoc_md5327}
If your target runtime environments supports async iterators (such as most modern browsers and Node 10+), you can iterate through each response


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ parameters\ =\ \{}
\DoxyCodeLine{\ \ owner:\ "{}octocat"{},}
\DoxyCodeLine{\ \ repo:\ "{}hello-\/world"{},}
\DoxyCodeLine{\ \ since:\ "{}2010-\/10-\/01"{},}
\DoxyCodeLine{\ \ per\_page:\ 100,}
\DoxyCodeLine{\};}
\DoxyCodeLine{for\ await\ (const\ response\ of\ octokit.paginate.iterator(}
\DoxyCodeLine{\ \ "{}GET\ /repos/\{owner\}/\{repo\}/issues"{},}
\DoxyCodeLine{\ \ parameters,}
\DoxyCodeLine{))\ \{}
\DoxyCodeLine{\ \ //\ do\ whatever\ you\ want\ with\ each\ response,\ break\ out\ of\ the\ loop,\ etc.}
\DoxyCodeLine{\ \ const\ issues\ =\ response.data;}
\DoxyCodeLine{\ \ console.log("{}\%d\ issues\ found"{},\ issues.length);}
\DoxyCodeLine{\}}

\end{DoxyCode}


Alternatively you can pass a {\ttfamily request} method as first argument. This is great when using in combination with \href{https://github.com/octokit/plugin-rest-endpoint-methods.js/}{\texttt{ {\ttfamily @octokit/plugin-\/rest-\/endpoint-\/methods}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ parameters\ =\ \{}
\DoxyCodeLine{\ \ owner:\ "{}octocat"{},}
\DoxyCodeLine{\ \ repo:\ "{}hello-\/world"{},}
\DoxyCodeLine{\ \ since:\ "{}2010-\/10-\/01"{},}
\DoxyCodeLine{\ \ per\_page:\ 100,}
\DoxyCodeLine{\};}
\DoxyCodeLine{for\ await\ (const\ response\ of\ octokit.paginate.iterator(}
\DoxyCodeLine{\ \ octokit.rest.issues.listForRepo,}
\DoxyCodeLine{\ \ parameters,}
\DoxyCodeLine{))\ \{}
\DoxyCodeLine{\ \ //\ do\ whatever\ you\ want\ with\ each\ response,\ break\ out\ of\ the\ loop,\ etc.}
\DoxyCodeLine{\ \ const\ issues\ =\ response.data;}
\DoxyCodeLine{\ \ console.log("{}\%d\ issues\ found"{},\ issues.length);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5328}{}\doxysubsection{\texorpdfstring{{\ttfamily compose\+Paginate\+Rest} and {\ttfamily compose\+Paginate\+Rest.\+iterator}}{{\ttfamily compose\+Paginate\+Rest} and {\ttfamily compose\+Paginate\+Rest.\+iterator}}}\label{README.md_autotoc_md5328}
The {\ttfamily compose\texorpdfstring{$\ast$}{*}} methods work just like their {\ttfamily octokit.\texorpdfstring{$\ast$}{*}} counterparts described above, with the differenct that both methods require an {\ttfamily octokit} instance to be passed as first argument\hypertarget{README.md_autotoc_md5329}{}\doxysubsection{\texorpdfstring{How it works}{How it works}}\label{README.md_autotoc_md5329}
{\ttfamily octokit.\+paginate()} wraps {\ttfamily octokit.\+request()}. As long as a {\ttfamily rel="{}next"{}} link value is present in the response\textquotesingle{}s {\ttfamily Link} header, it sends another request for that URL, and so on.

Most of Git\+Hub\textquotesingle{}s paginating REST API endpoints return an array, but there are a few exceptions which return an object with a key that includes the items array. For example\+:


\begin{DoxyItemize}
\item \href{https://developer.github.com/v3/search/\#example}{\texttt{ Search repositories}} (key {\ttfamily items})
\item \href{https://developer.github.com/v3/checks/runs/\#response-3}{\texttt{ List check runs for a specific ref}} (key\+: {\ttfamily check\+\_\+runs})
\item \href{https://developer.github.com/v3/checks/suites/\#response-1}{\texttt{ List check suites for a specific ref}} (key\+: {\ttfamily check\+\_\+suites})
\item \href{https://developer.github.com/v3/apps/installations/\#list-repositories}{\texttt{ List repositories}} for an installation (key\+: {\ttfamily repositories})
\item \href{https://developer.github.com/v3/apps/installations/\#response-1}{\texttt{ List installations for a user}} (key {\ttfamily installations})
\end{DoxyItemize}

{\ttfamily octokit.\+paginate()} is working around these inconsistencies so you don\textquotesingle{}t have to worry about it.

If a response is lacking the {\ttfamily Link} header, {\ttfamily octokit.\+paginate()} still resolves with an array, even if the response returns a single object.\hypertarget{README.md_autotoc_md5330}{}\doxysubsection{\texorpdfstring{Types}{Types}}\label{README.md_autotoc_md5330}
The plugin also exposes some types and runtime type guards for Type\+Script projects.

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Types }&


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{}
\DoxyCodeLine{\ \ PaginateInterface,}
\DoxyCodeLine{\ \ PaginatingEndpoints,}
\DoxyCodeLine{\}\ from\ "{}@octokit/plugin-\/paginate-\/rest"{};}

\end{DoxyCode}


\\\cline{1-2}
\cellcolor{\tableheadbgcolor}\textbf{ Guards }&


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ isPaginatingEndpoint\ \}\ from\ "{}@octokit/plugin-\/paginate-\/rest"{};}

\end{DoxyCode}


\\\cline{1-2}
\end{longtabu}
\hypertarget{README.md_autotoc_md5331}{}\doxysubsubsection{\texorpdfstring{Paginate\+Interface}{Paginate\+Interface}}\label{README.md_autotoc_md5331}
An {\ttfamily interface} that declares all the overloads of the {\ttfamily .paginate} method.\hypertarget{README.md_autotoc_md5332}{}\doxysubsubsection{\texorpdfstring{Paginating\+Endpoints}{Paginating\+Endpoints}}\label{README.md_autotoc_md5332}
An {\ttfamily interface} which describes all API endpoints supported by the plugin. Some overloads of {\ttfamily .paginate()} method and {\ttfamily compose\+Paginate\+Rest()} function depend on {\ttfamily Paginating\+Endpoints}, using the {\ttfamily keyof Paginating\+Endpoints} as a type for one of its arguments.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ Octokit\ \}\ from\ "{}@octokit/core"{};}
\DoxyCodeLine{import\ \{}
\DoxyCodeLine{\ \ PaginatingEndpoints,}
\DoxyCodeLine{\ \ composePaginateRest,}
\DoxyCodeLine{\}\ from\ "{}@octokit/plugin-\/paginate-\/rest"{};}
\DoxyCodeLine{}
\DoxyCodeLine{type\ DataType<T>\ =\ "{}data"{}\ extends\ keyof\ T\ ?\ T["{}data"{}]\ :\ unknown;}
\DoxyCodeLine{}
\DoxyCodeLine{async\ function\ myPaginatePlugin<E\ extends\ keyof\ PaginatingEndpoints>(}
\DoxyCodeLine{\ \ octokit:\ Octokit,}
\DoxyCodeLine{\ \ endpoint:\ E,}
\DoxyCodeLine{\ \ parameters?:\ PaginatingEndpoints[E]["{}parameters"{}],}
\DoxyCodeLine{):\ Promise<DataType<PaginatingEndpoints[E]["{}response"{}]>>\ \{}
\DoxyCodeLine{\ \ return\ await\ composePaginateRest(octokit,\ endpoint,\ parameters);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5333}{}\doxysubsubsection{\texorpdfstring{is\+Paginating\+Endpoint}{is\+Paginating\+Endpoint}}\label{README.md_autotoc_md5333}
A type guard, {\ttfamily is\+Paginating\+Endpoint(arg)} returns {\ttfamily true} if {\ttfamily arg} is one of the keys in {\ttfamily Paginating\+Endpoints} (is {\ttfamily keyof Paginating\+Endpoints}).


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ Octokit\ \}\ from\ "{}@octokit/core"{};}
\DoxyCodeLine{import\ \{}
\DoxyCodeLine{\ \ isPaginatingEndpoint,}
\DoxyCodeLine{\ \ composePaginateRest,}
\DoxyCodeLine{\}\ from\ "{}@octokit/plugin-\/paginate-\/rest"{};}
\DoxyCodeLine{}
\DoxyCodeLine{async\ function\ myPlugin(octokit:\ Octokit,\ arg:\ unknown)\ \{}
\DoxyCodeLine{\ \ if\ (isPaginatingEndpoint(arg))\ \{}
\DoxyCodeLine{\ \ \ \ return\ await\ composePaginateRest(octokit,\ arg);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ //\ ...}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5334}{}\doxysubsection{\texorpdfstring{Contributing}{Contributing}}\label{README.md_autotoc_md5334}
See \doxylink{zod-to-json-schema_2_c_o_n_t_r_i_b_u_t_i_n_g_8md}{CONTRIBUTING.md}\hypertarget{README.md_autotoc_md5335}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md5335}
\mbox{[}MIT\mbox{]}(LICENSE) 