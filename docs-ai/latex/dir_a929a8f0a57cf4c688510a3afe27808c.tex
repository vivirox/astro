\doxysection{node\+\_\+modules/@volar/kit Directory Reference}
\hypertarget{dir_a929a8f0a57cf4c688510a3afe27808c}{}\label{dir_a929a8f0a57cf4c688510a3afe27808c}\index{node\_modules/"@volar/kit Directory Reference@{node\_modules/"@volar/kit Directory Reference}}


\doxysubsection{Detailed Description}
\hypertarget{README.md_autotoc_md7239}{}\doxysubsection{\texorpdfstring{Example\+: Use File\+Watcher}{Example\+: Use File\+Watcher}}\label{README.md_autotoc_md7239}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ *\ as\ fs\ from\ 'fs';}
\DoxyCodeLine{import\ *\ as\ path\ from\ 'path';}
\DoxyCodeLine{import\ \{\ watch\ \}\ from\ 'chokidar';}
\DoxyCodeLine{import\ *\ as\ kit\ from\ '@volar/kit';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ tsconfig\ =\ getTsconfig();}
\DoxyCodeLine{const\ project\ =\ kit.createProject(tsconfig,\ [\{\ extension:\ 'foo',\ isMixedContent:\ true,\ scriptKind:\ 7\ \}]);}
\DoxyCodeLine{const\ config:\ kit.Config\ =\ \{}
\DoxyCodeLine{\ \ \ \ languages:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ //\ ...}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ services:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ //\ ...}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\};}
\DoxyCodeLine{const\ linter\ =\ kit.createLinter(config,\ project.languageServiceHost);}
\DoxyCodeLine{}
\DoxyCodeLine{let\ req\ =\ 0;}
\DoxyCodeLine{}
\DoxyCodeLine{update();}
\DoxyCodeLine{}
\DoxyCodeLine{createWatcher(path.dirname(tsconfig),\ ['ts',\ 'js',\ 'foo'])}
\DoxyCodeLine{\ \ \ \ .on('add',\ (fileName)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ project.fileCreated(fileName);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ update();}
\DoxyCodeLine{\ \ \ \ \})}
\DoxyCodeLine{\ \ \ \ .on('unlink',\ (fileName)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ project.fileDeleted(fileName);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ update();}
\DoxyCodeLine{\ \ \ \ \})}
\DoxyCodeLine{\ \ \ \ .on('change',\ (fileName)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ project.fileUpdated(fileName);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ update();}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{}
\DoxyCodeLine{function\ createWatcher(rootPath:\ string,\ extension:\ string[])\ \{}
\DoxyCodeLine{\ \ \ \ return\ watch(`\$\{rootPath\}/**/*.\{\$\{extension.join(',')\}\}`,\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ignored:\ (path)\ =>\ path.includes('node\_modules'),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ignoreInitial:\ true}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{async\ function\ update()\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ const\ currentReq\ =\ ++req;}
\DoxyCodeLine{\ \ \ \ const\ isCanceled\ =\ ()\ =>\ currentReq\ !==\ req;}
\DoxyCodeLine{\ \ \ \ await\ new\ Promise(resolve\ =>\ setTimeout(resolve,\ 100));}
\DoxyCodeLine{\ \ \ \ if\ (isCanceled())\ return;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ process.stdout.write('\(\backslash\)x1Bc');\ //\ clear\ console}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ let\ hasError\ =\ false;}
\DoxyCodeLine{\ \ \ \ for\ (const\ fileName\ of\ project.languageServiceHost.getScriptFileNames())\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ const\ errors\ =\ await\ linter.check(fileName);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (isCanceled())\ return;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (errors.length)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ linter.logErrors(fileName,\ errors);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ hasError\ =\ true;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ if\ (!hasError)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ console.log('No\ errors');}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{function\ getTsconfig()\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ let\ tsconfig\ =\ path.resolve(process.cwd(),\ './tsconfig.json');}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ const\ tsconfigIndex\ =\ process.argv.indexOf('-\/-\/tsconfig');}
\DoxyCodeLine{\ \ \ \ if\ (tsconfigIndex\ >=\ 0)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ tsconfig\ =\ path.resolve(process.cwd(),\ process.argv[tsconfigIndex\ +\ 1]);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ if\ (!fs.existsSync(tsconfig))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ throw\ \`{}tsconfig.json\ not\ found:\ \$\{tsconfig\}`;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ return\ tsconfig;}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md7240}{}\doxysubsection{\texorpdfstring{Create Project without tsconfig.\+json}{Create Project without tsconfig.\+json}}\label{README.md_autotoc_md7240}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ rootPath\ =\ process.cwd();}
\DoxyCodeLine{const\ fileNames\ =\ [}
\DoxyCodeLine{\ \ \ \ path.resolve(rootPath,\ './src/a.ts'),}
\DoxyCodeLine{\ \ \ \ path.resolve(rootPath,\ './src/b.js'),}
\DoxyCodeLine{\ \ \ \ path.resolve(rootPath,\ './src/c.foo'),}
\DoxyCodeLine{];}
\DoxyCodeLine{const\ project\ =\ kit.createInferredProject(rootPath,\ fileNames);}

\end{DoxyCode}
 