\doxysection{node\+\_\+modules/periscopic Directory Reference}
\hypertarget{dir_5f616248ff24adc395e7a412d4cd8326}{}\label{dir_5f616248ff24adc395e7a412d4cd8326}\index{node\_modules/periscopic Directory Reference@{node\_modules/periscopic Directory Reference}}


\doxysubsection{Detailed Description}
Utility for analyzing scopes belonging to an ESTree-\/compliant AST.\hypertarget{README.md_autotoc_md25901}{}\doxysubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md25901}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ analyze\ \}\ from\ 'periscopic';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ ast\ =\ acorn.parse(`}
\DoxyCodeLine{const\ a\ =\ b;}
\DoxyCodeLine{console.log(a);}
\DoxyCodeLine{\`{});}
\DoxyCodeLine{}
\DoxyCodeLine{const\ \{\ map,\ globals,\ scope\ \}\ =\ analyze(ast);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily map} is a {\ttfamily Weak\+Map\texorpdfstring{$<$}{<}Node, Scope\texorpdfstring{$>$}{>}}, where the keys are the nodes of your AST that create a scope
\item {\ttfamily globals} is a {\ttfamily Map\texorpdfstring{$<$}{<}string, Node\texorpdfstring{$>$}{>}} of all the identifiers that are referenced without being declared anywhere in the program (in this case, {\ttfamily b} and {\ttfamily console})
\item {\ttfamily scope} is the top-\/level {\ttfamily Scope} belonging to the program
\end{DoxyItemize}\hypertarget{README.md_autotoc_md25902}{}\doxysubsubsection{\texorpdfstring{Scope}{Scope}}\label{README.md_autotoc_md25902}
Each {\ttfamily Scope} instance has the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily scope.\+block} — true if the scope is created by a block statement (i.\+e. {\ttfamily let}, {\ttfamily const} and {\ttfamily class} are contained to it), false otherwise
\item {\ttfamily scope.\+parent} — the parent scope object
\item {\ttfamily scope.\+declarations} — a {\ttfamily Map\texorpdfstring{$<$}{<}string, Node\texorpdfstring{$>$}{>}} of all the variables declared in this scope, the node value referes to the declaration statement
\item {\ttfamily scope.\+initialised\+\_\+declarations} — a {\ttfamily Set\texorpdfstring{$<$}{<}string\texorpdfstring{$>$}{>}} of all the variables declared and initialised in this scope
\item {\ttfamily scope.\+references} — a {\ttfamily Set\texorpdfstring{$<$}{<}string\texorpdfstring{$>$}{>}} of all the names referenced in this scope (or child scopes)
\end{DoxyItemize}

It also has two methods\+:


\begin{DoxyItemize}
\item {\ttfamily scope.\+has(name)} — returns {\ttfamily true} if {\ttfamily name} is declared in this scope or an ancestor scope
\item {\ttfamily scope.\+find\+\_\+owner(name)} — returns the scope object in which {\ttfamily name} is declared (or {\ttfamily null} if it is not declared)
\end{DoxyItemize}\hypertarget{README.md_autotoc_md25903}{}\doxysubsubsection{\texorpdfstring{{\ttfamily extract\+\_\+identifiers} and {\ttfamily extract\+\_\+names}}{{\ttfamily extract\+\_\+identifiers} and {\ttfamily extract\+\_\+names}}}\label{README.md_autotoc_md25903}
This package also exposes utilities for extracting the identifiers contained in a declaration or a function parameter\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ extract\_identifiers,\ extract\_names\ \}\ from\ 'periscopic';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ ast\ =\ acorn.parse(`}
\DoxyCodeLine{const\ \{\ a,\ b:\ [c,\ d]\ =\ e\ \}\ =\ opts;}
\DoxyCodeLine{\`{});}
\DoxyCodeLine{}
\DoxyCodeLine{const\ lhs\ =\ ast.body[0].declarations[0].id;}
\DoxyCodeLine{}
\DoxyCodeLine{extract\_identifiers(lhs);}
\DoxyCodeLine{/*}
\DoxyCodeLine{[}
\DoxyCodeLine{\ \ \ \ \{\ type:\ 'Identifier',\ name:\ 'a',\ start:\ 9,\ end:\ 10\ \},}
\DoxyCodeLine{\ \ \ \ \{\ type:\ 'Identifier',\ name:\ 'c',\ start:\ 16,\ end:\ 17\ \},}
\DoxyCodeLine{\ \ \ \ \{\ type:\ 'Identifier',\ name:\ 'd',\ start:\ 19,\ end:\ 20\ \}}
\DoxyCodeLine{]}
\DoxyCodeLine{*/}
\DoxyCodeLine{}
\DoxyCodeLine{extract\_names(lhs);}
\DoxyCodeLine{/*}
\DoxyCodeLine{['a',\ 'c',\ 'd']}
\DoxyCodeLine{*/}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md25904}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md25904}
\mbox{[}MIT\mbox{]}(LICENSE) 