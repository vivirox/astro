\doxysection{node\+\_\+modules/@octokit/auth-\/unauthenticated Directory Reference}
\hypertarget{dir_46fd649b9a75856b7b44f74bfb99c536}{}\label{dir_46fd649b9a75856b7b44f74bfb99c536}\index{node\_modules/"@octokit/auth-\/unauthenticated Directory Reference@{node\_modules/"@octokit/auth-\/unauthenticated Directory Reference}}


\doxysubsection{Detailed Description}
\begin{quote}
strategy for explicitly unauthenticated Octokit instances \end{quote}


\href{https://www.npmjs.com/package/@octokit/auth-unauthenticated}{\texttt{ }} \href{https://github.com/octokit/auth-unauthenticated.js/actions?query=workflow\%3ATest}{\texttt{ }}

{\ttfamily @octokit/auth-\/unauthenticated} is useful for cases when an Octokit constructor has a default authentication strategy, but you require an explicitly unauthenticated instance.

One use cases is when building a Git\+Hub App using \href{https://github.com/octokit/auth-app.js}{\texttt{ {\ttfamily @octokit/auth-\/app}}} and handling webhooks using \href{https://github.com/octokit/webhooks.js}{\texttt{ {\ttfamily @octokit/webhooks}}}. While all webhook events provide an installation ID in its payload, in case of the {\ttfamily installation.\+deleted} event, the app can no longer create an installation access token, because the app\textquotesingle{}s access has been revoked.


\begin{DoxyItemize}
\item \doxylink{readme.md_usage}{Usage}
\item \`{}create\+Unauthenticated\+Auth() options\`{}
\item \`{}auth()\`{}
\item Authentication object
\item \`{}auth.hook(request, route, options)\`{} or \`{}auth.hook(request, options)\`{}
\item \doxylink{README.md_license}{License}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5207}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md5207}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Browsers }&

Load {\ttfamily @octokit/auth-\/unauthenticated} directly from \href{https://esm.sh}{\texttt{ esm.\+sh}}


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{\ createUnauthenticatedAuth\ \}\ from\ "{}https://esm.sh/@octokit/auth-\/unauthenticated"{};}
\DoxyCodeLine{</script>}

\end{DoxyCode}


\\\cline{1-2}
\cellcolor{\tableheadbgcolor}\textbf{ Node }&

Install with {\ttfamily npm install @octokit/auth-\/unauthenticated}


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ createUnauthenticatedAuth\ \}\ from\ "{}@octokit/auth-\/unauthenticated"{};}

\end{DoxyCode}


\\\cline{1-2}
\end{longtabu}


\begin{DoxyImportant}{Important}
As we use \href{https://nodejs.org/api/packages.html\#conditional-exports}{\texttt{ conditional exports}}, you will need to adapt your {\ttfamily tsconfig.\+json} by setting {\ttfamily "{}module\+Resolution"{}\+: "{}node16"{}, "{}module"{}\+: "{}node16"{}}. ~\newline
~\newline
 See the Type\+Script docs on \href{https://www.typescriptlang.org/docs/handbook/modules/reference.html\#packagejson-exports}{\texttt{ package.\+json "{}exports"{}}}.~\newline
 See this \href{https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c}{\texttt{ helpful guide on transitioning to ESM}} from \href{https://github.com/sindresorhus}{\texttt{ @sindresorhus}}
\end{DoxyImportant}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ auth\ =\ createUnauthenticatedAuth(\{}
\DoxyCodeLine{\ \ reason:}
\DoxyCodeLine{\ \ \ \ "{}Handling\ an\ installation.deleted\ event\ (The\ app's\ access\ has\ been\ revoked)"{},}
\DoxyCodeLine{\});}
\DoxyCodeLine{const\ authentication\ =\ await\ auth();}
\DoxyCodeLine{//\ \{}
\DoxyCodeLine{//\ \ \ type:\ 'unauthenticated',}
\DoxyCodeLine{//\ \ \ reason:\ 'Handling\ an\ installation.deleted\ event\ (The\ app's\ access\ has\ been\ revoked)'}
\DoxyCodeLine{//\ \}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5208}{}\doxysubsection{\texorpdfstring{{\ttfamily create\+Unauthenticated\+Auth() options}}{{\ttfamily create\+Unauthenticated\+Auth() options}}}\label{README.md_autotoc_md5208}
The {\ttfamily create\+Unauthenticated\+Auth} method requires an {\ttfamily options.\+reason} argument which will be used when returning an error due to a lack of authentication or when logging a warning in case of a {\ttfamily 404} error.

Examples


\begin{DoxyCode}{0}
\DoxyCodeLine{createUnauthenticatedAuth(\{}
\DoxyCodeLine{\ \ reason:}
\DoxyCodeLine{\ \ \ \ "{}Handling\ an\ installation.deleted\ event:\ The\ app's\ access\ has\ been\ revoked\ from\ @octokit\ (id:\ 12345)"{},}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5209}{}\doxysubsection{\texorpdfstring{{\ttfamily auth()}}{{\ttfamily auth()}}}\label{README.md_autotoc_md5209}
The {\ttfamily auth()} method accepts any options, but it doesn\textquotesingle{}t do anything with it. That makes it a great drop-\/in replacement for any other authentication strategy.\hypertarget{README.md_autotoc_md5210}{}\doxysubsection{\texorpdfstring{Authentication object}{Authentication object}}\label{README.md_autotoc_md5210}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ name  }&\cellcolor{\tableheadbgcolor}\textbf{ type  }&\cellcolor{\tableheadbgcolor}\textbf{ description     }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ name  }&\cellcolor{\tableheadbgcolor}\textbf{ type  }&\cellcolor{\tableheadbgcolor}\textbf{ description     }\\\cline{1-3}
\endhead
\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily type}  }&\cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily string}  }&{\ttfamily "{}unauthenticated"{}}    \\\cline{1-3}
\end{longtabu}
\hypertarget{README.md_autotoc_md5211}{}\doxysubsection{\texorpdfstring{{\ttfamily auth.\+hook(request, route, options)} or {\ttfamily auth.\+hook(request, options)}}{{\ttfamily auth.\+hook(request, route, options)} or {\ttfamily auth.\+hook(request, options)}}}\label{README.md_autotoc_md5211}
{\ttfamily auth.\+hook()} hooks directly into the request life cycle. If a mutating request is attempted to be sent ({\ttfamily DELETE}, {\ttfamily PATCH}, {\ttfamily POST}, or {\ttfamily PUT}), the request is failed immediately and returning an error that contains the reason passed to {\ttfamily create\+Unauthenticated\+Auth(\{ reason \})}.

If a request fails with a {\ttfamily 404} or due to hitting a rate/abuse limit, the returned error is amended that it might be caused due to a lack of authentication and will include the reason passed to {\ttfamily create\+Unauthenticated\+Auth(\{ reason \})}.

The {\ttfamily request} option is an instance of \href{https://github.com/octokit/request.js\#readme}{\texttt{ {\ttfamily @octokit/request}}}. The {\ttfamily route}/{\ttfamily options} parameters are the same as for the \href{https://github.com/octokit/request.js\#request}{\texttt{ {\ttfamily request()} method}}.

{\ttfamily auth.\+hook()} can be called directly to send an authenticated request


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ \{\ data\ \}\ =\ await\ auth.hook(request,\ "{}GET\ /"{});}

\end{DoxyCode}


Or it can be passed as option to \href{https://github.com/octokit/request.js\#request}{\texttt{ {\ttfamily request()}}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ requestWithAuth\ =\ request.defaults(\{}
\DoxyCodeLine{\ \ request:\ \{}
\DoxyCodeLine{\ \ \ \ hook:\ auth.hook,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{const\ \{\ data\ \}\ =\ await\ requestWithAuth("{}GET\ /"{});}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5212}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md5212}
\mbox{[}MIT\mbox{]}(LICENSE) 