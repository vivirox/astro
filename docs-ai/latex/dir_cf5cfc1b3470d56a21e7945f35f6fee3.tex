\doxysection{node\+\_\+modules/stream-\/replace-\/string Directory Reference}
\hypertarget{dir_cf5cfc1b3470d56a21e7945f35f6fee3}{}\label{dir_cf5cfc1b3470d56a21e7945f35f6fee3}\index{node\_modules/stream-\/replace-\/string Directory Reference@{node\_modules/stream-\/replace-\/string Directory Reference}}


\doxysubsection{Detailed Description}
Replaces strings in a stream.\hypertarget{README.md_autotoc_md31285}{}\doxysubsection{\texorpdfstring{Install}{Install}}\label{README.md_autotoc_md31285}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ i\ stream-\/replace-\/string}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31286}{}\doxysubsection{\texorpdfstring{Using}{Using}}\label{README.md_autotoc_md31286}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ replace\ from\ 'stream-\/replace-\/string'}
\DoxyCodeLine{import\ \{\ createReadStream,\ createWriteStream\ \}\ from\ 'fs'}
\DoxyCodeLine{}
\DoxyCodeLine{createReadStream("{}./input.txt"{})}
\DoxyCodeLine{\ \ \ \ .pipe(replace("{}\{fruit\}"{},\ "{}apple"{}))}
\DoxyCodeLine{\ \ \ \ .pipe(createWriteStream("{}./output.txt"{}))}

\end{DoxyCode}
 You can also replace multiple different words by piping your data through multiple replace streams 
\begin{DoxyCode}{0}
\DoxyCodeLine{createReadStream("{}./input.txt"{})}
\DoxyCodeLine{\ \ \ \ .pipe(replace("{}good"{},\ "{}great"{}))}
\DoxyCodeLine{\ \ \ \ .pipe(replace("{}bad"{},\ "{}horrible"{}))}
\DoxyCodeLine{\ \ \ \ .pipe(replace("{}grey"{},\ "{}gray"{}))}
\DoxyCodeLine{\ \ \ \ .pipe(createWriteStream("{}./output.txt"{}))}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31287}{}\doxysubsubsection{\texorpdfstring{The {\ttfamily replace} function}{The {\ttfamily replace} function}}\label{README.md_autotoc_md31287}

\begin{DoxyCode}{0}
\DoxyCodeLine{replace(searchStr,\ replaceWith,\ options)}

\end{DoxyCode}

\begin{DoxyItemize}
\item Parameters
\begin{DoxyItemize}
\item {\ttfamily search\+Str} -\/ The string to search for. This must be a string, and cannot be a regex.
\item {\ttfamily replace\+With} -\/ There are a couple of different things you can use\+:
\begin{DoxyItemize}
\item String -\/ Inserts the string.
\item Promise resolving a string -\/ Once the promise is resolved, the given string is used.
\item Replacer function -\/ This is a custom replacer function. The function can take a parameter, {\ttfamily matches}, which is the number of matches so far (for the first match, this will be {\ttfamily 0}). This function should return a string or a promise resolving a string.
\item Readable stream -\/ A readable stream can be given, which can make more chunks available sooner. See {\ttfamily options.\+buffer\+Replace\+Stream} for options if you are using a readable stream.
\end{DoxyItemize}
\item {\ttfamily options} (optional) -\/ An object of options.
\begin{DoxyItemize}
\item {\ttfamily limit} (optional, default {\ttfamily Infinity}) -\/ The maximum number of strings to replace. This can be useful if you know there is only 1 occurrence of {\ttfamily search\+Str}. Once this limit is reached, the transform stream will stop transforming anything.
\item {\ttfamily buffer\+Replace\+Stream} (optional, default {\ttfamily true}) -\/ This is for when you use a readable stream for {\ttfamily replace\+With}. If this is true, the {\ttfamily replace\+With} stream will be read right away, and be kept in memory to be used once a match is found. For fastest performance, keep this to be {\ttfamily true}. If your {\ttfamily replace\+With} stream is very large and you have a limit of 1, you can set this to {\ttfamily false} to save memory.
\end{DoxyItemize}
\end{DoxyItemize}
\item Returns
\begin{DoxyItemize}
\item Returns a transform stream. See the How It Works section for more information.
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md31288}{}\doxysubsection{\texorpdfstring{How It Works}{How It Works}}\label{README.md_autotoc_md31288}
\hypertarget{README.md_autotoc_md31289}{}\doxysubsubsection{\texorpdfstring{The transform stream}{The transform stream}}\label{README.md_autotoc_md31289}
The \`{}replace\`{} function returns a Node.\+js transform stream. Transform streams take in chunks and can also be read. In this particular transform stream, it takes a string and outputs the same string, except that it replaces the replace.\hypertarget{README.md_autotoc_md31290}{}\doxysubsubsection{\texorpdfstring{Efficient memory use.}{Efficient memory use.}}\label{README.md_autotoc_md31290}
The tricky part with this transform stream is knowing when to hold chunks, and when to pass them on. Let\textquotesingle{}s say we were looking for `\textquotesingle{}paper'{\ttfamily in our text. If our first chunk was\+:}\textquotesingle{}perfect pot\textquotesingle{}{\ttfamily , this module knows that there is no way the string}\textquotesingle{}perfect pot\textquotesingle{}{\ttfamily will fit into the search string,}\textquotesingle{}paper\textquotesingle{}{\ttfamily . We can then pass the chunks onto the output of the transform stream, available right away for the stream consumer. However, if our first chunk was\+:}\textquotesingle{}p\textquotesingle{}{\ttfamily , we can\textquotesingle{}t pass that on, because there is a change that the next chunk could start with}\textquotesingle{}aper\textquotesingle{}{\ttfamily . Since we aren\textquotesingle{}t sure if the}\textquotesingle{}p\textquotesingle{}{\ttfamily will be replaced or not, we hold on to this text, and check it once we get the next chunk. If we get}\textquotesingle{}aper\textquotesingle{}{\ttfamily in the next chunk, we replace the text. If we get something else, like}\textquotesingle{}ear\textquotesingle{}{\ttfamily , we can attach it to the}\textquotesingle{}p\textquotesingle{}{\ttfamily and output}\textquotesingle{}pear\textquotesingle{}{\ttfamily . It gets even more complicated when multiple potential matches are possible. Let\textquotesingle{}s say we get}\textquotesingle{}pap\textquotesingle{}{\ttfamily in our first chunk. We need to be watching the first}\textquotesingle{}p\textquotesingle{}{\ttfamily and the third}\textquotesingle{}p\textquotesingle{}{\ttfamily , because it could end up being}\textquotesingle{}paper\textquotesingle{}{\ttfamily , if the next chunk was}\textquotesingle{}er\textquotesingle{}{\ttfamily , or it could end of being}\textquotesingle{}papaper\textquotesingle{}\`{}. This package is smart and it will efficiently find matches spanning multiple chunks, and get rid of text it knows won\textquotesingle{}t have a match.\hypertarget{README.md_autotoc_md31291}{}\doxysubsubsubsection{\texorpdfstring{Importing with ESModules}{Importing with ESModules}}\label{README.md_autotoc_md31291}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ replace\ from\ 'stream-\/replace-\/string'}

\end{DoxyCode}
 