\doxysection{node\+\_\+modules/@octokit/plugin-\/retry Directory Reference}
\hypertarget{dir_02d868c166204a421cedd07671e0e5b0}{}\label{dir_02d868c166204a421cedd07671e0e5b0}\index{node\_modules/"@octokit/plugin-\/retry Directory Reference@{node\_modules/"@octokit/plugin-\/retry Directory Reference}}


\doxysubsection{Detailed Description}
\begin{quote}
Retries requests for server 4xx/5xx responses except {\ttfamily 400}, {\ttfamily 401}, {\ttfamily 403}, {\ttfamily 404}, {\ttfamily 410}, {\ttfamily 422}, and {\ttfamily 451}. \end{quote}


\href{https://www.npmjs.com/package/@octokit/plugin-retry}{\texttt{ }} \href{https://github.com/octokit/plugin-retry.js/actions?workflow=Test}{\texttt{ }}\hypertarget{README.md_autotoc_md5342}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md5342}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Browsers }&

Load {\ttfamily @octokit/plugin-\/retry} and \href{https://github.com/octokit/core.js}{\texttt{ {\ttfamily @octokit/core}}} (or core-\/compatible module) directly from \href{https://esm.sh}{\texttt{ esm.\+sh}}


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{\ Octokit\ \}\ from\ "{}https://esm.sh/@octokit/core"{};}
\DoxyCodeLine{\ \ import\ \{\ retry\ \}\ from\ "{}https://esm.sh/@octokit/plugin-\/retry"{};}
\DoxyCodeLine{</script>}

\end{DoxyCode}


\\\cline{1-2}
\cellcolor{\tableheadbgcolor}\textbf{ Node }&

Install with {\ttfamily npm install @octokit/core @octokit/plugin-\/retry}. Optionally replace {\ttfamily @octokit/core} with a core-\/compatible module


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ Octokit\ \}\ from\ "{}@octokit/core"{};}
\DoxyCodeLine{import\ \{\ retry\ \}\ from\ "{}@octokit/plugin-\/retry"{};}

\end{DoxyCode}


\\\cline{1-2}
\end{longtabu}


\begin{DoxyImportant}{Important}
As we use \href{https://nodejs.org/api/packages.html\#conditional-exports}{\texttt{ conditional exports}}, you will need to adapt your {\ttfamily tsconfig.\+json} by setting {\ttfamily "{}module\+Resolution"{}\+: "{}node16"{}, "{}module"{}\+: "{}node16"{}}. ~\newline
~\newline
 See the Type\+Script docs on \href{https://www.typescriptlang.org/docs/handbook/modules/reference.html\#packagejson-exports}{\texttt{ package.\+json "{}exports"{}}}.~\newline
 See this \href{https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c}{\texttt{ helpful guide on transitioning to ESM}} from \href{https://github.com/sindresorhus}{\texttt{ @sindresorhus}}
\end{DoxyImportant}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ MyOctokit\ =\ Octokit.plugin(retry);}
\DoxyCodeLine{const\ octokit\ =\ new\ MyOctokit(\{\ auth:\ "{}secret123"{}\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ retries\ request\ up\ to\ 3\ times\ in\ case\ of\ a\ 500\ response}
\DoxyCodeLine{octokit.request("{}/"{}).catch((error)\ =>\ \{}
\DoxyCodeLine{\ \ if\ (error.request.request.retryCount)\ \{}
\DoxyCodeLine{\ \ \ \ console.log(}
\DoxyCodeLine{\ \ \ \ \ \ \`{}request\ failed\ after\ \$\{error.request.request.retryCount\}\ retries`,}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ console.error(error);}
\DoxyCodeLine{\});}

\end{DoxyCode}


To override the default {\ttfamily do\+Not\+Retry} list\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ octokit\ =\ new\ MyOctokit(\{}
\DoxyCodeLine{\ \ auth:\ "{}secret123"{},}
\DoxyCodeLine{\ \ retry:\ \{}
\DoxyCodeLine{\ \ \ \ doNotRetry:\ [}
\DoxyCodeLine{\ \ \ \ \ \ /*\ List\ of\ HTTP\ 4xx/5xx\ status\ codes\ */}
\DoxyCodeLine{\ \ \ \ ],}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\});}

\end{DoxyCode}


To override the number of retries\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ octokit\ =\ new\ MyOctokit(\{}
\DoxyCodeLine{\ \ auth:\ "{}secret123"{},}
\DoxyCodeLine{\ \ request:\ \{\ retries:\ 1\ \},}
\DoxyCodeLine{\});}

\end{DoxyCode}


You can manually ask for retries for any request by passing {\ttfamily \{ request\+: \{ retries\+: num\+Retries, retry\+After\+: delay\+In\+Seconds \}\}}. Note that the {\ttfamily do\+Not\+Retry} option from the constructor is ignored in this case, requests will be retried no matter their response code.


\begin{DoxyCode}{0}
\DoxyCodeLine{octokit}
\DoxyCodeLine{\ \ .request("{}/"{},\ \{\ request:\ \{\ retries:\ 1,\ retryAfter:\ 1\ \}\ \})}
\DoxyCodeLine{\ \ .catch((error)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ if\ (error.request.request.retryCount)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ console.log(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \`{}request\ failed\ after\ \$\{error.request.request.retryCount\}\ retries`,}
\DoxyCodeLine{\ \ \ \ \ \ );}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ console.error(error);}
\DoxyCodeLine{\ \ \});}

\end{DoxyCode}


Pass {\ttfamily \{ retry\+: \{ enabled\+: false \} \}} to disable this plugin.\hypertarget{README.md_autotoc_md5343}{}\doxysubsection{\texorpdfstring{Contributing}{Contributing}}\label{README.md_autotoc_md5343}
See \doxylink{zod-to-json-schema_2_c_o_n_t_r_i_b_u_t_i_n_g_8md}{CONTRIBUTING.md}\hypertarget{README.md_autotoc_md5344}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md5344}
\mbox{[}MIT\mbox{]}(LICENSE) 