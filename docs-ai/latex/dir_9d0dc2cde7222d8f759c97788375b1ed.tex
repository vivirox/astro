\doxysection{node\+\_\+modules/multiformats Directory Reference}
\hypertarget{dir_9d0dc2cde7222d8f759c97788375b1ed}{}\label{dir_9d0dc2cde7222d8f759c97788375b1ed}\index{node\_modules/multiformats Directory Reference@{node\_modules/multiformats Directory Reference}}


\doxysubsection{Detailed Description}

\begin{DoxyItemize}
\item Interfaces
\begin{DoxyItemize}
\item Creating Blocks
\item Multibase Encoders / Decoders / Codecs
\item Multicodec Encoders / Decoders / Codecs
\item Multihash Hashers
\item Traversal
\end{DoxyItemize}
\item Legacy interface
\item Implementations
\begin{DoxyItemize}
\item Multibase codecs
\item Multihash hashers
\item IPLD codecs (multicodec)
\end{DoxyItemize}
\item \doxylink{README.md_license}{License}
\begin{DoxyItemize}
\item Contribution
\end{DoxyItemize}
\end{DoxyItemize}

This library defines common interfaces and low level building blocks for various interrelated multiformat technologies (multicodec, multihash, multibase, and CID). They can be used to implement custom base encoders / decoders / codecs, codec encoders /decoders and multihash hashers that comply to the interface that layers above assume.

This library provides implementations for most basics and many others can be found in linked repositories.\hypertarget{README.md_autotoc_md24402}{}\doxysubsection{\texorpdfstring{Interfaces}{Interfaces}}\label{README.md_autotoc_md24402}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ CID\ \}\ from\ 'multiformats/cid'}
\DoxyCodeLine{import\ *\ as\ json\ from\ 'multiformats/codecs/json'}
\DoxyCodeLine{import\ \{\ sha256\ \}\ from\ 'multiformats/hashes/sha2'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ bytes\ =\ json.encode(\{\ hello:\ 'world'\ \})}
\DoxyCodeLine{}
\DoxyCodeLine{const\ hash\ =\ await\ sha256.digest(bytes)}
\DoxyCodeLine{const\ cid\ =\ CID.create(1,\ json.code,\ hash)}
\DoxyCodeLine{//>\ CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md24403}{}\doxysubsubsection{\texorpdfstring{Creating Blocks}{Creating Blocks}}\label{README.md_autotoc_md24403}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ *\ as\ Block\ from\ 'multiformats/block'}
\DoxyCodeLine{import\ *\ as\ codec\ from\ '@ipld/dag-\/cbor'}
\DoxyCodeLine{import\ \{\ sha256\ as\ hasher\ \}\ from\ 'multiformats/hashes/sha2'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ value\ =\ \{\ hello:\ 'world'\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{//\ encode\ a\ block}
\DoxyCodeLine{let\ block\ =\ await\ Block.encode(\{\ value,\ codec,\ hasher\ \})}
\DoxyCodeLine{}
\DoxyCodeLine{block.value\ //\ \{\ hello:\ 'world'\ \}}
\DoxyCodeLine{block.bytes\ //\ Uint8Array}
\DoxyCodeLine{block.cid\ \ \ //\ CID()\ w/\ sha2-\/256\ hash\ address\ and\ dag-\/cbor\ codec}
\DoxyCodeLine{}
\DoxyCodeLine{//\ you\ can\ also\ decode\ blocks\ from\ their\ binary\ state}
\DoxyCodeLine{block\ =\ await\ Block.decode(\{\ bytes:\ block.bytes,\ codec,\ hasher\ \})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ if\ you\ have\ the\ cid\ you\ can\ also\ verify\ the\ hash\ on\ decode}
\DoxyCodeLine{block\ =\ await\ Block.create(\{\ bytes:\ block.bytes,\ cid:\ block.cid,\ codec,\ hasher\ \})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md24404}{}\doxysubsubsection{\texorpdfstring{Multibase Encoders / Decoders / Codecs}{Multibase Encoders / Decoders / Codecs}}\label{README.md_autotoc_md24404}
CIDs can be serialized to string representation using multibase encoders that implement \href{https://github.com/multiformats/js-multiformats/blob/master/src/bases/interface.ts}{\texttt{ {\ttfamily Multibase\+Encoder}}} interface. This library provides quite a few implementations that can be imported\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ base64\ \}\ from\ "{}multiformats/bases/base64"{}}
\DoxyCodeLine{cid.toString(base64.encoder)}
\DoxyCodeLine{//>\ 'mAYAEEiCTojlxqRTl6svwqNJRVM2jCcPBxy+7mRTUfGDzy2gViA'}

\end{DoxyCode}


Parsing CID string serialized CIDs requires multibase decoder that implements \href{https://github.com/multiformats/js-multiformats/blob/master/src/bases/interface.ts}{\texttt{ {\ttfamily Multibase\+Decoder}}} interface. This library provides a decoder for every encoder it provides\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{CID.parse('mAYAEEiCTojlxqRTl6svwqNJRVM2jCcPBxy+7mRTUfGDzy2gViA',\ base64.decoder)}
\DoxyCodeLine{//>\ CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)}

\end{DoxyCode}


Dual of multibase encoder \& decoder is defined as multibase codec and it exposes them as {\ttfamily encoder} and {\ttfamily decoder} properties. For added convenience codecs also implement {\ttfamily Multibase\+Encoder} and {\ttfamily Multibase\+Decoder} interfaces so they could be used as either or both\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{cid.toString(base64)}
\DoxyCodeLine{CID.parse(cid.toString(base64),\ base64)}

\end{DoxyCode}


{\bfseries{Note\+:}} CID implementation comes bundled with {\ttfamily base32} and {\ttfamily base58btc} multibase codecs so that CIDs can be base serialized to (version specific) default base encoding and parsed without having to supply base encoders/decoders\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ v1\ =\ CID.parse('bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea')}
\DoxyCodeLine{v1.toString()}
\DoxyCodeLine{//>\ 'bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ v0\ =\ CID.parse('QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n')}
\DoxyCodeLine{v0.toString()}
\DoxyCodeLine{//>\ 'QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n'}
\DoxyCodeLine{v0.toV1().toString()}
\DoxyCodeLine{//>\ 'bafybeihdwdcefgh4dqkjv67uzcmw7ojee6xedzdetojuzjevtenxquvyku'}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md24405}{}\doxysubsubsection{\texorpdfstring{Multicodec Encoders / Decoders / Codecs}{Multicodec Encoders / Decoders / Codecs}}\label{README.md_autotoc_md24405}
This library defines \href{https://github.com/multiformats/js-multiformats/blob/master/src/codecs/interface.ts}{\texttt{ {\ttfamily Block\+Encoder}, {\ttfamily Block\+Decoder} and {\ttfamily Block\+Codec} interfaces}}. Codec implementations should conform to the {\ttfamily Block\+Codec} interface which implements both {\ttfamily Block\+Encoder} and {\ttfamily Block\+Decoder}. Here is an example implementation of JSON {\ttfamily Block\+Codec}.


\begin{DoxyCode}{0}
\DoxyCodeLine{/**}
\DoxyCodeLine{\ *\ @template\ T}
\DoxyCodeLine{\ *\ @type\ \{BlockCodec<0x0200,\ T>\}}
\DoxyCodeLine{\ */}
\DoxyCodeLine{export\ const\ \{\ name,\ code,\ encode,\ decode\ \}\ =\ \{}
\DoxyCodeLine{\ \ name:\ 'json',}
\DoxyCodeLine{\ \ code:\ 0x0200,}
\DoxyCodeLine{\ \ encode:\ json\ =>\ new\ TextEncoder().encode(JSON.stringify(json)),}
\DoxyCodeLine{\ \ decode:\ bytes\ =>\ JSON.parse(new\ TextDecoder().decode(bytes))}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md24406}{}\doxysubsubsection{\texorpdfstring{Multihash Hashers}{Multihash Hashers}}\label{README.md_autotoc_md24406}
This library defines \href{https://github.com/multiformats/js-multiformats/blob/master/src/hashes/interface.ts}{\texttt{ {\ttfamily Multihash\+Hasher} and {\ttfamily Multihash\+Digest} interfaces}} and convinient function for implementing them\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ *\ as\ hasher\ from\ 'multiformats/hashes/hasher'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ sha256\ =\ hasher.from(\{}
\DoxyCodeLine{\ \ //\ As\ per\ multiformats\ table}
\DoxyCodeLine{\ \ //\ https://github.com/multiformats/multicodec/blob/master/table.csv\#L9}
\DoxyCodeLine{\ \ name:\ 'sha2-\/256',}
\DoxyCodeLine{\ \ code:\ 0x12,}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ encode:\ (input)\ =>\ new\ Uint8Array(crypto.createHash('sha256').update(input).digest())}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{const\ hash\ =\ await\ sha256.digest(json.encode(\{\ hello:\ 'world'\ \}))}
\DoxyCodeLine{CID.create(1,\ json.code,\ hash)}
\DoxyCodeLine{}
\DoxyCodeLine{//>\ CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md24407}{}\doxysubsubsection{\texorpdfstring{Traversal}{Traversal}}\label{README.md_autotoc_md24407}
This library contains higher-\/order functions for traversing graphs of data easily.

{\ttfamily walk()} walks through the links in each block of a DAG calling a user-\/supplied loader function for each one, in depth-\/first order with no duplicate block visits. The loader should return a {\ttfamily Block} object and can be used to inspect and collect block ordering for a full DAG walk. The loader should {\ttfamily throw} on error, and return {\ttfamily null} if a block should be skipped by {\ttfamily walk()}.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ walk\ \}\ from\ 'multiformats/traversal'}
\DoxyCodeLine{import\ *\ as\ Block\ from\ 'multiformats/block'}
\DoxyCodeLine{import\ *\ as\ codec\ from\ 'multiformats/codecs/json'}
\DoxyCodeLine{import\ \{\ sha256\ as\ hasher\ \}\ from\ 'multiformats/hashes/sha2'}
\DoxyCodeLine{}
\DoxyCodeLine{//\ build\ a\ DAG\ (a\ single\ block\ for\ this\ simple\ example)}
\DoxyCodeLine{const\ value\ =\ \{\ hello:\ 'world'\ \}}
\DoxyCodeLine{const\ block\ =\ await\ Block.encode(\{\ value,\ codec,\ hasher\ \})}
\DoxyCodeLine{const\ \{\ cid\ \}\ =\ block}
\DoxyCodeLine{console.log(cid)}
\DoxyCodeLine{//>\ CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ create\ a\ loader\ function\ that\ also\ collects\ CIDs\ of\ blocks\ in}
\DoxyCodeLine{//\ their\ traversal\ order}
\DoxyCodeLine{const\ load\ =\ (cid,\ blocks)\ =>\ async\ (cid)\ =>\ \{}
\DoxyCodeLine{\ \ //\ fetch\ a\ block\ using\ its\ cid}
\DoxyCodeLine{\ \ //\ e.g.:\ const\ block\ =\ await\ fetchBlockByCID(cid)}
\DoxyCodeLine{\ \ blocks.push(cid)}
\DoxyCodeLine{\ \ return\ block}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{//\ collect\ blocks\ in\ this\ DAG\ starting\ from\ the\ root\ \`{}cid`}
\DoxyCodeLine{const\ blocks\ =\ []}
\DoxyCodeLine{await\ walk(\{\ cid,\ load:\ load(cid,\ blocks)\ \})}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(blocks)}
\DoxyCodeLine{//>\ [CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)]}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md24408}{}\doxysubsection{\texorpdfstring{Legacy interface}{Legacy interface}}\label{README.md_autotoc_md24408}
\href{https://github.com/ipld/js-blockcodec-to-ipld-format}{\texttt{ {\ttfamily blockcodec-\/to-\/ipld-\/format}}} converts a multiformats \href{https://github.com/multiformats/js-multiformats/blob/master/src/codecs/interface.ts\#L21}{\texttt{ {\ttfamily Block\+Codec}}} into an \href{https://github.com/ipld/interface-ipld-format}{\texttt{ {\ttfamily interface-\/ipld-\/format}}} for use with the \href{https://github.com/ipld/ipld}{\texttt{ {\ttfamily ipld}}} package. This can help bridge IPLD codecs implemented using the structure and interfaces defined here to existing code that assumes, or requires {\ttfamily interface-\/ipld-\/format}. This bridge also includes the relevant Type\+Script definitions.\hypertarget{README.md_autotoc_md24409}{}\doxysubsection{\texorpdfstring{Implementations}{Implementations}}\label{README.md_autotoc_md24409}
By default, no base encodings (other than base32 \& base58btc), hash functions, or codec implementations are exposed by {\ttfamily multiformats}, you need to import the ones you need yourself.\hypertarget{README.md_autotoc_md24410}{}\doxysubsubsection{\texorpdfstring{Multibase codecs}{Multibase codecs}}\label{README.md_autotoc_md24410}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ bases   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ import   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ repo    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ bases   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ import   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ repo    }\\\cline{1-3}
\endhead
{\ttfamily base16}   &{\ttfamily multiformats/bases/base16}   &\href{https://github.com/multiformats/js-multiformats/tree/master/bases}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily base32}, {\ttfamily base32pad}, {\ttfamily base32hex}, {\ttfamily base32hexpad}, {\ttfamily base32z}   &{\ttfamily multiformats/bases/base32}   &\href{https://github.com/multiformats/js-multiformats/tree/master/bases}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily base64}, {\ttfamily base64pad}, {\ttfamily base64url}, {\ttfamily base64urlpad}   &{\ttfamily multiformats/bases/base64}   &\href{https://github.com/multiformats/js-multiformats/tree/master/bases}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily base58btc}, {\ttfamily base58flick4}   &{\ttfamily multiformats/bases/base58}   &\href{https://github.com/multiformats/js-multiformats/tree/master/bases}{\texttt{ multiformats/js-\/multiformats}}   \\\cline{1-3}
\end{longtabu}


Other (less useful) bases implemented in \href{https://github.com/multiformats/js-multiformats/tree/master/bases}{\texttt{ multiformats/js-\/multiformats}} include\+: {\ttfamily base2}, {\ttfamily base8}, {\ttfamily base10}, {\ttfamily base36} and {\ttfamily base256emoji}.\hypertarget{README.md_autotoc_md24411}{}\doxysubsubsection{\texorpdfstring{Multihash hashers}{Multihash hashers}}\label{README.md_autotoc_md24411}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ hashes   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ import   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ repo    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ hashes   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ import   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ repo    }\\\cline{1-3}
\endhead
{\ttfamily sha2-\/256}, {\ttfamily sha2-\/512}   &{\ttfamily multiformats/hashes/sha2}   &\href{https://github.com/multiformats/js-multiformats/tree/master/src/hashes}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily sha3-\/224}, {\ttfamily sha3-\/256}, {\ttfamily sha3-\/384},{\ttfamily sha3-\/512}, {\ttfamily shake-\/128}, {\ttfamily shake-\/256}, {\ttfamily keccak-\/224}, {\ttfamily keccak-\/256}, {\ttfamily keccak-\/384}, {\ttfamily keccak-\/512}   &{\ttfamily @multiformats/sha3}   &\href{https://github.com/multiformats/js-sha3}{\texttt{ multiformats/js-\/sha3}}    \\\cline{1-3}
{\ttfamily identity}   &{\ttfamily multiformats/hashes/identity}   &\href{https://github.com/multiformats/js-multiformats/tree/master/src/hashes/identity.js}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily murmur3-\/128}, {\ttfamily murmur3-\/32}   &{\ttfamily @multiformats/murmur3}   &\href{https://github.com/multiformats/js-murmur3}{\texttt{ multiformats/js-\/murmur3}}    \\\cline{1-3}
{\ttfamily blake2b-\/\texorpdfstring{$\ast$}{*}}, {\ttfamily blake2s-\/\texorpdfstring{$\ast$}{*}}   &{\ttfamily @multiformats/blake2}   &\href{https://github.com/multiformats/js-blake2}{\texttt{ multiformats/js-\/blake2}}   \\\cline{1-3}
\end{longtabu}
\hypertarget{README.md_autotoc_md24412}{}\doxysubsubsection{\texorpdfstring{IPLD codecs (multicodec)}{IPLD codecs (multicodec)}}\label{README.md_autotoc_md24412}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ codec   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ import   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ repo    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ codec   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ import   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ repo    }\\\cline{1-3}
\endhead
{\ttfamily raw}   &{\ttfamily multiformats/codecs/raw}   &\href{https://github.com/multiformats/js-multiformats/tree/master/src/codecs}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily json}   &{\ttfamily multiformats/codecs/json}   &\href{https://github.com/multiformats/js-multiformats/tree/master/src/codecs}{\texttt{ multiformats/js-\/multiformats}}    \\\cline{1-3}
{\ttfamily dag-\/cbor}   &{\ttfamily @ipld/dag-\/cbor}   &\href{https://github.com/ipld/js-dag-cbor}{\texttt{ ipld/js-\/dag-\/cbor}}    \\\cline{1-3}
{\ttfamily dag-\/json}   &{\ttfamily @ipld/dag-\/json}   &\href{https://github.com/ipld/js-dag-json}{\texttt{ ipld/js-\/dag-\/json}}    \\\cline{1-3}
{\ttfamily dag-\/pb}   &{\ttfamily @ipld/dag-\/pb}   &\href{https://github.com/ipld/js-dag-pb}{\texttt{ ipld/js-\/dag-\/pb}}    \\\cline{1-3}
{\ttfamily dag-\/jose}   &{\ttfamily dag-\/jose}   &\href{https://github.com/ceramicnetwork/js-dag-jose}{\texttt{ ceramicnetwork/js-\/dag-\/jose}}   \\\cline{1-3}
\end{longtabu}
\hypertarget{README.md_autotoc_md24413}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md24413}
Licensed under either of


\begin{DoxyItemize}
\item Apache 2.\+0, (\mbox{[}LICENSE-\/\+APACHE\mbox{]}(LICENSE-\/\+APACHE) / \href{http://www.apache.org/licenses/LICENSE-2.0}{\texttt{ http\+://www.\+apache.\+org/licenses/\+LICENSE-\/2.\+0}})
\item MIT (\mbox{[}LICENSE-\/\+MIT\mbox{]}(LICENSE-\/\+MIT) / \href{http://opensource.org/licenses/MIT}{\texttt{ http\+://opensource.\+org/licenses/\+MIT}})
\end{DoxyItemize}\hypertarget{README.md_autotoc_md24414}{}\doxysubsubsection{\texorpdfstring{Contribution}{Contribution}}\label{README.md_autotoc_md24414}
Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion in the work by you, as defined in the Apache-\/2.\+0 license, shall be dual licensed as above, without any additional terms or conditions. 