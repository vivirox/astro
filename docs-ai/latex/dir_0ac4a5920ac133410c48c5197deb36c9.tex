\doxysection{node\+\_\+modules/enhanced-\/resolve Directory Reference}
\hypertarget{dir_0ac4a5920ac133410c48c5197deb36c9}{}\label{dir_0ac4a5920ac133410c48c5197deb36c9}\index{node\_modules/enhanced-\/resolve Directory Reference@{node\_modules/enhanced-\/resolve Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://www.npmjs.com/package/enhanced-resolve}{\texttt{ }} \href{https://github.com/webpack/enhanced-resolve/actions}{\texttt{ }} \href{https://codecov.io/gh/webpack/enhanced-resolve}{\texttt{ }} \href{https://packagephobia.com/result?p=enhanced-resolve}{\texttt{ }} \href{https://github.com/webpack/webpack/discussions}{\texttt{ }}

Offers an async require.\+resolve function. It\textquotesingle{}s highly configurable.\hypertarget{README.md_autotoc_md12438}{}\doxysubsection{\texorpdfstring{Features}{Features}}\label{README.md_autotoc_md12438}

\begin{DoxyItemize}
\item plugin system
\item provide a custom filesystem
\item sync and async node.\+js filesystems included
\end{DoxyItemize}\hypertarget{README.md_autotoc_md12439}{}\doxysubsection{\texorpdfstring{Getting Started}{Getting Started}}\label{README.md_autotoc_md12439}
\hypertarget{README.md_autotoc_md12440}{}\doxysubsubsection{\texorpdfstring{Install}{Install}}\label{README.md_autotoc_md12440}

\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ npm}
\DoxyCodeLine{npm\ install\ enhanced-\/resolve}
\DoxyCodeLine{\#\ or\ Yarn}
\DoxyCodeLine{yarn\ add\ enhanced-\/resolve}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12441}{}\doxysubsubsection{\texorpdfstring{Resolve}{Resolve}}\label{README.md_autotoc_md12441}
There is a Node.\+js API which allows to resolve requests according to the Node.\+js resolving rules. Sync and async APIs are offered. A {\ttfamily create} method allows to create a custom resolve function.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ resolve\ =\ require("{}enhanced-\/resolve"{});}
\DoxyCodeLine{}
\DoxyCodeLine{resolve("{}/some/path/to/folder"{},\ "{}module/dir"{},\ (err,\ result)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ result;\ //\ ===\ "{}/some/path/node\_modules/module/dir/index.js"{}}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{resolve.sync("{}/some/path/to/folder"{},\ "{}../../dir"{});}
\DoxyCodeLine{//\ ===\ "{}/some/path/dir/index.js"{}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ myResolve\ =\ resolve.create(\{}
\DoxyCodeLine{\ \ \ \ //\ or\ resolve.create.sync}
\DoxyCodeLine{\ \ \ \ extensions:\ ["{}.ts"{},\ "{}.js"{}]}
\DoxyCodeLine{\ \ \ \ //\ see\ more\ options\ below}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{myResolve("{}/some/path/to/folder"{},\ "{}ts-\/module"{},\ (err,\ result)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ result;\ //\ ===\ "{}/some/node\_modules/ts-\/module/index.ts"{}}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12442}{}\doxysubsubsection{\texorpdfstring{Creating a Resolver}{Creating a Resolver}}\label{README.md_autotoc_md12442}
The easiest way to create a resolver is to use the {\ttfamily create\+Resolver} function on {\ttfamily Resolve\+Factory}, along with one of the supplied File System implementations.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ fs\ =\ require("{}fs"{});}
\DoxyCodeLine{const\ \{\ CachedInputFileSystem,\ ResolverFactory\ \}\ =\ require("{}enhanced-\/resolve"{});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ create\ a\ resolver}
\DoxyCodeLine{const\ myResolver\ =\ ResolverFactory.createResolver(\{}
\DoxyCodeLine{\ \ \ \ //\ Typical\ usage\ will\ consume\ the\ \`{}fs`\ +\ \`{}CachedInputFileSystem`,\ which\ wraps\ Node.js\ \`{}fs`\ to\ add\ caching.}
\DoxyCodeLine{\ \ \ \ fileSystem:\ new\ CachedInputFileSystem(fs,\ 4000),}
\DoxyCodeLine{\ \ \ \ extensions:\ ["{}.js"{},\ "{}.json"{}]}
\DoxyCodeLine{\ \ \ \ /*\ any\ other\ resolver\ options\ here.\ Options/defaults\ can\ be\ seen\ below\ */}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ resolve\ a\ file\ with\ the\ new\ resolver}
\DoxyCodeLine{const\ context\ =\ \{\};}
\DoxyCodeLine{const\ lookupStartPath\ =\ "{}/Users/webpack/some/root/dir"{};}
\DoxyCodeLine{const\ request\ =\ "{}./path/to-\/look-\/up.js"{};}
\DoxyCodeLine{const\ resolveContext\ =\ \{\};}
\DoxyCodeLine{myResolver.resolve(context,\ lookupStartPath,\ request,\ resolveContext,\ (}
\DoxyCodeLine{\ \ \ \ err\ /*Error*/,}
\DoxyCodeLine{\ \ \ \ filepath\ /*string*/}
\DoxyCodeLine{)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ //\ Do\ something\ with\ the\ path}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12443}{}\doxysubsubsubsection{\texorpdfstring{Resolver Options}{Resolver Options}}\label{README.md_autotoc_md12443}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Default   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Default   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-3}
\endhead
alias   &\mbox{[}\mbox{]}   &A list of module alias configurations or an object which maps key to value    \\\cline{1-3}
alias\+Fields   &\mbox{[}\mbox{]}   &A list of alias fields in description files    \\\cline{1-3}
extension\+Alias   &\{\}   &An object which maps extension to extension aliases    \\\cline{1-3}
cache\+Predicate   &function() \{ return true \};   &A function which decides whether a request should be cached or not. An object is passed to the function with {\ttfamily path} and {\ttfamily request} properties.    \\\cline{1-3}
cache\+With\+Context   &true   &If unsafe cache is enabled, includes {\ttfamily request.\+context} in the cache key    \\\cline{1-3}
condition\+Names   &\mbox{[}\mbox{]}   &A list of exports field condition names    \\\cline{1-3}
description\+Files   &\mbox{[}"{}package.\+json"{}\mbox{]}   &A list of description files to read from    \\\cline{1-3}
enforce\+Extension   &false   &Enforce that a extension from extensions must be used    \\\cline{1-3}
exports\+Fields   &\mbox{[}"{}exports"{}\mbox{]}   &A list of exports fields in description files    \\\cline{1-3}
extensions   &\mbox{[}"{}.\+js"{}, "{}.\+json"{}, "{}.\+node"{}\mbox{]}   &A list of extensions which should be tried for files    \\\cline{1-3}
fallback   &\mbox{[}\mbox{]}   &Same as {\ttfamily alias}, but only used if default resolving fails    \\\cline{1-3}
file\+System   &&The file system which should be used    \\\cline{1-3}
fully\+Specified   &false   &Request passed to resolve is already fully specified and extensions or main files are not resolved for it (they are still resolved for internal requests)    \\\cline{1-3}
main\+Fields   &\mbox{[}"{}main"{}\mbox{]}   &A list of main fields in description files    \\\cline{1-3}
main\+Files   &\mbox{[}"{}index"{}\mbox{]}   &A list of main files in directories    \\\cline{1-3}
modules   &\mbox{[}"{}node\+\_\+modules"{}\mbox{]}   &A list of directories to resolve modules from, can be absolute path or folder name    \\\cline{1-3}
plugins   &\mbox{[}\mbox{]}   &A list of additional resolve plugins which should be applied    \\\cline{1-3}
resolver   &undefined   &A prepared Resolver to which the plugins are attached    \\\cline{1-3}
resolve\+To\+Context   &false   &Resolve to a context instead of a file    \\\cline{1-3}
prefer\+Relative   &false   &Prefer to resolve module requests as relative request and fallback to resolving as module    \\\cline{1-3}
prefer\+Absolute   &false   &Prefer to resolve server-\/relative urls as absolute paths before falling back to resolve in roots    \\\cline{1-3}
restrictions   &\mbox{[}\mbox{]}   &A list of resolve restrictions    \\\cline{1-3}
roots   &\mbox{[}\mbox{]}   &A list of root paths    \\\cline{1-3}
symlinks   &true   &Whether to resolve symlinks to their symlinked location    \\\cline{1-3}
unsafe\+Cache   &false   &Use this cache object to unsafely cache the successful requests   \\\cline{1-3}
\end{longtabu}
\hypertarget{README.md_autotoc_md12444}{}\doxysubsection{\texorpdfstring{Plugins}{Plugins}}\label{README.md_autotoc_md12444}
Similar to {\ttfamily webpack}, the core of {\ttfamily enhanced-\/resolve} functionality is implemented as individual plugins that are executed using \href{https://github.com/webpack/tapable}{\texttt{ {\ttfamily tapable}}}. These plugins can extend the functionality of the library, adding other ways for files/contexts to be resolved.

A plugin should be a {\ttfamily class} (or its ES5 equivalent) with an {\ttfamily apply} method. The {\ttfamily apply} method will receive a {\ttfamily resolver} instance, that can be used to hook in to the event system.\hypertarget{README.md_autotoc_md12445}{}\doxysubsubsection{\texorpdfstring{Plugin Boilerplate}{Plugin Boilerplate}}\label{README.md_autotoc_md12445}

\begin{DoxyCode}{0}
\DoxyCodeLine{class\ MyResolverPlugin\ \{}
\DoxyCodeLine{\ \ \ \ constructor(source,\ target)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ this.source\ =\ source;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ this.target\ =\ target;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ apply(resolver)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ const\ target\ =\ resolver.ensureHook(this.target);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ resolver}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ .getHook(this.source)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ .tapAsync("{}MyResolverPlugin"{},\ (request,\ resolveContext,\ callback)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Any\ logic\ you\ need\ to\ create\ a\ new\ \`{}request`\ can\ go\ here}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ resolver.doResolve(target,\ request,\ null,\ resolveContext,\ callback);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Plugins are executed in a pipeline, and register which event they should be executed before/after. In the example above, {\ttfamily source} is the name of the event that starts the pipeline, and {\ttfamily target} is what event this plugin should fire, which is what continues the execution of the pipeline. For an example of how these different plugin events create a chain, see {\ttfamily lib/\+Resolver\+Factory.\+js}, in the {\ttfamily //// pipeline ////} section.\hypertarget{README.md_autotoc_md12446}{}\doxysubsection{\texorpdfstring{Escaping}{Escaping}}\label{README.md_autotoc_md12446}
It\textquotesingle{}s allowed to escape {\ttfamily \#} as {\ttfamily \textbackslash{}0\#} to avoid parsing it as fragment.

enhanced-\/resolve will try to resolve requests containing {\ttfamily \#} as path and as fragment, so it will automatically figure out if {\ttfamily ./some\#thing} means {\ttfamily .../some.js\#thing} or {\ttfamily .../some\#thing.\+js}. When a {\ttfamily \#} is resolved as path it will be escaped in the result. Here\+: {\ttfamily .../some\textbackslash{}0\#thing.\+js}.\hypertarget{README.md_autotoc_md12447}{}\doxysubsection{\texorpdfstring{Tests}{Tests}}\label{README.md_autotoc_md12447}

\begin{DoxyCode}{0}
\DoxyCodeLine{yarn\ test}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12448}{}\doxysubsection{\texorpdfstring{Passing options from webpack}{Passing options from webpack}}\label{README.md_autotoc_md12448}
If you are using {\ttfamily webpack}, and you want to pass custom options to {\ttfamily enhanced-\/resolve}, the options are passed from the {\ttfamily resolve} key of your webpack configuration e.\+g.\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{resolve:\ \{}
\DoxyCodeLine{\ \ extensions:\ ['.js',\ '.jsx'],}
\DoxyCodeLine{\ \ modules:\ [path.resolve(\_\_dirname,\ 'src'),\ 'node\_modules'],}
\DoxyCodeLine{\ \ plugins:\ [new\ DirectoryNamedWebpackPlugin()]}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{\},}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12449}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md12449}
Copyright (c) 2012-\/2019 JS Foundation and other contributors

MIT (\href{http://www.opensource.org/licenses/mit-license.php}{\texttt{ http\+://www.\+opensource.\+org/licenses/mit-\/license.\+php}}) 