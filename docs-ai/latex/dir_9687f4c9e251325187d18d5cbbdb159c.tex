\doxysection{node\+\_\+modules/emmet Directory Reference}
\hypertarget{dir_9687f4c9e251325187d18d5cbbdb159c}{}\label{dir_9687f4c9e251325187d18d5cbbdb159c}\index{node\_modules/emmet Directory Reference@{node\_modules/emmet Directory Reference}}


\doxysubsection{Detailed Description}
Emmet is a web-\/developer’s toolkit for boosting HTML \& CSS code writing.

With Emmet, you can type expressions ({\itshape abbreviations}) similar to CSS selectors and convert them into code fragment with a single keystroke. For example, this abbreviation\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{ul\#nav>li.item\$*4>a\{Item\ \$\}}

\end{DoxyCode}


...can be expanded into\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<ul\ id="{}nav"{}>}
\DoxyCodeLine{\ \ \ \ <li\ class="{}item1"{}><a\ href="{}"{}>Item\ 1</a></li>}
\DoxyCodeLine{\ \ \ \ <li\ class="{}item2"{}><a\ href="{}"{}>Item\ 2</a></li>}
\DoxyCodeLine{\ \ \ \ <li\ class="{}item3"{}><a\ href="{}"{}>Item\ 3</a></li>}
\DoxyCodeLine{\ \ \ \ <li\ class="{}item4"{}><a\ href="{}"{}>Item\ 4</a></li>}
\DoxyCodeLine{</ul>}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12411}{}\doxysubsection{\texorpdfstring{Features}{Features}}\label{README.md_autotoc_md12411}

\begin{DoxyItemize}
\item {\bfseries{Familiar syntax}}\+: as a web-\/developer, you already know how to use Emmet. Abbreviation syntax is similar to CSS Selectors with shortcuts for id, class, custom attributes, element nesting and so on.
\item {\bfseries{Dynamic snippets}}\+: unlike default editor snippets, Emmet abbreviations are dynamic and parsed as-\/you-\/type. No need to predefine them for each project, just type {\ttfamily My\+Component\texorpdfstring{$>$}{>}custom-\/element} to convert any word into a tag.
\item {\bfseries{CSS properties shortcuts}}\+: Emmet provides special syntax for CSS properties with embedded values. For example, {\ttfamily bd1-\/s\#f.\+5} will be expanded to {\ttfamily border\+: 1px solid rgba(255, 255, 255, 0.\+5)}.
\item {\bfseries{Available for most popular syntaxes}}\+: use single abbreviation to produce code for most popular syntaxes like HAML, Pug, JSX, SCSS, SASS etc.
\end{DoxyItemize}

\href{https://docs.emmet.io}{\texttt{ Read more about Emmet features}}

This repo contains only core module for parsing and expanding Emmet abbreviations. Editor plugins are available as \href{https://github.com/emmetio}{\texttt{ separate repos}}.

This is a {\itshape monorepo}\+: top-\/level project contains all the code required for converting abbreviation into code fragment while \href{/packages}{\texttt{ {\ttfamily ./packages}}} folder contains modules for parsing abbreviations into AST and can be used independently (for example, as lexer for syntax highlighting).\hypertarget{README.md_autotoc_md12412}{}\doxysubsubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md12412}
You can install Emmet as a regular npm module\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ i\ emmet}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12413}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md12413}
To expand abbreviation, pass it to default function of {\ttfamily emmet} module\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ expand\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(expand('p>a'));\ //\ <p><a\ href="{}"{}></a></p>}

\end{DoxyCode}


By default, Emmet expands {\itshape markup} abbreviation, e.\+g. abbreviation used for producing nested elements with attributes (like HTML, XML, HAML etc.). If you want to expand {\itshape stylesheet} abbreviation, you should pass it as a {\ttfamily type} property of second argument\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ expand\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(expand('p10',\ \{\ type:\ 'stylesheet'\ \}));\ //\ padding:\ 10px;}

\end{DoxyCode}


A stylesheet abbreviation has slightly different syntax compared to markup one\+: it doesn’t support nesting and attributes but allows embedded values in element name.

Alternatively, Emmet supports {\itshape syntaxes} with predefined snippets and options\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ expand\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(expand('p10',\ \{\ syntax:\ 'css'\ \}));\ //\ padding:\ 10px;}
\DoxyCodeLine{console.log(expand('p10',\ \{\ syntax:\ 'stylus'\ \}));\ //\ padding\ 10px}

\end{DoxyCode}


Predefined syntaxes already have {\ttfamily type} attribute which describes whether given abbreviation is markup or stylesheet, but if you want to use it with your custom syntax name, you should provide {\ttfamily type} config option as well (default is {\ttfamily markup})\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ expand\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(expand('p10',\ \{}
\DoxyCodeLine{\ \ \ \ syntax:\ 'my-\/custom-\/syntax',}
\DoxyCodeLine{\ \ \ \ type:\ 'stylesheet',}
\DoxyCodeLine{\ \ \ \ options:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'stylesheet.between':\ '\_\_',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'stylesheet.after':\ '',}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}));\ //\ padding\_\_10px}

\end{DoxyCode}


You can pass {\ttfamily options} property as well to shape-\/up final output or enable/disable various features. See \href{src/config.ts}{\texttt{ {\ttfamily src/config.\+ts}}} for more info and available options.\hypertarget{README.md_autotoc_md12414}{}\doxysubsection{\texorpdfstring{Extracting abbreviations from text}{Extracting abbreviations from text}}\label{README.md_autotoc_md12414}
A common workflow with Emmet is to type abbreviation somewhere in source code and then expand it with editor action. To support such workflow, abbreviations must be properly {\itshape extracted} from source code\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ expand,\ \{\ extract\ \}\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ source\ =\ 'Hello\ world\ ul.tabs>li';}
\DoxyCodeLine{const\ data\ =\ extract(source,\ 22);\ //\ \{\ abbreviation:\ 'ul.tabs>li'\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(expand(data.abbreviation));\ //\ <ul\ class="{}tabs"{}><li></li></ul>}

\end{DoxyCode}


The {\ttfamily extract} function accepts source code (most likely, current line) and character location in source from which abbreviation search should be started. The abbreviation is searched in backward direction\+: the location pointer is moved backward until it finds abbreviation bound. Returned result is an object with {\ttfamily abbreviation} property and {\ttfamily start} and {\ttfamily end} properties which describe location of extracted abbreviation in given source.

Most current editors automatically insert closing quote or bracket for {\ttfamily (}, {\ttfamily \mbox{[}} and {\ttfamily \{} characters so when user types abbreviation that uses attributes or text, it will end with the following state ({\ttfamily \texorpdfstring{$\vert$}{|}} is caret location)\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{ul>li[title="{}Foo|"{}]}

\end{DoxyCode}


E.\+g. caret location is not at the end of abbreviation and must be moved a few characters ahead. The {\ttfamily extract} function is able to handle such cases with {\ttfamily look\+Ahead} option (enabled by default). This this option enabled, {\ttfamily extract} method automatically detects auto-\/inserted characters and adjusts location, which will be available as {\ttfamily end} property of the returned result\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ extract\ \}\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ source\ =\ 'a\ div[title]\ b';}
\DoxyCodeLine{const\ loc\ =\ 11;\ //\ right\ after\ "{}title"{}\ word}
\DoxyCodeLine{}
\DoxyCodeLine{//\ \`{}lookAhead`\ is\ enabled\ by\ default}
\DoxyCodeLine{console.log(extract(source,\ loc));\ //\ \{\ abbreviation:\ 'div[title]',\ start:\ 2,\ end:\ 12\ \}}
\DoxyCodeLine{console.log(extract(source,\ loc,\ \{\ lookAhead:\ false\ \}));\ //\ \{\ abbreviation:\ 'title',\ start:\ 6,\ end:\ 11\ \}}

\end{DoxyCode}


By default, {\ttfamily extract} tries to detect {\itshape markup} abbreviations (see above). {\itshape stylesheet} abbreviations has slightly different syntax so in order to extract abbreviations for stylesheet syntaxes like CSS, you should pass `type\+: \textquotesingle{}stylesheet'\`{} option\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ extract\ \}\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ source\ =\ 'a\{b\}';}
\DoxyCodeLine{const\ loc\ =\ 3;\ //\ right\ after\ "{}b"{}}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(extract(source,\ loc));\ //\ \{\ abbreviation:\ 'a\{b\}',\ start:\ 0,\ end:\ 4\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Stylesheet\ abbreviations\ does\ not\ have\ \`{}\{text\}`\ syntax}
\DoxyCodeLine{console.log(extract(source,\ loc,\ \{\ type:\ 'stylesheet'\ \}));\ //\ \{\ abbreviation:\ 'b',\ start:\ 2,\ end:\ 3\ \}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md12415}{}\doxysubsubsection{\texorpdfstring{Extract abbreviation with custom prefix}{Extract abbreviation with custom prefix}}\label{README.md_autotoc_md12415}
Lots of developers uses React (or similar) library for writing UI code which mixes JS and XML (JSX) in the same source code. Since {\itshape any} Latin word can be used as Emmet abbreviation, writing JSX code with Emmet becomes pain since it will interfere with native editor snippets and distract user with false positive abbreviation matches for variable names, methods etc.\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ div\ //\ \`{}div`\ is\ a\ valid\ abbreviation,\ Emmet\ may\ transform\ it\ to\ \`{}<div></div>`}

\end{DoxyCode}


A possible solution for this problem it to use {\itshape prefix} for abbreviation\+: abbreviation can be successfully extracted only if its preceded with given prefix.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ extract\ \}\ from\ 'emmet';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ source1\ =\ '()\ =>\ div';}
\DoxyCodeLine{const\ source2\ =\ '()\ =>\ <div';}
\DoxyCodeLine{}
\DoxyCodeLine{extract(source1,\ source1.length);\ //\ Finds\ \`{}div`\ abbreviation}
\DoxyCodeLine{extract(source2,\ source2.length);\ //\ Finds\ \`{}div`\ abbreviation\ too}
\DoxyCodeLine{}
\DoxyCodeLine{extract(source1,\ source1.length,\ \{\ prefix:\ '<'\ \});\ //\ No\ match,\ \`{}div`\ abbreviation\ is\ not\ preceded\ with\ \`{}<`\ prefix}
\DoxyCodeLine{extract(source2,\ source2.length,\ \{\ prefix:\ '<'\ \});\ //\ Finds\ \`{}div`\ since\ it\ preceded\ with\ \`{}<`\ prefix}

\end{DoxyCode}


With {\ttfamily prefix} option, you can customize your experience with Emmet in any common syntax (HTML, CSS and so on) if user is distracted too much with Emmet completions for any typed word. A {\ttfamily prefix} may contain multiple character but the last one {\itshape must} be a character which is not part of Emmet abbreviation. Good candidates are {\ttfamily \texorpdfstring{$<$}{<}}, {\ttfamily \&}, {\ttfamily →} (emoji or Unicode symbol) and so on. 