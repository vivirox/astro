\chapter{Options and configuration}
\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g}{}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g}\index{Options and configuration@{Options and configuration}}
\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4989}%
\Hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4989}%
\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4990}{}\doxysection{\texorpdfstring{{\ttfamily neon(...)} function}{{\ttfamily neon(...)} function}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4990}
The {\ttfamily neon(...)} function returns a query function that can be used both as a tagged-\/template function and as an ordinary function\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ as\ a\ tagged-\/template\ function}
\DoxyCodeLine{const\ rowsA\ =\ await\ sql`SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$\{postId\}`;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ as\ an\ ordinary\ function\ (exactly\ equivalent)}
\DoxyCodeLine{const\ rowsB\ =\ await\ sql('SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$1',\ [postId]);}

\end{DoxyCode}


By default, the query function returned by {\ttfamily neon(...)} returns only the rows resulting from the provided SQL query, and it returns them as an array of objects where the keys are column names. For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL);}
\DoxyCodeLine{const\ rows\ =\ await\ sql`SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$\{postId\}`;}
\DoxyCodeLine{//\ -\/>\ [\{\ id:\ 12,\ title:\ "{}My\ post"{},\ ...\ \}]}

\end{DoxyCode}


However, you can customise the return format of the query function using the configuration options {\ttfamily full\+Results} and {\ttfamily array\+Mode}. These options are available both on the {\ttfamily neon(...)} function and on the query function it returns (but only when the query function is called as an ordinary function, not as a tagged-\/template function).\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4991}{}\doxysubsection{\texorpdfstring{{\ttfamily array\+Mode\+: boolean}}{{\ttfamily array\+Mode\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4991}
When {\ttfamily array\+Mode} is true, rows are returned as an array of arrays instead of an array of objects\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL,\ \{\ arrayMode:\ true\ \});}
\DoxyCodeLine{const\ rows\ =\ await\ sql`SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$\{postId\}`;}
\DoxyCodeLine{//\ -\/>\ [[12,\ "{}My\ post"{},\ ...]]}

\end{DoxyCode}


Or, with the same effect\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL);}
\DoxyCodeLine{const\ rows\ =\ await\ sql('SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$1',\ [postId],\ \{\ arrayMode:\ true\ \});}
\DoxyCodeLine{//\ -\/>\ [[12,\ "{}My\ post"{},\ ...]]}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4992}{}\doxysubsection{\texorpdfstring{{\ttfamily full\+Results\+: boolean}}{{\ttfamily full\+Results\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4992}
When {\ttfamily full\+Results} is true, additional metadata is returned alongside the result rows, which are then found in the {\ttfamily rows} property of the return value. The metadata matches what would be returned by node-\/postgres\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL,\ \{\ fullResults:\ true\ \});}
\DoxyCodeLine{const\ results\ =\ await\ sql`SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$\{postId\}`;}
\DoxyCodeLine{/*\ -\/>\ \{}
\DoxyCodeLine{\ \ rows:\ [\{\ id:\ 12,\ title:\ "{}My\ post"{},\ ...\ \}],}
\DoxyCodeLine{\ \ fields:\ [}
\DoxyCodeLine{\ \ \ \ \{\ name:\ "{}id"{},\ dataTypeID:\ 23,\ ...\ \},}
\DoxyCodeLine{\ \ \ \ \{\ name:\ "{}title"{},\ dataTypeID:\ 25,\ ...\ \},}
\DoxyCodeLine{\ \ \ \ ...}
\DoxyCodeLine{\ \ ],}
\DoxyCodeLine{\ \ rowCount:\ 1,}
\DoxyCodeLine{\ \ rowAsArray:\ false,}
\DoxyCodeLine{\ \ command:\ "{}SELECT"{}}
\DoxyCodeLine{\}\ }
\DoxyCodeLine{*/}

\end{DoxyCode}


Or, with the same effect\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL);}
\DoxyCodeLine{const\ results\ =\ await\ sql('SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$1',\ [postId],\ \{\ fullResults:\ true\ \});}
\DoxyCodeLine{//\ -\/>\ \{\ ...\ same\ as\ above\ ...\ \}}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4993}{}\doxysubsection{\texorpdfstring{{\ttfamily fetch\+Options\+: Record\texorpdfstring{$<$}{<}string, any\texorpdfstring{$>$}{>}}}{{\ttfamily fetch\+Options\+: Record\texorpdfstring{$<$}{<}string, any\texorpdfstring{$>$}{>}}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4993}
The {\ttfamily fetch\+Options} option can be passed to {\ttfamily neon(...)}, the {\ttfamily transaction} function, or the query function (if not within a {\ttfamily transaction} function). This option takes an object that is merged with the options to the {\ttfamily fetch} call.

For example, to increase the priority of every database {\ttfamily fetch} request\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL,\ \{\ fetchOptions:\ \{\ priority:\ 'high'\ \}\ \});}
\DoxyCodeLine{const\ rows\ =\ await\ sql`SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$\{postId\}`;}

\end{DoxyCode}


Or to implement a {\ttfamily fetch} timeout\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL);}
\DoxyCodeLine{const\ abortController\ =\ new\ AbortController();}
\DoxyCodeLine{const\ timeout\ =\ setTimeout(()\ =>\ abortController.abort('timed\ out'),\ 10000);}
\DoxyCodeLine{const\ rows\ =\ await\ sql(}
\DoxyCodeLine{\ \ 'SELECT\ *\ FROM\ posts\ WHERE\ id\ =\ \$1',\ [postId],\ }
\DoxyCodeLine{\ \ \{\ fetchOptions:\ \{\ signal:\ abortController.signal\ \}\ \}}
\DoxyCodeLine{);\ \ //\ throws\ an\ error\ if\ no\ result\ received\ within\ 10s}
\DoxyCodeLine{clearTimeout(timeout);}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4994}{}\doxysection{\texorpdfstring{{\ttfamily transaction(...)} function}{{\ttfamily transaction(...)} function}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4994}
The {\ttfamily transaction(queries\+Or\+Fn, options)} function is exposed as a property on the query function. It allows multiple queries to be executed within a single, non-\/interactive transaction.

The first argument to {\ttfamily transaction()}, {\ttfamily queries\+Or\+Fn}, is either (1) an array of queries or (2) a non-\/{\ttfamily async} function that receives a query function as its argument and returns an array of queries.

The array-\/of-\/queries case looks like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neon\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{const\ sql\ =\ neon(process.env.DATABASE\_URL);}
\DoxyCodeLine{const\ showLatestN\ =\ 10;}
\DoxyCodeLine{}
\DoxyCodeLine{const\ [posts,\ tags]\ =\ await\ sql.transaction([}
\DoxyCodeLine{\ \ sql`SELECT\ *\ FROM\ posts\ ORDER\ BY\ posted\_at\ DESC\ LIMIT\ \$\{showLatestN\}`,}
\DoxyCodeLine{\ \ sql`SELECT\ *\ FROM\ tags`,}
\DoxyCodeLine{],\ \{\ }
\DoxyCodeLine{\ \ isolationLevel:\ 'RepeatableRead',}
\DoxyCodeLine{\ \ readOnly:\ true,\ }
\DoxyCodeLine{\});}

\end{DoxyCode}


Or as an example of the function case\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ [authors,\ tags]\ =\ await\ neon(process.env.DATABASE\_URL)}
\DoxyCodeLine{\ \ .transaction(txn\ =>\ [}
\DoxyCodeLine{\ \ \ \ txn`SELECT\ *\ FROM\ authors`,}
\DoxyCodeLine{\ \ \ \ txn`SELECT\ *\ FROM\ tags`,}
\DoxyCodeLine{\ \ ]);}

\end{DoxyCode}


The optional second argument to {\ttfamily transaction()}, {\ttfamily options}, has the same keys as the options to the ordinary query function -- {\ttfamily array\+Mode}, {\ttfamily full\+Results} and {\ttfamily fetch\+Options} -- plus three additional keys that concern the transaction configuration. These transaction-\/related keys are\+: {\ttfamily isolation\+Mode}, {\ttfamily read\+Only} and {\ttfamily deferrable}. They are described below. Defaults for the transaction-\/related keys can also be set as options to the {\ttfamily neon} function.

The {\ttfamily fetch\+Options} option cannot be supplied for individual queries inside {\ttfamily transaction()}, since only a single {\ttfamily fetch} is performed for the transaction as a whole. The Type\+Script types also currently do not allow {\ttfamily array\+Mode} or {\ttfamily full\+Results} options to be supplied for individual queries within {\ttfamily transaction()} (although this does have the expected effect if the type errors are ignored).\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4995}{}\doxysubsection{\texorpdfstring{{\ttfamily isolation\+Mode}}{{\ttfamily isolation\+Mode}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4995}
This option selects a Postgres \href{https://www.postgresql.org/docs/current/transaction-iso.html}{\texttt{ transaction isolation mode}}. If present, it must be one of\+: `\textquotesingle{}Read\+Uncommitted'{\ttfamily ,}\textquotesingle{}Read\+Committed\textquotesingle{}{\ttfamily ,}\textquotesingle{}Repeatable\+Read\textquotesingle{}{\ttfamily or}\textquotesingle{}Serializable\textquotesingle{}\`{}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4996}{}\doxysubsection{\texorpdfstring{{\ttfamily read\+Only}}{{\ttfamily read\+Only}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4996}
If {\ttfamily true}, this option ensures that a {\ttfamily READ ONLY} transaction is used to execute the queries passed.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4997}{}\doxysubsection{\texorpdfstring{{\ttfamily deferrable}}{{\ttfamily deferrable}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4997}
If {\ttfamily true} (and if {\ttfamily read\+Only} is also {\ttfamily true}, and {\ttfamily isolation\+Mode} is `\textquotesingle{}Serializable'{\ttfamily ), this option ensures that a}DEFERRABLE\`{} transaction is used to execute the queries passed.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4998}{}\doxysection{\texorpdfstring{{\ttfamily neon\+Config} configuration}{{\ttfamily neon\+Config} configuration}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4998}
In most cases, there are two ways to set configuration options\+:


\begin{DoxyEnumerate}
\item Import {\ttfamily neon\+Config} from the package and set global default options on that.
\item Set options on individual {\ttfamily Client} instances using their {\ttfamily neon\+Config} property.
\end{DoxyEnumerate}

For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ Client,\ neonConfig\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{import\ ws\ from\ 'ws';}
\DoxyCodeLine{}
\DoxyCodeLine{//\ set\ default\ option\ for\ all\ clients}
\DoxyCodeLine{neonConfig.webSocketConstructor\ =\ ws;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ override\ the\ default\ option\ on\ an\ individual\ client}
\DoxyCodeLine{const\ client\ =\ new\ Client(process.env.DATABASE\_URL);}
\DoxyCodeLine{client.neonConfig.webSocketConstructor\ =\ ws;}

\end{DoxyCode}


A few configuration options can only be set globally, and these are noted as such below.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4999}{}\doxysubsubsection{\texorpdfstring{{\ttfamily web\+Socket\+Constructor\+: typeof Web\+Socket \texorpdfstring{$\vert$}{|} undefined}}{{\ttfamily web\+Socket\+Constructor\+: typeof Web\+Socket \texorpdfstring{$\vert$}{|} undefined}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md4999}
Set this parameter if you\textquotesingle{}re using the driver in an environment where the {\ttfamily Web\+Socket} global is not defined, such as Node.\+js, and you need transaction or session support.

For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neonConfig\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{import\ ws\ from\ 'ws';}
\DoxyCodeLine{neonConfig.webSocketConstructor\ =\ ws;\ }

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5000}{}\doxysubsection{\texorpdfstring{Advanced configuration}{Advanced configuration}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5000}
If you\textquotesingle{}re using {\ttfamily @neondatabase/serverless} to connect to a Neon database, you usually {\bfseries{won\textquotesingle{}t}} need to touch the following configuration options. These options are intended for testing, troubleshooting, and supporting access to non-\/\+Neon Postgres instances via self-\/hosted Web\+Socket proxies.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5001}{}\doxysubsubsection{\texorpdfstring{{\ttfamily pool\+Query\+Via\+Fetch\+: boolean}}{{\ttfamily pool\+Query\+Via\+Fetch\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5001}
{\bfseries{Experimentally}}, when {\ttfamily pool\+Query\+Via\+Fetch} is {\ttfamily true} and no listeners for the {\ttfamily "{}connect"{}}, {\ttfamily "{}acquire"{}}, {\ttfamily "{}release"{}} or {\ttfamily "{}remove"{}} events are set on the {\ttfamily Pool}, queries via {\ttfamily Pool.\+query()} will be sent by low-\/latency HTTP {\ttfamily fetch} request.

Default\+: currently {\ttfamily false} (but may be {\ttfamily true} in future).

Note\+: this option can only be set globally, {\bfseries{not}} on an individual {\ttfamily Client} instance.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5002}{}\doxysubsubsection{\texorpdfstring{{\ttfamily fetch\+Endpoint\+: string \texorpdfstring{$\vert$}{|} ((host\+: string, port\+: number \texorpdfstring{$\vert$}{|} string) =\texorpdfstring{$>$}{>} string)}}{{\ttfamily fetch\+Endpoint\+: string \texorpdfstring{$\vert$}{|} ((host\+: string, port\+: number \texorpdfstring{$\vert$}{|} string) =\texorpdfstring{$>$}{>} string)}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5002}
Set {\ttfamily fetch\+Endpoint} to set the server endpoint to be sent queries via http fetch.

This may be useful for local development (e.\+g. to set a port that\textquotesingle{}s not the default 443).

Provide either the full endpoint URL, or a function that takes the database host address and port and returns the full endpoint URL (including protocol).

Default\+: `host =\texorpdfstring{$>$}{>} \textquotesingle{}\href{https://&rsquo;}{\texttt{ https\+://'}} + host + \textquotesingle{}/sql\textquotesingle{}\`{}

Note\+: this option can only be set globally, {\bfseries{not}} on an individual {\ttfamily Client} instance.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5003}{}\doxysubsubsection{\texorpdfstring{{\ttfamily fetch\+Function\+: any}}{{\ttfamily fetch\+Function\+: any}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5003}
The {\ttfamily fetch\+Function} option allows you to supply an alternative function for making http requests. The function must accept the same arguments as native {\ttfamily fetch}.

Default\+: {\ttfamily undefined}.

Note\+: this option can only be set globally, {\bfseries{not}} on an individual {\ttfamily Client} instance.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5004}{}\doxysubsubsection{\texorpdfstring{{\ttfamily ws\+Proxy\+: string \texorpdfstring{$\vert$}{|} (host\+: string, port\+: number \texorpdfstring{$\vert$}{|} string) =\texorpdfstring{$>$}{>} string}}{{\ttfamily ws\+Proxy\+: string \texorpdfstring{$\vert$}{|} (host\+: string, port\+: number \texorpdfstring{$\vert$}{|} string) =\texorpdfstring{$>$}{>} string}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5004}
If connecting to a non-\/\+Neon database, the {\ttfamily ws\+Proxy} option should point to \doxysectlink{md_node__modules_2_0dneondatabase_2serverless_2_d_e_p_l_o_y}{your Web\+Socket proxy}{0}. It can either be a string, which will have {\ttfamily ?address=host\+:port} appended to it, or a function with the signature {\ttfamily (host\+: string, port\+: number \texorpdfstring{$\vert$}{|} string) =\texorpdfstring{$>$}{>} string}. Either way, the protocol must {\itshape not} be included, because this depends on other options. For example, when using the {\ttfamily wsproxy} proxy, the {\ttfamily ws\+Proxy} option should look something like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ either:}
\DoxyCodeLine{neonConfig.wsProxy\ =\ (host,\ port)\ =>\ \`{}my-\/wsproxy.example.com/v1?address=\$\{host\}:\$\{port\}`}
\DoxyCodeLine{//\ or\ (with\ identical\ effect):}
\DoxyCodeLine{neonConfig.wsProxy\ =\ 'my-\/wsproxy.example.com/v1';}

\end{DoxyCode}


Default\+: `host =\texorpdfstring{$>$}{>} host + '/v2\textquotesingle{}\`{}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5005}{}\doxysubsubsection{\texorpdfstring{{\ttfamily pipeline\+Connect\+: "{}password"{} \texorpdfstring{$\vert$}{|} false}}{{\ttfamily pipeline\+Connect\+: "{}password"{} \texorpdfstring{$\vert$}{|} false}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5005}
To speed up connection times, the driver will pipeline the first three messages to the database (startup, authentication and first query) if {\ttfamily pipeline\+Connect} is set to {\ttfamily "{}password"{}}. Note that this will only work if you\textquotesingle{}ve configured cleartext password authentication for the relevant user and database.

If your connection doesn\textquotesingle{}t support password authentication, set {\ttfamily pipeline\+Connect} to {\ttfamily false} instead.

Default\+: {\ttfamily "{}password"{}}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5006}{}\doxysubsubsection{\texorpdfstring{{\ttfamily coalesce\+Writes\+: boolean}}{{\ttfamily coalesce\+Writes\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5006}
When this option is {\ttfamily true}, multiple network writes generated in a single iteration of the Java\+Script run-\/loop are coalesced into a single Web\+Socket message. Since node-\/postgres sends a lot of very short messages, this may reduce TCP/\+IP overhead.

Default\+: {\ttfamily true}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5007}{}\doxysubsubsection{\texorpdfstring{{\ttfamily force\+Disable\+Pg\+SSL\+: boolean}}{{\ttfamily force\+Disable\+Pg\+SSL\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5007}
This option disables TLS encryption in the Postgres protocol (as set via e.\+g. {\ttfamily ?sslmode=require} in the connection string). Security is not compromised if used in conjunction with {\ttfamily use\+Secure\+Web\+Socket = true}.

Default\+: {\ttfamily true}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5008}{}\doxysubsubsection{\texorpdfstring{{\ttfamily use\+Secure\+Web\+Socket\+: boolean}}{{\ttfamily use\+Secure\+Web\+Socket\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5008}
This option switches between secure (the default) and insecure Web\+Sockets.

To use experimental pure-\/\+JS encryption, set {\ttfamily use\+Secure\+Web\+Socket = false} and {\ttfamily force\+Disable\+Pg\+SSL = false}, and append {\ttfamily ?sslmode=verify-\/full} to your database connection string.

{\bfseries{Remember that pure-\/\+JS encryption is currently experimental and not suitable for use in production.}}

Default\+: {\ttfamily true}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5009}{}\doxysubsubsection{\texorpdfstring{{\ttfamily subtls\+: any}}{{\ttfamily subtls\+: any}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5009}
{\bfseries{Only when using experimental pure-\/\+JS TLS encryption}}, you must supply the \href{https://github.com/jawj/subtls}{\texttt{ subtls}} TLS library to the {\ttfamily subtls} option like so\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ neonConfig\ \}\ from\ '@neondatabase/serverless';}
\DoxyCodeLine{import\ *\ as\ subtls\ from\ 'subtls';}
\DoxyCodeLine{neonConfig.subtls\ =\ subtls;}

\end{DoxyCode}


Default\+: {\ttfamily undefined}.\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5010}{}\doxysubsubsection{\texorpdfstring{{\ttfamily root\+Certs\+: string /\texorpdfstring{$\ast$}{*} PEM format \texorpdfstring{$\ast$}{*}/}}{{\ttfamily root\+Certs\+: string /\texorpdfstring{$\ast$}{*} PEM format \texorpdfstring{$\ast$}{*}/}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5010}
{\bfseries{Only when using experimental pure-\/\+JS TLS encryption}}, the {\ttfamily root\+Certs} option determines what root (certificate authority) certificates are trusted.

Its value is a string containing zero or more certificates in PEM format.

Default\+: {\ttfamily "{}"{}} (the empty string).\hypertarget{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5011}{}\doxysubsubsection{\texorpdfstring{{\ttfamily pipeline\+TLS\+: boolean}}{{\ttfamily pipeline\+TLS\+: boolean}}}\label{md_node__modules_2_0dneondatabase_2serverless_2_c_o_n_f_i_g_autotoc_md5011}
{\bfseries{Only when using experimental pure-\/\+JS encryption}}, the driver will pipeline the SSL request message and TLS Client Hello if {\ttfamily pipeline\+TLS} is set to {\ttfamily true}. Currently, this is only supported by Neon database hosts, and will fail when communicating with an ordinary Postgres or pgbouncer back-\/end.

Default\+: {\ttfamily false}. 