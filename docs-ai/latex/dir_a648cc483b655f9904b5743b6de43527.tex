\doxysection{node\+\_\+modules/jsdom/node\+\_\+modules/whatwg-\/url Directory Reference}
\hypertarget{dir_a648cc483b655f9904b5743b6de43527}{}\label{dir_a648cc483b655f9904b5743b6de43527}\index{node\_modules/jsdom/node\_modules/whatwg-\/url Directory Reference@{node\_modules/jsdom/node\_modules/whatwg-\/url Directory Reference}}


\doxysubsection{Detailed Description}
whatwg-\/url is a full implementation of the WHATWG \href{https://url.spec.whatwg.org/}{\texttt{ URL Standard}}. It can be used standalone, but it also exposes a lot of the internal algorithms that are useful for integrating a URL parser into a project like \href{https://github.com/jsdom/jsdom}{\texttt{ jsdom}}.\hypertarget{README.md_autotoc_md21004}{}\doxysubsection{\texorpdfstring{Specification conformance}{Specification conformance}}\label{README.md_autotoc_md21004}
whatwg-\/url is currently up to date with the URL spec up to commit \href{https://github.com/whatwg/url/commit/6c782003a2d53b1feecd072d1006eb8f1d65fb2d}{\texttt{ 6c78200}}.

For {\ttfamily file\+:} URLs, whose \href{https://url.spec.whatwg.org/\#concept-url-origin}{\texttt{ origin is left unspecified}}, whatwg-\/url chooses to use a new opaque origin (which serializes to {\ttfamily "{}null"{}}).

whatwg-\/url does not yet implement any encoding handling beyond UTF-\/8. That is, the {\itshape encoding override} parameter does not exist in our API.\hypertarget{README.md_autotoc_md21005}{}\doxysubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md21005}
\hypertarget{README.md_autotoc_md21006}{}\doxysubsubsection{\texorpdfstring{The {\ttfamily URL} and {\ttfamily URLSearch\+Params} classes}{The {\ttfamily URL} and {\ttfamily URLSearch\+Params} classes}}\label{README.md_autotoc_md21006}
The main API is provided by the \href{https://url.spec.whatwg.org/\#url-class}{\texttt{ {\ttfamily URL}}} and \href{https://url.spec.whatwg.org/\#interface-urlsearchparams}{\texttt{ {\ttfamily URLSearch\+Params}}} exports, which follows the spec\textquotesingle{}s behavior in all ways (including e.\+g. {\ttfamily USVString} conversion). Most consumers of this library will want to use these.\hypertarget{README.md_autotoc_md21007}{}\doxysubsubsection{\texorpdfstring{Low-\/level URL Standard API}{Low-\/level URL Standard API}}\label{README.md_autotoc_md21007}
The following methods are exported for use by places like jsdom that need to implement things like \href{https://html.spec.whatwg.org/\#htmlhyperlinkelementutils}{\texttt{ {\ttfamily HTMLHyperlink\+Element\+Utils}}}. They mostly operate on or return an "{}internal URL"{} or \href{https://url.spec.whatwg.org/\#concept-url}{\texttt{ "{}\+URL record"{}}} type.


\begin{DoxyItemize}
\item \href{https://url.spec.whatwg.org/\#concept-url-parser}{\texttt{ URL parser}}\+: {\ttfamily parse\+URL(input, \{ base\+URL \})}
\item \href{https://url.spec.whatwg.org/\#concept-basic-url-parser}{\texttt{ Basic URL parser}}\+: {\ttfamily basic\+URLParse(input, \{ base\+URL, url, state\+Override \})}
\item \href{https://url.spec.whatwg.org/\#concept-url-serializer}{\texttt{ URL serializer}}\+: {\ttfamily serialize\+URL(url\+Record, exclude\+Fragment)}
\item \href{https://url.spec.whatwg.org/\#concept-host-serializer}{\texttt{ Host serializer}}\+: {\ttfamily serialize\+Host(host\+From\+URLRecord)}
\item \href{https://url.spec.whatwg.org/\#url-path-serializer}{\texttt{ URL path serializer}}\+: {\ttfamily serialize\+Path(url\+Record)}
\item \href{https://url.spec.whatwg.org/\#serialize-an-integer}{\texttt{ Serialize an integer}}\+: {\ttfamily serialize\+Integer(number)}
\item \href{https://url.spec.whatwg.org/\#concept-url-origin}{\texttt{ Origin}} \href{https://html.spec.whatwg.org/multipage/origin.html\#ascii-serialisation-of-an-origin}{\texttt{ serializer}}\+: {\ttfamily serialize\+URLOrigin(url\+Record)}
\item \href{https://url.spec.whatwg.org/\#set-the-username}{\texttt{ Set the username}}\+: {\ttfamily set\+The\+Username(url\+Record, username\+String)}
\item \href{https://url.spec.whatwg.org/\#set-the-password}{\texttt{ Set the password}}\+: {\ttfamily set\+The\+Password(url\+Record, password\+String)}
\item \href{https://url.spec.whatwg.org/\#url-opaque-path}{\texttt{ Has an opaque path}}\+: {\ttfamily has\+An\+Opaque\+Path(url\+Record)}
\item \href{https://url.spec.whatwg.org/\#cannot-have-a-username-password-port}{\texttt{ Cannot have a username/password/port}}\+: {\ttfamily cannot\+Have\+AUsername\+Password\+Port(url\+Record)}
\item \href{https://url.spec.whatwg.org/\#percent-decode}{\texttt{ Percent decode bytes}}\+: {\ttfamily percent\+Decode\+Bytes(uint8\+Array)}
\item \href{https://url.spec.whatwg.org/\#string-percent-decode}{\texttt{ Percent decode a string}}\+: {\ttfamily percent\+Decode\+String(string)}
\end{DoxyItemize}

The {\ttfamily state\+Override} parameter is one of the following strings\+:


\begin{DoxyItemize}
\item \href{https://url.spec.whatwg.org/\#scheme-start-state}{\texttt{ {\ttfamily "{}scheme start"{}}}}
\item \href{https://url.spec.whatwg.org/\#scheme-state}{\texttt{ {\ttfamily "{}scheme"{}}}}
\item \href{https://url.spec.whatwg.org/\#no-scheme-state}{\texttt{ {\ttfamily "{}no scheme"{}}}}
\item \href{https://url.spec.whatwg.org/\#special-relative-or-authority-state}{\texttt{ {\ttfamily "{}special relative or authority"{}}}}
\item \href{https://url.spec.whatwg.org/\#path-or-authority-state}{\texttt{ {\ttfamily "{}path or authority"{}}}}
\item \href{https://url.spec.whatwg.org/\#relative-state}{\texttt{ {\ttfamily "{}relative"{}}}}
\item \href{https://url.spec.whatwg.org/\#relative-slash-state}{\texttt{ {\ttfamily "{}relative slash"{}}}}
\item \href{https://url.spec.whatwg.org/\#special-authority-slashes-state}{\texttt{ {\ttfamily "{}special authority slashes"{}}}}
\item \href{https://url.spec.whatwg.org/\#special-authority-ignore-slashes-state}{\texttt{ {\ttfamily "{}special authority ignore slashes"{}}}}
\item \href{https://url.spec.whatwg.org/\#authority-state}{\texttt{ {\ttfamily "{}authority"{}}}}
\item \href{https://url.spec.whatwg.org/\#host-state}{\texttt{ {\ttfamily "{}host"{}}}}
\item \href{https://url.spec.whatwg.org/\#hostname-state}{\texttt{ {\ttfamily "{}hostname"{}}}}
\item \href{https://url.spec.whatwg.org/\#port-state}{\texttt{ {\ttfamily "{}port"{}}}}
\item \href{https://url.spec.whatwg.org/\#file-state}{\texttt{ {\ttfamily "{}file"{}}}}
\item \href{https://url.spec.whatwg.org/\#file-slash-state}{\texttt{ {\ttfamily "{}file slash"{}}}}
\item \href{https://url.spec.whatwg.org/\#file-host-state}{\texttt{ {\ttfamily "{}file host"{}}}}
\item \href{https://url.spec.whatwg.org/\#path-start-state}{\texttt{ {\ttfamily "{}path start"{}}}}
\item \href{https://url.spec.whatwg.org/\#path-state}{\texttt{ {\ttfamily "{}path"{}}}}
\item \href{https://url.spec.whatwg.org/\#cannot-be-a-base-url-path-state}{\texttt{ {\ttfamily "{}opaque path"{}}}}
\item \href{https://url.spec.whatwg.org/\#query-state}{\texttt{ {\ttfamily "{}query"{}}}}
\item \href{https://url.spec.whatwg.org/\#fragment-state}{\texttt{ {\ttfamily "{}fragment"{}}}}
\end{DoxyItemize}

The URL record type has the following API\+:


\begin{DoxyItemize}
\item \href{https://url.spec.whatwg.org/\#concept-url-scheme}{\texttt{ {\ttfamily scheme}}}
\item \href{https://url.spec.whatwg.org/\#concept-url-username}{\texttt{ {\ttfamily username}}}
\item \href{https://url.spec.whatwg.org/\#concept-url-password}{\texttt{ {\ttfamily password}}}
\item \href{https://url.spec.whatwg.org/\#concept-url-host}{\texttt{ {\ttfamily host}}}
\item \href{https://url.spec.whatwg.org/\#concept-url-port}{\texttt{ {\ttfamily port}}}
\item \href{https://url.spec.whatwg.org/\#concept-url-path}{\texttt{ {\ttfamily path}}} (as an array of strings, or a string)
\item \href{https://url.spec.whatwg.org/\#concept-url-query}{\texttt{ {\ttfamily query}}}
\item \href{https://url.spec.whatwg.org/\#concept-url-fragment}{\texttt{ {\ttfamily fragment}}}
\end{DoxyItemize}

These properties should be treated with care, as in general changing them will cause the URL record to be in an inconsistent state until the appropriate invocation of {\ttfamily basic\+URLParse} is used to fix it up. You can see examples of this in the URL Standard, where there are many step sequences like "{}4. Set context object’s url’s fragment to the empty string. 5. Basic URL parse \+\_\+input\+\_\+ with context object’s url as \+\_\+url\+\_\+ and fragment state as \+\_\+state override\+\_\+."{} In between those two steps, a URL record is in an unusable state.

The return value of "{}failure"{} in the spec is represented by {\ttfamily null}. That is, functions like {\ttfamily parse\+URL} and {\ttfamily basic\+URLParse} can return {\itshape either} a URL record {\itshape or} {\ttfamily null}.\hypertarget{README.md_autotoc_md21008}{}\doxysubsubsection{\texorpdfstring{{\ttfamily whatwg-\/url/webidl2js-\/wrapper} module}{{\ttfamily whatwg-\/url/webidl2js-\/wrapper} module}}\label{README.md_autotoc_md21008}
This module exports the {\ttfamily URL} and {\ttfamily URLSearch\+Params} \href{https://github.com/jsdom/webidl2js\#for-interfaces}{\texttt{ interface wrappers API}} generated by \href{https://github.com/jsdom/webidl2js}{\texttt{ webidl2js}}.\hypertarget{README.md_autotoc_md21009}{}\doxysubsection{\texorpdfstring{Development instructions}{Development instructions}}\label{README.md_autotoc_md21009}
First, install \href{https://nodejs.org/}{\texttt{ Node.\+js}}. Then, fetch the dependencies of whatwg-\/url, by running from this directory\+: \begin{DoxyVerb}npm install
\end{DoxyVerb}


To run tests\+: \begin{DoxyVerb}npm test
\end{DoxyVerb}


To generate a coverage report\+: \begin{DoxyVerb}npm run coverage
\end{DoxyVerb}


To build and run the live viewer\+: \begin{DoxyVerb}npm run prepare
npm run build-live-viewer
\end{DoxyVerb}


Serve the contents of the {\ttfamily live-\/viewer} directory using any web server.\hypertarget{README.md_autotoc_md21010}{}\doxysubsection{\texorpdfstring{Supporting whatwg-\/url}{Supporting whatwg-\/url}}\label{README.md_autotoc_md21010}
The jsdom project (including whatwg-\/url) is a community-\/driven project maintained by a team of \href{https://github.com/orgs/jsdom/people}{\texttt{ volunteers}}. You could support us by\+:


\begin{DoxyItemize}
\item \href{https://tidelift.com/subscription/pkg/npm-whatwg-url?utm_source=npm-whatwg-url&utm_medium=referral&utm_campaign=readme}{\texttt{ Getting professional support for whatwg-\/url}} as part of a Tidelift subscription. Tidelift helps making open source sustainable for us while giving teams assurances for maintenance, licensing, and security.
\item Contributing directly to the project. 
\end{DoxyItemize}