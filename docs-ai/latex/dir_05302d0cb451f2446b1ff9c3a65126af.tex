\doxysection{node\+\_\+modules/devlop Directory Reference}
\hypertarget{dir_05302d0cb451f2446b1ff9c3a65126af}{}\label{dir_05302d0cb451f2446b1ff9c3a65126af}\index{node\_modules/devlop Directory Reference@{node\_modules/devlop Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://github.com/wooorm/devlop/actions}{\texttt{ }} \href{https://codecov.io/github/wooorm/devlop}{\texttt{ }} \href{https://www.npmjs.com/package/devlop}{\texttt{ }} \href{https://bundlejs.com/?q=devlop}{\texttt{ }}

Some tools to make developing easier while not including code in production.\hypertarget{readme.md_autotoc_md11886}{}\doxysubsection{\texorpdfstring{Contents}{Contents}}\label{readme.md_autotoc_md11886}

\begin{DoxyItemize}
\item What is this?
\item When should I use this?
\item Install
\item Use
\item \doxylink{README.md_api}{API}
\begin{DoxyItemize}
\item \`{}deprecate(fn, message\mbox{[}, code\mbox{]})\`{}
\item \`{}equal(actual, expected\mbox{[}, message\mbox{]})\`{}
\item \`{}ok(value\mbox{[}, message\mbox{]})\`{}
\item \`{}unreachable(message?)\`{}
\end{DoxyItemize}
\item \doxylink{readme.md_types}{Types}
\item Compatibility
\item Security
\item Related
\item \doxylink{readme.md_contribute}{Contribute}
\item \doxylink{README.md_license}{License}
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md11887}{}\doxysubsection{\texorpdfstring{What is this?}{What is this?}}\label{readme.md_autotoc_md11887}
This package lets you do things in development that are free in production. It contains useful {\ttfamily assert} functions and a {\ttfamily deprecate} function that are useful when developing Java\+Script packages while being small in production.

If you know Rust, you might know how nice having a \href{https://doc.rust-lang.org/std/macro.debug_assert.html}{\texttt{ {\ttfamily debug\+\_\+assert!}}} is. This is that, and a bit more. For more on why they‚Äôre nice, see \href{https://tratt.net/laurie/blog/2023/rusts_two_kinds_of_assert_make_for_better_code.html}{\texttt{ ‚Äú\+Rust‚Äôs Two Kinds of ‚Äò\+Assert‚Äô Make for Better Code‚Äù}}\hypertarget{readme.md_autotoc_md11888}{}\doxysubsection{\texorpdfstring{When should I use this?}{When should I use this?}}\label{readme.md_autotoc_md11888}
Many Java\+Script programs do not use assertions at all (perhaps because they‚Äôre typed and so assume type safety) or include lots of code to throw errors when users do weird things (weighing down production code). This package hopes to improve the sitation by making assertions free and deprecations cheap.\hypertarget{readme.md_autotoc_md11889}{}\doxysubsection{\texorpdfstring{Install}{Install}}\label{readme.md_autotoc_md11889}
This package is \href{https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c}{\texttt{ ESM only}}. In Node.\+js (version 16+), install with \href{https://docs.npmjs.com/cli/install}{\texttt{ npm}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ devlop}

\end{DoxyCode}


In Deno with \href{https://esm.sh}{\texttt{ {\ttfamily esm.\+sh}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{deprecate,\ equal,\ ok,\ unreachable\}\ from\ 'https://esm.sh/devlop@1'}
\DoxyCodeLine{//\ For\ development\ code:}
\DoxyCodeLine{//\ import\ \{deprecate,\ equal,\ ok\}\ from\ 'https://esm.sh/devlop@1?conditions=development'}

\end{DoxyCode}


In browsers with \href{https://esm.sh}{\texttt{ {\ttfamily esm.\+sh}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<script\ type="{}module"{}>}
\DoxyCodeLine{\ \ import\ \{deprecate,\ equal,\ ok,\ unreachable\}\ from\ 'https://esm.sh/devlop@1?bundle'}
\DoxyCodeLine{\ \ //\ For\ development\ code:}
\DoxyCodeLine{\ \ //\ import\ \{deprecate,\ equal,\ ok\}\ from\ 'https://esm.sh/devlop@1?bundle\&conditions=development'}
\DoxyCodeLine{</script>}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md11890}{}\doxysubsection{\texorpdfstring{Use}{Use}}\label{readme.md_autotoc_md11890}
Say we have a small ponyfill for the ES5 {\ttfamily String\#includes} function. It‚Äôs deprecated, because folks can use {\ttfamily String\#includes} nowadays. It‚Äôs nicely typed so users should be able to figure out what to pass but we include assertions to show nicer errors when they get it wrong.

{\ttfamily example/string-\/includes.\+js}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{deprecate,\ ok\}\ from\ 'devlop'}
\DoxyCodeLine{}
\DoxyCodeLine{export\ const\ stringIncludes\ =\ deprecate(}
\DoxyCodeLine{\ \ includes,}
\DoxyCodeLine{\ \ 'Since\ ES5,\ please\ use\ \`{}String\#includes`\ itself.'}
\DoxyCodeLine{)}
\DoxyCodeLine{}
\DoxyCodeLine{/**}
\DoxyCodeLine{\ *\ @deprecated}
\DoxyCodeLine{\ *\ \ \ Since\ ES5,\ please\ use\ \`{}String\#includes`\ itself.}
\DoxyCodeLine{\ *\ @param\ \{string\}\ value}
\DoxyCodeLine{\ *\ \ \ Value\ to\ search\ in.}
\DoxyCodeLine{\ *\ @param\ \{string\}\ search}
\DoxyCodeLine{\ *\ \ \ Value\ to\ search\ for.}
\DoxyCodeLine{\ *\ @param\ \{number\ |\ undefined\}\ [position=0]}
\DoxyCodeLine{\ *\ \ \ Position\ to\ search\ from\ (default:\ \`{}0`).}
\DoxyCodeLine{\ *\ @returns\ \{boolean\}}
\DoxyCodeLine{\ *\ \ \ Whether\ the\ searched\ for\ value\ exists\ in\ the\ searched\ value\ after\ position.}
\DoxyCodeLine{\ */}
\DoxyCodeLine{function\ includes(value,\ search,\ position)\ \{}
\DoxyCodeLine{\ \ ok(typeof\ value\ ===\ 'string',\ 'expected\ string\ for\ \`{}value`')}
\DoxyCodeLine{\ \ ok(typeof\ search\ ===\ 'string',\ 'expected\ string\ for\ \`{}search`')}
\DoxyCodeLine{\ \ ok(position\ ===\ undefined\ ||\ typeof\ position\ ===\ 'number',\ 'expected\ number')}
\DoxyCodeLine{\ \ ok(}
\DoxyCodeLine{\ \ \ \ position\ ===\ undefined\ ||}
\DoxyCodeLine{\ \ \ \ \ \ (typeof\ position\ ===\ 'number'\ \&\&}
\DoxyCodeLine{\ \ \ \ \ \ \ \ !(/*\ \#\_\_PURE\_\_\ */\ Number.isNaN(position))),}
\DoxyCodeLine{\ \ \ \ 'expected\ number'}
\DoxyCodeLine{\ \ )}
\DoxyCodeLine{\ \ //\ eslint-\/disable-\/next-\/line\ unicorn/prefer-\/includes}
\DoxyCodeLine{\ \ return\ value.indexOf(search,\ position\ ||\ 0)\ !==\ -\/1}
\DoxyCodeLine{\}}

\end{DoxyCode}


{\ttfamily example/index.\+js}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{stringIncludes\}\ from\ './example-\/includes.js'}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(stringIncludes('blue\ whale',\ 'dolphin'))\ //=>\ false}
\DoxyCodeLine{console.log(stringIncludes('blue\ whale',\ 'whale'))\ //=>\ true}

\end{DoxyCode}


Say we‚Äôd bundle that in development with \href{https://esbuild.github.io}{\texttt{ {\ttfamily esbuild}}} and check the gzip size (\href{https://github.com/sindresorhus/gzip-size-cli/tree/main}{\texttt{ {\ttfamily gzip-\/size-\/cli}}}), we‚Äôd get 1.\+02 kB of code\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ esbuild\ example/index.js\ -\/-\/bundle\ -\/-\/conditions=development\ -\/-\/format=esm\ -\/-\/minify\ -\/-\/target=es2022\ |\ gzip-\/size}
\DoxyCodeLine{1.02\ kB}

\end{DoxyCode}


But because {\ttfamily devlop} is light in production we‚Äôd get\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ esbuild\ example/index.js\ -\/-\/bundle\ -\/-\/format=esm\ -\/-\/minify\ -\/-\/target=es2022\ |\ gzip-\/size}
\DoxyCodeLine{169\ B}

\end{DoxyCode}


The bundle looks as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{function\ u(n)\{return\ n\}var\ r=u(c,"{}Since\ ES5,\ please\ use\ \`{}String\#includes`\ itself."{});function\ c(n,t,e)\{return\ n.indexOf(t,e||0)!==-\/1\}console.log(r("{}blue\ whale"{},"{}dolphin"{}));console.log(r("{}blue\ whale"{},"{}whale"{}));}

\end{DoxyCode}


It depends a bit on which bundler and minifier you use how small the code is\+: esbuild keeps the unused message parameter to the {\ttfamily deprecate} function around and does not know {\ttfamily Number.\+is\+NaN} can be dropped without a {\ttfamily /\texorpdfstring{$\ast$}{*} \#\+\_\+\+\_\+\+PURE\+\_\+\+\_\+ \texorpdfstring{$\ast$}{*}/} annotation.

\href{https://rollupjs.org}{\texttt{ {\ttfamily rollup}}} with \href{https://github.com/rollup/plugins/tree/master/packages/node-resolve}{\texttt{ {\ttfamily @rollup/plugin-\/node-\/resolve}}} and \href{https://github.com/rollup/plugins/tree/master/packages/terser\#readme}{\texttt{ {\ttfamily @rollup/plugin-\/terser}}} performs even better\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ rollup\ example/index.js\ -\/p\ node-\/resolve\ -\/p\ terser\ |\ gzip-\/size}
\DoxyCodeLine{118\ B}

\end{DoxyCode}


The bundle looks as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ l=function(l,e,o)\{return-\/1!==l.indexOf(e,o||0)\};console.log(l("{}blue\ whale"{},"{}dolphin"{})),console.log(l("{}blue\ whale"{},"{}whale"{}));}

\end{DoxyCode}


Rollup doesn‚Äôt need the {\ttfamily /\texorpdfstring{$\ast$}{*} \#\+\_\+\+\_\+\+PURE\+\_\+\+\_\+ \texorpdfstring{$\ast$}{*}/} comment either!\hypertarget{readme.md_autotoc_md11891}{}\doxysubsection{\texorpdfstring{API}{API}}\label{readme.md_autotoc_md11891}
This package exports the identifiers \`{}deprecate\`{}, \`{}equal\`{}, \`{}ok\`{}, and \`{}unreachable\`{}. There is no default export.

The export map supports the \href{https://nodejs.org/api/packages.html\#packages_resolving_user_conditions}{\texttt{ {\ttfamily development} condition}}. Run {\ttfamily node -\/-\/conditions development module.\+js} to get dev code. Without this condition, no-\/ops are loaded.\hypertarget{readme.md_autotoc_md11892}{}\doxysubsubsection{\texorpdfstring{{\ttfamily deprecate(fn, message\mbox{[}, code\mbox{]})}}{{\ttfamily deprecate(fn, message\mbox{[}, code\mbox{]})}}}\label{readme.md_autotoc_md11892}
Wrap a function or class to show a deprecation message when first called.

\begin{quote}
üëâ {\bfseries{Important}}\+: only shows a message when the {\ttfamily development} condition is used, does nothing in production. \end{quote}


When the resulting wrapped {\ttfamily fn} is called, emits a warning once to {\ttfamily console.\+error} ({\ttfamily stderr}). If a code is given, one warning message will be emitted in total per code.\hypertarget{readme.md_autotoc_md11893}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md11893}

\begin{DoxyItemize}
\item {\ttfamily fn} ({\ttfamily Function}) ‚Äî function or class
\item {\ttfamily message} ({\ttfamily string}) ‚Äî message explaining deprecation
\item {\ttfamily code} ({\ttfamily string}, optional) ‚Äî deprecation identifier (optional); deprecation messages will be generated only once per code
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md11894}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md11894}
Wrapped {\ttfamily fn}.\hypertarget{readme.md_autotoc_md11895}{}\doxysubsubsection{\texorpdfstring{{\ttfamily equal(actual, expected\mbox{[}, message\mbox{]})}}{{\ttfamily equal(actual, expected\mbox{[}, message\mbox{]})}}}\label{readme.md_autotoc_md11895}
Assert deep strict equivalence.

\begin{quote}
üëâ {\bfseries{Important}}\+: only asserts when the {\ttfamily development} condition is used, does nothing in production. \end{quote}
\hypertarget{readme.md_autotoc_md11896}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md11896}

\begin{DoxyItemize}
\item {\ttfamily actual} ({\ttfamily unknown}) ‚Äî value
\item {\ttfamily expected} ({\ttfamily unknown}) ‚Äî baseline
\item {\ttfamily message} ({\ttfamily Error} or {\ttfamily string}, default\+: `\textquotesingle{}Expected values to be deeply equal'\`{}) ‚Äî message for assertion error
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md11897}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md11897}
Nothing ({\ttfamily undefined}).\hypertarget{readme.md_autotoc_md11898}{}\doxysubsubsubsubsubsection{\texorpdfstring{Throws}{Throws}}\label{readme.md_autotoc_md11898}
Throws ({\ttfamily Assertion\+Error}) when {\ttfamily actual} is not deep strict equal to {\ttfamily expected}.\hypertarget{readme.md_autotoc_md11899}{}\doxysubsubsection{\texorpdfstring{{\ttfamily ok(value\mbox{[}, message\mbox{]})}}{{\ttfamily ok(value\mbox{[}, message\mbox{]})}}}\label{readme.md_autotoc_md11899}
Assert if {\ttfamily value} is truthy.

\begin{quote}
üëâ {\bfseries{Important}}\+: only asserts when the {\ttfamily development} condition is used, does nothing in production. \end{quote}
\hypertarget{readme.md_autotoc_md11900}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md11900}

\begin{DoxyItemize}
\item {\ttfamily actual} ({\ttfamily unknown}) ‚Äî value to assert
\item {\ttfamily message} ({\ttfamily Error} or {\ttfamily string}, default\+: `\textquotesingle{}Expected value to be truthy'\`{}) ‚Äî message for assertion error
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md11901}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md11901}
Nothing ({\ttfamily undefined}).\hypertarget{readme.md_autotoc_md11902}{}\doxysubsubsubsubsubsection{\texorpdfstring{Throws}{Throws}}\label{readme.md_autotoc_md11902}
Throws ({\ttfamily Assertion\+Error}) when {\ttfamily value} is falsey.\hypertarget{readme.md_autotoc_md11903}{}\doxysubsubsection{\texorpdfstring{{\ttfamily unreachable(message?)}}{{\ttfamily unreachable(message?)}}}\label{readme.md_autotoc_md11903}
Assert that a code path never happens.

\begin{quote}
üëâ {\bfseries{Important}}\+: only asserts when the {\ttfamily development} condition is used, does nothing in production. \end{quote}
\hypertarget{readme.md_autotoc_md11904}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md11904}

\begin{DoxyItemize}
\item {\ttfamily message} ({\ttfamily Error} or {\ttfamily string}, default\+: `\textquotesingle{}Unreachable'\`{}) ‚Äî message for assertion error
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md11905}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md11905}
Never ({\ttfamily never}).\hypertarget{readme.md_autotoc_md11906}{}\doxysubsubsubsubsubsection{\texorpdfstring{Throws}{Throws}}\label{readme.md_autotoc_md11906}
Throws ({\ttfamily Assertion\+Error}), always.\hypertarget{readme.md_autotoc_md11907}{}\doxysubsection{\texorpdfstring{Types}{Types}}\label{readme.md_autotoc_md11907}
This package is fully typed with \href{https://www.typescriptlang.org}{\texttt{ Type\+Script}}. It exports no additional types.\hypertarget{readme.md_autotoc_md11908}{}\doxysubsection{\texorpdfstring{Compatibility}{Compatibility}}\label{readme.md_autotoc_md11908}
This project is compatible with maintained versions of Node.\+js.

When we cut a new major release, we drop support for unmaintained versions of Node. This means we try to keep the current release line, {\ttfamily devlop@\texorpdfstring{$^\wedge$}{\string^}1}, compatible with Node.\+js 16.\hypertarget{readme.md_autotoc_md11909}{}\doxysubsection{\texorpdfstring{Security}{Security}}\label{readme.md_autotoc_md11909}
This package is safe.\hypertarget{readme.md_autotoc_md11910}{}\doxysubsection{\texorpdfstring{Related}{Related}}\label{readme.md_autotoc_md11910}

\begin{DoxyItemize}
\item \href{https://github.com/unassert-js/babel-plugin-unassert}{\texttt{ {\ttfamily babel-\/plugin-\/unassert}}} ‚Äî encourage reliable programming with assertions while compiling them away in production (can remove arbitrary {\ttfamily assert} modules, works regardless of conditions, so has to be configured by the end user)
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md11911}{}\doxysubsection{\texorpdfstring{Contribute}{Contribute}}\label{readme.md_autotoc_md11911}
Yes please! See \href{https://opensource.guide/how-to-contribute/}{\texttt{ How to Contribute to Open Source}}.\hypertarget{readme.md_autotoc_md11912}{}\doxysubsection{\texorpdfstring{License}{License}}\label{readme.md_autotoc_md11912}
\mbox{[}MIT\mbox{]}\mbox{[}license\mbox{]} ¬© \href{https://wooorm.com}{\texttt{ Titus Wormer}} 