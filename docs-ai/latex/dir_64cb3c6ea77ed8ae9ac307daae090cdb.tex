\doxysection{node\+\_\+modules/cookie Directory Reference}
\hypertarget{dir_64cb3c6ea77ed8ae9ac307daae090cdb}{}\label{dir_64cb3c6ea77ed8ae9ac307daae090cdb}\index{node\_modules/cookie Directory Reference@{node\_modules/cookie Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://npmjs.org/package/cookie}{\texttt{ }} \href{https://npmjs.org/package/cookie}{\texttt{ }} \href{https://github.com/jshttp/cookie/actions/workflows/ci.yml?query=branch\%3Amaster}{\texttt{ }} \href{https://app.codecov.io/gh/jshttp/cookie}{\texttt{ }}

Basic HTTP cookie parser and serializer for HTTP servers.\hypertarget{README.md_autotoc_md10989}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md10989}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ install\ cookie}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md10990}{}\doxysubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md10990}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ cookie\ =\ require("{}cookie"{});}
\DoxyCodeLine{//\ import\ *\ as\ cookie\ from\ 'cookie';}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md10991}{}\doxysubsubsection{\texorpdfstring{cookie.\+parse(str, options)}{cookie.\+parse(str, options)}}\label{README.md_autotoc_md10991}
Parse a HTTP {\ttfamily Cookie} header string and returning an object of all cookie name-\/value pairs. The {\ttfamily str} argument is the string representing a {\ttfamily Cookie} header value and {\ttfamily options} is an optional object containing additional parsing options.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ cookies\ =\ cookie.parse("{}foo=bar;\ equation=E\%3Dmc\%5E2"{});}
\DoxyCodeLine{//\ \{\ foo:\ 'bar',\ equation:\ 'E=mc\string^2'\ \}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md10992}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{README.md_autotoc_md10992}
{\ttfamily cookie.\+parse} accepts these properties in the options object.\hypertarget{README.md_autotoc_md10993}{}\doxysubsubsubsubsection{\texorpdfstring{decode}{decode}}\label{README.md_autotoc_md10993}
Specifies a function that will be used to decode a \href{https://datatracker.ietf.org/doc/html/rfc6265\#section-4.1.1}{\texttt{ cookie-\/value}}. Since the value of a cookie has a limited character set (and must be a simple string), this function can be used to decode a previously-\/encoded cookie value into a Java\+Script string.

The default function is the global {\ttfamily decode\+URIComponent}, wrapped in a {\ttfamily try..catch}. If an error is thrown it will return the cookie\textquotesingle{}s original value. If you provide your own encode/decode scheme you must ensure errors are appropriately handled.\hypertarget{README.md_autotoc_md10994}{}\doxysubsubsection{\texorpdfstring{cookie.\+serialize(name, value, options)}{cookie.\+serialize(name, value, options)}}\label{README.md_autotoc_md10994}
Serialize a cookie name-\/value pair into a {\ttfamily Set-\/\+Cookie} header string. The {\ttfamily name} argument is the name for the cookie, the {\ttfamily value} argument is the value to set the cookie to, and the {\ttfamily options} argument is an optional object containing additional serialization options.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ setCookie\ =\ cookie.serialize("{}foo"{},\ "{}bar"{});}
\DoxyCodeLine{//\ foo=bar}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md10995}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{README.md_autotoc_md10995}
{\ttfamily cookie.\+serialize} accepts these properties in the options object.\hypertarget{README.md_autotoc_md10996}{}\doxysubsubsubsubsection{\texorpdfstring{encode}{encode}}\label{README.md_autotoc_md10996}
Specifies a function that will be used to encode a \href{https://datatracker.ietf.org/doc/html/rfc6265\#section-4.1.1}{\texttt{ cookie-\/value}}. Since value of a cookie has a limited character set (and must be a simple string), this function can be used to encode a value into a string suited for a cookie\textquotesingle{}s value, and should mirror {\ttfamily decode} when parsing.

The default function is the global {\ttfamily encode\+URIComponent}.\hypertarget{README.md_autotoc_md10997}{}\doxysubsubsubsubsection{\texorpdfstring{max\+Age}{max\+Age}}\label{README.md_autotoc_md10997}
Specifies the {\ttfamily number} (in seconds) to be the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.2}{\texttt{ {\ttfamily Max-\/\+Age} {\ttfamily Set-\/\+Cookie} attribute}}.

The \href{https://tools.ietf.org/html/rfc6265\#section-5.3}{\texttt{ cookie storage model specification}} states that if both {\ttfamily expires} and {\ttfamily max\+Age} are set, then {\ttfamily max\+Age} takes precedence, but it is possible not all clients by obey this, so if both are set, they should point to the same date and time.\hypertarget{README.md_autotoc_md10998}{}\doxysubsubsubsubsection{\texorpdfstring{expires}{expires}}\label{README.md_autotoc_md10998}
Specifies the {\ttfamily Date} object to be the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.1}{\texttt{ {\ttfamily Expires} {\ttfamily Set-\/\+Cookie} attribute}}. When no expiration is set clients consider this a "{}non-\/persistent cookie"{} and delete it the current session is over.

The \href{https://tools.ietf.org/html/rfc6265\#section-5.3}{\texttt{ cookie storage model specification}} states that if both {\ttfamily expires} and {\ttfamily max\+Age} are set, then {\ttfamily max\+Age} takes precedence, but it is possible not all clients by obey this, so if both are set, they should point to the same date and time.\hypertarget{README.md_autotoc_md10999}{}\doxysubsubsubsubsection{\texorpdfstring{domain}{domain}}\label{README.md_autotoc_md10999}
Specifies the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.3}{\texttt{ {\ttfamily Domain} {\ttfamily Set-\/\+Cookie} attribute}}. When no domain is set clients consider the cookie to apply to the current domain only.\hypertarget{README.md_autotoc_md11000}{}\doxysubsubsubsubsection{\texorpdfstring{path}{path}}\label{README.md_autotoc_md11000}
Specifies the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.4}{\texttt{ {\ttfamily Path} {\ttfamily Set-\/\+Cookie} attribute}}. When no path is set, the path is considered the \href{https://tools.ietf.org/html/rfc6265\#section-5.1.4}{\texttt{ "{}default path"{}}}.\hypertarget{README.md_autotoc_md11001}{}\doxysubsubsubsubsection{\texorpdfstring{http\+Only}{http\+Only}}\label{README.md_autotoc_md11001}
Enables the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.6}{\texttt{ {\ttfamily Http\+Only} {\ttfamily Set-\/\+Cookie} attribute}}. When enabled, clients will not allow client-\/side Java\+Script to see the cookie in {\ttfamily document.\+cookie}.\hypertarget{README.md_autotoc_md11002}{}\doxysubsubsubsubsection{\texorpdfstring{secure}{secure}}\label{README.md_autotoc_md11002}
Enables the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.5}{\texttt{ {\ttfamily Secure} {\ttfamily Set-\/\+Cookie} attribute}}. When enabled, clients will only send the cookie back if the browser has a HTTPS connection.\hypertarget{README.md_autotoc_md11003}{}\doxysubsubsubsubsection{\texorpdfstring{partitioned}{partitioned}}\label{README.md_autotoc_md11003}
Enables the \href{https://tools.ietf.org/html/draft-cutler-httpbis-partitioned-cookies/}{\texttt{ {\ttfamily Partitioned} {\ttfamily Set-\/\+Cookie} attribute}}. When enabled, clients will only send the cookie back when the current domain {\itshape and} top-\/level domain matches.

This is an attribute that has not yet been fully standardized, and may change in the future. This also means clients may ignore this attribute until they understand it. More information about can be found in \href{https://github.com/privacycg/CHIPS}{\texttt{ the proposal}}.\hypertarget{README.md_autotoc_md11004}{}\doxysubsubsubsubsection{\texorpdfstring{priority}{priority}}\label{README.md_autotoc_md11004}
Specifies the value for the \href{https://tools.ietf.org/html/draft-west-cookie-priority-00\#section-4.1}{\texttt{ {\ttfamily Priority} {\ttfamily Set-\/\+Cookie} attribute}}.


\begin{DoxyItemize}
\item `\textquotesingle{}low'{\ttfamily will set the}Priority{\ttfamily attribute to}Low{\ttfamily . -\/}\textquotesingle{}medium\textquotesingle{}{\ttfamily will set the}Priority{\ttfamily attribute to}Medium{\ttfamily , the default priority when not set. -\/}\textquotesingle{}high\textquotesingle{}{\ttfamily will set the}Priority{\ttfamily attribute to}High\`{}.
\end{DoxyItemize}

More information about priority levels can be found in \href{https://tools.ietf.org/html/draft-west-cookie-priority-00\#section-4.1}{\texttt{ the specification}}.\hypertarget{README.md_autotoc_md11005}{}\doxysubsubsubsubsection{\texorpdfstring{same\+Site}{same\+Site}}\label{README.md_autotoc_md11005}
Specifies the value for the \href{https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-09\#section-5.4.7}{\texttt{ {\ttfamily Same\+Site} {\ttfamily Set-\/\+Cookie} attribute}}.


\begin{DoxyItemize}
\item {\ttfamily true} will set the {\ttfamily Same\+Site} attribute to {\ttfamily Strict} for strict same site enforcement.
\item `\textquotesingle{}lax'{\ttfamily will set the}Same\+Site{\ttfamily attribute to}Lax{\ttfamily for lax same site enforcement. -\/}\textquotesingle{}none\textquotesingle{}{\ttfamily will set the}Same\+Site{\ttfamily attribute to}None{\ttfamily for an explicit cross-\/site cookie. -\/}\textquotesingle{}strict\textquotesingle{}{\ttfamily will set the}Same\+Site{\ttfamily attribute to}Strict\`{} for strict same site enforcement.
\end{DoxyItemize}

More information about enforcement levels can be found in \href{https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-09\#section-5.4.7}{\texttt{ the specification}}.\hypertarget{README.md_autotoc_md11006}{}\doxysubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md11006}
The following example uses this module in conjunction with the Node.\+js core HTTP server to prompt a user for their name and display it back on future visits.


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ cookie\ =\ require("{}cookie"{});}
\DoxyCodeLine{var\ escapeHtml\ =\ require("{}escape-\/html"{});}
\DoxyCodeLine{var\ http\ =\ require("{}http"{});}
\DoxyCodeLine{var\ url\ =\ require("{}url"{});}
\DoxyCodeLine{}
\DoxyCodeLine{function\ onRequest(req,\ res)\ \{}
\DoxyCodeLine{\ \ //\ Parse\ the\ query\ string}
\DoxyCodeLine{\ \ var\ query\ =\ url.parse(req.url,\ true,\ true).query;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ if\ (query\ \&\&\ query.name)\ \{}
\DoxyCodeLine{\ \ \ \ //\ Set\ a\ new\ cookie\ with\ the\ name}
\DoxyCodeLine{\ \ \ \ res.setHeader(}
\DoxyCodeLine{\ \ \ \ \ \ "{}Set-\/Cookie"{},}
\DoxyCodeLine{\ \ \ \ \ \ cookie.serialize("{}name"{},\ String(query.name),\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ httpOnly:\ true,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ maxAge:\ 60\ *\ 60\ *\ 24\ *\ 7,\ //\ 1\ week}
\DoxyCodeLine{\ \ \ \ \ \ \}),}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ Redirect\ back\ after\ setting\ cookie}
\DoxyCodeLine{\ \ \ \ res.statusCode\ =\ 302;}
\DoxyCodeLine{\ \ \ \ res.setHeader("{}Location"{},\ req.headers.referer\ ||\ "{}/"{});}
\DoxyCodeLine{\ \ \ \ res.end();}
\DoxyCodeLine{\ \ \ \ return;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ //\ Parse\ the\ cookies\ on\ the\ request}
\DoxyCodeLine{\ \ var\ cookies\ =\ cookie.parse(req.headers.cookie\ ||\ "{}"{});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ //\ Get\ the\ visitor\ name\ set\ in\ the\ cookie}
\DoxyCodeLine{\ \ var\ name\ =\ cookies.name;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ res.setHeader("{}Content-\/Type"{},\ "{}text/html;\ charset=UTF-\/8"{});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ if\ (name)\ \{}
\DoxyCodeLine{\ \ \ \ res.write("{}<p>Welcome\ back,\ <b>"{}\ +\ escapeHtml(name)\ +\ "{}</b>!</p>"{});}
\DoxyCodeLine{\ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ res.write("{}<p>Hello,\ new\ visitor!</p>"{});}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ res.write('<form\ method="{}GET"{}>');}
\DoxyCodeLine{\ \ res.write(}
\DoxyCodeLine{\ \ \ \ '<input\ placeholder="{}enter\ your\ name"{}\ name="{}name"{}>\ <input\ type="{}submit"{}\ value="{}Set\ Name"{}>',}
\DoxyCodeLine{\ \ );}
\DoxyCodeLine{\ \ res.end("{}</form>"{});}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(onRequest).listen(3000);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11007}{}\doxysubsection{\texorpdfstring{Testing}{Testing}}\label{README.md_autotoc_md11007}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ test}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11008}{}\doxysubsection{\texorpdfstring{Benchmark}{Benchmark}}\label{README.md_autotoc_md11008}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ run\ bench}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ name\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hz\ \ \ \ \ min\ \ \ \ \ max\ \ \ \ mean\ \ \ \ \ p75\ \ \ \ \ p99\ \ \ \ p995\ \ \ \ p999\ \ \ \ \ rme\ \ samples}
\DoxyCodeLine{·\ simple\ \ \ \ \ \ \ 8,566,313.09\ \ 0.0000\ \ 0.3694\ \ 0.0001\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.64\%\ \ 4283157\ \ \ fastest}
\DoxyCodeLine{·\ decode\ \ \ \ \ \ \ 3,834,348.85\ \ 0.0001\ \ 0.2465\ \ 0.0003\ \ 0.0003\ \ 0.0003\ \ 0.0004\ \ 0.0006\ \ ±0.38\%\ \ 1917175}
\DoxyCodeLine{·\ unquote\ \ \ \ \ \ 8,315,355.96\ \ 0.0000\ \ 0.3824\ \ 0.0001\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.72\%\ \ 4157880}
\DoxyCodeLine{·\ duplicates\ \ \ 1,944,765.97\ \ 0.0004\ \ 0.2959\ \ 0.0005\ \ 0.0005\ \ 0.0006\ \ 0.0006\ \ 0.0008\ \ ±0.24\%\ \ \ 972384}
\DoxyCodeLine{·\ 10\ cookies\ \ \ \ \ 675,345.67\ \ 0.0012\ \ 0.4328\ \ 0.0015\ \ 0.0015\ \ 0.0019\ \ 0.0020\ \ 0.0058\ \ ±0.75\%\ \ \ 337673}
\DoxyCodeLine{·\ 100\ cookies\ \ \ \ \ 61,040.71\ \ 0.0152\ \ 0.4092\ \ 0.0164\ \ 0.0160\ \ 0.0196\ \ 0.0228\ \ 0.2260\ \ ±0.71\%\ \ \ \ 30521\ \ \ slowest}
\DoxyCodeLine{✓\ parse\ top-\/sites\ (15)\ 22945ms}
\DoxyCodeLine{\ \ name\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hz\ \ \ \ \ min\ \ \ \ \ max\ \ \ \ mean\ \ \ \ \ p75\ \ \ \ \ p99\ \ \ \ p995\ \ \ \ p999\ \ \ \ \ rme\ \ \ samples}
\DoxyCodeLine{·\ parse\ accounts.google.com\ \ \ 7,164,349.17\ \ 0.0000\ \ 0.0929\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.09\%\ \ \ 3582184}
\DoxyCodeLine{·\ parse\ apple.com\ \ \ \ \ \ \ \ \ \ \ \ \ 7,817,686.84\ \ 0.0000\ \ 0.6048\ \ 0.0001\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±1.05\%\ \ \ 3908844}
\DoxyCodeLine{·\ parse\ cloudflare.com\ \ \ \ \ \ \ \ 7,189,841.70\ \ 0.0000\ \ 0.0390\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.06\%\ \ \ 3594921}
\DoxyCodeLine{·\ parse\ docs.google.com\ \ \ \ \ \ \ 7,051,765.61\ \ 0.0000\ \ 0.0296\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.06\%\ \ \ 3525883}
\DoxyCodeLine{·\ parse\ drive.google.com\ \ \ \ \ \ 7,349,104.77\ \ 0.0000\ \ 0.0368\ \ 0.0001\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.05\%\ \ \ 3674553}
\DoxyCodeLine{·\ parse\ en.wikipedia.org\ \ \ \ \ \ 1,929,909.49\ \ 0.0004\ \ 0.3598\ \ 0.0005\ \ 0.0005\ \ 0.0007\ \ 0.0007\ \ 0.0012\ \ ±0.16\%\ \ \ \ 964955}
\DoxyCodeLine{·\ parse\ linkedin.com\ \ \ \ \ \ \ \ \ \ 2,225,658.01\ \ 0.0003\ \ 0.0595\ \ 0.0004\ \ 0.0005\ \ 0.0005\ \ 0.0005\ \ 0.0006\ \ ±0.06\%\ \ \ 1112830}
\DoxyCodeLine{·\ parse\ maps.google.com\ \ \ \ \ \ \ 4,423,511.68\ \ 0.0001\ \ 0.0942\ \ 0.0002\ \ 0.0003\ \ 0.0003\ \ 0.0003\ \ 0.0005\ \ ±0.08\%\ \ \ 2211756}
\DoxyCodeLine{·\ parse\ microsoft.com\ \ \ \ \ \ \ \ \ 3,387,601.88\ \ 0.0002\ \ 0.0725\ \ 0.0003\ \ 0.0003\ \ 0.0004\ \ 0.0004\ \ 0.0005\ \ ±0.09\%\ \ \ 1693801}
\DoxyCodeLine{·\ parse\ play.google.com\ \ \ \ \ \ \ 7,375,980.86\ \ 0.0000\ \ 0.1994\ \ 0.0001\ \ 0.0001\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ ±0.12\%\ \ \ 3687991}
\DoxyCodeLine{·\ parse\ support.google.com\ \ \ \ 4,912,267.94\ \ 0.0001\ \ 2.8958\ \ 0.0002\ \ 0.0002\ \ 0.0003\ \ 0.0003\ \ 0.0005\ \ ±1.28\%\ \ \ 2456134}
\DoxyCodeLine{·\ parse\ www.google.com\ \ \ \ \ \ \ \ 3,443,035.87\ \ 0.0002\ \ 0.2783\ \ 0.0003\ \ 0.0003\ \ 0.0004\ \ 0.0004\ \ 0.0007\ \ ±0.51\%\ \ \ 1721518}
\DoxyCodeLine{·\ parse\ youtu.be\ \ \ \ \ \ \ \ \ \ \ \ \ \ 1,910,492.87\ \ 0.0004\ \ 0.3490\ \ 0.0005\ \ 0.0005\ \ 0.0007\ \ 0.0007\ \ 0.0011\ \ ±0.46\%\ \ \ \ 955247}
\DoxyCodeLine{·\ parse\ youtube.com\ \ \ \ \ \ \ \ \ \ \ 1,895,082.62\ \ 0.0004\ \ 0.7454\ \ 0.0005\ \ 0.0005\ \ 0.0006\ \ 0.0007\ \ 0.0013\ \ ±0.64\%\ \ \ \ 947542\ \ \ slowest}
\DoxyCodeLine{·\ parse\ example.com\ \ \ \ \ \ \ \ \ \ 21,582,835.27\ \ 0.0000\ \ 0.1095\ \ 0.0000\ \ 0.0000\ \ 0.0001\ \ 0.0001\ \ 0.0001\ \ ±0.13\%\ \ 10791418}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11009}{}\doxysubsection{\texorpdfstring{References}{References}}\label{README.md_autotoc_md11009}

\begin{DoxyItemize}
\item \href{https://tools.ietf.org/html/rfc6265}{\texttt{ RFC 6265\+: HTTP State Management Mechanism}}
\item \href{https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-09\#section-5.4.7}{\texttt{ Same-\/site Cookies}}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md11010}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md11010}
\mbox{[}MIT\mbox{]}(LICENSE) 