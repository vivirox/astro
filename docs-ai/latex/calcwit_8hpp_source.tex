\doxysection{calcwit.\+hpp}
\hypertarget{calcwit_8hpp_source}{}\label{calcwit_8hpp_source}\index{node\_modules/circom\_runtime/c/calcwit.hpp@{node\_modules/circom\_runtime/c/calcwit.hpp}}
\mbox{\hyperlink{calcwit_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ CIRCOM\_CALCWIT\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ CIRCOM\_CALCWIT\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{circom_8hpp}{circom.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}fr.hpp"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <condition\_variable>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <nlohmann/json.hpp>}}
\DoxyCodeLine{00010\ \textcolor{keyword}{using\ }\mbox{\hyperlink{calcwit_8hpp_ab701e3ac61a85b337ec5c1abaad6742d}{json}}\ =\ nlohmann::json;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ NMUTEXES\ 128}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_circom___calc_wit_a74c9358cd38a139725eccf294489c033}{Circom\_CalcWit}}\ \{}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordtype}{bool}\ *signalAssigned;}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{comment}{//\ componentStatus\ -\/>\ For\ each\ component}}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{//\ >0\ Signals\ required\ to\ trigger}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ ==\ 0\ Component\ triggered}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{comment}{//\ ==\ -\/1\ Component\ finished}}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{int}\ *inputSignalsToTrigger;}
\DoxyCodeLine{00023\ \ \ \ \ std::mutex\ *mutexes;}
\DoxyCodeLine{00024\ \ \ \ \ std::condition\_variable\ *cvs;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ std::mutex\ printf\_mutex;}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{fr_8h_abb6c99d6ef9fcde4b9537fe63c27c05a}{FrElement}}\ *signalValues;}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{void}\ triggerComponent(\textcolor{keywordtype}{int}\ newCIdx);}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{void}\ calculateWitness(\textcolor{keywordtype}{void}\ *input,\ \textcolor{keywordtype}{void}\ *output);}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ syncPrintf(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{utilities_8cc_abe24116ee0a218908696f43fe118e24b}{format}},\ ...);}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{bool}\ isCanceled()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_circom___calc_wit_a715329e3e8fef16aa84b3150b9f226b6}{isCanceledCB}}\ \&\&\ \mbox{\hyperlink{class_circom___calc_wit_a715329e3e8fef16aa84b3150b9f226b6}{isCanceledCB}}();\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{void}\ itFunc(\textcolor{keywordtype}{int}\ o,\ \mbox{\hyperlink{calcwit_8hpp_ab701e3ac61a85b337ec5c1abaad6742d}{json}}\ val);}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{void}\ iterateArr(\textcolor{keywordtype}{int}\ o,\ \mbox{\hyperlink{circom_8hpp_a33af19ecfe6025f71dcae8abd7d655c1}{Circom\_Sizes}}\ sizes,\ \mbox{\hyperlink{calcwit_8hpp_ab701e3ac61a85b337ec5c1abaad6742d}{json}}\ jarr);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00041\ \ \ \ \ std::function<bool()>\ \mbox{\hyperlink{class_circom___calc_wit_a715329e3e8fef16aa84b3150b9f226b6}{isCanceledCB}};}
\DoxyCodeLine{00042\ \ \ \ \ Circom\_Circuit\ *\mbox{\hyperlink{class_circom___calc_wit_a5524a0d941af7c2762c52ea6863b7000}{circuit}};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{comment}{//\ Functions\ called\ by\ the\ circuit}}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{class_circom___calc_wit_a74c9358cd38a139725eccf294489c033}{Circom\_CalcWit}}(Circom\_Circuit\ *aCircuit);}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{class_circom___calc_wit_a03ff07caab0626bfdfc173fa53a97088}{\string~Circom\_CalcWit}}();}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_circom___calc_wit_aa04b4475e887f2602ec6f5935e752cee}{getSubComponentOffset}}(\textcolor{keywordtype}{int}\ cIdx,\ \mbox{\hyperlink{circom_8hpp_ad758b7a5c3f18ed79d2fcd23d9f16357}{u64}}\ hash);}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{circom_8hpp_a33af19ecfe6025f71dcae8abd7d655c1}{Circom\_Sizes}}\ \mbox{\hyperlink{class_circom___calc_wit_a3386d0180ac2db9dc6190afd33d54402}{getSubComponentSizes}}(\textcolor{keywordtype}{int}\ cIdx,\ \mbox{\hyperlink{circom_8hpp_ad758b7a5c3f18ed79d2fcd23d9f16357}{u64}}\ hash);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_circom___calc_wit_ac70c64a27d18c9138031f0eb067bd11a}{getSignalOffset}}(\textcolor{keywordtype}{int}\ cIdx,\ \mbox{\hyperlink{circom_8hpp_ad758b7a5c3f18ed79d2fcd23d9f16357}{u64}}\ hash);}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{circom_8hpp_a33af19ecfe6025f71dcae8abd7d655c1}{Circom\_Sizes}}\ \mbox{\hyperlink{class_circom___calc_wit_ab61d609d558d61b904b7ff646a0b3fcd}{getSignalSizes}}(\textcolor{keywordtype}{int}\ cIdx,\ \mbox{\hyperlink{circom_8hpp_ad758b7a5c3f18ed79d2fcd23d9f16357}{u64}}\ hash);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a42f3c509d8d8258168df8457aceb354b}{getSignal}}(\textcolor{keywordtype}{int}\ currentComponentIdx,\ \textcolor{keywordtype}{int}\ cIdx,\ \textcolor{keywordtype}{int}\ sIdx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value);}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a87c6786c88b2aa1d68a1141eceab6b64}{setSignal}}(\textcolor{keywordtype}{int}\ currentComponentIdx,\ \textcolor{keywordtype}{int}\ cIdx,\ \textcolor{keywordtype}{int}\ sIdx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value);}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a588a208440f346156c403c8631358421}{multiGetSignal}}(\textcolor{keywordtype}{int}\ currentComponentIdx,\ \textcolor{keywordtype}{int}\ cIdx,\ \textcolor{keywordtype}{int}\ sIdx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value,\ \textcolor{keywordtype}{int}\ n);}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_abae6bd9737a6937c65eb0a8174174f18}{checkConstraint}}(\textcolor{keywordtype}{int}\ currentComponentIdx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value1,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value2,\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *err);}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a276c78c02466a89c9fa0fa7e9d02865a}{checkAssert}}(\textcolor{keywordtype}{int}\ currentComponentIdx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value1,\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *err);}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a94b3496f3666c3dd3bbbb9642e4c8337}{log}}(\mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ value);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a8db49e762f96dacf592240e36b73452a}{finished}}(\textcolor{keywordtype}{int}\ cIdx);}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_aad4ee1b93767d3598f32640fc311b51a}{join}}();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{comment}{//\ Public\ functions}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a248b1dab98e071d4d0ea1c84f41a0dca}{setInput}}(\textcolor{keywordtype}{int}\ idx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ val)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_circom___calc_wit_a87c6786c88b2aa1d68a1141eceab6b64}{setSignal}}(0,\ 0,\ \mbox{\hyperlink{class_circom___calc_wit_a5524a0d941af7c2762c52ea6863b7000}{circuit}}-\/>wit2sig[idx],\ val);}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_afdddc5a842b26d1f1f456d9e62616976}{getWitness}}(\textcolor{keywordtype}{int}\ idx,\ \mbox{\hyperlink{fr_8h_a43b71ae47e16e25870c4b2014f5c2f56}{PFrElement}}\ val)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{fr_8h_a90d9d5a7c598940b6e315b0693cde5d7}{Fr\_copy}}(val,\ \&signalValues[\mbox{\hyperlink{class_circom___calc_wit_a5524a0d941af7c2762c52ea6863b7000}{circuit}}-\/>wit2sig[idx]]);}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a71713d7505f16834d2413de2ffb02559}{reset}}();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a1b70b954197093339c6c215bcb60d763}{calculateProve}}(\textcolor{keywordtype}{void}\ *wtns,\ \mbox{\hyperlink{calcwit_8hpp_ab701e3ac61a85b337ec5c1abaad6742d}{json}}\ \&input,\ std::function<\textcolor{keywordtype}{bool}()>\ \_isCanceledCB);}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_circom___calc_wit_a1b70b954197093339c6c215bcb60d763}{calculateProve}}(\textcolor{keywordtype}{void}\ *wtns,\ std::string\ \&input,\ std::function<\textcolor{keywordtype}{bool}()>\ \_isCanceledCB);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ CIRCOM\_CALCWIT\_H}}

\end{DoxyCode}
