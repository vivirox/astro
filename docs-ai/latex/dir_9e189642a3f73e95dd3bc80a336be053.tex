\doxysection{node\+\_\+modules/stable-\/hash Directory Reference}
\hypertarget{dir_9e189642a3f73e95dd3bc80a336be053}{}\label{dir_9e189642a3f73e95dd3bc80a336be053}\index{node\_modules/stable-\/hash Directory Reference@{node\_modules/stable-\/hash Directory Reference}}


\doxysubsection{Detailed Description}
A tiny and fast (481b \textsuperscript{\href{https://unpkg.com/stable-hash@0.0.3/dist/index.mjs}{\texttt{ unpkg}}}) lib for "{}stably hashing"{} a Java\+Script value. Originally created for \href{https://github.com/vercel/swr}{\texttt{ SWR}}.

It\textquotesingle{}s similar to {\ttfamily JSON.\+stringify(value)}, but\+:
\begin{DoxyEnumerate}
\item Supports any Java\+Script value (Big\+Int, NaN, Symbol, function, class, ...)
\item Sorts object keys (stable)
\item Supports circular objects
\end{DoxyEnumerate}\hypertarget{README.md_autotoc_md31193}{}\doxysubsection{\texorpdfstring{Use}{Use}}\label{README.md_autotoc_md31193}

\begin{DoxyCode}{0}
\DoxyCodeLine{yarn\ add\ stable-\/hash}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{import\ hash\ from\ 'stable-\/hash'}
\DoxyCodeLine{}
\DoxyCodeLine{hash(anyJavaScriptValueHere)\ //\ returns\ a\ string}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31194}{}\doxysubsection{\texorpdfstring{Examples}{Examples}}\label{README.md_autotoc_md31194}
\hypertarget{README.md_autotoc_md31195}{}\doxysubsubsection{\texorpdfstring{Primitive Value}{Primitive Value}}\label{README.md_autotoc_md31195}

\begin{DoxyCode}{0}
\DoxyCodeLine{hash(1)}
\DoxyCodeLine{hash('foo')}
\DoxyCodeLine{hash(true)}
\DoxyCodeLine{hash(undefined)}
\DoxyCodeLine{hash(null)}
\DoxyCodeLine{hash(NaN)}

\end{DoxyCode}


Big\+Int\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{hash(1)\ ===\ hash(1n)}
\DoxyCodeLine{hash(1)\ !==\ hash(2n)}

\end{DoxyCode}


Symbol\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{hash(Symbol.for('foo'))\ ===\ hash(Symbol.for('foo'))}
\DoxyCodeLine{hash(Symbol.for('foo'))\ ===\ hash(Symbol('foo'))}
\DoxyCodeLine{hash(Symbol('foo'))\ ===\ hash(Symbol('foo'))}
\DoxyCodeLine{hash(Symbol('foo'))\ !==\ hash(Symbol('bar'))}

\end{DoxyCode}


{\itshape Since Symbols cannot be serialized, stable-\/hash simply uses its description as the hash.}\hypertarget{README.md_autotoc_md31196}{}\doxysubsubsection{\texorpdfstring{Regex}{Regex}}\label{README.md_autotoc_md31196}

\begin{DoxyCode}{0}
\DoxyCodeLine{hash(/foo/)\ ===\ hash(/foo/)}
\DoxyCodeLine{hash(/foo/)\ !==\ hash(/bar/)}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31197}{}\doxysubsubsection{\texorpdfstring{Date}{Date}}\label{README.md_autotoc_md31197}

\begin{DoxyCode}{0}
\DoxyCodeLine{hash(new\ Date(1))\ ===\ hash(new\ Date(1))}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31198}{}\doxysubsubsection{\texorpdfstring{Array}{Array}}\label{README.md_autotoc_md31198}

\begin{DoxyCode}{0}
\DoxyCodeLine{hash([1,\ '2',\ [new\ Date(3)]])\ ===\ hash([1,\ '2',\ [new\ Date(3)]])}
\DoxyCodeLine{hash([1,\ 2])\ !==\ hash([2,\ 1])}

\end{DoxyCode}


Circular\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ foo\ =\ []}
\DoxyCodeLine{foo.push(foo)}
\DoxyCodeLine{hash(foo)\ ===\ hash(foo)}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31199}{}\doxysubsubsection{\texorpdfstring{Object}{Object}}\label{README.md_autotoc_md31199}

\begin{DoxyCode}{0}
\DoxyCodeLine{hash(\{\ foo:\ 'bar'\ \})\ ===\ hash(\{\ foo:\ 'bar'\ \})}
\DoxyCodeLine{hash(\{\ foo:\ \{\ bar:\ 1\ \}\ \})\ ===\ hash(\{\ foo:\ \{\ bar:\ 1\ \}\ \})}

\end{DoxyCode}


Stable\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{hash(\{\ a:\ 1,\ b:\ 2,\ c:\ 3\ \})\ ===\ hash(\{\ c:\ 3,\ b:\ 2,\ a:\ 1\ \})}

\end{DoxyCode}


Circular\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ foo\ =\ \{\}}
\DoxyCodeLine{foo.foo\ =\ foo}
\DoxyCodeLine{hash(foo)\ ===\ hash(foo)}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31200}{}\doxysubsubsection{\texorpdfstring{Function, Class, Set, Map, Buffer...}{Function, Class, Set, Map, Buffer...}}\label{README.md_autotoc_md31200}
{\ttfamily stable-\/hash} guarantees reference consistency ({\ttfamily ===}) for objects that the constructor isn\textquotesingle{}t {\ttfamily Object}.


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ foo\ =\ ()\ =>\ \{\}}
\DoxyCodeLine{hash(foo)\ ===\ hash(foo)}
\DoxyCodeLine{hash(foo)\ !==\ hash(()\ =>\ \{\})}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{class\ Foo\ \{\}}
\DoxyCodeLine{hash(Foo)\ ===\ hash(Foo)}
\DoxyCodeLine{hash(Foo)\ !==\ hash(class\ \{\})}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{const\ foo\ =\ new\ Set([1])}
\DoxyCodeLine{hash(foo)\ ===\ hash(foo)}
\DoxyCodeLine{hash(foo)\ !==\ hash(new\ Set([1]))}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md31201}{}\doxysubsection{\texorpdfstring{Notes}{Notes}}\label{README.md_autotoc_md31201}
This function does something similar to {\ttfamily JSON.\+stringify}, but more than it. It doesn\textquotesingle{}t generate a secure checksum, which usually has a fixed length and is hard to be reversed. With {\ttfamily stable-\/hash} it\textquotesingle{}s still possible to get the original data. Also, the output might include any charaters, not just alphabets and numbers like other hash algorithms. So\+:


\begin{DoxyItemize}
\item Use another encoding layer on top of it if you want to display the output.
\item Use another crypto layer on top of it if you want to have a secure and fixed length hash.
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ crypto\ from\ 'crypto'}
\DoxyCodeLine{import\ hash\ from\ 'stable-\/hash'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ weakHash\ =\ hash(anyJavaScriptValueHere)}
\DoxyCodeLine{const\ encodedHash\ =\ Buffer.from(weakHash).toString('base64')}
\DoxyCodeLine{const\ safeHash\ =\ crypto.createHash('MD5').update(weakHash).digest('hex')}

\end{DoxyCode}


Also, the consistency of this lib is sometimes guaranteed by the singularity of the Weak\+Map instance. So it might not generate the consistent results when running in different runtimes, e.\+g. server/client or parent/worker scenarios.\hypertarget{README.md_autotoc_md31202}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md31202}
Created by Shu Ding. Released under the MIT License. 