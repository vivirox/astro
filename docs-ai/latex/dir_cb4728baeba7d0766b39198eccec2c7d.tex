\doxysection{node\+\_\+modules/astro-\/loader-\/github-\/prs Directory Reference}
\hypertarget{dir_cb4728baeba7d0766b39198eccec2c7d}{}\label{dir_cb4728baeba7d0766b39198eccec2c7d}\index{node\_modules/astro-\/loader-\/github-\/prs Directory Reference@{node\_modules/astro-\/loader-\/github-\/prs Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://www.npmjs.com/package/astro-loader-github-prs}{\texttt{ }} \href{https://www.jsdocs.io/package/astro-loader-github-prs}{\texttt{ }} \href{https://npmjs.com/package/astro-loader-github-prs}{\texttt{ }} \href{https://astro-antfustyle-theme.vercel.app/prs/}{\texttt{ }}

This package provides a Git\+Hub PRs loader for Astro, fetching pull requests with a search query for use in Astro projects.\hypertarget{README.md_autotoc_md8315}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md8315}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ -\/D\ astro-\/loader-\/github-\/prs}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md8316}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md8316}
To use the Astro loader, ensure Astro version {\ttfamily \texorpdfstring{$^\wedge$}{\string^}4.14.\+0 \texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|} \texorpdfstring{$^\wedge$}{\string^}5.0.\+0}. For {\ttfamily \texorpdfstring{$^\wedge$}{\string^}4.14.\+0}, enable the \href{https://docs.astro.build/en/reference/configuration-reference/\#experimentalcontentlayer}{\texttt{ experimental content layer}} in {\ttfamily astro.\+config.\+ts}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{export\ default\ defineConfig(\{}
\DoxyCodeLine{\ \ experimental:\ \{}
\DoxyCodeLine{\ \ \ \ contentLayer:\ true,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\})}

\end{DoxyCode}


In {\ttfamily src/content/config.\+ts} (for {\ttfamily \texorpdfstring{$^\wedge$}{\string^}4.14.\+0}) or {\ttfamily src/content.\+config.\+ts} (for {\ttfamily \texorpdfstring{$^\wedge$}{\string^}5.0.\+0}), import and configure the Git\+Hub PRs loader to define a new content collection\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ defineCollection\ \}\ from\ "{}astro:content"{}}
\DoxyCodeLine{import\ \{\ githubPrsLoader\ \}\ from\ "{}astro-\/loader-\/github-\/prs"{}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ githubPrs\ =\ defineCollection(\{}
\DoxyCodeLine{\ \ loader:\ githubPrsLoader(\{}
\DoxyCodeLine{\ \ \ \ search:\ 'author:username\ created:>=2024-\/10-\/01',}
\DoxyCodeLine{\ \ \}),}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{export\ const\ collections\ =\ \{\ githubPrs\ \}}

\end{DoxyCode}


\href{https://docs.astro.build/en/guides/content-collections/\#querying-collections}{\texttt{ Query the content collection}} like any other Astro content collection to render the loaded Git\+Hub PRs\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/-\/}
\DoxyCodeLine{import\ \{\ getCollection\ \}\ from\ "{}astro:content"{}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ prs\ =\ await\ getCollection("{}githubPrs"{})}
\DoxyCodeLine{-\/-\/-\/}
\DoxyCodeLine{}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ prs.map(async\ (pr)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ const\ \{\ Content\ \}\ =\ await\ render(pr)}
\DoxyCodeLine{\ \ \ \ return\ (}
\DoxyCodeLine{\ \ \ \ \ \ <div>}
\DoxyCodeLine{\ \ \ \ \ \ \ \ <a\ href=\{pr.data.url\}>}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \{pr.data.repository.nameWithOwner\}\ -\/\ \#\{pr.data.number\}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ </a>}
\DoxyCodeLine{\ \ \ \ \ \ \ \ <p\ set:html=\{pr.data.titleHTML\}\ />}
\DoxyCodeLine{\ \ \ \ \ \ \ \ <Content\ />}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{/*\ <div\ set:html=\{pr.data.bodyHTML\}></div>\ */\}}
\DoxyCodeLine{\ \ \ \ \ \ </div>}
\DoxyCodeLine{\ \ \ \ )}
\DoxyCodeLine{\ \ \})}
\DoxyCodeLine{\}}

\end{DoxyCode}


To update the data, trigger a site rebuild (e.\+g., using a third-\/party cron job service), as \href{https://docs.astro.build/en/reference/content-loader-reference/\#object-loaders}{\texttt{ the loader fetches data only at build time}}.\hypertarget{README.md_autotoc_md8317}{}\doxysubsection{\texorpdfstring{Configuration}{Configuration}}\label{README.md_autotoc_md8317}
The loader fetches PRs via the Git\+Hub Graph\+QL API with a search string, requiring a repo-\/scoped PAT, and \href{https://docs.github.com/en/graphql/reference/objects\#searchresultitemconnection}{\texttt{ returns up to 1,000 results}}. Options include\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Option (\texorpdfstring{$\ast$}{*} required)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Type (default)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Option (\texorpdfstring{$\ast$}{*} required)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Type (default)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-5}
\endhead
{\ttfamily search}\texorpdfstring{$\ast$}{*}   &{\ttfamily string}   &The search string for querying pull requests on Git\+Hub. This string will be concatenated with {\ttfamily type\+:pr} to form the complete search query. See \href{https://docs.github.com/en/search-github/searching-on-github/searching-issues-and-pull-requests}{\texttt{ how to search pull requests}}. For examples\+:~\newline
`\textquotesingle{}author\+:xxx created\+:\texorpdfstring{$>$}{>}=2024-\/01-\/01'{\ttfamily \+: matches prs written by xxx that were created after 2024.\texorpdfstring{$<$}{<}br\texorpdfstring{$>$}{>}}\textquotesingle{}author\+:xxx -\/user\+:xxx\textquotesingle{}{\ttfamily \+: matches prs written by xxx, but not to their own repositories. \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Even"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}months\+Back{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}number`   &The number of recent months to load pull requests, including the current month. The loader automatically converts this to a date for the \textquotesingle{}created' qualifier in the search query. If the `\textquotesingle{}created'{\ttfamily qualifier is defined in search option, it will override this value. \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Odd"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}github\+Token{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}string{\ttfamily (Defaults to the}GITHUB\+\_\+\+TOKEN{\ttfamily environment variable) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} A Git\+Hub PAT with at least}repo{\ttfamily scope permissions. Defaults to the}GITHUB\+\_\+\+TOKEN{\ttfamily environment variable. \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+If configured here, keep confidential and avoid public exposure.\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} See \mbox{[}how to create one\mbox{]}(\href{https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens}{\texttt{ https\+://docs.\+github.\+com/en/authentication/keeping-\/your-\/account-\/and-\/data-\/secure/managing-\/your-\/personal-\/access-\/tokens}}\#creating-\/a-\/personal-\/access-\/token-\/classic) and \mbox{[}configure env vars in an Astro project\mbox{]}(\href{https://docs.astro.build/en/guides/environment-variables/}{\texttt{ https\+://docs.\+astro.\+build/en/guides/environment-\/variables/}}\#setting-\/environment-\/variables). \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Even"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}clear\+Store{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}boolean{\ttfamily (default\+:}false\`{})   &Whether to clear the \href{https://docs.astro.build/en/reference/content-loader-reference/\#store}{\texttt{ store}} scoped to the collection before storing newly loaded data.   \\\cline{1-5}
\end{longtabu}
\hypertarget{README.md_autotoc_md8318}{}\doxysubsection{\texorpdfstring{Schema}{Schema}}\label{README.md_autotoc_md8318}
The Zod schema for the loaded collection entries is defined as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ GithubPrSchema\ =\ z.object(\{}
\DoxyCodeLine{\ \ id:\ z.string(),}
\DoxyCodeLine{\ \ url:\ z.string(),}
\DoxyCodeLine{\ \ title:\ z.string(),}
\DoxyCodeLine{\ \ titleHTML:\ z.string(),}
\DoxyCodeLine{\ \ number:\ z.number(),}
\DoxyCodeLine{\ \ state:\ z.enum(['CLOSED',\ 'MERGED',\ 'OPEN']),}
\DoxyCodeLine{\ \ isDraft:\ z.boolean(),}
\DoxyCodeLine{\ \ body:\ z.string(),}
\DoxyCodeLine{\ \ bodyHTML:\ z.string(),}
\DoxyCodeLine{\ \ bodyText:\ z.string(),}
\DoxyCodeLine{\ \ author:\ z.object(\{}
\DoxyCodeLine{\ \ \ \ login:\ z.string(),}
\DoxyCodeLine{\ \ \ \ url:\ z.string(),}
\DoxyCodeLine{\ \ \ \ avatarUrl:\ z.string(),}
\DoxyCodeLine{\ \ \}),}
\DoxyCodeLine{\ \ repository:\ z.object(\{}
\DoxyCodeLine{\ \ \ \ name:\ z.string(),}
\DoxyCodeLine{\ \ \ \ nameWithOwner:\ z.string(),}
\DoxyCodeLine{\ \ \ \ url:\ z.string(),}
\DoxyCodeLine{\ \ \ \ stargazerCount:\ z.number(),}
\DoxyCodeLine{\ \ \ \ isInOrganization:\ z.boolean(),}
\DoxyCodeLine{\ \ \ \ owner:\ z.object(\{}
\DoxyCodeLine{\ \ \ \ \ \ login:\ z.string(),}
\DoxyCodeLine{\ \ \ \ \ \ url:\ z.string(),}
\DoxyCodeLine{\ \ \ \ \ \ avatarUrl:\ z.string(),}
\DoxyCodeLine{\ \ \ \ \}),}
\DoxyCodeLine{\ \ \}),}
\DoxyCodeLine{\ \ createdAt:\ z.string(),}
\DoxyCodeLine{\ \ mergedAt:\ z.string(),}
\DoxyCodeLine{\})}

\end{DoxyCode}


Astro automatically applies these schemas to generate Type\+Script interfaces, enabling autocompletion and type-\/checking for collection queries. If you \href{https://docs.astro.build/en/guides/content-collections/\#defining-the-collection-schema}{\texttt{ customize the collection schema}}, ensure compatibility with the loader\textquotesingle{}s built-\/in Zod schema to prevent errors. For additional fields, consider opening an issue.\hypertarget{README.md_autotoc_md8319}{}\doxysubsection{\texorpdfstring{Changelog}{Changelog}}\label{README.md_autotoc_md8319}
See \href{https://github.com/lin-stephanie/astro-loaders/blob/main/packages/astro-loader-github-prs/CHANGELOG.md}{\texttt{ CHANGELOG.\+md}} for the change history of this loader.\hypertarget{README.md_autotoc_md8320}{}\doxysubsection{\texorpdfstring{Contribution}{Contribution}}\label{README.md_autotoc_md8320}
If you see any errors or room for improvement, feel free to open an \href{https://github.com/lin-stephanie/astro-loaders/issues}{\texttt{ issues}} or \href{https://github.com/lin-stephanie/astro-loaders/pulls}{\texttt{ pull request}} . Thank you in advance for contributing! ❤️ 