\chapter{Disaster Recovery Plan}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery}{}\label{md_src_2docs_2deployment_2disaster-recovery}\index{Disaster Recovery Plan@{Disaster Recovery Plan}}
\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37139}%
\Hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37139}%
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37140}{}\doxysection{\texorpdfstring{Overview}{Overview}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37140}
This document outlines the disaster recovery procedures for the Gradiant Astro application. It provides step-\/by-\/step instructions for recovering from various types of failures and outages.\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37141}{}\doxysection{\texorpdfstring{Quick Response Guide}{Quick Response Guide}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37141}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37142}{}\doxysubsection{\texorpdfstring{Site Down / Inaccessible}{Site Down / Inaccessible}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37142}

\begin{DoxyEnumerate}
\item {\bfseries{Check Monitoring Alerts}}
\begin{DoxyItemize}
\item Review Slack alerts for specific error details
\item Check Git\+Hub Actions monitoring workflow results
\end{DoxyItemize}
\item {\bfseries{Verify Deployment Status}}
\begin{DoxyItemize}
\item Check Cloudflare Pages deployment status
\item Verify DNS resolution is working properly
\end{DoxyItemize}
\item {\bfseries{Initial Recovery Steps}}
\begin{DoxyItemize}
\item If the issue is with the latest deployment, initiate a rollback\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Trigger\ rollback\ workflow\ in\ GitHub\ Actions}
\DoxyCodeLine{gh\ workflow\ run\ rollback.yml\ -\/f\ environment=production}

\end{DoxyCode}

\item If DNS issue, check Cloudflare DNS settings
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37143}{}\doxysubsection{\texorpdfstring{Database Issues}{Database Issues}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37143}

\begin{DoxyEnumerate}
\item {\bfseries{Check Database Connection}}
\begin{DoxyItemize}
\item Verify Supabase status at \href{https://status.supabase.com}{\texttt{ Supabase Status}}
\item Run health check against the API endpoint manually\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{curl\ -\/v\ https://app.gradiantastro.com/api/health}

\end{DoxyCode}

\end{DoxyItemize}
\item {\bfseries{Database Recovery Steps}}
\begin{DoxyItemize}
\item If database corruption is suspected, restore from the latest backup\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ List\ available\ backups}
\DoxyCodeLine{aws\ s3\ ls\ s3://[BACKUP\_BUCKET]/database-\/backups/\ -\/-\/profile\ gradiant}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Download\ the\ latest\ backup}
\DoxyCodeLine{aws\ s3\ cp\ s3://[BACKUP\_BUCKET]/database-\/backups/[LATEST\_BACKUP]\ ./backup.sql.gz\ -\/-\/profile\ gradiant}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Decompress\ the\ backup}
\DoxyCodeLine{gunzip\ backup.sql.gz}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Restore\ the\ database}
\DoxyCodeLine{PGPASSWORD=[PASSWORD]\ psql\ -\/h\ [HOST]\ -\/U\ [USER]\ -\/d\ [DATABASE]\ <\ backup.sql}

\end{DoxyCode}

\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37144}{}\doxysubsection{\texorpdfstring{API Issues}{API Issues}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37144}

\begin{DoxyEnumerate}
\item {\bfseries{Check API Health}}
\begin{DoxyItemize}
\item Verify API routes are responding correctly\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{curl\ -\/v\ https://app.gradiantastro.com/api/health}

\end{DoxyCode}

\end{DoxyItemize}
\item {\bfseries{API Recovery Steps}}
\begin{DoxyItemize}
\item Check application logs for specific error details
\item Verify environment variables are correctly set
\item If necessary, redeploy the latest stable version
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37145}{}\doxysection{\texorpdfstring{Backup and Restore Procedures}{Backup and Restore Procedures}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37145}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37146}{}\doxysubsection{\texorpdfstring{Database Backups}{Database Backups}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37146}
Backups are automatically created every 6 hours and stored in AWS S3. The backup workflow\+:


\begin{DoxyEnumerate}
\item Creates a full Postgre\+SQL dump of the Supabase database
\item Compresses the backup file with gzip
\item Uploads to S3 with proper encryption
\item Maintains the last 20 backups with rotation
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37147}{}\doxysubsection{\texorpdfstring{Manual Backup Procedure}{Manual Backup Procedure}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37147}
If an immediate backup is needed\+:


\begin{DoxyEnumerate}
\item Trigger the backup workflow manually\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{gh\ workflow\ run\ backup.yml}

\end{DoxyCode}

\item Or create a manual backup\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Set\ environment\ variables}
\DoxyCodeLine{export\ PGPASSWORD=[PASSWORD]}
\DoxyCodeLine{export\ TIMESTAMP=\$(date\ +\%Y\%m\%d\_\%H\%M\%S)}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Create\ backup}
\DoxyCodeLine{pg\_dump\ -\/h\ [HOST]\ -\/U\ [USER]\ -\/d\ [DATABASE]\ -\/F\ p\ >\ supabase\_backup\_\$\{TIMESTAMP\}.sql}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Compress}
\DoxyCodeLine{gzip\ supabase\_backup\_\$\{TIMESTAMP\}.sql}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Upload\ to\ S3}
\DoxyCodeLine{aws\ s3\ cp\ supabase\_backup\_\$\{TIMESTAMP\}.sql.gz\ s3://[BACKUP\_BUCKET]/database-\/backups/\ -\/-\/profile\ gradiant}

\end{DoxyCode}

\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37148}{}\doxysubsection{\texorpdfstring{Restore Procedure}{Restore Procedure}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37148}
To restore a database from backup\+:


\begin{DoxyEnumerate}
\item Identify the backup to restore\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{aws\ s3\ ls\ s3://[BACKUP\_BUCKET]/database-\/backups/\ -\/-\/profile\ gradiant}

\end{DoxyCode}

\item Download and restore\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Download}
\DoxyCodeLine{aws\ s3\ cp\ s3://[BACKUP\_BUCKET]/database-\/backups/[BACKUP\_FILENAME]\ ./\ -\/-\/profile\ gradiant}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Decompress}
\DoxyCodeLine{gunzip\ [BACKUP\_FILENAME]}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Restore}
\DoxyCodeLine{PGPASSWORD=[PASSWORD]\ psql\ -\/h\ [HOST]\ -\/U\ [USER]\ -\/d\ [DATABASE]\ <\ [BACKUP\_SQL\_FILE]}

\end{DoxyCode}

\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37149}{}\doxysection{\texorpdfstring{Deployment Rollback}{Deployment Rollback}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37149}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37150}{}\doxysubsection{\texorpdfstring{Automated Rollback}{Automated Rollback}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37150}
The system supports automated rollbacks through Git\+Hub Actions\+:


\begin{DoxyEnumerate}
\item Navigate to Git\+Hub Actions tab in the repository
\item Select the "{}\+Rollback Deployment"{} workflow
\item Click "{}\+Run workflow"{}
\item Select environment (production or staging)
\item Optionally specify a specific deployment tag to roll back to
\item Click "{}\+Run workflow"{}
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37151}{}\doxysubsection{\texorpdfstring{Manual Rollback}{Manual Rollback}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37151}
If Git\+Hub Actions is unavailable\+:


\begin{DoxyEnumerate}
\item Check out the repository locally
\item View available deployment tags\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{git\ fetch\ -\/-\/tags}
\DoxyCodeLine{git\ tag\ -\/l\ "{}production-\/*"{}\ -\/-\/sort=-\/committerdate}

\end{DoxyCode}

\item Check out the last stable deployment\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{git\ checkout\ [TAG\_NAME]}

\end{DoxyCode}

\item Build and deploy manually\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Install\ dependencies}
\DoxyCodeLine{pnpm\ install}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Build}
\DoxyCodeLine{NODE\_ENV=production\ pnpm\ build}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Deploy\ using\ Wrangler\ CLI}
\DoxyCodeLine{npx\ wrangler\ pages\ deploy\ dist\ -\/-\/project-\/name=gradiant-\/astro\ -\/-\/branch=main}

\end{DoxyCode}

\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37152}{}\doxysection{\texorpdfstring{Incident Response Protocol}{Incident Response Protocol}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37152}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37153}{}\doxysubsection{\texorpdfstring{Severity Levels}{Severity Levels}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37153}

\begin{DoxyItemize}
\item {\bfseries{Critical (P0)}}\+: Complete service outage, data breach
\item {\bfseries{Major (P1)}}\+: Partial service outage, major feature unavailable
\item {\bfseries{Minor (P2)}}\+: Non-\/critical feature unavailable, performance degradation
\item {\bfseries{Low (P3)}}\+: Cosmetic issues, minor bugs
\end{DoxyItemize}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37154}{}\doxysubsection{\texorpdfstring{Response Procedures}{Response Procedures}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37154}

\begin{DoxyEnumerate}
\item {\bfseries{Identification}}
\begin{DoxyItemize}
\item Determine severity level
\item Document initial findings
\item Notify appropriate team members
\end{DoxyItemize}
\item {\bfseries{Containment}}
\begin{DoxyItemize}
\item Implement immediate mitigation (e.\+g., rollback)
\item Isolate affected components
\item Prevent further damage
\end{DoxyItemize}
\item {\bfseries{Eradication}}
\begin{DoxyItemize}
\item Identify and fix the root cause
\item Deploy and test fixes
\item Verify security of all components
\end{DoxyItemize}
\item {\bfseries{Recovery}}
\begin{DoxyItemize}
\item Restore service to normal operation
\item Verify data integrity
\item Monitor for any recurring issues
\end{DoxyItemize}
\item {\bfseries{Post-\/\+Incident}}
\begin{DoxyItemize}
\item Conduct thorough analysis
\item Document lessons learned
\item Implement preventative measures
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37155}{}\doxysection{\texorpdfstring{Contact Information}{Contact Information}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37155}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37156}{}\doxysubsection{\texorpdfstring{Primary Contacts}{Primary Contacts}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37156}

\begin{DoxyItemize}
\item {\bfseries{Dev\+Ops Lead}}\+: \mbox{[}Name\mbox{]} -\/ \mbox{[}Phone\mbox{]} -\/ \mbox{[}Email\mbox{]}
\item {\bfseries{Backend Lead}}\+: \mbox{[}Name\mbox{]} -\/ \mbox{[}Phone\mbox{]} -\/ \mbox{[}Email\mbox{]}
\item {\bfseries{Frontend Lead}}\+: \mbox{[}Name\mbox{]} -\/ \mbox{[}Phone\mbox{]} -\/ \mbox{[}Email\mbox{]}
\item {\bfseries{Security Lead}}\+: \mbox{[}Name\mbox{]} -\/ \mbox{[}Phone\mbox{]} -\/ \mbox{[}Email\mbox{]}
\end{DoxyItemize}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37157}{}\doxysubsection{\texorpdfstring{External Services}{External Services}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37157}

\begin{DoxyItemize}
\item {\bfseries{Cloudflare Support}}\+: \href{https://dash.cloudflare.com/support}{\texttt{ Support Dashboard}}
\item {\bfseries{Supabase Support}}\+: \href{https://supabase.com/support}{\texttt{ Support Portal}}
\item {\bfseries{AWS Support}}\+: \href{https://console.aws.amazon.com/support}{\texttt{ Support Center}}
\end{DoxyItemize}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37158}{}\doxysection{\texorpdfstring{Emergency Access Procedures}{Emergency Access Procedures}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37158}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37159}{}\doxysubsection{\texorpdfstring{Emergency Access to Production}{Emergency Access to Production}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37159}
If emergency access to production is required\+:


\begin{DoxyEnumerate}
\item Request temporary credentials from the Dev\+Ops lead
\item All emergency access is logged and audited
\item Credentials are revoked after the incident
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37160}{}\doxysubsection{\texorpdfstring{Break Glass Procedure}{Break Glass Procedure}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37160}
In case primary access methods are unavailable\+:


\begin{DoxyEnumerate}
\item Contact the Dev\+Ops and Security leads
\item Use emergency credentials stored in the company password manager
\item All "{}break glass"{} access is logged, audited, and requires post-\/incident review
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37161}{}\doxysection{\texorpdfstring{Recovery Testing}{Recovery Testing}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37161}
The disaster recovery plan should be tested quarterly\+:


\begin{DoxyEnumerate}
\item Schedule a disaster recovery drill
\item Simulate failures in controlled environments
\item Practice recovery procedures
\item Document results and improve procedures
\end{DoxyEnumerate}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37162}{}\doxysection{\texorpdfstring{Appendices}{Appendices}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37162}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37163}{}\doxysubsection{\texorpdfstring{Required Credentials}{Required Credentials}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37163}

\begin{DoxyItemize}
\item Git\+Hub repository access
\item AWS S3 access
\item Database credentials
\item Cloudflare access
\end{DoxyItemize}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37164}{}\doxysubsection{\texorpdfstring{Recovery Checklists}{Recovery Checklists}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37164}
\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37165}{}\doxysubsubsection{\texorpdfstring{Site Outage Checklist}{Site Outage Checklist}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37165}

\begin{DoxyItemize}
\item[\DoxyUnchecked] Verify monitoring alerts
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Check deployment status
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Examine application logs
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Test API endpoints
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Check database connectivity
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Verify third-\/party integrations
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Test user authentication
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Initiate rollback if necessary
\end{DoxyItemize}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37166}{}\doxysubsubsection{\texorpdfstring{Database Recovery Checklist}{Database Recovery Checklist}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37166}

\begin{DoxyItemize}
\item[\DoxyUnchecked] Identify corruption scope
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Select appropriate backup
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Verify backup integrity
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Restore to staging first if possible
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Verify restored data
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Update connection strings if necessary
\end{DoxyItemize}
\begin{DoxyItemize}
\item[\DoxyUnchecked] Monitor system after recovery
\end{DoxyItemize}\hypertarget{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37167}{}\doxysubsection{\texorpdfstring{Maintenance Window Procedures}{Maintenance Window Procedures}}\label{md_src_2docs_2deployment_2disaster-recovery_autotoc_md37167}
For planned maintenance\+:


\begin{DoxyEnumerate}
\item Schedule at least 48 hours in advance
\item Post notification to status page
\item Implement changes during low-\/traffic periods
\item Have rollback plan prepared
\item Verify all systems after maintenance 
\end{DoxyEnumerate}