\doxysection{node\+\_\+modules/diff Directory Reference}
\hypertarget{dir_a415a093b84f7b496cbd82ed565e6160}{}\label{dir_a415a093b84f7b496cbd82ed565e6160}\index{node\_modules/diff Directory Reference@{node\_modules/diff Directory Reference}}


\doxysubsection{Detailed Description}
\href{http://travis-ci.org/kpdecker/jsdiff}{\texttt{ }} \href{https://saucelabs.com/u/jsdiff}{\texttt{ }}

A Java\+Script text differencing implementation. Try it out in the {\bfseries{\href{https://kpdecker.github.io/jsdiff}{\texttt{ online demo}}}}.

Based on the algorithm proposed in \href{http://www.xmailserver.org/diff2.pdf}{\texttt{ "{}\+An O(\+ND) Difference Algorithm and its Variations"{} (Myers, 1986)}}.\hypertarget{README.md_autotoc_md11937}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md11937}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ diff\ -\/-\/save}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11938}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md11938}
Broadly, jsdiff\textquotesingle{}s diff functions all take an old text and a new text and perform three steps\+:


\begin{DoxyEnumerate}
\item Split both texts into arrays of "{}tokens"{}. What constitutes a token varies; in {\ttfamily diff\+Chars}, each character is a token, while in {\ttfamily diff\+Lines}, each line is a token.
\item Find the smallest set of single-\/token {\itshape insertions} and {\itshape deletions} needed to transform the first array of tokens into the second.

This step depends upon having some notion of a token from the old array being "{}equal"{} to one from the new array, and this notion of equality affects the results. Usually two tokens are equal if {\ttfamily ===} considers them equal, but some of the diff functions use an alternative notion of equality or have options to configure it. For instance, by default {\ttfamily diff\+Chars("{}\+Foo"{}, "{}\+FOOD"{})} will require two deletions ({\ttfamily o}, {\ttfamily o}) and three insertions ({\ttfamily O}, {\ttfamily O}, {\ttfamily D}), but {\ttfamily diff\+Chars("{}\+Foo"{}, "{}\+FOOD"{}, \{ignore\+Case\+: true\})} will require just one insertion (of a {\ttfamily D}), since {\ttfamily ignore\+Case} causes {\ttfamily o} and {\ttfamily O} to be considered equal.
\item Return an array representing the transformation computed in the previous step as a series of change objects. The array is ordered from the start of the input to the end, and each change object represents {\itshape inserting} one or more tokens, {\itshape deleting} one or more tokens, or {\itshape keeping} one or more tokens.
\end{DoxyEnumerate}\hypertarget{README.md_autotoc_md11939}{}\doxysubsubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md11939}

\begin{DoxyItemize}
\item {\ttfamily Diff.\+diff\+Chars(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ diffs two blocks of text, treating each character as a token.

Returns a list of change objects.

Options
\begin{DoxyItemize}
\item {\ttfamily ignore\+Case}\+: If {\ttfamily true}, the uppercase and lowercase forms of a character are considered equal. Defaults to {\ttfamily false}.
\end{DoxyItemize}
\item {\ttfamily Diff.\+diff\+Words(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ diffs two blocks of text, treating each word and each word separator (punctuation, newline, or run of whitespace) as a token.

(Whitespace-\/only tokens are automatically treated as equal to each other, so changes like changing a space to a newline or a run of multiple spaces will be ignored.)

Returns a list of change objects.

Options
\begin{DoxyItemize}
\item {\ttfamily ignore\+Case}\+: Same as in {\ttfamily diff\+Chars}. Defaults to false.
\end{DoxyItemize}
\item {\ttfamily Diff.\+diff\+Words\+With\+Space(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ same as {\ttfamily diff\+Words}, except whitespace-\/only tokens are not automatically considered equal, so e.\+g. changing a space to a tab is considered a change.
\item {\ttfamily Diff.\+diff\+Lines(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ diffs two blocks of text, treating each line as a token.

Options
\begin{DoxyItemize}
\item {\ttfamily ignore\+Whitespace}\+: {\ttfamily true} to strip all leading and trailing whitespace characters from each line before performing the diff. Defaults to {\ttfamily false}.
\item {\ttfamily strip\+Trailing\+Cr}\+: {\ttfamily true} to remove all trailing CR ({\ttfamily \textbackslash{}r}) characters before performing the diff. Defaults to {\ttfamily false}. This helps to get a useful diff when diffing UNIX text files against Windows text files.
\item {\ttfamily newline\+Is\+Token}\+: {\ttfamily true} to treat the newline character at the end of each line as its own token. This allows for changes to the newline structure to occur independently of the line content and to be treated as such. In general this is the more human friendly form of {\ttfamily diff\+Lines}; the default behavior with this option turned off is better suited for patches and other computer friendly output. Defaults to {\ttfamily false}.
\end{DoxyItemize}

Returns a list of change objects.
\item {\ttfamily Diff.\+diff\+Trimmed\+Lines(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ diffs two blocks of text, comparing line by line, after stripping leading and trailing whitespace. Equivalent to calling {\ttfamily diff\+Lines} with {\ttfamily ignore\+Whitespace\+: true}.

Options
\begin{DoxyItemize}
\item {\ttfamily strip\+Trailing\+Cr}\+: Same as in {\ttfamily diff\+Lines}. Defaults to {\ttfamily false}.
\item {\ttfamily newline\+Is\+Token}\+: Same as in {\ttfamily diff\+Lines}. Defaults to {\ttfamily false}.
\end{DoxyItemize}

Returns a list of change objects.
\item {\ttfamily Diff.\+diff\+Sentences(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ diffs two blocks of text, treating each sentence as a token.

Returns a list of change objects.
\item {\ttfamily Diff.\+diff\+Css(old\+Str, new\+Str\mbox{[}, options\mbox{]})} -\/ diffs two blocks of text, comparing CSS tokens.

Returns a list of change objects.
\item {\ttfamily Diff.\+diff\+Json(old\+Obj, new\+Obj\mbox{[}, options\mbox{]})} -\/ diffs two JSON-\/serializable objects by first serializing them to prettily-\/formatted JSON and then treating each line of the JSON as a token. Object properties are ordered alphabetically in the serialized JSON, so the order of properties in the objects being compared doesn\textquotesingle{}t affect the result.

Returns a list of change objects.

Options
\begin{DoxyItemize}
\item {\ttfamily stringify\+Replacer}\+: A custom replacer function. Operates similarly to the {\ttfamily replacer} parameter to \href{https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\#the_replacer_parameter}{\texttt{ {\ttfamily JSON.\+stringify()}}}, but must be a function.
\item {\ttfamily undefined\+Replacement}\+: A value to replace {\ttfamily undefined} with. Ignored if a {\ttfamily stringify\+Replacer} is provided.
\end{DoxyItemize}
\item {\ttfamily Diff.\+diff\+Arrays(old\+Arr, new\+Arr\mbox{[}, options\mbox{]})} -\/ diffs two arrays of tokens, comparing each item for strict equality (===).

Options
\begin{DoxyItemize}
\item {\ttfamily comparator}\+: {\ttfamily function(left, right)} for custom equality checks
\end{DoxyItemize}

Returns a list of change objects.
\item {\ttfamily Diff.\+create\+Two\+Files\+Patch(old\+File\+Name, new\+File\+Name, old\+Str, new\+Str\mbox{[}, old\+Header\mbox{[}, new\+Header\mbox{[}, options\mbox{]}\mbox{]}\mbox{]})} -\/ creates a unified diff patch by first computing a diff with {\ttfamily diff\+Lines} and then serializing it to unified diff format.

Parameters\+:
\begin{DoxyItemize}
\item {\ttfamily old\+File\+Name} \+: String to be output in the filename section of the patch for the removals
\item {\ttfamily new\+File\+Name} \+: String to be output in the filename section of the patch for the additions
\item {\ttfamily old\+Str} \+: Original string value
\item {\ttfamily new\+Str} \+: New string value
\item {\ttfamily old\+Header} \+: Optional additional information to include in the old file header. Default\+: {\ttfamily undefined}.
\item {\ttfamily new\+Header} \+: Optional additional information to include in the new file header. Default\+: {\ttfamily undefined}.
\item {\ttfamily options} \+: An object with options.
\begin{DoxyItemize}
\item {\ttfamily context} describes how many lines of context should be included. You can set this to {\ttfamily Number.\+MAX\+\_\+\+SAFE\+\_\+\+INTEGER} or {\ttfamily Infinity} to include the entire file content in one hunk.
\item {\ttfamily ignore\+Whitespace}\+: Same as in {\ttfamily diff\+Lines}. Defaults to {\ttfamily false}.
\item {\ttfamily strip\+Trailing\+Cr}\+: Same as in {\ttfamily diff\+Lines}. Defaults to {\ttfamily false}.
\item {\ttfamily newline\+Is\+Token}\+: Same as in {\ttfamily diff\+Lines}. Defaults to {\ttfamily false}.
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily Diff.\+create\+Patch(file\+Name, old\+Str, new\+Str\mbox{[}, old\+Header\mbox{[}, new\+Header\mbox{[}, options\mbox{]}\mbox{]}\mbox{]})} -\/ creates a unified diff patch.

Just like Diff.\+create\+Two\+Files\+Patch, but with old\+File\+Name being equal to new\+File\+Name.
\item {\ttfamily Diff.\+format\+Patch(patch)} -\/ creates a unified diff patch.

{\ttfamily patch} may be either a single structured patch object (as returned by {\ttfamily structured\+Patch}) or an array of them (as returned by {\ttfamily parse\+Patch}).
\item {\ttfamily Diff.\+structured\+Patch(old\+File\+Name, new\+File\+Name, old\+Str, new\+Str\mbox{[}, old\+Header\mbox{[}, new\+Header\mbox{[}, options\mbox{]}\mbox{]}\mbox{]})} -\/ returns an object with an array of hunk objects.

This method is similar to create\+Two\+Files\+Patch, but returns a data structure suitable for further processing. Parameters are the same as create\+Two\+Files\+Patch. The data structure returned may look like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ oldFileName:\ 'oldfile',\ newFileName:\ 'newfile',}
\DoxyCodeLine{\ \ oldHeader:\ 'header1',\ newHeader:\ 'header2',}
\DoxyCodeLine{\ \ hunks:\ [\{}
\DoxyCodeLine{\ \ \ \ oldStart:\ 1,\ oldLines:\ 3,\ newStart:\ 1,\ newLines:\ 3,}
\DoxyCodeLine{\ \ \ \ lines:\ ['\ line2',\ '\ line3',\ '-\/line4',\ '+line5',\ '\(\backslash\)\(\backslash\)\ No\ newline\ at\ end\ of\ file'],}
\DoxyCodeLine{\ \ \}]}
\DoxyCodeLine{\}}

\end{DoxyCode}

\item {\ttfamily Diff.\+apply\+Patch(source, patch\mbox{[}, options\mbox{]})} -\/ attempts to apply a unified diff patch.

If the patch was applied successfully, returns a string containing the patched text. If the patch could not be applied (because some hunks in the patch couldn\textquotesingle{}t be fitted to the text in {\ttfamily source}), returns false.

{\ttfamily patch} may be a string diff or the output from the {\ttfamily parse\+Patch} or {\ttfamily structured\+Patch} methods.

The optional {\ttfamily options} object may have the following keys\+:
\begin{DoxyItemize}
\item {\ttfamily fuzz\+Factor}\+: Number of lines that are allowed to differ before rejecting a patch. Defaults to 0.
\item {\ttfamily compare\+Line(line\+Number, line, operation, patch\+Content)}\+: Callback used to compare to given lines to determine if they should be considered equal when patching. Defaults to strict equality but may be overridden to provide fuzzier comparison. Should return false if the lines should be rejected.
\end{DoxyItemize}
\item {\ttfamily Diff.\+apply\+Patches(patch, options)} -\/ applies one or more patches.

{\ttfamily patch} may be either an array of structured patch objects, or a string representing a patch in unified diff format (which may patch one or more files).

This method will iterate over the contents of the patch and apply to data provided through callbacks. The general flow for each patch index is\+:
\begin{DoxyItemize}
\item {\ttfamily options.\+load\+File(index, callback)} is called. The caller should then load the contents of the file and then pass that to the {\ttfamily callback(err, data)} callback. Passing an {\ttfamily err} will terminate further patch execution.
\item {\ttfamily options.\+patched(index, content, callback)} is called once the patch has been applied. {\ttfamily content} will be the return value from {\ttfamily apply\+Patch}. When it\textquotesingle{}s ready, the caller should call {\ttfamily callback(err)} callback. Passing an {\ttfamily err} will terminate further patch execution.
\end{DoxyItemize}

Once all patches have been applied or an error occurs, the {\ttfamily options.\+complete(err)} callback is made.
\item {\ttfamily Diff.\+parse\+Patch(diff\+Str)} -\/ Parses a patch into structured data

Return a JSON object representation of the a patch, suitable for use with the {\ttfamily apply\+Patch} method. This parses to the same structure returned by {\ttfamily Diff.\+structured\+Patch}.
\item {\ttfamily Diff.\+reverse\+Patch(patch)} -\/ Returns a new structured patch which when applied will undo the original {\ttfamily patch}.

{\ttfamily patch} may be either a single structured patch object (as returned by {\ttfamily structured\+Patch}) or an array of them (as returned by {\ttfamily parse\+Patch}).
\item {\ttfamily Diff.\+convert\+Changes\+To\+XML(changes)} -\/ converts a list of change objects to a serialized XML format
\item {\ttfamily Diff.\+convert\+Changes\+To\+DMP(changes)} -\/ converts a list of change objects to the format returned by Google\textquotesingle{}s \href{https://github.com/google/diff-match-patch}{\texttt{ diff-\/match-\/patch}} library
\end{DoxyItemize}\hypertarget{README.md_autotoc_md11940}{}\doxysubsubsubsection{\texorpdfstring{Universal {\ttfamily options}}{Universal {\ttfamily options}}}\label{README.md_autotoc_md11940}
Certain options can be provided in the {\ttfamily options} object of {\itshape any} method that calculates a diff\+:


\begin{DoxyItemize}
\item {\ttfamily callback}\+: if provided, the diff will be computed in async mode to avoid blocking the event loop while the diff is calculated. The value of the {\ttfamily callback} option should be a function and will be passed the result of the diff as its second argument. The first argument will always be undefined. Only works with functions that return change objects, like {\ttfamily diff\+Lines}, not those that return patches, like {\ttfamily structured\+Patch} or {\ttfamily create\+Patch}.

(Note that if the ONLY option you want to provide is a callback, you can pass the callback function directly as the {\ttfamily options} parameter instead of passing an object with a {\ttfamily callback} property.)
\item {\ttfamily max\+Edit\+Length}\+: a number specifying the maximum edit distance to consider between the old and new texts. If the edit distance is higher than this, jsdiff will return {\ttfamily undefined} instead of a diff. You can use this to limit the computational cost of diffing large, very different texts by giving up early if the cost will be huge. Works for functions that return change objects and also for {\ttfamily structured\+Patch}, but not other patch-\/generation functions.
\item {\ttfamily timeout}\+: a number of milliseconds after which the diffing algorithm will abort and return {\ttfamily undefined}. Supported by the same functions as {\ttfamily max\+Edit\+Length}.
\end{DoxyItemize}\hypertarget{README.md_autotoc_md11941}{}\doxysubsubsection{\texorpdfstring{Defining custom diffing behaviors}{Defining custom diffing behaviors}}\label{README.md_autotoc_md11941}
If you need behavior a little different to what any of the text diffing functions above offer, you can roll your own by customizing both the tokenization behavior used and the notion of equality used to determine if two tokens are equal.

The simplest way to customize tokenization behavior is to simply tokenize the texts you want to diff yourself, with your own code, then pass the arrays of tokens to {\ttfamily diff\+Arrays}. For instance, if you wanted a semantically-\/aware diff of some code, you could try tokenizing it using a parser specific to the programming language the code is in, then passing the arrays of tokens to {\ttfamily diff\+Arrays}.

To customize the notion of token equality used, use the {\ttfamily comparator} option to {\ttfamily diff\+Arrays}.

For even more customisation of the diffing behavior, you can create a {\ttfamily new Diff.\+Diff()} object, overwrite its {\ttfamily cast\+Input}, {\ttfamily tokenize}, {\ttfamily remove\+Empty}, {\ttfamily equals}, and {\ttfamily join} properties with your own functions, then call its {\ttfamily diff(old\+String, new\+String\mbox{[}, options\mbox{]})} method. The methods you can overwrite are used as follows\+:


\begin{DoxyItemize}
\item {\ttfamily cast\+Input(value)}\+: used to transform the {\ttfamily old\+String} and {\ttfamily new\+String} before any other steps in the diffing algorithm happen. For instance, {\ttfamily diff\+Json} uses {\ttfamily cast\+Input} to serialize the objects being diffed to JSON. Defaults to a no-\/op.
\item {\ttfamily tokenize(value)}\+: used to convert each of {\ttfamily old\+String} and {\ttfamily new\+String} (after they\textquotesingle{}ve gone through {\ttfamily cast\+Input}) to an array of tokens. Defaults to returning `value.\+split('\textquotesingle{}){\ttfamily (returning an array of individual characters). \texorpdfstring{$\ast$}{*}}remove\+Empty(array){\ttfamily \+: called on the arrays of tokens returned by}tokenize{\ttfamily and can be used to modify them. Defaults to stripping out falsey tokens, such as empty strings.}diff\+Arrays{\ttfamily overrides this to simply return the}array{\ttfamily , which means that falsey values like empty strings can be handled like any other token by}diff\+Arrays{\ttfamily . \texorpdfstring{$\ast$}{*}}equals(left, right){\ttfamily \+: called to determine if two tokens (one from the old string, one from the new string) should be considered equal. Defaults to comparing them with}==={\ttfamily . \texorpdfstring{$\ast$}{*}}join(tokens){\ttfamily \+: gets called with an array of consecutive tokens that have either all been added, all been removed, or are all common. Needs to join them into a single value that can be used as the}value{\ttfamily property of the \mbox{[}change object\mbox{]}(\#change-\/objects) for these tokens. Defaults to simply returning}tokens.\+join(\textquotesingle{}\textquotesingle{})\`{}.
\end{DoxyItemize}\hypertarget{README.md_autotoc_md11942}{}\doxysubsubsection{\texorpdfstring{Change Objects}{Change Objects}}\label{README.md_autotoc_md11942}
Many of the methods above return change objects. These objects consist of the following fields\+:


\begin{DoxyItemize}
\item {\ttfamily value}\+: The concatenated content of all the tokens represented by this change object -\/ i.\+e. generally the text that is either added, deleted, or common, as a single string. In cases where tokens are considered common but are non-\/identical (e.\+g. because an option like {\ttfamily ignore\+Case} or a custom {\ttfamily comparator} was used), the value from the {\itshape new} string will be provided here.
\item {\ttfamily added}\+: True if the value was inserted into the new string
\item {\ttfamily removed}\+: True if the value was removed from the old string
\item {\ttfamily count}\+: How many tokens (e.\+g. chars for {\ttfamily diff\+Chars}, lines for {\ttfamily diff\+Lines}) the value in the change object consists of
\end{DoxyItemize}

(Change objects where {\ttfamily added} and {\ttfamily removed} are both falsey represent content that is common to the old and new strings.)

Note that some cases may omit a particular flag field. Comparison on the flag fields should always be done in a truthy or falsy manner.\hypertarget{README.md_autotoc_md11943}{}\doxysubsection{\texorpdfstring{Examples}{Examples}}\label{README.md_autotoc_md11943}
\hypertarget{README.md_autotoc_md11944}{}\doxysubsubsubsection{\texorpdfstring{Basic example in Node}{Basic example in Node}}\label{README.md_autotoc_md11944}

\begin{DoxyCode}{0}
\DoxyCodeLine{require('colors');}
\DoxyCodeLine{const\ Diff\ =\ require('diff');}
\DoxyCodeLine{}
\DoxyCodeLine{const\ one\ =\ 'beep\ boop';}
\DoxyCodeLine{const\ other\ =\ 'beep\ boob\ blah';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ diff\ =\ Diff.diffChars(one,\ other);}
\DoxyCodeLine{}
\DoxyCodeLine{diff.forEach((part)\ =>\ \{}
\DoxyCodeLine{\ \ //\ green\ for\ additions,\ red\ for\ deletions}
\DoxyCodeLine{\ \ let\ text\ =\ part.added\ ?\ part.value.bgGreen\ :}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ part.removed\ ?\ part.value.bgRed\ :}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ part.value;}
\DoxyCodeLine{\ \ process.stderr.write(text);}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{console.log();}

\end{DoxyCode}
 Running the above program should yield

\hypertarget{README.md_autotoc_md11945}{}\doxysubsubsubsection{\texorpdfstring{Basic example in a web page}{Basic example in a web page}}\label{README.md_autotoc_md11945}

\begin{DoxyCode}{0}
\DoxyCodeLine{<pre\ id="{}display"{}></pre>}
\DoxyCodeLine{<script\ src="{}diff.js"{}></script>}
\DoxyCodeLine{<script>}
\DoxyCodeLine{const\ one\ =\ 'beep\ boop',}
\DoxyCodeLine{\ \ \ \ other\ =\ 'beep\ boob\ blah',}
\DoxyCodeLine{\ \ \ \ color\ =\ '';}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{let\ span\ =\ null;}
\DoxyCodeLine{}
\DoxyCodeLine{const\ diff\ =\ Diff.diffChars(one,\ other),}
\DoxyCodeLine{\ \ \ \ display\ =\ document.getElementById('display'),}
\DoxyCodeLine{\ \ \ \ fragment\ =\ document.createDocumentFragment();}
\DoxyCodeLine{}
\DoxyCodeLine{diff.forEach((part)\ =>\ \{}
\DoxyCodeLine{\ \ //\ green\ for\ additions,\ red\ for\ deletions}
\DoxyCodeLine{\ \ //\ grey\ for\ common\ parts}
\DoxyCodeLine{\ \ const\ color\ =\ part.added\ ?\ 'green'\ :}
\DoxyCodeLine{\ \ \ \ part.removed\ ?\ 'red'\ :\ 'grey';}
\DoxyCodeLine{\ \ span\ =\ document.createElement('span');}
\DoxyCodeLine{\ \ span.style.color\ =\ color;}
\DoxyCodeLine{\ \ span.appendChild(document}
\DoxyCodeLine{\ \ \ \ .createTextNode(part.value));}
\DoxyCodeLine{\ \ fragment.appendChild(span);}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{display.appendChild(fragment);}
\DoxyCodeLine{</script>}

\end{DoxyCode}


Open the above .html file in a browser and you should see

\hypertarget{README.md_autotoc_md11946}{}\doxysubsubsubsection{\texorpdfstring{Example of generating a patch from Node}{Example of generating a patch from Node}}\label{README.md_autotoc_md11946}
The code below is roughly equivalent to the Unix command {\ttfamily diff -\/u file1.\+txt file2.\+txt \texorpdfstring{$>$}{>} mydiff.\+patch}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ Diff\ =\ require('diff');}
\DoxyCodeLine{const\ file1Contents\ =\ fs.readFileSync("{}file1.txt"{}).toString();}
\DoxyCodeLine{const\ file2Contents\ =\ fs.readFileSync("{}file2.txt"{}).toString();}
\DoxyCodeLine{const\ patch\ =\ Diff.createTwoFilesPatch("{}file1.txt"{},\ "{}file2.txt"{},\ file1Contents,\ file2Contents);}
\DoxyCodeLine{fs.writeFileSync("{}mydiff.patch"{},\ patch);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11947}{}\doxysubsubsubsection{\texorpdfstring{Examples of parsing and applying a patch from Node}{Examples of parsing and applying a patch from Node}}\label{README.md_autotoc_md11947}
\hypertarget{README.md_autotoc_md11948}{}\doxysubsubsubsubsection{\texorpdfstring{Applying a patch to a specified file}{Applying a patch to a specified file}}\label{README.md_autotoc_md11948}
The code below is roughly equivalent to the Unix command {\ttfamily patch file1.\+txt mydiff.\+patch}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ Diff\ =\ require('diff');}
\DoxyCodeLine{const\ file1Contents\ =\ fs.readFileSync("{}file1.txt"{}).toString();}
\DoxyCodeLine{const\ patch\ =\ fs.readFileSync("{}mydiff.patch"{}).toString();}
\DoxyCodeLine{const\ patchedFile\ =\ Diff.applyPatch(file1Contents,\ patch);}
\DoxyCodeLine{fs.writeFileSync("{}file1.txt"{},\ patchedFile);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11949}{}\doxysubsubsubsubsection{\texorpdfstring{Applying a multi-\/file patch to the files specified by the patch file itself}{Applying a multi-\/file patch to the files specified by the patch file itself}}\label{README.md_autotoc_md11949}
The code below is roughly equivalent to the Unix command {\ttfamily patch \texorpdfstring{$<$}{<} mydiff.\+patch}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ Diff\ =\ require('diff');}
\DoxyCodeLine{const\ patch\ =\ fs.readFileSync("{}mydiff.patch"{}).toString();}
\DoxyCodeLine{Diff.applyPatches(patch,\ \{}
\DoxyCodeLine{\ \ \ \ loadFile:\ (patch,\ callback)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ let\ fileContents;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ try\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ fileContents\ =\ fs.readFileSync(patch.oldFileName).toString();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ catch\ (e)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ callback(`No\ such\ file:\ \$\{patch.oldFileName\}`);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ return;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ callback(undefined,\ fileContents);}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ patched:\ (patch,\ patchedContent,\ callback)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (patchedContent\ ===\ false)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ callback(`Failed\ to\ apply\ patch\ to\ \$\{patch.oldFileName\}`)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ return;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ fs.writeFileSync(patch.oldFileName,\ patchedContent);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ callback();}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ complete:\ (err)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (err)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ console.log("{}Failed\ with\ error:"{},\ err);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md11950}{}\doxysubsection{\texorpdfstring{Compatibility}{Compatibility}}\label{README.md_autotoc_md11950}
\href{https://saucelabs.com/u/jsdiff}{\texttt{ }}

jsdiff supports all ES3 environments with some known issues on IE8 and below. Under these browsers some diff algorithms such as word diff and others may fail due to lack of support for capturing groups in the {\ttfamily split} operation.\hypertarget{README.md_autotoc_md11951}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md11951}
See \href{https://github.com/kpdecker/jsdiff/blob/master/LICENSE}{\texttt{ LICENSE}}.\hypertarget{README.md_autotoc_md11952}{}\doxysubsection{\texorpdfstring{Deviations from the published Myers diff algorithm}{Deviations from the published Myers diff algorithm}}\label{README.md_autotoc_md11952}
jsdiff deviates from the published algorithm in a couple of ways that don\textquotesingle{}t affect results but do affect performance\+:


\begin{DoxyItemize}
\item jsdiff keeps track of the diff for each diagonal using a linked list of change objects for each diagonal, rather than the historical array of furthest-\/reaching D-\/paths on each diagonal contemplated on page 8 of Myers\textquotesingle{}s paper.
\item jsdiff skips considering diagonals where the furthest-\/reaching D-\/path would go off the edge of the edit graph. This dramatically reduces the time cost (from quadratic to linear) in cases where the new text just appends or truncates content at the end of the old text. 
\end{DoxyItemize}