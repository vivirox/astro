\doxysection{node\+\_\+modules/v8-\/compile-\/cache-\/lib Directory Reference}
\hypertarget{dir_eeaf4357d2c98a00394f0b68c4817730}{}\label{dir_eeaf4357d2c98a00394f0b68c4817730}\index{node\_modules/v8-\/compile-\/cache-\/lib Directory Reference@{node\_modules/v8-\/compile-\/cache-\/lib Directory Reference}}


\doxysubsection{Detailed Description}
\begin{quote}
Fork of \href{https://www.npmjs.com/package/v8-compile-cache}{\texttt{ {\ttfamily v8-\/compile-\/cache}}} exposed as an API for programmatic usage in other libraries and tools. \end{quote}


\DoxyHorRuler{0}


\href{https://github.com/cspotcode/v8-compile-cache-lib/actions?query=workflow\%3A\%22Continuous+Integration\%22}{\texttt{ }}

{\ttfamily v8-\/compile-\/cache-\/lib} attaches a {\ttfamily require} hook to use \href{https://v8project.blogspot.com/2015/07/code-caching.html}{\texttt{ V8\textquotesingle{}s code cache}} to speed up instantiation time. The "{}code cache"{} is the work of parsing and compiling done by V8.

The ability to tap into V8 to produce/consume this cache was introduced in \href{https://nodejs.org/en/blog/release/v5.7.0/}{\texttt{ Node v5.\+7.\+0}}.\hypertarget{README.md_autotoc_md34670}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md34670}

\begin{DoxyEnumerate}
\item Add the dependency\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ install\ -\/-\/save\ v8-\/compile-\/cache-\/lib}

\end{DoxyCode}

\item Then, in your entry module add\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{require('v8-\/compile-\/cache-\/lib').install();}

\end{DoxyCode}

\end{DoxyEnumerate}

{\bfseries{{\ttfamily .install()} in Node \texorpdfstring{$<$}{<}5.\+7.\+0 is a noop â€“ but you need at least Node 4.\+0.\+0 to support the ES2015 syntax used by {\ttfamily v8-\/compile-\/cache-\/lib}.}}\hypertarget{README.md_autotoc_md34671}{}\doxysubsection{\texorpdfstring{Options}{Options}}\label{README.md_autotoc_md34671}
Set the environment variable {\ttfamily DISABLE\+\_\+\+V8\+\_\+\+COMPILE\+\_\+\+CACHE=1} to disable the cache.

Cache directory is defined by environment variable {\ttfamily V8\+\_\+\+COMPILE\+\_\+\+CACHE\+\_\+\+CACHE\+\_\+\+DIR} or defaults to {\ttfamily \texorpdfstring{$<$}{<}os.\+tmpdir()\texorpdfstring{$>$}{>}/v8-\/compile-\/cache-\/\texorpdfstring{$<$}{<}V8\+\_\+\+VERSION\texorpdfstring{$>$}{>}}.\hypertarget{README.md_autotoc_md34672}{}\doxysubsection{\texorpdfstring{Internals}{Internals}}\label{README.md_autotoc_md34672}
Cache files are suffixed {\ttfamily .BLOB} and {\ttfamily .MAP} corresponding to the entry module that required {\ttfamily v8-\/compile-\/cache-\/lib}. The cache is {\itshape entry module specific} because it is faster to load the entire code cache into memory at once, than it is to read it from disk on a file-\/by-\/file basis.\hypertarget{README.md_autotoc_md34673}{}\doxysubsection{\texorpdfstring{Benchmarks}{Benchmarks}}\label{README.md_autotoc_md34673}
See \href{https://github.com/cspotcode/v8-compile-cache-lib/tree/master/bench}{\texttt{ https\+://github.\+com/cspotcode/v8-\/compile-\/cache-\/lib/tree/master/bench}}.

{\bfseries{Load Times\+:}}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Module   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Without Cache   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ With Cache    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Module   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Without Cache   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ With Cache    }\\\cline{1-3}
\endhead
{\ttfamily babel-\/core}   &\PBS\raggedleft {\ttfamily 218ms}   &\PBS\raggedleft {\ttfamily 185ms}    \\\cline{1-3}
{\ttfamily yarn}   &\PBS\raggedleft {\ttfamily 153ms}   &\PBS\raggedleft {\ttfamily 113ms}    \\\cline{1-3}
{\ttfamily yarn} (bundled)   &\PBS\raggedleft {\ttfamily 228ms}   &\PBS\raggedleft {\ttfamily 105ms}   \\\cline{1-3}
\end{longtabu}


\+\_\+\texorpdfstring{$^\wedge$}{\string^} Includes the overhead of loading the cache itself.\+\_\+\hypertarget{README.md_autotoc_md34674}{}\doxysubsection{\texorpdfstring{Acknowledgements}{Acknowledgements}}\label{README.md_autotoc_md34674}

\begin{DoxyItemize}
\item The original \href{https://github.com/zertosh/v8-compile-cache}{\texttt{ {\ttfamily v8-\/compile-\/cache}}} from which this library is forked.
\item {\ttfamily File\+System\+Blob\+Store} and {\ttfamily Native\+Compile\+Cache} are based on Atom\textquotesingle{}s implementation of their v8 compile cache\+:
\begin{DoxyItemize}
\item \href{https://github.com/atom/atom/blob/b0d7a8a/src/file-system-blob-store.js}{\texttt{ https\+://github.\+com/atom/atom/blob/b0d7a8a/src/file-\/system-\/blob-\/store.\+js}}
\item \href{https://github.com/atom/atom/blob/b0d7a8a/src/native-compile-cache.js}{\texttt{ https\+://github.\+com/atom/atom/blob/b0d7a8a/src/native-\/compile-\/cache.\+js}}
\end{DoxyItemize}
\item {\ttfamily mkdirp\+Sync} is based on\+:
\begin{DoxyItemize}
\item \href{https://github.com/substack/node-mkdirp/blob/f2003bb/index.js\#L55-L98}{\texttt{ https\+://github.\+com/substack/node-\/mkdirp/blob/f2003bb/index.\+js\#\+L55-\/\+L98}} 
\end{DoxyItemize}
\end{DoxyItemize}