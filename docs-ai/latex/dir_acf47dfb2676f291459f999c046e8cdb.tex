\doxysection{node\+\_\+modules/astro-\/loader-\/bluesky-\/posts Directory Reference}
\hypertarget{dir_acf47dfb2676f291459f999c046e8cdb}{}\label{dir_acf47dfb2676f291459f999c046e8cdb}\index{node\_modules/astro-\/loader-\/bluesky-\/posts Directory Reference@{node\_modules/astro-\/loader-\/bluesky-\/posts Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://www.npmjs.com/package/astro-loader-bluesky-posts}{\texttt{ }} \href{https://www.jsdocs.io/package/astro-loader-bluesky-posts}{\texttt{ }} \href{https://npmjs.com/package/astro-loader-bluesky-posts}{\texttt{ }} \href{https://astro-antfustyle-theme.vercel.app/highlights/}{\texttt{ }}

This package provides a Bluesky posts loader for Astro, utilizing \href{https://atproto.com/specs/at-uri-scheme}{\texttt{ AT-\/\+URI}} to fetch posts for use in Astro projects. Features include customizable HTML rendering, optional threaded loading, and targeted fetching of author-\/specific replies.\hypertarget{README.md_autotoc_md8308}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md8308}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ -\/D\ astro-\/loader-\/bluesky-\/posts}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md8309}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md8309}
To use the Astro loader, ensure Astro version {\ttfamily \texorpdfstring{$^\wedge$}{\string^}4.14.\+0 \texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|} \texorpdfstring{$^\wedge$}{\string^}5.0.\+0}. For {\ttfamily \texorpdfstring{$^\wedge$}{\string^}4.14.\+0}, enable the \href{https://v4.docs.astro.build/en/reference/configuration-reference/\#experimentalcontentlayer}{\texttt{ experimental content layer}} in {\ttfamily astro.\+config.\+ts}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{export\ default\ defineConfig(\{}
\DoxyCodeLine{\ \ experimental:\ \{}
\DoxyCodeLine{\ \ \ \ contentLayer:\ true,}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\})}

\end{DoxyCode}


In {\ttfamily src/content/config.\+ts} (for {\ttfamily \texorpdfstring{$^\wedge$}{\string^}4.14.\+0}) or {\ttfamily src/content.\+config.\+ts} (for {\ttfamily \texorpdfstring{$^\wedge$}{\string^}5.0.\+0}), import and configure the loader to define a new content collection\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ defineCollection\ \}\ from\ "{}astro:content"{}}
\DoxyCodeLine{import\ \{\ BlueskyPostsLoader\ \}\ from\ "{}astro-\/loader-\/bluesky-\/posts"{}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ posts\ =\ defineCollection(\{}
\DoxyCodeLine{\ \ loader:\ BlueskyPostsLoader(\{}
\DoxyCodeLine{\ \ \ \ uris:\ [}
\DoxyCodeLine{\ \ \ \ \ \ 'https://bsky.app/profile/bsky.app/post/3l6oveex3ii2l'}
\DoxyCodeLine{\ \ \ \ \ \ //\ 'https://bsky.app/profile/did:plc:z72i7hdynmk6r22z27h6tvur/post/3l6oveex3ii2l'}
\DoxyCodeLine{\ \ \ \ \ \ //\ 'at://bsky.app/app.bsky.feed.post/3l6oveex3ii2l'}
\DoxyCodeLine{\ \ \ \ \ \ //\ 'at://did:plc:z72i7hdynmk6r22z27h6tvur/app.bsky.feed.post/3l6oveex3ii2l'}
\DoxyCodeLine{\ \ \ \ ],}
\DoxyCodeLine{\ \ \ \ //\ Check\ the\ configuration\ below}
\DoxyCodeLine{\ \ \}),}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{export\ const\ collections\ =\ \{\ posts\ \}}

\end{DoxyCode}


\href{https://docs.astro.build/en/guides/content-collections/\#querying-collections}{\texttt{ Query the content collection}} like any other Astro content collection to render the loaded posts\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/-\/}
\DoxyCodeLine{import\ \{\ getCollection\ \}\ from\ "{}astro:content"{}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ posts\ =\ await\ getCollection("{}posts"{})}
\DoxyCodeLine{//\ Check\ the\ entries'\ Zod\ schema\ for\ available\ fields\ below}
\DoxyCodeLine{-\/-\/-\/}
\DoxyCodeLine{}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ posts.map(async\ (post)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ const\ \{\ Content\ \}\ =\ await\ render(post)}
\DoxyCodeLine{\ \ \ \ return\ (}
\DoxyCodeLine{\ \ \ \ \ \ <section>}
\DoxyCodeLine{\ \ \ \ \ \ \ \ <Content\ />}
\DoxyCodeLine{\ \ \ \ \ \ \ \ <p>\{post.data.indexedAt\}</p>}
\DoxyCodeLine{\ \ \ \ \ \ </section>}
\DoxyCodeLine{\ \ \ \ )}
\DoxyCodeLine{\ \ \})}
\DoxyCodeLine{\}}

\end{DoxyCode}


To update the data, trigger a site rebuild, as \href{https://docs.astro.build/en/reference/content-loader-reference/\#object-loaders}{\texttt{ the loader fetches data only at build time}}.\hypertarget{README.md_autotoc_md8310}{}\doxysubsection{\texorpdfstring{Configuration}{Configuration}}\label{README.md_autotoc_md8310}
This loader retrieves posts via the Bluesky API \href{https://docs.bsky.app/docs/api/app-bsky-feed-get-posts}{\texttt{ {\ttfamily GET /xrpc/app.bsky.\+feed.\+get\+Posts}}} and \href{https://docs.bsky.app/docs/api/app-bsky-feed-get-post-thread}{\texttt{ {\ttfamily GET /xrpc/app.bsky.\+feed.\+get\+Post\+Thread}}}. Options include\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Option (\texorpdfstring{$\ast$}{*} required)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Type (default)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Option (\texorpdfstring{$\ast$}{*} required)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Type (default)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-3}
\endhead
{\ttfamily uris}\texorpdfstring{$\ast$}{*}   &{\ttfamily string\mbox{[}\mbox{]}}   &List of Bluesky post URLs or \href{https://atproto.com/specs/at-uri-scheme}{\texttt{ AT-\/\+URIs}}.    \\\cline{1-3}
{\ttfamily link\+Text\+Type}   &`\textquotesingle{}domain-\/path' $|$ \textquotesingle{}post-\/text\textquotesingle{}{\ttfamily (default\+:}\textquotesingle{}post-\/text\textquotesingle{}{\ttfamily ) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} The type of text to display for links when generating renderable HTML\+:\texorpdfstring{$<$}{<}br\texorpdfstring{$>$}{>}}\textquotesingle{}domain-\/path\textquotesingle{}{\ttfamily \+: Displays the link\textquotesingle{}s domain and path.\texorpdfstring{$<$}{<}br\texorpdfstring{$>$}{>}}\textquotesingle{}post-\/text\textquotesingle{}{\ttfamily \+: Uses the link text as shown in the tweet. \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Odd"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}newline\+Handling{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}\textquotesingle{}none\textquotesingle{} $|$ \textquotesingle{}break\textquotesingle{} $|$ \textquotesingle{}paragraph\textquotesingle{}{\ttfamily (default\+:}\textquotesingle{}none\textquotesingle{}{\ttfamily ) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} The way for processing}~\newline
{\ttfamily when generating renderable HTML\+:\texorpdfstring{$<$}{<}br\texorpdfstring{$>$}{>}}\textquotesingle{}none\textquotesingle{}{\ttfamily \+: Keep as is.\texorpdfstring{$<$}{<}br\texorpdfstring{$>$}{>}}\textquotesingle{}break\textquotesingle{}{\ttfamily \+: Replace consecutive}~\newline
{\ttfamily with}~\newline
{\ttfamily .\texorpdfstring{$<$}{<}br\texorpdfstring{$>$}{>}}\textquotesingle{}paragraph\textquotesingle{}{\ttfamily \+: Wrap paragraphs with}

{\ttfamily while removing standalone}~\newline
{\ttfamily . \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Even"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}fetch\+Thread{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}boolean{\ttfamily (default\+:}false{\ttfamily ) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} Whether to fetch the post\textquotesingle{}s thread including replies and parents. \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Odd"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}thread\+Depth{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} number (default\+:}1{\ttfamily ) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} The depth of the descendant post tree to fetch if fetching the thread. Specifies how many levels of reply depth should be included. \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Even"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}thread\+Parent\+Height{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} number (default\+:}1{\ttfamily ) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} The height of the ancestor post tree to fetch if fetching the thread. Specifies how many levels of parent posts should be included. \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}/tr\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}tr class="{}markdown\+Table\+Row\+Odd"{}\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}fetch\+Only\+Author\+Replies{\ttfamily \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>}}boolean{\ttfamily (default\+:}false{\ttfamily ) \textbackslash{}ilinebr \texorpdfstring{$<$}{<}/td\texorpdfstring{$>$}{>} \texorpdfstring{$<$}{<}td class="{}markdown\+Table\+Body\+None"{}\texorpdfstring{$>$}{>} Whether to fetch only the post author\textquotesingle{}s replies at the specified}thread\+Depth{\ttfamily . When}true{\ttfamily , it returns only the author\textquotesingle{}s replies as a flat array, ignoring}thread\+Parent\+Height{\ttfamily and}parent\`{}.   \\\cline{1-3}
\end{longtabu}
\hypertarget{README.md_autotoc_md8311}{}\doxysubsection{\texorpdfstring{Schema}{Schema}}\label{README.md_autotoc_md8311}
See the \href{https://github.com/lin-stephanie/astro-loaders/blob/main/packages/astro-loader-bluesky-posts/src/schema.ts}{\texttt{ source code}} for the Zod schema of loaded entries. Astro automatically applies this schema to generate Type\+Script interfaces, enabling autocompletion and type-\/checking for collection queries.

To \href{https://docs.astro.build/en/guides/content-collections/\#defining-the-collection-schema}{\texttt{ customize the schema}}, ensure compatibility with the loader\textquotesingle{}s built-\/in Zod schema to prevent errors. For additional fields, consider opening an issue.\hypertarget{README.md_autotoc_md8312}{}\doxysubsection{\texorpdfstring{Changelog}{Changelog}}\label{README.md_autotoc_md8312}
See \href{https://github.com/lin-stephanie/astro-loaders/blob/main/packages/astro-loader-bluesky-posts/CHANGELOG.md}{\texttt{ CHANGELOG.\+md}} for the change history of this loader.\hypertarget{README.md_autotoc_md8313}{}\doxysubsection{\texorpdfstring{Contribution}{Contribution}}\label{README.md_autotoc_md8313}
If you see any errors or room for improvement, feel free to open an \href{https://github.com/lin-stephanie/astro-loaders/issues}{\texttt{ issues}} or \href{https://github.com/lin-stephanie/astro-loaders/pulls}{\texttt{ pull request}} . Thank you in advance for contributing! ❤️ 