\doxysection{node\+\_\+modules/@shadcn/ui/node\+\_\+modules/node-\/fetch Directory Reference}
\hypertarget{dir_28c3c6960a10ff9be1d8591c7d8b0ed1}{}\label{dir_28c3c6960a10ff9be1d8591c7d8b0ed1}\index{node\_modules/"@shadcn/ui/node\_modules/node-\/fetch Directory Reference@{node\_modules/"@shadcn/ui/node\_modules/node-\/fetch Directory Reference}}


\doxysubsection{Detailed Description}
  ~\newline
 

A light-\/weight module that brings \href{https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API}{\texttt{ Fetch API}} to Node.\+js.

 \href{https://github.com/node-fetch/node-fetch/actions}{\texttt{ }} \href{https://coveralls.io/github/node-fetch/node-fetch}{\texttt{ }} \href{https://packagephobia.now.sh/result?p=node-fetch}{\texttt{ }} \href{https://www.npmjs.com/package/node-fetch}{\texttt{ }} \href{https://github.com/sindresorhus/awesome-nodejs}{\texttt{ }} \href{https://discord.gg/Zxbndcm}{\texttt{ }} ~\newline
 ~\newline
 {\bfseries{Consider supporting us on our Open Collective\+:}} ~\newline
 ~\newline
 \href{https://opencollective.com/node-fetch}{\texttt{ }} 

\DoxyHorRuler{0}


{\bfseries{You might be looking for the \href{https://github.com/node-fetch/node-fetch/tree/2.x\#readme}{\texttt{ v2 docs}}}}


\begin{DoxyItemize}
\item Motivation
\item \doxylink{md_node__modules_2chai_2_c_o_n_t_r_i_b_u_t_i_n_g_features}{Features}
\item Difference from client-\/side fetch
\item \doxylink{README.md_installation}{Installation}
\item Loading and configuring the module
\item Upgrading
\item Common Usage
\begin{DoxyItemize}
\item Plain text or HTML
\item \doxylink{calcwit_8hpp_ab701e3ac61a85b337ec5c1abaad6742d}{JSON}
\item Simple Post
\item Post with JSON
\item Post with form parameters
\item Handling exceptions
\item Handling client and server errors
\item Handling cookies
\end{DoxyItemize}
\item Advanced Usage
\begin{DoxyItemize}
\item Streams
\item Accessing Headers and other Metadata
\item Extract Set-\/\+Cookie Header
\item Post data using a file
\item Request cancellation with Abort\+Signal
\end{DoxyItemize}
\item \doxylink{README.md_api}{API}
\begin{DoxyItemize}
\item fetch(url\mbox{[}, options\mbox{]})
\item \doxylink{README.md_options}{Options}
\begin{DoxyItemize}
\item Default Headers
\item Custom Agent
\item Custom high\+Water\+Mark
\item Insecure HTTP Parser
\end{DoxyItemize}
\item \doxylink{README.md_class-request}{Class\+: Request}
\begin{DoxyItemize}
\item new Request(input\mbox{[}, options\mbox{]})
\end{DoxyItemize}
\item \doxylink{README.md_class-response}{Class\+: Response}
\begin{DoxyItemize}
\item new Response(\mbox{[}body\mbox{[}, options\mbox{]}\mbox{]})
\item response.ok
\item response.redirected
\item response.type
\end{DoxyItemize}
\item \doxylink{README.md_class-headers}{Class\+: Headers}
\begin{DoxyItemize}
\item new Headers(\mbox{[}init\mbox{]})
\end{DoxyItemize}
\item Interface\+: Body
\begin{DoxyItemize}
\item body.body
\item body.body\+Used
\item body.array\+Buffer()
\item body.blob()
\item body.form\+Data()
\item body.json()
\item body.text()
\end{DoxyItemize}
\item \doxylink{README.md_class-fetcherror}{Class\+: Fetch\+Error}
\item \doxylink{README.md_class-aborterror}{Class\+: Abort\+Error}
\end{DoxyItemize}
\item Type\+Script
\item Acknowledgement
\item Team
\begin{DoxyItemize}
\item Former
\end{DoxyItemize}
\item \doxylink{README.md_license}{License}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5761}{}\doxysubsubsection{\texorpdfstring{Motivation}{Motivation}}\label{README.md_autotoc_md5761}
Instead of implementing {\ttfamily XMLHttp\+Request} in Node.\+js to run browser-\/specific \href{https://github.com/github/fetch}{\texttt{ Fetch polyfill}}, why not go from native {\ttfamily http} to {\ttfamily fetch} API directly? Hence, {\ttfamily node-\/fetch}, minimal code for a {\ttfamily window.\+fetch} compatible API on Node.\+js runtime.

See Jason Miller\textquotesingle{}s \href{https://www.npmjs.com/package/isomorphic-unfetch}{\texttt{ isomorphic-\/unfetch}} or Leonardo Quixada\textquotesingle{}s \href{https://github.com/lquixada/cross-fetch}{\texttt{ cross-\/fetch}} for isomorphic usage (exports {\ttfamily node-\/fetch} for server-\/side, {\ttfamily whatwg-\/fetch} for client-\/side).\hypertarget{README.md_autotoc_md5762}{}\doxysubsubsection{\texorpdfstring{Features}{Features}}\label{README.md_autotoc_md5762}

\begin{DoxyItemize}
\item Stay consistent with {\ttfamily window.\+fetch} API.
\item Make conscious trade-\/off when following \href{https://fetch.spec.whatwg.org/}{\texttt{ WHATWG fetch spec}} and \href{https://streams.spec.whatwg.org/}{\texttt{ stream spec}} implementation details, document known differences.
\item Use native promise and async functions.
\item Use native Node streams for body, on both request and response.
\item Decode content encoding (gzip/deflate/brotli) properly, and convert string output (such as {\ttfamily res.\+text()} and {\ttfamily res.\+json()}) to UTF-\/8 automatically.
\item Useful extensions such as redirect limit, response size limit, \href{https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md}{\texttt{ explicit errors}} for troubleshooting.
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5763}{}\doxysubsubsection{\texorpdfstring{Difference from client-\/side fetch}{Difference from client-\/side fetch}}\label{README.md_autotoc_md5763}

\begin{DoxyItemize}
\item See known differences\+:
\begin{DoxyItemize}
\item As of v3.x
\item As of v2.x
\end{DoxyItemize}
\item If you happen to use a missing feature that {\ttfamily window.\+fetch} offers, feel free to open an issue.
\item Pull requests are welcomed too!
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5764}{}\doxysubsubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md5764}
Current stable release ({\ttfamily 3.\+x}) requires at least Node.\+js 12.\+20.\+0.


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ node-\/fetch}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5765}{}\doxysubsubsection{\texorpdfstring{Loading and configuring the module}{Loading and configuring the module}}\label{README.md_autotoc_md5765}
\hypertarget{README.md_autotoc_md5766}{}\doxysubsubsubsection{\texorpdfstring{ES Modules (ESM)}{ES Modules (ESM)}}\label{README.md_autotoc_md5766}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5767}{}\doxysubsubsubsection{\texorpdfstring{Common\+JS}{Common\+JS}}\label{README.md_autotoc_md5767}
{\ttfamily node-\/fetch} from v3 is an ESM-\/only module -\/ you are not able to import it with {\ttfamily require()}.

If you cannot switch to ESM, please use v2 which remains compatible with Common\+JS. Critical bug fixes will continue to be published for v2.


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ node-\/fetch@2}

\end{DoxyCode}


Alternatively, you can use the async {\ttfamily import()} function from Common\+JS to load {\ttfamily node-\/fetch} asynchronously\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ mod.cjs}
\DoxyCodeLine{const\ fetch\ =\ (...args)\ =>\ import('node-\/fetch').then((\{default:\ fetch\})\ =>\ fetch(...args));}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5768}{}\doxysubsubsubsection{\texorpdfstring{Providing global access}{Providing global access}}\label{README.md_autotoc_md5768}
To use {\ttfamily fetch()} without importing it, you can patch the {\ttfamily global} object in node\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ fetch-\/polyfill.js}
\DoxyCodeLine{import\ fetch,\ \{}
\DoxyCodeLine{\ \ Blob,}
\DoxyCodeLine{\ \ blobFrom,}
\DoxyCodeLine{\ \ blobFromSync,}
\DoxyCodeLine{\ \ File,}
\DoxyCodeLine{\ \ fileFrom,}
\DoxyCodeLine{\ \ fileFromSync,}
\DoxyCodeLine{\ \ FormData,}
\DoxyCodeLine{\ \ Headers,}
\DoxyCodeLine{\ \ Request,}
\DoxyCodeLine{\ \ Response,}
\DoxyCodeLine{\}\ from\ 'node-\/fetch'}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (!globalThis.fetch)\ \{}
\DoxyCodeLine{\ \ globalThis.fetch\ =\ fetch}
\DoxyCodeLine{\ \ globalThis.Headers\ =\ Headers}
\DoxyCodeLine{\ \ globalThis.Request\ =\ Request}
\DoxyCodeLine{\ \ globalThis.Response\ =\ Response}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{//\ index.js}
\DoxyCodeLine{import\ './fetch-\/polyfill'}
\DoxyCodeLine{}
\DoxyCodeLine{//\ ...}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5769}{}\doxysubsubsection{\texorpdfstring{Upgrading}{Upgrading}}\label{README.md_autotoc_md5769}
Using an old version of node-\/fetch? Check out the following files\+:


\begin{DoxyItemize}
\item 2.x to 3.x upgrade guide
\item 1.x to 2.x upgrade guide
\item \href{https://github.com/node-fetch/node-fetch/releases}{\texttt{ Changelog}}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5770}{}\doxysubsubsection{\texorpdfstring{Common Usage}{Common Usage}}\label{README.md_autotoc_md5770}
NOTE\+: The documentation below is up-\/to-\/date with {\ttfamily 3.\+x} releases, if you are using an older version, please check how to upgrade.\hypertarget{README.md_autotoc_md5771}{}\doxysubsubsubsection{\texorpdfstring{Plain text or HTML}{Plain text or HTML}}\label{README.md_autotoc_md5771}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://github.com/');}
\DoxyCodeLine{const\ body\ =\ await\ response.text();}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(body);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5772}{}\doxysubsubsubsection{\texorpdfstring{JSON}{JSON}}\label{README.md_autotoc_md5772}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://api.github.com/users/github');}
\DoxyCodeLine{const\ data\ =\ await\ response.json();}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(data);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5773}{}\doxysubsubsubsection{\texorpdfstring{Simple Post}{Simple Post}}\label{README.md_autotoc_md5773}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://httpbin.org/post',\ \{method:\ 'POST',\ body:\ 'a=1'\});}
\DoxyCodeLine{const\ data\ =\ await\ response.json();}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(data);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5774}{}\doxysubsubsubsection{\texorpdfstring{Post with JSON}{Post with JSON}}\label{README.md_autotoc_md5774}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ body\ =\ \{a:\ 1\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://httpbin.org/post',\ \{}
\DoxyCodeLine{\ \ \ \ method:\ 'post',}
\DoxyCodeLine{\ \ \ \ body:\ JSON.stringify(body),}
\DoxyCodeLine{\ \ \ \ headers:\ \{'Content-\/Type':\ 'application/json'\}}
\DoxyCodeLine{\});}
\DoxyCodeLine{const\ data\ =\ await\ response.json();}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(data);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5775}{}\doxysubsubsubsection{\texorpdfstring{Post with form parameters}{Post with form parameters}}\label{README.md_autotoc_md5775}
{\ttfamily URLSearch\+Params} is available on the global object in Node.\+js as of v10.\+0.\+0. See \href{https://nodejs.org/api/url.html\#url_class_urlsearchparams}{\texttt{ official documentation}} for more usage methods.

NOTE\+: The {\ttfamily Content-\/\+Type} header is only set automatically to {\ttfamily x-\/www-\/form-\/urlencoded} when an instance of {\ttfamily URLSearch\+Params} is given as such\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ params\ =\ new\ URLSearchParams();}
\DoxyCodeLine{params.append('a',\ 1);}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://httpbin.org/post',\ \{method:\ 'POST',\ body:\ params\});}
\DoxyCodeLine{const\ data\ =\ await\ response.json();}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(data);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5776}{}\doxysubsubsubsection{\texorpdfstring{Handling exceptions}{Handling exceptions}}\label{README.md_autotoc_md5776}
NOTE\+: 3xx-\/5xx responses are {\itshape NOT} exceptions, and should be handled in {\ttfamily then()}, see the next section.

Wrapping the fetch function into a {\ttfamily try/catch} block will catch {\itshape all} exceptions, such as errors originating from node core libraries, like network errors, and operational errors which are instances of Fetch\+Error. See the \href{https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md}{\texttt{ error handling document}} for more details.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{try\ \{}
\DoxyCodeLine{\ \ \ \ await\ fetch('https://domain.invalid/');}
\DoxyCodeLine{\}\ catch\ (error)\ \{}
\DoxyCodeLine{\ \ \ \ console.log(error);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5777}{}\doxysubsubsubsection{\texorpdfstring{Handling client and server errors}{Handling client and server errors}}\label{README.md_autotoc_md5777}
It is common to create a helper function to check that the response contains no client (4xx) or server (5xx) error responses\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{class\ HTTPResponseError\ extends\ Error\ \{}
\DoxyCodeLine{\ \ \ \ constructor(response)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ super(`HTTP\ Error\ Response:\ \$\{response.status\}\ \$\{response.statusText\}`);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ this.response\ =\ response;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ checkStatus\ =\ response\ =>\ \{}
\DoxyCodeLine{\ \ \ \ if\ (response.ok)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ //\ response.status\ >=\ 200\ \&\&\ response.status\ <\ 300}
\DoxyCodeLine{\ \ \ \ \ \ \ \ return\ response;}
\DoxyCodeLine{\ \ \ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ throw\ new\ HTTPResponseError(response);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://httpbin.org/status/400');}
\DoxyCodeLine{}
\DoxyCodeLine{try\ \{}
\DoxyCodeLine{\ \ \ \ checkStatus(response);}
\DoxyCodeLine{\}\ catch\ (error)\ \{}
\DoxyCodeLine{\ \ \ \ console.error(error);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ const\ errorBody\ =\ await\ error.response.text();}
\DoxyCodeLine{\ \ \ \ console.error(`Error\ body:\ \$\{errorBody\}`);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5778}{}\doxysubsubsubsection{\texorpdfstring{Handling cookies}{Handling cookies}}\label{README.md_autotoc_md5778}
Cookies are not stored by default. However, cookies can be extracted and passed by manipulating request and response headers. See Extract Set-\/\+Cookie Header for details.\hypertarget{README.md_autotoc_md5779}{}\doxysubsubsection{\texorpdfstring{Advanced Usage}{Advanced Usage}}\label{README.md_autotoc_md5779}
\hypertarget{README.md_autotoc_md5780}{}\doxysubsubsubsection{\texorpdfstring{Streams}{Streams}}\label{README.md_autotoc_md5780}
The "{}\+Node.\+js way"{} is to use streams when possible. You can pipe {\ttfamily res.\+body} to another stream. This example uses \href{https://nodejs.org/api/stream.html\#stream_stream_pipeline_streams_callback}{\texttt{ stream.\+pipeline}} to attach stream error handlers and wait for the download to complete.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{createWriteStream\}\ from\ 'node:fs';}
\DoxyCodeLine{import\ \{pipeline\}\ from\ 'node:stream';}
\DoxyCodeLine{import\ \{promisify\}\ from\ 'node:util'}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ streamPipeline\ =\ promisify(pipeline);}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://github.githubassets.com/images/modules/logos\_page/Octocat.png');}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (!response.ok)\ throw\ new\ Error(`unexpected\ response\ \$\{response.statusText\}`);}
\DoxyCodeLine{}
\DoxyCodeLine{await\ streamPipeline(response.body,\ createWriteStream('./octocat.png'));}

\end{DoxyCode}


In Node.\+js 14 you can also use async iterators to read {\ttfamily body}; however, be careful to catch errors -- the longer a response runs, the more likely it is to encounter an error.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://httpbin.org/stream/3');}
\DoxyCodeLine{}
\DoxyCodeLine{try\ \{}
\DoxyCodeLine{\ \ \ \ for\ await\ (const\ chunk\ of\ response.body)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ console.dir(JSON.parse(chunk.toString()));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}\ catch\ (err)\ \{}
\DoxyCodeLine{\ \ \ \ console.error(err.stack);}
\DoxyCodeLine{\}}

\end{DoxyCode}


In Node.\+js 12 you can also use async iterators to read {\ttfamily body}; however, async iterators with streams did not mature until Node.\+js 14, so you need to do some extra work to ensure you handle errors directly from the stream and wait on it response to fully close.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ read\ =\ async\ body\ =>\ \{}
\DoxyCodeLine{\ \ \ \ let\ error;}
\DoxyCodeLine{\ \ \ \ body.on('error',\ err\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ error\ =\ err;}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ for\ await\ (const\ chunk\ of\ body)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ console.dir(JSON.parse(chunk.toString()));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ return\ new\ Promise((resolve,\ reject)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ body.on('close',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ error\ ?\ reject(error)\ :\ resolve();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{try\ \{}
\DoxyCodeLine{\ \ \ \ const\ response\ =\ await\ fetch('https://httpbin.org/stream/3');}
\DoxyCodeLine{\ \ \ \ await\ read(response.body);}
\DoxyCodeLine{\}\ catch\ (err)\ \{}
\DoxyCodeLine{\ \ \ \ console.error(err.stack);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5781}{}\doxysubsubsubsection{\texorpdfstring{Accessing Headers and other Metadata}{Accessing Headers and other Metadata}}\label{README.md_autotoc_md5781}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://github.com/');}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(response.ok);}
\DoxyCodeLine{console.log(response.status);}
\DoxyCodeLine{console.log(response.statusText);}
\DoxyCodeLine{console.log(response.headers.raw());}
\DoxyCodeLine{console.log(response.headers.get('content-\/type'));}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5782}{}\doxysubsubsubsection{\texorpdfstring{Extract Set-\/\+Cookie Header}{Extract Set-\/\+Cookie Header}}\label{README.md_autotoc_md5782}
Unlike browsers, you can access raw {\ttfamily Set-\/\+Cookie} headers manually using {\ttfamily Headers.\+raw()}. This is a {\ttfamily node-\/fetch} only API.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://example.com');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Returns\ an\ array\ of\ values,\ instead\ of\ a\ string\ of\ comma-\/separated\ values}
\DoxyCodeLine{console.log(response.headers.raw()['set-\/cookie']);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5783}{}\doxysubsubsubsection{\texorpdfstring{Post data using a file}{Post data using a file}}\label{README.md_autotoc_md5783}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch,\ \{}
\DoxyCodeLine{\ \ Blob,}
\DoxyCodeLine{\ \ blobFrom,}
\DoxyCodeLine{\ \ blobFromSync,}
\DoxyCodeLine{\ \ File,}
\DoxyCodeLine{\ \ fileFrom,}
\DoxyCodeLine{\ \ fileFromSync,}
\DoxyCodeLine{\}\ from\ 'node-\/fetch'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ mimetype\ =\ 'text/plain'}
\DoxyCodeLine{const\ blob\ =\ fileFromSync('./input.txt',\ mimetype)}
\DoxyCodeLine{const\ url\ =\ 'https://httpbin.org/post'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch(url,\ \{\ method:\ 'POST',\ body:\ blob\ \})}
\DoxyCodeLine{const\ data\ =\ await\ response.json()}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(data)}

\end{DoxyCode}


node-\/fetch comes with a spec-\/compliant \href{https://developer.mozilla.org/en-US/docs/Web/API/FormData}{\texttt{ Form\+Data}} implementations for posting multipart/form-\/data payloads


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch,\ \{\ FormData,\ File,\ fileFrom\ \}\ from\ 'node-\/fetch'}
\DoxyCodeLine{}
\DoxyCodeLine{const\ httpbin\ =\ 'https://httpbin.org/post'}
\DoxyCodeLine{const\ formData\ =\ new\ FormData()}
\DoxyCodeLine{const\ binary\ =\ new\ Uint8Array([\ 97,\ 98,\ 99\ ])}
\DoxyCodeLine{const\ abc\ =\ new\ File([binary],\ 'abc.txt',\ \{\ type:\ 'text/plain'\ \})}
\DoxyCodeLine{}
\DoxyCodeLine{formData.set('greeting',\ 'Hello,\ world!')}
\DoxyCodeLine{formData.set('file-\/upload',\ abc,\ 'new\ name.txt')}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch(httpbin,\ \{\ method:\ 'POST',\ body:\ formData\ \})}
\DoxyCodeLine{const\ data\ =\ await\ response.json()}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(data)}

\end{DoxyCode}


If you for some reason need to post a stream coming from any arbitrary place, then you can append a \href{https://developer.mozilla.org/en-US/docs/Web/API/Blob}{\texttt{ Blob}} or a \href{https://developer.mozilla.org/en-US/docs/Web/API/File}{\texttt{ File}} look-\/a-\/like item.

The minimum requirement is that it has\+:
\begin{DoxyEnumerate}
\item A {\ttfamily Symbol.\+to\+String\+Tag} getter or property that is either {\ttfamily Blob} or {\ttfamily File}
\item A known size.
\item And either a {\ttfamily stream()} method or a {\ttfamily array\+Buffer()} method that returns a Array\+Buffer.
\end{DoxyEnumerate}

The {\ttfamily stream()} must return any async iterable object as long as it yields Uint8\+Array (or Buffer) so Node.\+Readable streams and whatwg streams works just fine.


\begin{DoxyCode}{0}
\DoxyCodeLine{formData.append('upload',\ \{}
\DoxyCodeLine{\ \ \ \ [Symbol.toStringTag]:\ 'Blob',}
\DoxyCodeLine{\ \ \ \ size:\ 3,}
\DoxyCodeLine{\ \ *stream()\ \{}
\DoxyCodeLine{\ \ \ \ yield\ new\ Uint8Array([97,\ 98,\ 99])}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ arrayBuffer()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ return\ new\ Uint8Array([97,\ 98,\ 99]).buffer}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\},\ 'abc.txt')}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5784}{}\doxysubsubsubsection{\texorpdfstring{Request cancellation with Abort\+Signal}{Request cancellation with Abort\+Signal}}\label{README.md_autotoc_md5784}
You may cancel requests with {\ttfamily Abort\+Controller}. A suggested implementation is \href{https://www.npmjs.com/package/abort-controller}{\texttt{ {\ttfamily abort-\/controller}}}.

An example of timing out a request after 150ms could be achieved as the following\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch,\ \{\ AbortError\ \}\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{//\ AbortController\ was\ added\ in\ node\ v14.17.0\ globally}
\DoxyCodeLine{const\ AbortController\ =\ globalThis.AbortController\ ||\ await\ import('abort-\/controller')}
\DoxyCodeLine{}
\DoxyCodeLine{const\ controller\ =\ new\ AbortController();}
\DoxyCodeLine{const\ timeout\ =\ setTimeout(()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ controller.abort();}
\DoxyCodeLine{\},\ 150);}
\DoxyCodeLine{}
\DoxyCodeLine{try\ \{}
\DoxyCodeLine{\ \ \ \ const\ response\ =\ await\ fetch('https://example.com',\ \{signal:\ controller.signal\});}
\DoxyCodeLine{\ \ \ \ const\ data\ =\ await\ response.json();}
\DoxyCodeLine{\}\ catch\ (error)\ \{}
\DoxyCodeLine{\ \ \ \ if\ (error\ instanceof\ AbortError)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ console.log('request\ was\ aborted');}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}\ finally\ \{}
\DoxyCodeLine{\ \ \ \ clearTimeout(timeout);}
\DoxyCodeLine{\}}

\end{DoxyCode}


See \href{https://github.com/node-fetch/node-fetch/blob/master/test/}{\texttt{ test cases}} for more examples.\hypertarget{README.md_autotoc_md5785}{}\doxysubsubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md5785}
\hypertarget{README.md_autotoc_md5786}{}\doxysubsubsubsection{\texorpdfstring{fetch(url\mbox{[}, options\mbox{]})}{fetch(url\mbox{[}, options\mbox{]})}}\label{README.md_autotoc_md5786}

\begin{DoxyItemize}
\item {\ttfamily url} A string representing the URL for fetching
\item {\ttfamily options} \doxylink{README.md_fetch-options}{Options} for the HTTP(\+S) request
\item Returns\+: {\ttfamily Promise\texorpdfstring{$<$}{<}\doxylink{README.md_class-response}{Response}\texorpdfstring{$>$}{>}}
\end{DoxyItemize}

Perform an HTTP(\+S) fetch.

{\ttfamily url} should be an absolute URL, such as {\ttfamily \href{https://example.com/}{\texttt{ https\+://example.\+com/}}}. A path-\/relative URL ({\ttfamily /file/under/root}) or protocol-\/relative URL ({\ttfamily //can-\/be-\/http-\/or-\/https.com/}) will result in a rejected {\ttfamily Promise}.

\label{README.md_fetch-options}%
\Hypertarget{README.md_fetch-options}%
\hypertarget{README.md_autotoc_md5787}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{README.md_autotoc_md5787}
The default values are shown after each option key.


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ //\ These\ properties\ are\ part\ of\ the\ Fetch\ Standard}
\DoxyCodeLine{\ \ \ \ method:\ 'GET',}
\DoxyCodeLine{\ \ \ \ headers:\ \{\},\ \ \ \ \ \ \ \ \ \ \ \ //\ Request\ headers.\ format\ is\ the\ identical\ to\ that\ accepted\ by\ the\ Headers\ constructor\ (see\ below)}
\DoxyCodeLine{\ \ \ \ body:\ null,\ \ \ \ \ \ \ \ \ \ \ \ \ //\ Request\ body.\ can\ be\ null,\ or\ a\ Node.js\ Readable\ stream}
\DoxyCodeLine{\ \ \ \ redirect:\ 'follow',\ \ \ \ \ //\ Set\ to\ \`{}manual`\ to\ extract\ redirect\ headers,\ \`{}error`\ to\ reject\ redirect}
\DoxyCodeLine{\ \ \ \ signal:\ null,\ \ \ \ \ \ \ \ \ \ \ //\ Pass\ an\ instance\ of\ AbortSignal\ to\ optionally\ abort\ requests}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ The\ following\ properties\ are\ node-\/fetch\ extensions}
\DoxyCodeLine{\ \ \ \ follow:\ 20,\ \ \ \ \ \ \ \ \ \ \ \ \ //\ maximum\ redirect\ count.\ 0\ to\ not\ follow\ redirect}
\DoxyCodeLine{\ \ \ \ compress:\ true,\ \ \ \ \ \ \ \ \ //\ support\ gzip/deflate\ content\ encoding.\ false\ to\ disable}
\DoxyCodeLine{\ \ \ \ size:\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ maximum\ response\ body\ size\ in\ bytes.\ 0\ to\ disable}
\DoxyCodeLine{\ \ \ \ agent:\ null,\ \ \ \ \ \ \ \ \ \ \ \ //\ http(s).Agent\ instance\ or\ function\ that\ returns\ an\ instance\ (see\ below)}
\DoxyCodeLine{\ \ \ \ highWaterMark:\ 16384,\ \ \ //\ the\ maximum\ number\ of\ bytes\ to\ store\ in\ the\ internal\ buffer\ before\ ceasing\ to\ read\ from\ the\ underlying\ resource.}
\DoxyCodeLine{\ \ \ \ insecureHTTPParser:\ false\ \ \ //\ Use\ an\ insecure\ HTTP\ parser\ that\ accepts\ invalid\ HTTP\ headers\ when\ \`{}true`.}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5788}{}\doxysubsubsubsubsection{\texorpdfstring{Default Headers}{Default Headers}}\label{README.md_autotoc_md5788}
If no values are set, the following request headers will be sent automatically\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Header   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Value    }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Header   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Value    }\\\cline{1-2}
\endhead
{\ttfamily Accept-\/\+Encoding}   &{\ttfamily gzip, deflate, br} (when {\ttfamily options.\+compress === true})    \\\cline{1-2}
{\ttfamily Accept}   &{\ttfamily \texorpdfstring{$\ast$}{*}/\texorpdfstring{$\ast$}{*}}    \\\cline{1-2}
{\ttfamily Content-\/\+Length}   &{\itshape (automatically calculated, if possible)}    \\\cline{1-2}
{\ttfamily Host}   &{\itshape (host and port information from the target URI)}    \\\cline{1-2}
{\ttfamily Transfer-\/\+Encoding}   &{\ttfamily chunked} {\itshape (when {\ttfamily req.\+body} is a stream)}    \\\cline{1-2}
{\ttfamily User-\/\+Agent}   &{\ttfamily node-\/fetch}   \\\cline{1-2}
\end{longtabu}


Note\+: when {\ttfamily body} is a {\ttfamily Stream}, {\ttfamily Content-\/\+Length} is not set automatically.\hypertarget{README.md_autotoc_md5789}{}\doxysubsubsubsubsection{\texorpdfstring{Custom Agent}{Custom Agent}}\label{README.md_autotoc_md5789}
The {\ttfamily agent} option allows you to specify networking related options which are out of the scope of Fetch, including and not limited to the following\+:


\begin{DoxyItemize}
\item Support self-\/signed certificate
\item Use only IPv4 or IPv6
\item Custom DNS Lookup
\end{DoxyItemize}

See \href{https://nodejs.org/api/http.html\#http_new_agent_options}{\texttt{ {\ttfamily http.\+Agent}}} for more information.

If no agent is specified, the default agent provided by Node.\+js is used. Note that \href{https://github.com/nodejs/node/blob/4267b92604ad78584244488e7f7508a690cb80d0/lib/_http_agent.js\#L564}{\texttt{ this changed in Node.\+js 19}} to have {\ttfamily keepalive} true by default. If you wish to enable {\ttfamily keepalive} in an earlier version of Node.\+js, you can override the agent as per the following code sample.

In addition, the {\ttfamily agent} option accepts a function that returns {\ttfamily http}(s){\ttfamily .Agent} instance given current \href{https://nodejs.org/api/url.html}{\texttt{ URL}}, this is useful during a redirection chain across HTTP and HTTPS protocol.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ http\ from\ 'node:http';}
\DoxyCodeLine{import\ https\ from\ 'node:https';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ httpAgent\ =\ new\ http.Agent(\{}
\DoxyCodeLine{\ \ \ \ keepAlive:\ true}
\DoxyCodeLine{\});}
\DoxyCodeLine{const\ httpsAgent\ =\ new\ https.Agent(\{}
\DoxyCodeLine{\ \ \ \ keepAlive:\ true}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{const\ options\ =\ \{}
\DoxyCodeLine{\ \ \ \ agent:\ function(\_parsedURL)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (\_parsedURL.protocol\ ==\ 'http:')\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ return\ httpAgent;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ return\ httpsAgent;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\};}

\end{DoxyCode}


\label{README.md_custom-highWaterMark}%
\Hypertarget{README.md_custom-highWaterMark}%
\hypertarget{README.md_autotoc_md5790}{}\doxysubsubsubsubsection{\texorpdfstring{Custom high\+Water\+Mark}{Custom high\+Water\+Mark}}\label{README.md_autotoc_md5790}
Stream on Node.\+js have a smaller internal buffer size (16kB, aka {\ttfamily high\+Water\+Mark}) from client-\/side browsers (\texorpdfstring{$>$}{>}1MB, not consistent across browsers). Because of that, when you are writing an isomorphic app and using {\ttfamily res.\+clone()}, it will hang with large response in Node.

The recommended way to fix this problem is to resolve cloned response in parallel\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://example.com');}
\DoxyCodeLine{const\ r1\ =\ response.clone();}
\DoxyCodeLine{}
\DoxyCodeLine{const\ results\ =\ await\ Promise.all([response.json(),\ r1.text()]);}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(results[0]);}
\DoxyCodeLine{console.log(results[1]);}

\end{DoxyCode}


If for some reason you don\textquotesingle{}t like the solution above, since {\ttfamily 3.\+x} you are able to modify the {\ttfamily high\+Water\+Mark} option\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://example.com',\ \{}
\DoxyCodeLine{\ \ \ \ //\ About\ 1MB}
\DoxyCodeLine{\ \ \ \ highWaterMark:\ 1024\ *\ 1024}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{const\ result\ =\ await\ res.clone().arrayBuffer();}
\DoxyCodeLine{console.dir(result);}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5791}{}\doxysubsubsubsubsection{\texorpdfstring{Insecure HTTP Parser}{Insecure HTTP Parser}}\label{README.md_autotoc_md5791}
Passed through to the {\ttfamily insecure\+HTTPParser} option on http(s).request. See \href{https://nodejs.org/api/http.html\#http_http_request_url_options_callback}{\texttt{ {\ttfamily http.\+request}}} for more information.\hypertarget{README.md_autotoc_md5792}{}\doxysubsubsubsubsection{\texorpdfstring{Manual Redirect}{Manual Redirect}}\label{README.md_autotoc_md5792}
The `redirect\+: \textquotesingle{}manual'\`{} option for node-\/fetch is different from the browser \& specification, which results in an \href{https://fetch.spec.whatwg.org/\#concept-filtered-response-opaque-redirect}{\texttt{ opaque-\/redirect filtered response}}. node-\/fetch gives you the typical \href{https://fetch.spec.whatwg.org/\#concept-filtered-response-basic}{\texttt{ basic filtered response}} instead.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ fetch\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ response\ =\ await\ fetch('https://httpbin.org/status/301',\ \{\ redirect:\ 'manual'\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (response.status\ ===\ 301\ ||\ response.status\ ===\ 302)\ \{}
\DoxyCodeLine{\ \ \ \ const\ locationURL\ =\ new\ URL(response.headers.get('location'),\ response.url);}
\DoxyCodeLine{\ \ \ \ const\ response2\ =\ await\ fetch(locationURL,\ \{\ redirect:\ 'manual'\ \});}
\DoxyCodeLine{\ \ \ \ console.dir(response2);}
\DoxyCodeLine{\}}

\end{DoxyCode}


\label{README.md_class-request}%
\Hypertarget{README.md_class-request}%
\hypertarget{README.md_autotoc_md5793}{}\doxysubsubsubsection{\texorpdfstring{Class\+: Request}{Class\+: Request}}\label{README.md_autotoc_md5793}
An HTTP(\+S) request containing information about URL, method, headers, and the body. This class implements the \doxylink{README.md_iface-body}{Body} interface.

Due to the nature of Node.\+js, the following properties are not implemented at this moment\+:


\begin{DoxyItemize}
\item {\ttfamily type}
\item {\ttfamily destination}
\item {\ttfamily mode}
\item {\ttfamily credentials}
\item {\ttfamily cache}
\item {\ttfamily integrity}
\item {\ttfamily keepalive}
\end{DoxyItemize}

The following node-\/fetch extension properties are provided\+:


\begin{DoxyItemize}
\item {\ttfamily follow}
\item {\ttfamily compress}
\item {\ttfamily counter}
\item {\ttfamily agent}
\item {\ttfamily high\+Water\+Mark}
\end{DoxyItemize}

See \doxylink{README.md_fetch-options}{options} for exact meaning of these extensions.\hypertarget{README.md_autotoc_md5794}{}\doxysubsubsubsubsection{\texorpdfstring{new Request(input\mbox{[}, options\mbox{]})}{new Request(input\mbox{[}, options\mbox{]})}}\label{README.md_autotoc_md5794}

\footnotesize {\itshape (spec-\/compliant)}
\normalsize 


\begin{DoxyItemize}
\item {\ttfamily input} A string representing a URL, or another {\ttfamily Request} (which will be cloned)
\item {\ttfamily options} \doxylink{README.md_fetch-options}{Options} for the HTTP(\+S) request
\end{DoxyItemize}

Constructs a new {\ttfamily Request} object. The constructor is identical to that in the \href{https://developer.mozilla.org/en-US/docs/Web/API/Request/Request}{\texttt{ browser}}.

In most cases, directly {\ttfamily fetch(url, options)} is simpler than creating a {\ttfamily Request} object.

\label{README.md_class-response}%
\Hypertarget{README.md_class-response}%
\hypertarget{README.md_autotoc_md5795}{}\doxysubsubsubsection{\texorpdfstring{Class\+: Response}{Class\+: Response}}\label{README.md_autotoc_md5795}
An HTTP(\+S) response. This class implements the \doxylink{README.md_iface-body}{Body} interface.

The following properties are not implemented in node-\/fetch at this moment\+:


\begin{DoxyItemize}
\item {\ttfamily trailer}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5796}{}\doxysubsubsubsubsection{\texorpdfstring{new Response(\mbox{[}body\mbox{[}, options\mbox{]}\mbox{]})}{new Response(\mbox{[}body\mbox{[}, options\mbox{]}\mbox{]})}}\label{README.md_autotoc_md5796}

\footnotesize {\itshape (spec-\/compliant)}
\normalsize 


\begin{DoxyItemize}
\item {\ttfamily body} A {\ttfamily String} or \href{https://nodejs.org/api/stream.html\#stream_readable_streams}{\texttt{ {\ttfamily Readable} stream}}
\item {\ttfamily options} A \href{https://fetch.spec.whatwg.org/\#responseinit}{\texttt{ {\ttfamily Response\+Init}}} options dictionary
\end{DoxyItemize}

Constructs a new {\ttfamily Response} object. The constructor is identical to that in the \href{https://developer.mozilla.org/en-US/docs/Web/API/Response/Response}{\texttt{ browser}}.

Because Node.\+js does not implement service workers (for which this class was designed), one rarely has to construct a {\ttfamily Response} directly.\hypertarget{README.md_autotoc_md5797}{}\doxysubsubsubsubsection{\texorpdfstring{response.\+ok}{response.\+ok}}\label{README.md_autotoc_md5797}

\footnotesize {\itshape (spec-\/compliant)}
\normalsize 

Convenience property representing if the request ended normally. Will evaluate to true if the response status was greater than or equal to 200 but smaller than 300.\hypertarget{README.md_autotoc_md5798}{}\doxysubsubsubsubsection{\texorpdfstring{response.\+redirected}{response.\+redirected}}\label{README.md_autotoc_md5798}

\footnotesize {\itshape (spec-\/compliant)}
\normalsize 

Convenience property representing if the request has been redirected at least once. Will evaluate to true if the internal redirect counter is greater than 0.\hypertarget{README.md_autotoc_md5799}{}\doxysubsubsubsubsection{\texorpdfstring{response.\+type}{response.\+type}}\label{README.md_autotoc_md5799}

\footnotesize {\itshape (deviation from spec)}
\normalsize 

Convenience property representing the response\textquotesingle{}s type. node-\/fetch only supports `\textquotesingle{}default'{\ttfamily and}\textquotesingle{}error\textquotesingle{}\`{} and does not make use of \href{https://fetch.spec.whatwg.org/\#concept-filtered-response}{\texttt{ filtered responses}}.

\label{README.md_class-headers}%
\Hypertarget{README.md_class-headers}%
\hypertarget{README.md_autotoc_md5800}{}\doxysubsubsubsection{\texorpdfstring{Class\+: Headers}{Class\+: Headers}}\label{README.md_autotoc_md5800}
This class allows manipulating and iterating over a set of HTTP headers. All methods specified in the \href{https://fetch.spec.whatwg.org/}{\texttt{ Fetch Standard}} are implemented.\hypertarget{README.md_autotoc_md5801}{}\doxysubsubsubsubsection{\texorpdfstring{new Headers(\mbox{[}init\mbox{]})}{new Headers(\mbox{[}init\mbox{]})}}\label{README.md_autotoc_md5801}

\footnotesize {\itshape (spec-\/compliant)}
\normalsize 


\begin{DoxyItemize}
\item {\ttfamily init} Optional argument to pre-\/fill the {\ttfamily Headers} object
\end{DoxyItemize}

Construct a new {\ttfamily Headers} object. {\ttfamily init} can be either {\ttfamily null}, a {\ttfamily Headers} object, an key-\/value map object or any iterable object.


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Example\ adapted\ from\ https://fetch.spec.whatwg.org/\#example-\/headers-\/class}
\DoxyCodeLine{import\ \{Headers\}\ from\ 'node-\/fetch';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ meta\ =\ \{}
\DoxyCodeLine{\ \ \ \ 'Content-\/Type':\ 'text/xml'}
\DoxyCodeLine{\};}
\DoxyCodeLine{const\ headers\ =\ new\ Headers(meta);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ The\ above\ is\ equivalent\ to}
\DoxyCodeLine{const\ meta\ =\ [['Content-\/Type',\ 'text/xml']];}
\DoxyCodeLine{const\ headers\ =\ new\ Headers(meta);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ You\ can\ in\ fact\ use\ any\ iterable\ objects,\ like\ a\ Map\ or\ even\ another\ Headers}
\DoxyCodeLine{const\ meta\ =\ new\ Map();}
\DoxyCodeLine{meta.set('Content-\/Type',\ 'text/xml');}
\DoxyCodeLine{const\ headers\ =\ new\ Headers(meta);}
\DoxyCodeLine{const\ copyOfHeaders\ =\ new\ Headers(headers);}

\end{DoxyCode}


\label{README.md_iface-body}%
\Hypertarget{README.md_iface-body}%
\hypertarget{README.md_autotoc_md5802}{}\doxysubsubsubsection{\texorpdfstring{Interface\+: Body}{Interface\+: Body}}\label{README.md_autotoc_md5802}
{\ttfamily Body} is an abstract interface with methods that are applicable to both {\ttfamily Request} and {\ttfamily Response} classes.\hypertarget{README.md_autotoc_md5803}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+body}{body.\+body}}\label{README.md_autotoc_md5803}

\footnotesize {\itshape (deviation from spec)}
\normalsize 


\begin{DoxyItemize}
\item Node.\+js \href{https://nodejs.org/api/stream.html\#stream_readable_streams}{\texttt{ {\ttfamily Readable} stream}}
\end{DoxyItemize}

Data are encapsulated in the {\ttfamily Body} object. Note that while the \href{https://fetch.spec.whatwg.org/}{\texttt{ Fetch Standard}} requires the property to always be a WHATWG {\ttfamily Readable\+Stream}, in node-\/fetch it is a Node.\+js \href{https://nodejs.org/api/stream.html\#stream_readable_streams}{\texttt{ {\ttfamily Readable} stream}}.\hypertarget{README.md_autotoc_md5804}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+body\+Used}{body.\+body\+Used}}\label{README.md_autotoc_md5804}

\footnotesize {\itshape (spec-\/compliant)}
\normalsize 


\begin{DoxyItemize}
\item {\ttfamily Boolean}
\end{DoxyItemize}

A boolean property for if this body has been consumed. Per the specs, a consumed body cannot be used again.\hypertarget{README.md_autotoc_md5805}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+array\+Buffer()}{body.\+array\+Buffer()}}\label{README.md_autotoc_md5805}
\hypertarget{README.md_autotoc_md5806}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+form\+Data()}{body.\+form\+Data()}}\label{README.md_autotoc_md5806}
\hypertarget{README.md_autotoc_md5807}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+blob()}{body.\+blob()}}\label{README.md_autotoc_md5807}
\hypertarget{README.md_autotoc_md5808}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+json()}{body.\+json()}}\label{README.md_autotoc_md5808}
\hypertarget{README.md_autotoc_md5809}{}\doxysubsubsubsubsection{\texorpdfstring{body.\+text()}{body.\+text()}}\label{README.md_autotoc_md5809}
{\ttfamily fetch} comes with methods to parse {\ttfamily multipart/form-\/data} payloads as well as {\ttfamily x-\/www-\/form-\/urlencoded} bodies using {\ttfamily .form\+Data()} this comes from the idea that Service Worker can intercept such messages before it\textquotesingle{}s sent to the server to alter them. This is useful for anybody building a server so you can use it to parse \& consume payloads.



{\bfseries{Code example}}\begin{adjustwidth}{1em}{0em}



\begin{DoxyCode}{0}
\DoxyCodeLine{import\ http\ from\ 'node:http'}
\DoxyCodeLine{import\ \{\ Response\ \}\ from\ 'node-\/fetch'}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(async\ function\ (req,\ res)\ \{}
\DoxyCodeLine{\ \ const\ formData\ =\ await\ new\ Response(req,\ \{}
\DoxyCodeLine{\ \ \ \ headers:\ req.headers\ //\ Pass\ along\ the\ boundary\ value}
\DoxyCodeLine{\ \ \}).formData()}
\DoxyCodeLine{\ \ const\ allFields\ =\ [...formData]}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ const\ file\ =\ formData.get('uploaded-\/files')}
\DoxyCodeLine{\ \ const\ arrayBuffer\ =\ await\ file.arrayBuffer()}
\DoxyCodeLine{\ \ const\ text\ =\ await\ file.text()}
\DoxyCodeLine{\ \ const\ whatwgReadableStream\ =\ file.stream()}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ //\ other\ was\ to\ consume\ the\ request\ could\ be\ to\ do:}
\DoxyCodeLine{\ \ const\ json\ =\ await\ new\ Response(req).json()}
\DoxyCodeLine{\ \ const\ text\ =\ await\ new\ Response(req).text()}
\DoxyCodeLine{\ \ const\ arrayBuffer\ =\ await\ new\ Response(req).arrayBuffer()}
\DoxyCodeLine{\ \ const\ blob\ =\ await\ new\ Response(req,\ \{}
\DoxyCodeLine{\ \ \ \ headers:\ req.headers\ //\ So\ that\ \`{}type`\ inherits\ \`{}Content-\/Type`}
\DoxyCodeLine{\ \ \}.blob()}
\DoxyCodeLine{\})}

\end{DoxyCode}


\end{adjustwidth}


\label{README.md_class-fetcherror}%
\Hypertarget{README.md_class-fetcherror}%
\hypertarget{README.md_autotoc_md5810}{}\doxysubsubsubsection{\texorpdfstring{Class\+: Fetch\+Error}{Class\+: Fetch\+Error}}\label{README.md_autotoc_md5810}

\footnotesize {\itshape (node-\/fetch extension)}
\normalsize 

An operational error in the fetching process. See \href{https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md}{\texttt{ ERROR-\/\+HANDLING.\+md}} for more info.

\label{README.md_class-aborterror}%
\Hypertarget{README.md_class-aborterror}%
\hypertarget{README.md_autotoc_md5811}{}\doxysubsubsubsection{\texorpdfstring{Class\+: Abort\+Error}{Class\+: Abort\+Error}}\label{README.md_autotoc_md5811}

\footnotesize {\itshape (node-\/fetch extension)}
\normalsize 

An Error thrown when the request is aborted in response to an {\ttfamily Abort\+Signal}\textquotesingle{}s {\ttfamily abort} event. It has a {\ttfamily name} property of {\ttfamily Abort\+Error}. See \href{https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md}{\texttt{ ERROR-\/\+HANDLING.\+MD}} for more info.\hypertarget{README.md_autotoc_md5812}{}\doxysubsubsection{\texorpdfstring{Type\+Script}{Type\+Script}}\label{README.md_autotoc_md5812}
{\bfseries{Since {\ttfamily 3.\+x} types are bundled with {\ttfamily node-\/fetch}, so you don\textquotesingle{}t need to install any additional packages.}}

For older versions please use the type definitions from \href{https://github.com/DefinitelyTyped/DefinitelyTyped}{\texttt{ Definitely\+Typed}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ -\/-\/save-\/dev\ @types/node-\/fetch@2.x}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md5813}{}\doxysubsubsection{\texorpdfstring{Acknowledgement}{Acknowledgement}}\label{README.md_autotoc_md5813}
Thanks to \href{https://github.com/github/fetch}{\texttt{ github/fetch}} for providing a solid implementation reference.\hypertarget{README.md_autotoc_md5814}{}\doxysubsubsection{\texorpdfstring{Team}{Team}}\label{README.md_autotoc_md5814}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/bitinn}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/jimmywarting}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/xxczaki}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/Richienb}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/gr2m}{\texttt{ }}    }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/bitinn}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/jimmywarting}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/xxczaki}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/Richienb}{\texttt{ }}   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/gr2m}{\texttt{ }}    }\\\cline{1-5}
\endhead
\href{https://bitinn.net/}{\texttt{ David Frank}}   &\href{https://jimmy.warting.se/}{\texttt{ Jimmy Wärting}}   &\href{https://kepinski.ch}{\texttt{ Antoni Kepinski}}   &\href{https://www.richie-bendall.ml/}{\texttt{ Richie Bendall}}   &\href{https://twitter.com/gr2m}{\texttt{ Gregor Martynus}}   \\\cline{1-5}
\end{longtabu}
\hypertarget{README.md_autotoc_md5815}{}\doxysubsubsubsubsubsubsection{\texorpdfstring{Former}{Former}}\label{README.md_autotoc_md5815}

\begin{DoxyItemize}
\item \href{https://github.com/timothygu}{\texttt{ Timothy Gu}}
\item \href{https://github.com/jkantr}{\texttt{ Jared Kantrowitz}}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md5816}{}\doxysubsubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md5816}
\doxysectlink{md_node__modules_2_0dshadcn_2ui_2node__modules_2node-fetch_2_l_i_c_e_n_s_e}{MIT}{0} 