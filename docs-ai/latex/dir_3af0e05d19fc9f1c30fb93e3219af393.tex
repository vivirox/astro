\doxysection{node\+\_\+modules/import-\/meta-\/resolve Directory Reference}
\hypertarget{dir_3af0e05d19fc9f1c30fb93e3219af393}{}\label{dir_3af0e05d19fc9f1c30fb93e3219af393}\index{node\_modules/import-\/meta-\/resolve Directory Reference@{node\_modules/import-\/meta-\/resolve Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://github.com/wooorm/import-meta-resolve/actions}{\texttt{ }} \href{https://codecov.io/github/wooorm/import-meta-resolve}{\texttt{ }} \href{https://www.npmjs.com/package/import-meta-resolve}{\texttt{ }}

Resolve things like Node.\+js.\hypertarget{readme.md_autotoc_md18076}{}\doxysubsection{\texorpdfstring{Contents}{Contents}}\label{readme.md_autotoc_md18076}

\begin{DoxyItemize}
\item What is this?
\item When to use this?
\item Install
\item Use
\item \doxylink{README.md_api}{API}
\begin{DoxyItemize}
\item \`{}resolve(specifier, parent)\`{}
\item \`{}module\+Resolve(specifier, parent, conditions, preserve\+Symlinks)\`{}
\item \`{}\+Errno\+Exception\`{}
\end{DoxyItemize}
\item Algorithm
\item Differences to Node
\item \doxylink{readme.md_types}{Types}
\item Compatibility
\item \doxylink{readme.md_contribute}{Contribute}
\item \doxylink{README.md_license}{License}
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md18077}{}\doxysubsection{\texorpdfstring{What is this?}{What is this?}}\label{readme.md_autotoc_md18077}
This package is a ponyfill for \href{https://nodejs.org/api/esm.html\#esm_import_meta_resolve_specifier_parent}{\texttt{ {\ttfamily import.\+meta.\+resolve}}}. It supports everything you need to resolve files just like modern Node does\+: import maps, export maps, loading CJS and ESM projects, all of that!\hypertarget{readme.md_autotoc_md18078}{}\doxysubsection{\texorpdfstring{When to use this?}{When to use this?}}\label{readme.md_autotoc_md18078}
As of Node.\+js 20.\+0, {\ttfamily import.\+meta.\+resolve} is still behind an experimental flag. This package can be used to do what it does in Node 16–20.\hypertarget{readme.md_autotoc_md18079}{}\doxysubsection{\texorpdfstring{Install}{Install}}\label{readme.md_autotoc_md18079}
This package is \href{https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c}{\texttt{ ESM only}}. In Node.\+js (version 16+), install with \href{https://docs.npmjs.com/cli/install}{\texttt{ npm}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ import-\/meta-\/resolve}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md18080}{}\doxysubsection{\texorpdfstring{Use}{Use}}\label{readme.md_autotoc_md18080}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{resolve\}\ from\ 'import-\/meta-\/resolve'}
\DoxyCodeLine{}
\DoxyCodeLine{//\ A\ file:}
\DoxyCodeLine{console.log(resolve('./index.js',\ import.meta.url))}
\DoxyCodeLine{//=>\ file:///Users/tilde/Projects/oss/import-\/meta-\/resolve/index.js}
\DoxyCodeLine{}
\DoxyCodeLine{//\ A\ CJS\ package:}
\DoxyCodeLine{console.log(resolve('builtins',\ import.meta.url))}
\DoxyCodeLine{//=>\ file:///Users/tilde/Projects/oss/import-\/meta-\/resolve/node\_modules/builtins/index.js}
\DoxyCodeLine{}
\DoxyCodeLine{//\ A\ scoped\ CJS\ package:}
\DoxyCodeLine{console.log(resolve('@eslint/eslintrc',\ import.meta.url))}
\DoxyCodeLine{//=>\ file:///Users/tilde/Projects/oss/import-\/meta-\/resolve/node\_modules/@eslint/eslintrc/lib/index.js}
\DoxyCodeLine{}
\DoxyCodeLine{//\ A\ package\ with\ an\ export\ map:}
\DoxyCodeLine{console.log(resolve('micromark/lib/parse',\ import.meta.url))}
\DoxyCodeLine{//=>\ file:///Users/tilde/Projects/oss/import-\/meta-\/resolve/node\_modules/micromark/lib/parse.js}
\DoxyCodeLine{}
\DoxyCodeLine{//\ A\ node\ builtin:}
\DoxyCodeLine{console.log(resolve('fs',\ import.meta.url))}
\DoxyCodeLine{//=>\ node:fs}

\end{DoxyCode}
\hypertarget{readme.md_autotoc_md18081}{}\doxysubsection{\texorpdfstring{API}{API}}\label{readme.md_autotoc_md18081}
This package exports the identifiers \`{}module\+Resolve\`{} and \`{}resolve\`{}. There is no default export.\hypertarget{readme.md_autotoc_md18082}{}\doxysubsubsection{\texorpdfstring{{\ttfamily resolve(specifier, parent)}}{{\ttfamily resolve(specifier, parent)}}}\label{readme.md_autotoc_md18082}
Match {\ttfamily import.\+meta.\+resolve} except that {\ttfamily parent} is required (you can pass {\ttfamily import.\+meta.\+url}).\hypertarget{readme.md_autotoc_md18083}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md18083}

\begin{DoxyItemize}
\item {\ttfamily specifier} ({\ttfamily string}) — the module specifier to resolve relative to parent ({\ttfamily /example.js}, {\ttfamily ./example.js}, {\ttfamily ../example.js}, {\ttfamily some-\/package}, {\ttfamily fs}, etc)
\item {\ttfamily parent} ({\ttfamily string}, example\+: {\ttfamily import.\+meta.\+url}) — the absolute parent module URL to resolve from; you must pass {\ttfamily import.\+meta.\+url} or something else
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md18084}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md18084}
Full {\ttfamily file\+:}, {\ttfamily data\+:}, or {\ttfamily node\+:} URL ({\ttfamily string}) to the found thing\hypertarget{readme.md_autotoc_md18085}{}\doxysubsubsubsubsubsection{\texorpdfstring{Throws}{Throws}}\label{readme.md_autotoc_md18085}
Throws an \`{}\+Errno\+Exception\`{}.\hypertarget{readme.md_autotoc_md18086}{}\doxysubsubsection{\texorpdfstring{{\ttfamily module\+Resolve(specifier, parent, conditions, preserve\+Symlinks)}}{{\ttfamily module\+Resolve(specifier, parent, conditions, preserve\+Symlinks)}}}\label{readme.md_autotoc_md18086}
The \href{https://nodejs.org/dist/latest-v14.x/docs/api/esm.html\#esm_resolver_algorithm}{\texttt{ “\+Resolver Algorithm Specification”}} as detailed in the Node docs (which is slightly lower-\/level than {\ttfamily resolve}).\hypertarget{readme.md_autotoc_md18087}{}\doxysubsubsubsubsubsection{\texorpdfstring{Parameters}{Parameters}}\label{readme.md_autotoc_md18087}

\begin{DoxyItemize}
\item {\ttfamily specifier} ({\ttfamily string}) — {\ttfamily /example.js}, {\ttfamily ./example.js}, {\ttfamily ../example.js}, {\ttfamily some-\/package}, {\ttfamily fs}, etc
\item {\ttfamily parent} ({\ttfamily URL}, example\+: {\ttfamily import.\+meta.\+url}) — full URL (to a file) that {\ttfamily specifier} is resolved relative from
\item {\ttfamily conditions} ({\ttfamily Set\texorpdfstring{$<$}{<}string\texorpdfstring{$>$}{>}}, default\+: `new Set(\mbox{[}\textquotesingle{}node', \textquotesingle{}import\textquotesingle{}\mbox{]}){\ttfamily ) — conditions \texorpdfstring{$\ast$}{*}}preserve\+Symlinks{\ttfamily (}boolean{\ttfamily , default\+:}false\`{}) — keep symlinks instead of resolving them
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md18088}{}\doxysubsubsubsubsubsection{\texorpdfstring{Returns}{Returns}}\label{readme.md_autotoc_md18088}
A URL object ({\ttfamily URL}) to the found thing.\hypertarget{readme.md_autotoc_md18089}{}\doxysubsubsubsubsubsection{\texorpdfstring{Throws}{Throws}}\label{readme.md_autotoc_md18089}
Throws an \`{}\+Errno\+Exception\`{}.\hypertarget{readme.md_autotoc_md18090}{}\doxysubsubsection{\texorpdfstring{{\ttfamily Errno\+Exception}}{{\ttfamily Errno\+Exception}}}\label{readme.md_autotoc_md18090}
One of many different errors that occur when resolving (Type\+Script type).\hypertarget{readme.md_autotoc_md18091}{}\doxysubsubsubsubsubsection{\texorpdfstring{Type}{Type}}\label{readme.md_autotoc_md18091}

\begin{DoxyCode}{0}
\DoxyCodeLine{type\ ErrnoExceptionFields\ =\ Error\ \&\ \{}
\DoxyCodeLine{\ \ errnode?:\ number\ |\ undefined}
\DoxyCodeLine{\ \ code?:\ string\ |\ undefined}
\DoxyCodeLine{\ \ path?:\ string\ |\ undefined}
\DoxyCodeLine{\ \ syscall?:\ string\ |\ undefined}
\DoxyCodeLine{\ \ url?:\ string\ |\ undefined}
\DoxyCodeLine{\}}

\end{DoxyCode}


The {\ttfamily code} field on errors is one of the following strings\+:


\begin{DoxyItemize}
\item `\textquotesingle{}ERR\+\_\+\+INVALID\+\_\+\+MODULE\+\_\+\+SPECIFIER'{\ttfamily  — when}specifier{\ttfamily is invalid (example\+:}\textquotesingle{}\#\textquotesingle{}{\ttfamily ) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+INVALID\+\_\+\+PACKAGE\+\_\+\+CONFIG\textquotesingle{}{\ttfamily  — when a}package.\+json{\ttfamily is invalid (example\+: invalid JSON) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+INVALID\+\_\+\+PACKAGE\+\_\+\+TARGET\textquotesingle{}{\ttfamily  — when a}package.\+jsonexports{\ttfamily or}imports{\ttfamily is invalid (example\+: when it does not start with}\textquotesingle{}./\textquotesingle{}{\ttfamily ) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+MODULE\+\_\+\+NOT\+\_\+\+FOUND\textquotesingle{}{\ttfamily  — when}specifier{\ttfamily cannot be found in}parent{\ttfamily (example\+:}\textquotesingle{}some-\/missing-\/package\textquotesingle{}{\ttfamily ) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+NETWORK\+\_\+\+IMPORT\+\_\+\+DISALLOWED\textquotesingle{}{\ttfamily  — thrown when trying to resolve a local file or builtin from a remote file (}node\+:fs{\ttfamily relative to}\textquotesingle{}\href{https://example.com'}{\texttt{ https\+://example.\+com\textquotesingle{}}}{\ttfamily ) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+PACKAGE\+\_\+\+IMPORT\+\_\+\+NOT\+\_\+\+DEFINED\textquotesingle{}{\ttfamily  — when a local import is not defined in an import map (example\+:}\textquotesingle{}\#local\textquotesingle{}{\ttfamily  when not defined) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+PACKAGE\+\_\+\+PATH\+\_\+\+NOT\+\_\+\+EXPORTED\textquotesingle{}{\ttfamily  — when an export is not defined in an export map (example\+:}\textquotesingle{}tape/index.\+js\textquotesingle{}{\ttfamily , which is not in its export map) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+UNSUPPORTED\+\_\+\+DIR\+\_\+\+IMPORT\textquotesingle{}{\ttfamily  — when attempting to import a directory (example\+:}\textquotesingle{}./lib/\textquotesingle{}{\ttfamily ) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+UNKNOWN\+\_\+\+FILE\+\_\+\+EXTENSION\textquotesingle{}{\ttfamily  — when somehow reading a file that has an unexpected extensions (}\textquotesingle{}./readme.md\textquotesingle{}{\ttfamily ) \texorpdfstring{$\ast$}{*}}\textquotesingle{}ERR\+\_\+\+INVALID\+\_\+\+ARG\+\_\+\+VALUE\textquotesingle{}{\ttfamily  — when}conditions\`{} is incorrect
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md18092}{}\doxysubsection{\texorpdfstring{Algorithm}{Algorithm}}\label{readme.md_autotoc_md18092}
The algorithm for {\ttfamily resolve} matches how Node handles {\ttfamily import.\+meta.\+resolve}, with a couple of differences.

The algorithm for {\ttfamily module\+Resolve} matches the \href{https://nodejs.org/dist/latest-v14.x/docs/api/esm.html\#esm_resolver_algorithm}{\texttt{ Resolver Algorithm Specification}} as detailed in the Node docs (which is sync and slightly lower-\/level than {\ttfamily resolve}).\hypertarget{readme.md_autotoc_md18093}{}\doxysubsection{\texorpdfstring{Differences to Node}{Differences to Node}}\label{readme.md_autotoc_md18093}

\begin{DoxyItemize}
\item {\ttfamily parent} defaulting to {\ttfamily import.\+meta.\+url} cannot be ponyfilled\+: you have to explicitly pass it
\item no support for loaders (that would mean implementing all of loaders)
\item no support for CLI flags\+: {\ttfamily -\/-\/conditions}, {\ttfamily -\/-\/experimental-\/default-\/type}, {\ttfamily -\/-\/experimental-\/json-\/modules}, {\ttfamily -\/-\/experimental-\/network-\/imports}, {\ttfamily -\/-\/experimental-\/policy}, {\ttfamily -\/-\/experimental-\/wasm-\/modules}, {\ttfamily -\/-\/input-\/type}, {\ttfamily -\/-\/no-\/addons}, {\ttfamily -\/-\/preserve-\/symlinks}, nor {\ttfamily -\/-\/preserve-\/symlinks-\/main} work
\item no support for {\ttfamily WATCH\+\_\+\+REPORT\+\_\+\+DEPENDENCIES} env variable
\item no attempt is made to add a suggestion based on how things used to work in CJS before to not-\/found errors
\item prototypal methods are not guarded\+: Node protects for example {\ttfamily String\#slice} or so from being tampered with, whereas this doesn’t
\end{DoxyItemize}\hypertarget{readme.md_autotoc_md18094}{}\doxysubsection{\texorpdfstring{Types}{Types}}\label{readme.md_autotoc_md18094}
This package is fully typed with \href{https://www.typescriptlang.org}{\texttt{ Type\+Script}}. It exports the additional type \`{}\+Errno\+Exception\`{}.\hypertarget{readme.md_autotoc_md18095}{}\doxysubsection{\texorpdfstring{Compatibility}{Compatibility}}\label{readme.md_autotoc_md18095}
This package is at least compatible with all maintained versions of Node.\+js. As of now, that is Node.\+js 16 and later.\hypertarget{readme.md_autotoc_md18096}{}\doxysubsection{\texorpdfstring{Contribute}{Contribute}}\label{readme.md_autotoc_md18096}
Yes please! See \href{https://opensource.guide/how-to-contribute/}{\texttt{ How to Contribute to Open Source}}.\hypertarget{readme.md_autotoc_md18097}{}\doxysubsection{\texorpdfstring{License}{License}}\label{readme.md_autotoc_md18097}
\mbox{[}MIT\mbox{]}\mbox{[}license\mbox{]} © \href{https://wooorm.com}{\texttt{ Titus Wormer}} and Node.\+js contributors 