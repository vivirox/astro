"use strict";(()=>{var e={};e.id=385,e.ids=[385],e.modules={325:(e,t,r)=>{r.a(e,async(e,n)=>{try{let E;r.d(t,{Ay:()=>l,_K:()=>_});var o=r(2971),i=e([o]);let a=(o=(i.then?(await i)():i)[0]).z.object({NODE_ENV:o.z.enum(["development","production","test"]).default("development"),VERCEL:o.z.string().optional(),VERCEL_ENV:o.z.enum(["development","preview","production"]).optional(),VERCEL_URL:o.z.string().optional(),VERCEL_TOKEN:o.z.string().optional(),VERCEL_ORG_ID:o.z.string().optional(),VERCEL_PROJECT_ID:o.z.string().optional(),PORT:o.z.string().transform(Number).default("3000"),LOG_LEVEL:o.z.enum(["error","warn","info","verbose","debug"]).default("info"),ENABLE_RATE_LIMITING:o.z.string().transform(e=>"true"===e).default("true"),POSTGRES_URL:o.z.string().optional(),POSTGRES_PRISMA_URL:o.z.string().optional(),POSTGRES_URL_NON_POOLING:o.z.string().optional(),SUPABASE_URL:o.z.string().url().optional(),SUPABASE_KEY:o.z.string().optional(),SUPABASE_ANON_KEY:o.z.string().optional(),SUPABASE_SERVICE_ROLE_KEY:o.z.string().optional(),SUPABASE_JWT_SECRET:o.z.string().optional(),OPENAI_API_KEY:o.z.string().optional(),OPENAI_BASE_URL:o.z.string().url().optional(),TOGETHER_API_KEY:o.z.string().optional(),GOOGLE_API_KEY:o.z.string().optional(),REPLICATE_API_TOKEN:o.z.string().optional(),SENTRY_DSN:o.z.string().url().optional(),AXIOM_DATASET:o.z.string().optional(),AXIOM_TOKEN:o.z.string().optional(),VITE_LITLYX_PROJECT_ID:o.z.string().optional(),VITE_LITLYX_API_KEY:o.z.string().optional(),EMAIL_FROM:o.z.string().email().optional(),RESEND_API_KEY:o.z.string().optional(),SECURITY_ENABLE_BRUTE_FORCE_PROTECTION:o.z.string().transform(e=>"true"===e).default("true"),SECURITY_MAX_LOGIN_ATTEMPTS:o.z.string().transform(Number).default("5"),SECURITY_ACCOUNT_LOCKOUT_DURATION:o.z.string().transform(Number).default("1800"),SECURITY_API_ABUSE_THRESHOLD:o.z.string().transform(Number).default("100"),SECURITY_ENABLE_ALERTS:o.z.string().transform(e=>"true"===e).default("true"),RATE_LIMIT_MAX_REQUESTS:o.z.string().transform(Number).default("100"),RATE_LIMIT_WINDOW_MS:o.z.string().transform(Number).default("900000"),LOG_CONSOLE:o.z.string().transform(e=>"true"===e).default("true"),LOG_AUDIT:o.z.string().transform(e=>"true"===e).default("true"),VITE_API_URL:o.z.string().url().optional(),VITE_SUPABASE_URL:o.z.string().url().optional(),VITE_SUPABASE_ANON_KEY:o.z.string().optional()});function s(){return E||(E=a.parse(process.env)),E}let _=s(),l={isDevelopment:()=>"development"===s().NODE_ENV,isProduction:()=>"production"===s().NODE_ENV,isTest:()=>"test"===s().NODE_ENV,server:{port:()=>s().PORT,logLevel:()=>s().LOG_LEVEL,enableRateLimiting:()=>s().ENABLE_RATE_LIMITING},database:{url:()=>s().POSTGRES_URL,prismaUrl:()=>s().POSTGRES_PRISMA_URL,nonPoolingUrl:()=>s().POSTGRES_URL_NON_POOLING},supabase:{url:()=>s().SUPABASE_URL,key:()=>s().SUPABASE_KEY,anonKey:()=>s().SUPABASE_ANON_KEY,serviceRoleKey:()=>s().SUPABASE_SERVICE_ROLE_KEY,jwtSecret:()=>s().SUPABASE_JWT_SECRET},ai:{openAiKey:()=>s().OPENAI_API_KEY,openAiBaseUrl:()=>s().OPENAI_BASE_URL,togetherApiKey:()=>s().TOGETHER_API_KEY,googleApiKey:()=>s().GOOGLE_API_KEY,replicateToken:()=>s().REPLICATE_API_TOKEN},monitoring:{sentryDsn:()=>s().SENTRY_DSN,axiomDataset:()=>s().AXIOM_DATASET,axiomToken:()=>s().AXIOM_TOKEN,litlyxProjectId:()=>s().VITE_LITLYX_PROJECT_ID,litlyxApiKey:()=>s().VITE_LITLYX_API_KEY},email:{from:()=>s().EMAIL_FROM,resendApiKey:()=>s().RESEND_API_KEY},deployment:{vercelEnv:()=>s().VERCEL_ENV,isVercel:()=>s().VERCEL,vercelUrl:()=>s().VERCEL_URL,vercelToken:()=>s().VERCEL_TOKEN,vercelOrgId:()=>s().VERCEL_ORG_ID,vercelProjectId:()=>s().VERCEL_PROJECT_ID},security:{enableBruteForceProtection:()=>s().SECURITY_ENABLE_BRUTE_FORCE_PROTECTION,maxLoginAttempts:()=>s().SECURITY_MAX_LOGIN_ATTEMPTS,accountLockoutDuration:()=>s().SECURITY_ACCOUNT_LOCKOUT_DURATION,apiAbuseThreshold:()=>s().SECURITY_API_ABUSE_THRESHOLD,enableAlerts:()=>s().SECURITY_ENABLE_ALERTS},rateLimiting:{maxRequests:()=>s().RATE_LIMIT_MAX_REQUESTS,windowMs:()=>s().RATE_LIMIT_WINDOW_MS},logging:{console:()=>s().LOG_CONSOLE,audit:()=>s().LOG_AUDIT},client:{apiUrl:()=>s().VITE_API_URL,supabaseUrl:()=>s().VITE_SUPABASE_URL,supabaseAnonKey:()=>s().VITE_SUPABASE_ANON_KEY}};n()}catch(e){n(e)}})},2971:e=>{e.exports=import("zod")},3038:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{POST:()=>s}),function(){var e=Error("Cannot find module '../../../lib/audit/log.js'");throw e.code="MODULE_NOT_FOUND",e}();var o=r(5934),i=e([o]);o=(i.then?(await i)():i)[0];let s=async({cookies:e,redirect:t})=>{try{let r=e.get("sb-access-token")?.value,n=e.get("sb-refresh-token")?.value,i=null;if(r&&n)try{let{data:e}=await o.ND.auth.setSession({access_token:r,refresh_token:n});i=e?.user?.id}catch(e){console.error("Error getting user session:",e)}let{error:s}=await o.ND.auth.signOut();if(s)return console.error("Sign out error:",s),new Response(s.message,{status:500});return e.delete("sb-access-token",{path:"/"}),e.delete("sb-refresh-token",{path:"/"}),i&&await Object(function(){var e=Error("Cannot find module '../../../lib/audit/log.js'");throw e.code="MODULE_NOT_FOUND",e}())({userId:i,action:"auth.signout",resource:"auth"}),t("/signin?signedout=true")}catch(e){return console.error("Sign out error:",e),new Response("An unexpected error occurred",{status:500})}};n()}catch(e){n(e)}})},3480:(e,t,r)=>{e.exports=r(5600)},3939:e=>{e.exports=require("@supabase/supabase-js")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5934:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{ND:()=>p});var o=r(3939),i=r(325),s=e([i]);i=(s.then?(await s)():s)[0];let a="undefined"!=typeof process?process.env:{},_=a.NODE_ENV||"development",l="https://example.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.example",A="production"===_,T=i._K?.SUPABASE_URL||a.PUBLIC_SUPABASE_URL||(A?void 0:l),I=i._K?.SUPABASE_ANON_KEY||a.PUBLIC_SUPABASE_ANON_KEY||(A?void 0:u),S=i._K?.SUPABASE_SERVICE_ROLE_KEY;function E(){return console.warn(A?"CRITICAL: Using mock Supabase client in production. This should never happen.":"Using mock Supabase client for development. This should not be used in production."),{auth:{getUser:()=>Promise.resolve({data:{user:null},error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),signInWithPassword:()=>Promise.resolve({data:{user:null,session:null},error:null}),signOut:()=>Promise.resolve({error:null})},from:()=>({insert:()=>Promise.resolve({error:null}),select:()=>({eq:()=>({order:()=>({range:()=>Promise.resolve({data:[],error:null})})})})})}}!A||T&&I||console.error("CRITICAL: Missing Supabase credentials in production environment");let R=T&&T!==l&&I&&I!==u,p=R?(0,o.createClient)(T,I,{auth:{persistSession:!0,autoRefreshToken:!0}}):E();R&&S?(0,o.createClient)(T,S,{auth:{persistSession:!1,autoRefreshToken:!1}}):E(),n()}catch(e){n(e)}})},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8496:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>_,routeModule:()=>u});var o=r(3480),i=r(8667),s=r(6435),E=r(3038),a=e([E]);E=(a.then?(await a)():a)[0];let _=(0,s.M)(E,"default"),l=(0,s.M)(E,"config"),u=new o.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/auth/signout",pathname:"/api/auth/signout",bundlePath:"",filename:""},userland:E});n()}catch(e){n(e)}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=8496);module.exports=r})();