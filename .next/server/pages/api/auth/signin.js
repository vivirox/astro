"use strict";(()=>{var e={};e.id=110,e.ids=[110],e.modules={325:(e,r,t)=>{t.a(e,async(e,n)=>{try{let a;t.d(r,{Ay:()=>l,_K:()=>_});var o=t(2971),s=e([o]);let E=(o=(s.then?(await s)():s)[0]).z.object({NODE_ENV:o.z.enum(["development","production","test"]).default("development"),VERCEL:o.z.string().optional(),VERCEL_ENV:o.z.enum(["development","preview","production"]).optional(),VERCEL_URL:o.z.string().optional(),VERCEL_TOKEN:o.z.string().optional(),VERCEL_ORG_ID:o.z.string().optional(),VERCEL_PROJECT_ID:o.z.string().optional(),PORT:o.z.string().transform(Number).default("3000"),LOG_LEVEL:o.z.enum(["error","warn","info","verbose","debug"]).default("info"),ENABLE_RATE_LIMITING:o.z.string().transform(e=>"true"===e).default("true"),POSTGRES_URL:o.z.string().optional(),POSTGRES_PRISMA_URL:o.z.string().optional(),POSTGRES_URL_NON_POOLING:o.z.string().optional(),SUPABASE_URL:o.z.string().url().optional(),SUPABASE_KEY:o.z.string().optional(),SUPABASE_ANON_KEY:o.z.string().optional(),SUPABASE_SERVICE_ROLE_KEY:o.z.string().optional(),SUPABASE_JWT_SECRET:o.z.string().optional(),OPENAI_API_KEY:o.z.string().optional(),OPENAI_BASE_URL:o.z.string().url().optional(),TOGETHER_API_KEY:o.z.string().optional(),GOOGLE_API_KEY:o.z.string().optional(),REPLICATE_API_TOKEN:o.z.string().optional(),SENTRY_DSN:o.z.string().url().optional(),AXIOM_DATASET:o.z.string().optional(),AXIOM_TOKEN:o.z.string().optional(),VITE_LITLYX_PROJECT_ID:o.z.string().optional(),VITE_LITLYX_API_KEY:o.z.string().optional(),EMAIL_FROM:o.z.string().email().optional(),RESEND_API_KEY:o.z.string().optional(),SECURITY_ENABLE_BRUTE_FORCE_PROTECTION:o.z.string().transform(e=>"true"===e).default("true"),SECURITY_MAX_LOGIN_ATTEMPTS:o.z.string().transform(Number).default("5"),SECURITY_ACCOUNT_LOCKOUT_DURATION:o.z.string().transform(Number).default("1800"),SECURITY_API_ABUSE_THRESHOLD:o.z.string().transform(Number).default("100"),SECURITY_ENABLE_ALERTS:o.z.string().transform(e=>"true"===e).default("true"),RATE_LIMIT_MAX_REQUESTS:o.z.string().transform(Number).default("100"),RATE_LIMIT_WINDOW_MS:o.z.string().transform(Number).default("900000"),LOG_CONSOLE:o.z.string().transform(e=>"true"===e).default("true"),LOG_AUDIT:o.z.string().transform(e=>"true"===e).default("true"),VITE_API_URL:o.z.string().url().optional(),VITE_SUPABASE_URL:o.z.string().url().optional(),VITE_SUPABASE_ANON_KEY:o.z.string().optional()});function i(){return a||(a=E.parse(process.env)),a}let _=i(),l={isDevelopment:()=>"development"===i().NODE_ENV,isProduction:()=>"production"===i().NODE_ENV,isTest:()=>"test"===i().NODE_ENV,server:{port:()=>i().PORT,logLevel:()=>i().LOG_LEVEL,enableRateLimiting:()=>i().ENABLE_RATE_LIMITING},database:{url:()=>i().POSTGRES_URL,prismaUrl:()=>i().POSTGRES_PRISMA_URL,nonPoolingUrl:()=>i().POSTGRES_URL_NON_POOLING},supabase:{url:()=>i().SUPABASE_URL,key:()=>i().SUPABASE_KEY,anonKey:()=>i().SUPABASE_ANON_KEY,serviceRoleKey:()=>i().SUPABASE_SERVICE_ROLE_KEY,jwtSecret:()=>i().SUPABASE_JWT_SECRET},ai:{openAiKey:()=>i().OPENAI_API_KEY,openAiBaseUrl:()=>i().OPENAI_BASE_URL,togetherApiKey:()=>i().TOGETHER_API_KEY,googleApiKey:()=>i().GOOGLE_API_KEY,replicateToken:()=>i().REPLICATE_API_TOKEN},monitoring:{sentryDsn:()=>i().SENTRY_DSN,axiomDataset:()=>i().AXIOM_DATASET,axiomToken:()=>i().AXIOM_TOKEN,litlyxProjectId:()=>i().VITE_LITLYX_PROJECT_ID,litlyxApiKey:()=>i().VITE_LITLYX_API_KEY},email:{from:()=>i().EMAIL_FROM,resendApiKey:()=>i().RESEND_API_KEY},deployment:{vercelEnv:()=>i().VERCEL_ENV,isVercel:()=>i().VERCEL,vercelUrl:()=>i().VERCEL_URL,vercelToken:()=>i().VERCEL_TOKEN,vercelOrgId:()=>i().VERCEL_ORG_ID,vercelProjectId:()=>i().VERCEL_PROJECT_ID},security:{enableBruteForceProtection:()=>i().SECURITY_ENABLE_BRUTE_FORCE_PROTECTION,maxLoginAttempts:()=>i().SECURITY_MAX_LOGIN_ATTEMPTS,accountLockoutDuration:()=>i().SECURITY_ACCOUNT_LOCKOUT_DURATION,apiAbuseThreshold:()=>i().SECURITY_API_ABUSE_THRESHOLD,enableAlerts:()=>i().SECURITY_ENABLE_ALERTS},rateLimiting:{maxRequests:()=>i().RATE_LIMIT_MAX_REQUESTS,windowMs:()=>i().RATE_LIMIT_WINDOW_MS},logging:{console:()=>i().LOG_CONSOLE,audit:()=>i().LOG_AUDIT},client:{apiUrl:()=>i().VITE_API_URL,supabaseUrl:()=>i().VITE_SUPABASE_URL,supabaseAnonKey:()=>i().VITE_SUPABASE_ANON_KEY}};n()}catch(e){n(e)}})},2971:e=>{e.exports=import("zod")},3480:(e,r,t)=>{e.exports=t(5600)},3939:e=>{e.exports=require("@supabase/supabase-js")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5934:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.d(r,{ND:()=>T});var o=t(3939),s=t(325),i=e([s]);s=(i.then?(await i)():i)[0];let E="undefined"!=typeof process?process.env:{},_=E.NODE_ENV||"development",l="https://example.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.example",A="production"===_,p=s._K?.SUPABASE_URL||E.PUBLIC_SUPABASE_URL||(A?void 0:l),R=s._K?.SUPABASE_ANON_KEY||E.PUBLIC_SUPABASE_ANON_KEY||(A?void 0:u),I=s._K?.SUPABASE_SERVICE_ROLE_KEY;function a(){return console.warn(A?"CRITICAL: Using mock Supabase client in production. This should never happen.":"Using mock Supabase client for development. This should not be used in production."),{auth:{getUser:()=>Promise.resolve({data:{user:null},error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),signInWithPassword:()=>Promise.resolve({data:{user:null,session:null},error:null}),signOut:()=>Promise.resolve({error:null})},from:()=>({insert:()=>Promise.resolve({error:null}),select:()=>({eq:()=>({order:()=>({range:()=>Promise.resolve({data:[],error:null})})})})})}}!A||p&&R||console.error("CRITICAL: Missing Supabase credentials in production environment");let S=p&&p!==l&&R&&R!==u,T=S?(0,o.createClient)(p,R,{auth:{persistSession:!0,autoRefreshToken:!0}}):a();S&&I?(0,o.createClient)(p,I,{auth:{persistSession:!1,autoRefreshToken:!1}}):a(),n()}catch(e){n(e)}})},6435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},6655:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{POST:()=>i});var o=t(5934),s=e([o]);o=(s.then?(await s)():s)[0];let i=async({request:e,cookies:r,redirect:t})=>{let n=await e.formData(),s=n.get("email")?.toString(),i=n.get("password")?.toString(),a=n.get("provider")?.toString();if(a&&["google","github","discord"].includes(a))try{let{data:r,error:n}=await o.ND.auth.signInWithOAuth({provider:a,options:{redirectTo:new URL("/api/auth/callback",e.url).toString()}});if(n)return console.error("OAuth error:",n),new Response(n?.message,{status:500});return t(r?.url)}catch(e){return console.error("OAuth error:",e),new Response("An unexpected error occurred",{status:500})}if(!s||!i)return new Response("Email and password are required",{status:400});try{let{data:n,error:a}=await o.ND.auth.signInWithPassword({email:s,password:i});if(a)return console.error("Auth error:",a),new Response(a?.message,{status:401});if(n&&n.session){let{access_token:s,refresh_token:i}=n.session;r.set("sb-access-token",s,{path:"/",httpOnly:!0,secure:(void 0).PROD,sameSite:"lax",maxAge:3600}),r.set("sb-refresh-token",i,{path:"/",httpOnly:!0,secure:(void 0).PROD,sameSite:"lax",maxAge:604800});let{error:a}=await o.ND.from("audit_logs").insert({user_id:n.user.id,action:"user_signed_in",resource:"auth",resource_id:n.user.id,metadata:{email:n.user.email},ip_address:e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip"),user_agent:e.headers.get("user-agent")});return a&&console.error("Audit logging error:",a),t("/dashboard")}return new Response("Authentication failed",{status:401})}catch(e){return console.error("Sign in error:",e),new Response("An unexpected error occurred",{status:500})}};n()}catch(e){n(e)}})},7358:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{config:()=>l,default:()=>_,routeModule:()=>u});var o=t(3480),s=t(8667),i=t(6435),a=t(6655),E=e([a]);a=(E.then?(await E)():E)[0];let _=(0,i.M)(a,"default"),l=(0,i.M)(a,"config"),u=new o.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/auth/signin",pathname:"/api/auth/signin",bundlePath:"",filename:""},userland:a});n()}catch(e){n(e)}})},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=7358);module.exports=t})();