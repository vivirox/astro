"use strict";(()=>{var e={};e.id=443,e.ids=[443],e.modules={325:(e,r,t)=>{t.a(e,async(e,n)=>{try{let a;t.d(r,{Ay:()=>l,_K:()=>_});var o=t(2971),i=e([o]);let E=(o=(i.then?(await i)():i)[0]).z.object({NODE_ENV:o.z.enum(["development","production","test"]).default("development"),VERCEL:o.z.string().optional(),VERCEL_ENV:o.z.enum(["development","preview","production"]).optional(),VERCEL_URL:o.z.string().optional(),VERCEL_TOKEN:o.z.string().optional(),VERCEL_ORG_ID:o.z.string().optional(),VERCEL_PROJECT_ID:o.z.string().optional(),PORT:o.z.string().transform(Number).default("3000"),LOG_LEVEL:o.z.enum(["error","warn","info","verbose","debug"]).default("info"),ENABLE_RATE_LIMITING:o.z.string().transform(e=>"true"===e).default("true"),POSTGRES_URL:o.z.string().optional(),POSTGRES_PRISMA_URL:o.z.string().optional(),POSTGRES_URL_NON_POOLING:o.z.string().optional(),SUPABASE_URL:o.z.string().url().optional(),SUPABASE_KEY:o.z.string().optional(),SUPABASE_ANON_KEY:o.z.string().optional(),SUPABASE_SERVICE_ROLE_KEY:o.z.string().optional(),SUPABASE_JWT_SECRET:o.z.string().optional(),OPENAI_API_KEY:o.z.string().optional(),OPENAI_BASE_URL:o.z.string().url().optional(),TOGETHER_API_KEY:o.z.string().optional(),GOOGLE_API_KEY:o.z.string().optional(),REPLICATE_API_TOKEN:o.z.string().optional(),SENTRY_DSN:o.z.string().url().optional(),AXIOM_DATASET:o.z.string().optional(),AXIOM_TOKEN:o.z.string().optional(),VITE_LITLYX_PROJECT_ID:o.z.string().optional(),VITE_LITLYX_API_KEY:o.z.string().optional(),EMAIL_FROM:o.z.string().email().optional(),RESEND_API_KEY:o.z.string().optional(),SECURITY_ENABLE_BRUTE_FORCE_PROTECTION:o.z.string().transform(e=>"true"===e).default("true"),SECURITY_MAX_LOGIN_ATTEMPTS:o.z.string().transform(Number).default("5"),SECURITY_ACCOUNT_LOCKOUT_DURATION:o.z.string().transform(Number).default("1800"),SECURITY_API_ABUSE_THRESHOLD:o.z.string().transform(Number).default("100"),SECURITY_ENABLE_ALERTS:o.z.string().transform(e=>"true"===e).default("true"),RATE_LIMIT_MAX_REQUESTS:o.z.string().transform(Number).default("100"),RATE_LIMIT_WINDOW_MS:o.z.string().transform(Number).default("900000"),LOG_CONSOLE:o.z.string().transform(e=>"true"===e).default("true"),LOG_AUDIT:o.z.string().transform(e=>"true"===e).default("true"),VITE_API_URL:o.z.string().url().optional(),VITE_SUPABASE_URL:o.z.string().url().optional(),VITE_SUPABASE_ANON_KEY:o.z.string().optional()});function s(){return a||(a=E.parse(process.env)),a}let _=s(),l={isDevelopment:()=>"development"===s().NODE_ENV,isProduction:()=>"production"===s().NODE_ENV,isTest:()=>"test"===s().NODE_ENV,server:{port:()=>s().PORT,logLevel:()=>s().LOG_LEVEL,enableRateLimiting:()=>s().ENABLE_RATE_LIMITING},database:{url:()=>s().POSTGRES_URL,prismaUrl:()=>s().POSTGRES_PRISMA_URL,nonPoolingUrl:()=>s().POSTGRES_URL_NON_POOLING},supabase:{url:()=>s().SUPABASE_URL,key:()=>s().SUPABASE_KEY,anonKey:()=>s().SUPABASE_ANON_KEY,serviceRoleKey:()=>s().SUPABASE_SERVICE_ROLE_KEY,jwtSecret:()=>s().SUPABASE_JWT_SECRET},ai:{openAiKey:()=>s().OPENAI_API_KEY,openAiBaseUrl:()=>s().OPENAI_BASE_URL,togetherApiKey:()=>s().TOGETHER_API_KEY,googleApiKey:()=>s().GOOGLE_API_KEY,replicateToken:()=>s().REPLICATE_API_TOKEN},monitoring:{sentryDsn:()=>s().SENTRY_DSN,axiomDataset:()=>s().AXIOM_DATASET,axiomToken:()=>s().AXIOM_TOKEN,litlyxProjectId:()=>s().VITE_LITLYX_PROJECT_ID,litlyxApiKey:()=>s().VITE_LITLYX_API_KEY},email:{from:()=>s().EMAIL_FROM,resendApiKey:()=>s().RESEND_API_KEY},deployment:{vercelEnv:()=>s().VERCEL_ENV,isVercel:()=>s().VERCEL,vercelUrl:()=>s().VERCEL_URL,vercelToken:()=>s().VERCEL_TOKEN,vercelOrgId:()=>s().VERCEL_ORG_ID,vercelProjectId:()=>s().VERCEL_PROJECT_ID},security:{enableBruteForceProtection:()=>s().SECURITY_ENABLE_BRUTE_FORCE_PROTECTION,maxLoginAttempts:()=>s().SECURITY_MAX_LOGIN_ATTEMPTS,accountLockoutDuration:()=>s().SECURITY_ACCOUNT_LOCKOUT_DURATION,apiAbuseThreshold:()=>s().SECURITY_API_ABUSE_THRESHOLD,enableAlerts:()=>s().SECURITY_ENABLE_ALERTS},rateLimiting:{maxRequests:()=>s().RATE_LIMIT_MAX_REQUESTS,windowMs:()=>s().RATE_LIMIT_WINDOW_MS},logging:{console:()=>s().LOG_CONSOLE,audit:()=>s().LOG_AUDIT},client:{apiUrl:()=>s().VITE_API_URL,supabaseUrl:()=>s().VITE_SUPABASE_URL,supabaseAnonKey:()=>s().VITE_SUPABASE_ANON_KEY}};n()}catch(e){n(e)}})},1688:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{config:()=>l,default:()=>_,routeModule:()=>u});var o=t(3480),i=t(8667),s=t(6435),a=t(9334),E=e([a]);a=(E.then?(await E)():E)[0];let _=(0,s.M)(a,"default"),l=(0,s.M)(a,"config"),u=new o.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/auth/register",pathname:"/api/auth/register",bundlePath:"",filename:""},userland:a});n()}catch(e){n(e)}})},2971:e=>{e.exports=import("zod")},3480:(e,r,t)=>{e.exports=t(5600)},3939:e=>{e.exports=require("@supabase/supabase-js")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5934:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.d(r,{ND:()=>S});var o=t(3939),i=t(325),s=e([i]);i=(s.then?(await s)():s)[0];let E="undefined"!=typeof process?process.env:{},_=E.NODE_ENV||"development",l="https://example.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.example",A="production"===_,I=i._K?.SUPABASE_URL||E.PUBLIC_SUPABASE_URL||(A?void 0:l),p=i._K?.SUPABASE_ANON_KEY||E.PUBLIC_SUPABASE_ANON_KEY||(A?void 0:u),T=i._K?.SUPABASE_SERVICE_ROLE_KEY;function a(){return console.warn(A?"CRITICAL: Using mock Supabase client in production. This should never happen.":"Using mock Supabase client for development. This should not be used in production."),{auth:{getUser:()=>Promise.resolve({data:{user:null},error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),signInWithPassword:()=>Promise.resolve({data:{user:null,session:null},error:null}),signOut:()=>Promise.resolve({error:null})},from:()=>({insert:()=>Promise.resolve({error:null}),select:()=>({eq:()=>({order:()=>({range:()=>Promise.resolve({data:[],error:null})})})})})}}!A||I&&p||console.error("CRITICAL: Missing Supabase credentials in production environment");let R=I&&I!==l&&p&&p!==u,S=R?(0,o.createClient)(I,p,{auth:{persistSession:!0,autoRefreshToken:!0}}):a();R&&T?(0,o.createClient)(I,T,{auth:{persistSession:!1,autoRefreshToken:!1}}):a(),n()}catch(e){n(e)}})},6435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9334:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{POST:()=>s});var o=t(5934),i=e([o]);o=(i.then?(await i)():i)[0];let s=async({request:e,redirect:r})=>{let t=await e.formData(),n=t.get("email")?.toString(),i=t.get("password")?.toString(),s=t.get("fullName")?.toString();if(!n||!i)return new Response("Email and password are required",{status:400});try{let{data:t,error:a}=await o.ND.auth.signUp({email:n,password:i,options:{data:{full_name:s||null}}});if(a)return console.error("Auth error:",a),new Response(a.message,{status:500});if(t.user){let{error:r}=await o.ND.from("profiles").insert({id:t.user.id,full_name:s||null,role:"user"});r&&console.error("Profile creation error:",r);let{error:n}=await o.ND.from("audit_logs").insert({user_id:t.user.id,action:"user_registered",resource:"auth",resource_id:t.user.id,metadata:{email:t.user.email},ip_address:e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip"),user_agent:e.headers.get("user-agent")});n&&console.error("Audit logging error:",n)}return r("/signin?registered=true")}catch(e){return console.error("Registration error:",e),new Response("An unexpected error occurred",{status:500})}};n()}catch(e){n(e)}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=1688);module.exports=t})();